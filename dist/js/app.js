if (window.navigator.userAgent.indexOf("MSIE") !== -1 || navigator.userAgent.match(/Trident\/7\./)) {
    document.documentElement.classList.add('browser-not-supported');
    document.getElementsByTagName("body")[0].innerHTML =
`<main>
<h1>Internet Explorer is not supported</h1>
<p>You're using a web browser we don't support.<br />
Try one of these options to have a better experience on layoutr.</p>
<ul>
<li>Open Microsoft Edge</li>
<li><a href="https://www.google.com/chrome/">Download Google Chrome</a></li>
<li><a href="https://www.mozilla.org/firefox">Download Mozilla Firefox</a></li>
</ul>
</main>`;
    throw 'browser-not-supported';
}
/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.o=b||a;this.c=this.o.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&("style"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}
function w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function y(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}
function ea(a){return a.o.location.hostname||a.a.location.hostname}function z(a,b,c){function d(){m&&e&&f&&(m(g),m=null)}b=t(a,"link",{rel:"stylesheet",href:b,media:"all"});var e=!1,f=!0,g=null,m=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error("Stylesheet failed to load");d()}):setTimeout(function(){e=!0;d()},0);u(a,"head",b)}
function A(a,b,c,d){var e=a.c.getElementsByTagName("head")[0];if(e){var f=t(a,"script",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,"HEAD"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error("Script load timeout")))},d||5E3);return f}return null};function B(){this.a=0;this.c=null}function C(a){a.a++;return function(){a.a--;D(a)}}function E(a,b){a.c=b;D(a)}function D(a){0==a.a&&a.c&&(a.c(),a.c=null)};function F(a){this.a=a||"-"}F.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\W_]+/g,"").toLowerCase());return b.join(this.a)};function G(a,b){this.c=a;this.f=4;this.a="n";var c=(b||"n4").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return H(a)+" "+(a.f+"00")+" 300px "+I(a.c)}function I(a){var b=[];a=a.split(/,\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['"]/g,"");-1!=d.indexOf(" ")||/^\d/.test(d)?b.push("'"+d+"'"):b.push(d)}return b.join(",")}function J(a){return a.a+a.f}function H(a){var b="normal";"o"===a.a?b="oblique":"i"===a.a&&(b="italic");return b}
function ga(a){var b=4,c="n",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.o.document.documentElement;this.h=b;this.a=new F("-");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c("wf","loading")]);K(a,"loading")}function L(a){if(a.g){var b=y(a.f,a.a.c("wf","active")),c=[],d=[a.a.c("wf","loading")];b||c.push(a.a.c("wf","inactive"));w(a.f,c,d)}K(a,"inactive")}function K(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,J(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function M(a,b){this.c=a;this.f=b;this.a=t(this.c,"span",{"aria-hidden":"true"},this.f)}function N(a){u(a.c,"body",a.a)}function O(a){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+I(a.c)+";"+("font-style:"+H(a)+";font-weight:"+(a.f+"00")+";")};function P(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}P.prototype.start=function(){var a=this.c.o.document,b=this,c=q(),d=new Promise(function(d,e){function f(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,d){e=setTimeout(d,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null);b.g(b.a)},function(){b.j(b.a)})};function Q(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||"BESbswy";this.f={};this.w=e||3E3;this.u=f||null;this.m=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.m=new M(this.c,this.s);a=new G(this.a.c+",serif",J(this.a));a=O(a);this.g.a.style.cssText=a;a=new G(this.a.c+",sans-serif",J(this.a));a=O(a);this.h.a.style.cssText=a;a=new G("serif",J(this.a));a=O(a);this.j.a.style.cssText=a;a=new G("sans-serif",J(this.a));a=
O(a);this.m.a.style.cssText=a;N(this.g);N(this.h);N(this.j);N(this.m)}var R={D:"serif",C:"sans-serif"},S=null;function T(){if(null===S){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);S=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return S}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f["sans-serif"]=this.m.a.offsetWidth;this.A=q();U(this)};
function la(a,b,c){for(var d in R)if(R.hasOwnProperty(d)&&b===a.f[R[d]]&&c===a.f[R[d]])return!0;return!1}function U(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f["sans-serif"])||(d=T()&&la(a,b,c));d?q()-a.A>=a.w?T()&&la(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):ma(a):V(a,a.v)}function ma(a){setTimeout(p(function(){U(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.m.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.m=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c("wf",a.c,J(a).toString(),"active")],[b.a.c("wf",a.c,J(a).toString(),"loading"),b.a.c("wf",a.c,J(a).toString(),"inactive")]);K(b,"fontactive",a);this.m=!0;na(this)};
W.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c("wf",a.c,J(a).toString(),"active")),d=[],e=[b.a.c("wf",a.c,J(a).toString(),"loading")];c||d.push(b.a.c("wf",a.c,J(a).toString(),"inactive"));w(b.f,d,e)}K(b,"fontinactive",a);na(this)};function na(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&w(a.f,[a.a.c("wf","active")],[a.a.c("wf","loading"),a.a.c("wf","inactive")]),K(a,"active")):L(a.a))};function oa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}oa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;pa(this,new ha(this.c,a),a)};
function qa(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,m=d||null||{};if(0===c.length&&f)L(b.a);else{b.f+=c.length;f&&(b.j=f);var h,l=[];for(h=0;h<c.length;h++){var k=c[h],n=m[k.c],r=b.a,x=k;r.g&&w(r.f,[r.a.c("wf",x.c,J(x).toString(),"loading")]);K(r,"fontloading",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),xa=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);
X=x?42<parseInt(x[1],10):xa?!1:!0}else X=!1;X?r=new P(p(b.g,b),p(b.h,b),b.c,k,b.s,n):r=new Q(p(b.g,b),p(b.h,b),b.c,k,b.s,a,n);l.push(r)}for(h=0;h<l.length;h++)l[h].start()}},0)}function pa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){qa(a,f,b,d,c)})};function ra(a,b){this.c=a;this.a=b}
ra.prototype.load=function(a){function b(){if(f["__mti_fntLst"+d]){var c=f["__mti_fntLst"+d](),e=[],h;if(c)for(var l=0;l<c.length;l++){var k=c[l].fontfamily;void 0!=c[l].fontStyle&&void 0!=c[l].fontWeight?(h=c[l].fontStyle+c[l].fontWeight,e.push(new G(k,h))):e.push(new G(k))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;A(this.c,(c.a.api||"https://fast.fonts.net/jsapi")+"/"+d+".js"+(e?"?v="+e:""),function(e){e?a([]):(f["__MonotypeConfiguration__"+
d]=function(){return c.a},b())}).id="__MonotypeAPIScript__"+d}else a([])};function sa(a,b){this.c=a;this.a=b}sa.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new B;b=0;for(c=d.length;b<c;b++)z(this.c,d[b],C(g));var m=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(":"),d[1])for(var h=d[1].split(","),l=0;l<h.length;l+=1)m.push(new G(d[0],h[l]));else m.push(new G(d[0]));E(g,function(){a(m,f)})};function ta(a,b){a?this.c=a:this.c=ua;this.a=[];this.f=[];this.g=b||""}var ua="https://fonts.googleapis.com/css";function va(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(":");3==e.length&&a.f.push(e.pop());var f="";2==e.length&&""!=e[1]&&(f=":");a.a.push(e.join(f))}}
function wa(a){if(0==a.a.length)throw Error("No fonts to load!");if(-1!=a.c.indexOf("kit="))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,"+"));b=a.c+"?family="+c.join("%7C");0<a.f.length&&(b+="&subset="+a.f.join(","));0<a.g.length&&(b+="&text="+encodeURIComponent(a.g));return b};function ya(a){this.f=a;this.a=[];this.c={}}
var za={latin:"BESbswy","latin-ext":"\u00e7\u00f6\u00fc\u011f\u015f",cyrillic:"\u0439\u044f\u0416",greek:"\u03b1\u03b2\u03a3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},Aa={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Ba={i:"i",italic:"i",n:"n",normal:"n"},
Ca=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;
function Da(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(":"),e=d[0].replace(/\+/g," "),f=["n4"];if(2<=d.length){var g;var m=d[1];g=[];if(m)for(var m=m.split(","),h=m.length,l=0;l<h;l++){var k;k=m[l];if(k.match(/^[\w-]+$/)){var n=Ca.exec(k.toLowerCase());if(null==n)k="";else{k=n[2];k=null==k||""==k?"n":Ba[k];n=n[1];if(null==n||""==n)n="4";else var r=Aa[n],n=r?r:isNaN(n)?"4":n.substr(0,1);k=[k,n].join("")}}else k="";k&&g.push(k)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(","):
g,0<d.length&&(d=za[d[0]])&&(a.c[e]=d))}a.c[e]||(d=za[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new G(e,f[d]))}};function Ea(a,b){this.c=a;this.a=b}var Fa={Arimo:!0,Cousine:!0,Tinos:!0};Ea.prototype.load=function(a){var b=new B,c=this.c,d=new ta(this.a.api,this.a.text),e=this.a.families;va(d,e);var f=new ya(e);Da(f);z(c,wa(d),C(b));E(b,function(){a(f.a,f.c,Fa)})};function Ga(a,b){this.c=a;this.a=b}Ga.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?A(this.c,(this.a.api||"https://use.typekit.net")+"/"+b+".js",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],m=b[f+1],h=0;h<m.length;h++)e.push(new G(g,m[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}a(e)}},2E3):a([])};function Ha(a,b){this.c=a;this.f=b;this.a=[]}Ha.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,m=c.fonts.length;g<m;++g){var h=c.fonts[g];d.a.push(new G(h.name,ga("font-weight:"+h.weight+";font-style:"+h.style)))}a(d.a)},A(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+ea(this.c)+"/"+b+".js",function(b){b&&a([])})):a([])};var Y=new oa(window);Y.a.c.custom=function(a,b){return new sa(b,a)};Y.a.c.fontdeck=function(a,b){return new Ha(b,a)};Y.a.c.monotype=function(a,b){return new ra(b,a)};Y.a.c.typekit=function(a,b){return new Ga(b,a)};Y.a.c.google=function(a,b){return new Ea(b,a)};var Z={load:p(Y.load,Y)};"function"===typeof define&&define.amd?define(function(){return Z}):"undefined"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());

/*! jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function (e, t) { "use strict"; "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function (e) { if (!e.document) throw new Error("jQuery requires a window with a document"); return t(e) } : t(e) }("undefined" != typeof window ? window : this, function (C, e) { "use strict"; var t = [], E = C.document, r = Object.getPrototypeOf, s = t.slice, g = t.concat, u = t.push, i = t.indexOf, n = {}, o = n.toString, v = n.hasOwnProperty, a = v.toString, l = a.call(Object), y = {}, m = function (e) { return "function" == typeof e && "number" != typeof e.nodeType }, x = function (e) { return null != e && e === e.window }, c = { type: !0, src: !0, nonce: !0, noModule: !0 }; function b(e, t, n) { var r, i, o = (n = n || E).createElement("script"); if (o.text = e, t) for (r in c) (i = t[r] || t.getAttribute && t.getAttribute(r)) && o.setAttribute(r, i); n.head.appendChild(o).parentNode.removeChild(o) } function w(e) { return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? n[o.call(e)] || "object" : typeof e } var f = "3.4.1", k = function (e, t) { return new k.fn.init(e, t) }, p = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g; function d(e) { var t = !!e && "length" in e && e.length, n = w(e); return !m(e) && !x(e) && ("array" === n || 0 === t || "number" == typeof t && 0 < t && t - 1 in e) } k.fn = k.prototype = { jquery: f, constructor: k, length: 0, toArray: function () { return s.call(this) }, get: function (e) { return null == e ? s.call(this) : e < 0 ? this[e + this.length] : this[e] }, pushStack: function (e) { var t = k.merge(this.constructor(), e); return t.prevObject = this, t }, each: function (e) { return k.each(this, e) }, map: function (n) { return this.pushStack(k.map(this, function (e, t) { return n.call(e, t, e) })) }, slice: function () { return this.pushStack(s.apply(this, arguments)) }, first: function () { return this.eq(0) }, last: function () { return this.eq(-1) }, eq: function (e) { var t = this.length, n = +e + (e < 0 ? t : 0); return this.pushStack(0 <= n && n < t ? [this[n]] : []) }, end: function () { return this.prevObject || this.constructor() }, push: u, sort: t.sort, splice: t.splice }, k.extend = k.fn.extend = function () { var e, t, n, r, i, o, a = arguments[0] || {}, s = 1, u = arguments.length, l = !1; for ("boolean" == typeof a && (l = a, a = arguments[s] || {}, s++), "object" == typeof a || m(a) || (a = {}), s === u && (a = this, s--); s < u; s++)if (null != (e = arguments[s])) for (t in e) r = e[t], "__proto__" !== t && a !== r && (l && r && (k.isPlainObject(r) || (i = Array.isArray(r))) ? (n = a[t], o = i && !Array.isArray(n) ? [] : i || k.isPlainObject(n) ? n : {}, i = !1, a[t] = k.extend(l, o, r)) : void 0 !== r && (a[t] = r)); return a }, k.extend({ expando: "jQuery" + (f + Math.random()).replace(/\D/g, ""), isReady: !0, error: function (e) { throw new Error(e) }, noop: function () { }, isPlainObject: function (e) { var t, n; return !(!e || "[object Object]" !== o.call(e)) && (!(t = r(e)) || "function" == typeof (n = v.call(t, "constructor") && t.constructor) && a.call(n) === l) }, isEmptyObject: function (e) { var t; for (t in e) return !1; return !0 }, globalEval: function (e, t) { b(e, { nonce: t && t.nonce }) }, each: function (e, t) { var n, r = 0; if (d(e)) { for (n = e.length; r < n; r++)if (!1 === t.call(e[r], r, e[r])) break } else for (r in e) if (!1 === t.call(e[r], r, e[r])) break; return e }, trim: function (e) { return null == e ? "" : (e + "").replace(p, "") }, makeArray: function (e, t) { var n = t || []; return null != e && (d(Object(e)) ? k.merge(n, "string" == typeof e ? [e] : e) : u.call(n, e)), n }, inArray: function (e, t, n) { return null == t ? -1 : i.call(t, e, n) }, merge: function (e, t) { for (var n = +t.length, r = 0, i = e.length; r < n; r++)e[i++] = t[r]; return e.length = i, e }, grep: function (e, t, n) { for (var r = [], i = 0, o = e.length, a = !n; i < o; i++)!t(e[i], i) !== a && r.push(e[i]); return r }, map: function (e, t, n) { var r, i, o = 0, a = []; if (d(e)) for (r = e.length; o < r; o++)null != (i = t(e[o], o, n)) && a.push(i); else for (o in e) null != (i = t(e[o], o, n)) && a.push(i); return g.apply([], a) }, guid: 1, support: y }), "function" == typeof Symbol && (k.fn[Symbol.iterator] = t[Symbol.iterator]), k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function (e, t) { n["[object " + t + "]"] = t.toLowerCase() }); var h = function (n) { var e, d, b, o, i, h, f, g, w, u, l, T, C, a, E, v, s, c, y, k = "sizzle" + 1 * new Date, m = n.document, S = 0, r = 0, p = ue(), x = ue(), N = ue(), A = ue(), D = function (e, t) { return e === t && (l = !0), 0 }, j = {}.hasOwnProperty, t = [], q = t.pop, L = t.push, H = t.push, O = t.slice, P = function (e, t) { for (var n = 0, r = e.length; n < r; n++)if (e[n] === t) return n; return -1 }, R = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", M = "[\\x20\\t\\r\\n\\f]", I = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+", W = "\\[" + M + "*(" + I + ")(?:" + M + "*([*^$|!~]?=)" + M + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + I + "))|)" + M + "*\\]", $ = ":(" + I + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + W + ")*)|.*)\\)|)", F = new RegExp(M + "+", "g"), B = new RegExp("^" + M + "+|((?:^|[^\\\\])(?:\\\\.)*)" + M + "+$", "g"), _ = new RegExp("^" + M + "*," + M + "*"), z = new RegExp("^" + M + "*([>+~]|" + M + ")" + M + "*"), U = new RegExp(M + "|>"), X = new RegExp($), V = new RegExp("^" + I + "$"), G = { ID: new RegExp("^#(" + I + ")"), CLASS: new RegExp("^\\.(" + I + ")"), TAG: new RegExp("^(" + I + "|[*])"), ATTR: new RegExp("^" + W), PSEUDO: new RegExp("^" + $), CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + M + "*(even|odd|(([+-]|)(\\d*)n|)" + M + "*(?:([+-]|)" + M + "*(\\d+)|))" + M + "*\\)|)", "i"), bool: new RegExp("^(?:" + R + ")$", "i"), needsContext: new RegExp("^" + M + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + M + "*((?:-\\d)?\\d*)" + M + "*\\)|)(?=[^-]|$)", "i") }, Y = /HTML$/i, Q = /^(?:input|select|textarea|button)$/i, J = /^h\d$/i, K = /^[^{]+\{\s*\[native \w/, Z = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, ee = /[+~]/, te = new RegExp("\\\\([\\da-f]{1,6}" + M + "?|(" + M + ")|.)", "ig"), ne = function (e, t, n) { var r = "0x" + t - 65536; return r != r || n ? t : r < 0 ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320) }, re = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g, ie = function (e, t) { return t ? "\0" === e ? "\ufffd" : e.slice(0, -1) + "\\" + e.charCodeAt(e.length - 1).toString(16) + " " : "\\" + e }, oe = function () { T() }, ae = be(function (e) { return !0 === e.disabled && "fieldset" === e.nodeName.toLowerCase() }, { dir: "parentNode", next: "legend" }); try { H.apply(t = O.call(m.childNodes), m.childNodes), t[m.childNodes.length].nodeType } catch (e) { H = { apply: t.length ? function (e, t) { L.apply(e, O.call(t)) } : function (e, t) { var n = e.length, r = 0; while (e[n++] = t[r++]); e.length = n - 1 } } } function se(t, e, n, r) { var i, o, a, s, u, l, c, f = e && e.ownerDocument, p = e ? e.nodeType : 9; if (n = n || [], "string" != typeof t || !t || 1 !== p && 9 !== p && 11 !== p) return n; if (!r && ((e ? e.ownerDocument || e : m) !== C && T(e), e = e || C, E)) { if (11 !== p && (u = Z.exec(t))) if (i = u[1]) { if (9 === p) { if (!(a = e.getElementById(i))) return n; if (a.id === i) return n.push(a), n } else if (f && (a = f.getElementById(i)) && y(e, a) && a.id === i) return n.push(a), n } else { if (u[2]) return H.apply(n, e.getElementsByTagName(t)), n; if ((i = u[3]) && d.getElementsByClassName && e.getElementsByClassName) return H.apply(n, e.getElementsByClassName(i)), n } if (d.qsa && !A[t + " "] && (!v || !v.test(t)) && (1 !== p || "object" !== e.nodeName.toLowerCase())) { if (c = t, f = e, 1 === p && U.test(t)) { (s = e.getAttribute("id")) ? s = s.replace(re, ie) : e.setAttribute("id", s = k), o = (l = h(t)).length; while (o--) l[o] = "#" + s + " " + xe(l[o]); c = l.join(","), f = ee.test(t) && ye(e.parentNode) || e } try { return H.apply(n, f.querySelectorAll(c)), n } catch (e) { A(t, !0) } finally { s === k && e.removeAttribute("id") } } } return g(t.replace(B, "$1"), e, n, r) } function ue() { var r = []; return function e(t, n) { return r.push(t + " ") > b.cacheLength && delete e[r.shift()], e[t + " "] = n } } function le(e) { return e[k] = !0, e } function ce(e) { var t = C.createElement("fieldset"); try { return !!e(t) } catch (e) { return !1 } finally { t.parentNode && t.parentNode.removeChild(t), t = null } } function fe(e, t) { var n = e.split("|"), r = n.length; while (r--) b.attrHandle[n[r]] = t } function pe(e, t) { var n = t && e, r = n && 1 === e.nodeType && 1 === t.nodeType && e.sourceIndex - t.sourceIndex; if (r) return r; if (n) while (n = n.nextSibling) if (n === t) return -1; return e ? 1 : -1 } function de(t) { return function (e) { return "input" === e.nodeName.toLowerCase() && e.type === t } } function he(n) { return function (e) { var t = e.nodeName.toLowerCase(); return ("input" === t || "button" === t) && e.type === n } } function ge(t) { return function (e) { return "form" in e ? e.parentNode && !1 === e.disabled ? "label" in e ? "label" in e.parentNode ? e.parentNode.disabled === t : e.disabled === t : e.isDisabled === t || e.isDisabled !== !t && ae(e) === t : e.disabled === t : "label" in e && e.disabled === t } } function ve(a) { return le(function (o) { return o = +o, le(function (e, t) { var n, r = a([], e.length, o), i = r.length; while (i--) e[n = r[i]] && (e[n] = !(t[n] = e[n])) }) }) } function ye(e) { return e && "undefined" != typeof e.getElementsByTagName && e } for (e in d = se.support = {}, i = se.isXML = function (e) { var t = e.namespaceURI, n = (e.ownerDocument || e).documentElement; return !Y.test(t || n && n.nodeName || "HTML") }, T = se.setDocument = function (e) { var t, n, r = e ? e.ownerDocument || e : m; return r !== C && 9 === r.nodeType && r.documentElement && (a = (C = r).documentElement, E = !i(C), m !== C && (n = C.defaultView) && n.top !== n && (n.addEventListener ? n.addEventListener("unload", oe, !1) : n.attachEvent && n.attachEvent("onunload", oe)), d.attributes = ce(function (e) { return e.className = "i", !e.getAttribute("className") }), d.getElementsByTagName = ce(function (e) { return e.appendChild(C.createComment("")), !e.getElementsByTagName("*").length }), d.getElementsByClassName = K.test(C.getElementsByClassName), d.getById = ce(function (e) { return a.appendChild(e).id = k, !C.getElementsByName || !C.getElementsByName(k).length }), d.getById ? (b.filter.ID = function (e) { var t = e.replace(te, ne); return function (e) { return e.getAttribute("id") === t } }, b.find.ID = function (e, t) { if ("undefined" != typeof t.getElementById && E) { var n = t.getElementById(e); return n ? [n] : [] } }) : (b.filter.ID = function (e) { var n = e.replace(te, ne); return function (e) { var t = "undefined" != typeof e.getAttributeNode && e.getAttributeNode("id"); return t && t.value === n } }, b.find.ID = function (e, t) { if ("undefined" != typeof t.getElementById && E) { var n, r, i, o = t.getElementById(e); if (o) { if ((n = o.getAttributeNode("id")) && n.value === e) return [o]; i = t.getElementsByName(e), r = 0; while (o = i[r++]) if ((n = o.getAttributeNode("id")) && n.value === e) return [o] } return [] } }), b.find.TAG = d.getElementsByTagName ? function (e, t) { return "undefined" != typeof t.getElementsByTagName ? t.getElementsByTagName(e) : d.qsa ? t.querySelectorAll(e) : void 0 } : function (e, t) { var n, r = [], i = 0, o = t.getElementsByTagName(e); if ("*" === e) { while (n = o[i++]) 1 === n.nodeType && r.push(n); return r } return o }, b.find.CLASS = d.getElementsByClassName && function (e, t) { if ("undefined" != typeof t.getElementsByClassName && E) return t.getElementsByClassName(e) }, s = [], v = [], (d.qsa = K.test(C.querySelectorAll)) && (ce(function (e) { a.appendChild(e).innerHTML = "<a id='" + k + "'></a><select id='" + k + "-\r\\' msallowcapture=''><option selected=''></option></select>", e.querySelectorAll("[msallowcapture^='']").length && v.push("[*^$]=" + M + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || v.push("\\[" + M + "*(?:value|" + R + ")"), e.querySelectorAll("[id~=" + k + "-]").length || v.push("~="), e.querySelectorAll(":checked").length || v.push(":checked"), e.querySelectorAll("a#" + k + "+*").length || v.push(".#.+[+~]") }), ce(function (e) { e.innerHTML = "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>"; var t = C.createElement("input"); t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && v.push("name" + M + "*[*^$|!~]?="), 2 !== e.querySelectorAll(":enabled").length && v.push(":enabled", ":disabled"), a.appendChild(e).disabled = !0, 2 !== e.querySelectorAll(":disabled").length && v.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), v.push(",.*:") })), (d.matchesSelector = K.test(c = a.matches || a.webkitMatchesSelector || a.mozMatchesSelector || a.oMatchesSelector || a.msMatchesSelector)) && ce(function (e) { d.disconnectedMatch = c.call(e, "*"), c.call(e, "[s!='']:x"), s.push("!=", $) }), v = v.length && new RegExp(v.join("|")), s = s.length && new RegExp(s.join("|")), t = K.test(a.compareDocumentPosition), y = t || K.test(a.contains) ? function (e, t) { var n = 9 === e.nodeType ? e.documentElement : e, r = t && t.parentNode; return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r))) } : function (e, t) { if (t) while (t = t.parentNode) if (t === e) return !0; return !1 }, D = t ? function (e, t) { if (e === t) return l = !0, 0; var n = !e.compareDocumentPosition - !t.compareDocumentPosition; return n || (1 & (n = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !d.sortDetached && t.compareDocumentPosition(e) === n ? e === C || e.ownerDocument === m && y(m, e) ? -1 : t === C || t.ownerDocument === m && y(m, t) ? 1 : u ? P(u, e) - P(u, t) : 0 : 4 & n ? -1 : 1) } : function (e, t) { if (e === t) return l = !0, 0; var n, r = 0, i = e.parentNode, o = t.parentNode, a = [e], s = [t]; if (!i || !o) return e === C ? -1 : t === C ? 1 : i ? -1 : o ? 1 : u ? P(u, e) - P(u, t) : 0; if (i === o) return pe(e, t); n = e; while (n = n.parentNode) a.unshift(n); n = t; while (n = n.parentNode) s.unshift(n); while (a[r] === s[r]) r++; return r ? pe(a[r], s[r]) : a[r] === m ? -1 : s[r] === m ? 1 : 0 }), C }, se.matches = function (e, t) { return se(e, null, null, t) }, se.matchesSelector = function (e, t) { if ((e.ownerDocument || e) !== C && T(e), d.matchesSelector && E && !A[t + " "] && (!s || !s.test(t)) && (!v || !v.test(t))) try { var n = c.call(e, t); if (n || d.disconnectedMatch || e.document && 11 !== e.document.nodeType) return n } catch (e) { A(t, !0) } return 0 < se(t, C, null, [e]).length }, se.contains = function (e, t) { return (e.ownerDocument || e) !== C && T(e), y(e, t) }, se.attr = function (e, t) { (e.ownerDocument || e) !== C && T(e); var n = b.attrHandle[t.toLowerCase()], r = n && j.call(b.attrHandle, t.toLowerCase()) ? n(e, t, !E) : void 0; return void 0 !== r ? r : d.attributes || !E ? e.getAttribute(t) : (r = e.getAttributeNode(t)) && r.specified ? r.value : null }, se.escape = function (e) { return (e + "").replace(re, ie) }, se.error = function (e) { throw new Error("Syntax error, unrecognized expression: " + e) }, se.uniqueSort = function (e) { var t, n = [], r = 0, i = 0; if (l = !d.detectDuplicates, u = !d.sortStable && e.slice(0), e.sort(D), l) { while (t = e[i++]) t === e[i] && (r = n.push(i)); while (r--) e.splice(n[r], 1) } return u = null, e }, o = se.getText = function (e) { var t, n = "", r = 0, i = e.nodeType; if (i) { if (1 === i || 9 === i || 11 === i) { if ("string" == typeof e.textContent) return e.textContent; for (e = e.firstChild; e; e = e.nextSibling)n += o(e) } else if (3 === i || 4 === i) return e.nodeValue } else while (t = e[r++]) n += o(t); return n }, (b = se.selectors = { cacheLength: 50, createPseudo: le, match: G, attrHandle: {}, find: {}, relative: { ">": { dir: "parentNode", first: !0 }, " ": { dir: "parentNode" }, "+": { dir: "previousSibling", first: !0 }, "~": { dir: "previousSibling" } }, preFilter: { ATTR: function (e) { return e[1] = e[1].replace(te, ne), e[3] = (e[3] || e[4] || e[5] || "").replace(te, ne), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4) }, CHILD: function (e) { return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || se.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && se.error(e[0]), e }, PSEUDO: function (e) { var t, n = !e[6] && e[2]; return G.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && X.test(n) && (t = h(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3)) } }, filter: { TAG: function (e) { var t = e.replace(te, ne).toLowerCase(); return "*" === e ? function () { return !0 } : function (e) { return e.nodeName && e.nodeName.toLowerCase() === t } }, CLASS: function (e) { var t = p[e + " "]; return t || (t = new RegExp("(^|" + M + ")" + e + "(" + M + "|$)")) && p(e, function (e) { return t.test("string" == typeof e.className && e.className || "undefined" != typeof e.getAttribute && e.getAttribute("class") || "") }) }, ATTR: function (n, r, i) { return function (e) { var t = se.attr(e, n); return null == t ? "!=" === r : !r || (t += "", "=" === r ? t === i : "!=" === r ? t !== i : "^=" === r ? i && 0 === t.indexOf(i) : "*=" === r ? i && -1 < t.indexOf(i) : "$=" === r ? i && t.slice(-i.length) === i : "~=" === r ? -1 < (" " + t.replace(F, " ") + " ").indexOf(i) : "|=" === r && (t === i || t.slice(0, i.length + 1) === i + "-")) } }, CHILD: function (h, e, t, g, v) { var y = "nth" !== h.slice(0, 3), m = "last" !== h.slice(-4), x = "of-type" === e; return 1 === g && 0 === v ? function (e) { return !!e.parentNode } : function (e, t, n) { var r, i, o, a, s, u, l = y !== m ? "nextSibling" : "previousSibling", c = e.parentNode, f = x && e.nodeName.toLowerCase(), p = !n && !x, d = !1; if (c) { if (y) { while (l) { a = e; while (a = a[l]) if (x ? a.nodeName.toLowerCase() === f : 1 === a.nodeType) return !1; u = l = "only" === h && !u && "nextSibling" } return !0 } if (u = [m ? c.firstChild : c.lastChild], m && p) { d = (s = (r = (i = (o = (a = c)[k] || (a[k] = {}))[a.uniqueID] || (o[a.uniqueID] = {}))[h] || [])[0] === S && r[1]) && r[2], a = s && c.childNodes[s]; while (a = ++s && a && a[l] || (d = s = 0) || u.pop()) if (1 === a.nodeType && ++d && a === e) { i[h] = [S, s, d]; break } } else if (p && (d = s = (r = (i = (o = (a = e)[k] || (a[k] = {}))[a.uniqueID] || (o[a.uniqueID] = {}))[h] || [])[0] === S && r[1]), !1 === d) while (a = ++s && a && a[l] || (d = s = 0) || u.pop()) if ((x ? a.nodeName.toLowerCase() === f : 1 === a.nodeType) && ++d && (p && ((i = (o = a[k] || (a[k] = {}))[a.uniqueID] || (o[a.uniqueID] = {}))[h] = [S, d]), a === e)) break; return (d -= v) === g || d % g == 0 && 0 <= d / g } } }, PSEUDO: function (e, o) { var t, a = b.pseudos[e] || b.setFilters[e.toLowerCase()] || se.error("unsupported pseudo: " + e); return a[k] ? a(o) : 1 < a.length ? (t = [e, e, "", o], b.setFilters.hasOwnProperty(e.toLowerCase()) ? le(function (e, t) { var n, r = a(e, o), i = r.length; while (i--) e[n = P(e, r[i])] = !(t[n] = r[i]) }) : function (e) { return a(e, 0, t) }) : a } }, pseudos: { not: le(function (e) { var r = [], i = [], s = f(e.replace(B, "$1")); return s[k] ? le(function (e, t, n, r) { var i, o = s(e, null, r, []), a = e.length; while (a--) (i = o[a]) && (e[a] = !(t[a] = i)) }) : function (e, t, n) { return r[0] = e, s(r, null, n, i), r[0] = null, !i.pop() } }), has: le(function (t) { return function (e) { return 0 < se(t, e).length } }), contains: le(function (t) { return t = t.replace(te, ne), function (e) { return -1 < (e.textContent || o(e)).indexOf(t) } }), lang: le(function (n) { return V.test(n || "") || se.error("unsupported lang: " + n), n = n.replace(te, ne).toLowerCase(), function (e) { var t; do { if (t = E ? e.lang : e.getAttribute("xml:lang") || e.getAttribute("lang")) return (t = t.toLowerCase()) === n || 0 === t.indexOf(n + "-") } while ((e = e.parentNode) && 1 === e.nodeType); return !1 } }), target: function (e) { var t = n.location && n.location.hash; return t && t.slice(1) === e.id }, root: function (e) { return e === a }, focus: function (e) { return e === C.activeElement && (!C.hasFocus || C.hasFocus()) && !!(e.type || e.href || ~e.tabIndex) }, enabled: ge(!1), disabled: ge(!0), checked: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && !!e.checked || "option" === t && !!e.selected }, selected: function (e) { return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected }, empty: function (e) { for (e = e.firstChild; e; e = e.nextSibling)if (e.nodeType < 6) return !1; return !0 }, parent: function (e) { return !b.pseudos.empty(e) }, header: function (e) { return J.test(e.nodeName) }, input: function (e) { return Q.test(e.nodeName) }, button: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && "button" === e.type || "button" === t }, text: function (e) { var t; return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase()) }, first: ve(function () { return [0] }), last: ve(function (e, t) { return [t - 1] }), eq: ve(function (e, t, n) { return [n < 0 ? n + t : n] }), even: ve(function (e, t) { for (var n = 0; n < t; n += 2)e.push(n); return e }), odd: ve(function (e, t) { for (var n = 1; n < t; n += 2)e.push(n); return e }), lt: ve(function (e, t, n) { for (var r = n < 0 ? n + t : t < n ? t : n; 0 <= --r;)e.push(r); return e }), gt: ve(function (e, t, n) { for (var r = n < 0 ? n + t : n; ++r < t;)e.push(r); return e }) } }).pseudos.nth = b.pseudos.eq, { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }) b.pseudos[e] = de(e); for (e in { submit: !0, reset: !0 }) b.pseudos[e] = he(e); function me() { } function xe(e) { for (var t = 0, n = e.length, r = ""; t < n; t++)r += e[t].value; return r } function be(s, e, t) { var u = e.dir, l = e.next, c = l || u, f = t && "parentNode" === c, p = r++; return e.first ? function (e, t, n) { while (e = e[u]) if (1 === e.nodeType || f) return s(e, t, n); return !1 } : function (e, t, n) { var r, i, o, a = [S, p]; if (n) { while (e = e[u]) if ((1 === e.nodeType || f) && s(e, t, n)) return !0 } else while (e = e[u]) if (1 === e.nodeType || f) if (i = (o = e[k] || (e[k] = {}))[e.uniqueID] || (o[e.uniqueID] = {}), l && l === e.nodeName.toLowerCase()) e = e[u] || e; else { if ((r = i[c]) && r[0] === S && r[1] === p) return a[2] = r[2]; if ((i[c] = a)[2] = s(e, t, n)) return !0 } return !1 } } function we(i) { return 1 < i.length ? function (e, t, n) { var r = i.length; while (r--) if (!i[r](e, t, n)) return !1; return !0 } : i[0] } function Te(e, t, n, r, i) { for (var o, a = [], s = 0, u = e.length, l = null != t; s < u; s++)(o = e[s]) && (n && !n(o, r, i) || (a.push(o), l && t.push(s))); return a } function Ce(d, h, g, v, y, e) { return v && !v[k] && (v = Ce(v)), y && !y[k] && (y = Ce(y, e)), le(function (e, t, n, r) { var i, o, a, s = [], u = [], l = t.length, c = e || function (e, t, n) { for (var r = 0, i = t.length; r < i; r++)se(e, t[r], n); return n }(h || "*", n.nodeType ? [n] : n, []), f = !d || !e && h ? c : Te(c, s, d, n, r), p = g ? y || (e ? d : l || v) ? [] : t : f; if (g && g(f, p, n, r), v) { i = Te(p, u), v(i, [], n, r), o = i.length; while (o--) (a = i[o]) && (p[u[o]] = !(f[u[o]] = a)) } if (e) { if (y || d) { if (y) { i = [], o = p.length; while (o--) (a = p[o]) && i.push(f[o] = a); y(null, p = [], i, r) } o = p.length; while (o--) (a = p[o]) && -1 < (i = y ? P(e, a) : s[o]) && (e[i] = !(t[i] = a)) } } else p = Te(p === t ? p.splice(l, p.length) : p), y ? y(null, t, p, r) : H.apply(t, p) }) } function Ee(e) { for (var i, t, n, r = e.length, o = b.relative[e[0].type], a = o || b.relative[" "], s = o ? 1 : 0, u = be(function (e) { return e === i }, a, !0), l = be(function (e) { return -1 < P(i, e) }, a, !0), c = [function (e, t, n) { var r = !o && (n || t !== w) || ((i = t).nodeType ? u(e, t, n) : l(e, t, n)); return i = null, r }]; s < r; s++)if (t = b.relative[e[s].type]) c = [be(we(c), t)]; else { if ((t = b.filter[e[s].type].apply(null, e[s].matches))[k]) { for (n = ++s; n < r; n++)if (b.relative[e[n].type]) break; return Ce(1 < s && we(c), 1 < s && xe(e.slice(0, s - 1).concat({ value: " " === e[s - 2].type ? "*" : "" })).replace(B, "$1"), t, s < n && Ee(e.slice(s, n)), n < r && Ee(e = e.slice(n)), n < r && xe(e)) } c.push(t) } return we(c) } return me.prototype = b.filters = b.pseudos, b.setFilters = new me, h = se.tokenize = function (e, t) { var n, r, i, o, a, s, u, l = x[e + " "]; if (l) return t ? 0 : l.slice(0); a = e, s = [], u = b.preFilter; while (a) { for (o in n && !(r = _.exec(a)) || (r && (a = a.slice(r[0].length) || a), s.push(i = [])), n = !1, (r = z.exec(a)) && (n = r.shift(), i.push({ value: n, type: r[0].replace(B, " ") }), a = a.slice(n.length)), b.filter) !(r = G[o].exec(a)) || u[o] && !(r = u[o](r)) || (n = r.shift(), i.push({ value: n, type: o, matches: r }), a = a.slice(n.length)); if (!n) break } return t ? a.length : a ? se.error(e) : x(e, s).slice(0) }, f = se.compile = function (e, t) { var n, v, y, m, x, r, i = [], o = [], a = N[e + " "]; if (!a) { t || (t = h(e)), n = t.length; while (n--) (a = Ee(t[n]))[k] ? i.push(a) : o.push(a); (a = N(e, (v = o, m = 0 < (y = i).length, x = 0 < v.length, r = function (e, t, n, r, i) { var o, a, s, u = 0, l = "0", c = e && [], f = [], p = w, d = e || x && b.find.TAG("*", i), h = S += null == p ? 1 : Math.random() || .1, g = d.length; for (i && (w = t === C || t || i); l !== g && null != (o = d[l]); l++) { if (x && o) { a = 0, t || o.ownerDocument === C || (T(o), n = !E); while (s = v[a++]) if (s(o, t || C, n)) { r.push(o); break } i && (S = h) } m && ((o = !s && o) && u-- , e && c.push(o)) } if (u += l, m && l !== u) { a = 0; while (s = y[a++]) s(c, f, t, n); if (e) { if (0 < u) while (l--) c[l] || f[l] || (f[l] = q.call(r)); f = Te(f) } H.apply(r, f), i && !e && 0 < f.length && 1 < u + y.length && se.uniqueSort(r) } return i && (S = h, w = p), c }, m ? le(r) : r))).selector = e } return a }, g = se.select = function (e, t, n, r) { var i, o, a, s, u, l = "function" == typeof e && e, c = !r && h(e = l.selector || e); if (n = n || [], 1 === c.length) { if (2 < (o = c[0] = c[0].slice(0)).length && "ID" === (a = o[0]).type && 9 === t.nodeType && E && b.relative[o[1].type]) { if (!(t = (b.find.ID(a.matches[0].replace(te, ne), t) || [])[0])) return n; l && (t = t.parentNode), e = e.slice(o.shift().value.length) } i = G.needsContext.test(e) ? 0 : o.length; while (i--) { if (a = o[i], b.relative[s = a.type]) break; if ((u = b.find[s]) && (r = u(a.matches[0].replace(te, ne), ee.test(o[0].type) && ye(t.parentNode) || t))) { if (o.splice(i, 1), !(e = r.length && xe(o))) return H.apply(n, r), n; break } } } return (l || f(e, c))(r, t, !E, n, !t || ee.test(e) && ye(t.parentNode) || t), n }, d.sortStable = k.split("").sort(D).join("") === k, d.detectDuplicates = !!l, T(), d.sortDetached = ce(function (e) { return 1 & e.compareDocumentPosition(C.createElement("fieldset")) }), ce(function (e) { return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href") }) || fe("type|href|height|width", function (e, t, n) { if (!n) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2) }), d.attributes && ce(function (e) { return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value") }) || fe("value", function (e, t, n) { if (!n && "input" === e.nodeName.toLowerCase()) return e.defaultValue }), ce(function (e) { return null == e.getAttribute("disabled") }) || fe(R, function (e, t, n) { var r; if (!n) return !0 === e[t] ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value : null }), se }(C); k.find = h, k.expr = h.selectors, k.expr[":"] = k.expr.pseudos, k.uniqueSort = k.unique = h.uniqueSort, k.text = h.getText, k.isXMLDoc = h.isXML, k.contains = h.contains, k.escapeSelector = h.escape; var T = function (e, t, n) { var r = [], i = void 0 !== n; while ((e = e[t]) && 9 !== e.nodeType) if (1 === e.nodeType) { if (i && k(e).is(n)) break; r.push(e) } return r }, S = function (e, t) { for (var n = []; e; e = e.nextSibling)1 === e.nodeType && e !== t && n.push(e); return n }, N = k.expr.match.needsContext; function A(e, t) { return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase() } var D = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i; function j(e, n, r) { return m(n) ? k.grep(e, function (e, t) { return !!n.call(e, t, e) !== r }) : n.nodeType ? k.grep(e, function (e) { return e === n !== r }) : "string" != typeof n ? k.grep(e, function (e) { return -1 < i.call(n, e) !== r }) : k.filter(n, e, r) } k.filter = function (e, t, n) { var r = t[0]; return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === r.nodeType ? k.find.matchesSelector(r, e) ? [r] : [] : k.find.matches(e, k.grep(t, function (e) { return 1 === e.nodeType })) }, k.fn.extend({ find: function (e) { var t, n, r = this.length, i = this; if ("string" != typeof e) return this.pushStack(k(e).filter(function () { for (t = 0; t < r; t++)if (k.contains(i[t], this)) return !0 })); for (n = this.pushStack([]), t = 0; t < r; t++)k.find(e, i[t], n); return 1 < r ? k.uniqueSort(n) : n }, filter: function (e) { return this.pushStack(j(this, e || [], !1)) }, not: function (e) { return this.pushStack(j(this, e || [], !0)) }, is: function (e) { return !!j(this, "string" == typeof e && N.test(e) ? k(e) : e || [], !1).length } }); var q, L = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/; (k.fn.init = function (e, t, n) { var r, i; if (!e) return this; if (n = n || q, "string" == typeof e) { if (!(r = "<" === e[0] && ">" === e[e.length - 1] && 3 <= e.length ? [null, e, null] : L.exec(e)) || !r[1] && t) return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e); if (r[1]) { if (t = t instanceof k ? t[0] : t, k.merge(this, k.parseHTML(r[1], t && t.nodeType ? t.ownerDocument || t : E, !0)), D.test(r[1]) && k.isPlainObject(t)) for (r in t) m(this[r]) ? this[r](t[r]) : this.attr(r, t[r]); return this } return (i = E.getElementById(r[2])) && (this[0] = i, this.length = 1), this } return e.nodeType ? (this[0] = e, this.length = 1, this) : m(e) ? void 0 !== n.ready ? n.ready(e) : e(k) : k.makeArray(e, this) }).prototype = k.fn, q = k(E); var H = /^(?:parents|prev(?:Until|All))/, O = { children: !0, contents: !0, next: !0, prev: !0 }; function P(e, t) { while ((e = e[t]) && 1 !== e.nodeType); return e } k.fn.extend({ has: function (e) { var t = k(e, this), n = t.length; return this.filter(function () { for (var e = 0; e < n; e++)if (k.contains(this, t[e])) return !0 }) }, closest: function (e, t) { var n, r = 0, i = this.length, o = [], a = "string" != typeof e && k(e); if (!N.test(e)) for (; r < i; r++)for (n = this[r]; n && n !== t; n = n.parentNode)if (n.nodeType < 11 && (a ? -1 < a.index(n) : 1 === n.nodeType && k.find.matchesSelector(n, e))) { o.push(n); break } return this.pushStack(1 < o.length ? k.uniqueSort(o) : o) }, index: function (e) { return e ? "string" == typeof e ? i.call(k(e), this[0]) : i.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1 }, add: function (e, t) { return this.pushStack(k.uniqueSort(k.merge(this.get(), k(e, t)))) }, addBack: function (e) { return this.add(null == e ? this.prevObject : this.prevObject.filter(e)) } }), k.each({ parent: function (e) { var t = e.parentNode; return t && 11 !== t.nodeType ? t : null }, parents: function (e) { return T(e, "parentNode") }, parentsUntil: function (e, t, n) { return T(e, "parentNode", n) }, next: function (e) { return P(e, "nextSibling") }, prev: function (e) { return P(e, "previousSibling") }, nextAll: function (e) { return T(e, "nextSibling") }, prevAll: function (e) { return T(e, "previousSibling") }, nextUntil: function (e, t, n) { return T(e, "nextSibling", n) }, prevUntil: function (e, t, n) { return T(e, "previousSibling", n) }, siblings: function (e) { return S((e.parentNode || {}).firstChild, e) }, children: function (e) { return S(e.firstChild) }, contents: function (e) { return "undefined" != typeof e.contentDocument ? e.contentDocument : (A(e, "template") && (e = e.content || e), k.merge([], e.childNodes)) } }, function (r, i) { k.fn[r] = function (e, t) { var n = k.map(this, i, e); return "Until" !== r.slice(-5) && (t = e), t && "string" == typeof t && (n = k.filter(t, n)), 1 < this.length && (O[r] || k.uniqueSort(n), H.test(r) && n.reverse()), this.pushStack(n) } }); var R = /[^\x20\t\r\n\f]+/g; function M(e) { return e } function I(e) { throw e } function W(e, t, n, r) { var i; try { e && m(i = e.promise) ? i.call(e).done(t).fail(n) : e && m(i = e.then) ? i.call(e, t, n) : t.apply(void 0, [e].slice(r)) } catch (e) { n.apply(void 0, [e]) } } k.Callbacks = function (r) { var e, n; r = "string" == typeof r ? (e = r, n = {}, k.each(e.match(R) || [], function (e, t) { n[t] = !0 }), n) : k.extend({}, r); var i, t, o, a, s = [], u = [], l = -1, c = function () { for (a = a || r.once, o = i = !0; u.length; l = -1) { t = u.shift(); while (++l < s.length) !1 === s[l].apply(t[0], t[1]) && r.stopOnFalse && (l = s.length, t = !1) } r.memory || (t = !1), i = !1, a && (s = t ? [] : "") }, f = { add: function () { return s && (t && !i && (l = s.length - 1, u.push(t)), function n(e) { k.each(e, function (e, t) { m(t) ? r.unique && f.has(t) || s.push(t) : t && t.length && "string" !== w(t) && n(t) }) }(arguments), t && !i && c()), this }, remove: function () { return k.each(arguments, function (e, t) { var n; while (-1 < (n = k.inArray(t, s, n))) s.splice(n, 1), n <= l && l-- }), this }, has: function (e) { return e ? -1 < k.inArray(e, s) : 0 < s.length }, empty: function () { return s && (s = []), this }, disable: function () { return a = u = [], s = t = "", this }, disabled: function () { return !s }, lock: function () { return a = u = [], t || i || (s = t = ""), this }, locked: function () { return !!a }, fireWith: function (e, t) { return a || (t = [e, (t = t || []).slice ? t.slice() : t], u.push(t), i || c()), this }, fire: function () { return f.fireWith(this, arguments), this }, fired: function () { return !!o } }; return f }, k.extend({ Deferred: function (e) { var o = [["notify", "progress", k.Callbacks("memory"), k.Callbacks("memory"), 2], ["resolve", "done", k.Callbacks("once memory"), k.Callbacks("once memory"), 0, "resolved"], ["reject", "fail", k.Callbacks("once memory"), k.Callbacks("once memory"), 1, "rejected"]], i = "pending", a = { state: function () { return i }, always: function () { return s.done(arguments).fail(arguments), this }, "catch": function (e) { return a.then(null, e) }, pipe: function () { var i = arguments; return k.Deferred(function (r) { k.each(o, function (e, t) { var n = m(i[t[4]]) && i[t[4]]; s[t[1]](function () { var e = n && n.apply(this, arguments); e && m(e.promise) ? e.promise().progress(r.notify).done(r.resolve).fail(r.reject) : r[t[0] + "With"](this, n ? [e] : arguments) }) }), i = null }).promise() }, then: function (t, n, r) { var u = 0; function l(i, o, a, s) { return function () { var n = this, r = arguments, e = function () { var e, t; if (!(i < u)) { if ((e = a.apply(n, r)) === o.promise()) throw new TypeError("Thenable self-resolution"); t = e && ("object" == typeof e || "function" == typeof e) && e.then, m(t) ? s ? t.call(e, l(u, o, M, s), l(u, o, I, s)) : (u++ , t.call(e, l(u, o, M, s), l(u, o, I, s), l(u, o, M, o.notifyWith))) : (a !== M && (n = void 0, r = [e]), (s || o.resolveWith)(n, r)) } }, t = s ? e : function () { try { e() } catch (e) { k.Deferred.exceptionHook && k.Deferred.exceptionHook(e, t.stackTrace), u <= i + 1 && (a !== I && (n = void 0, r = [e]), o.rejectWith(n, r)) } }; i ? t() : (k.Deferred.getStackHook && (t.stackTrace = k.Deferred.getStackHook()), C.setTimeout(t)) } } return k.Deferred(function (e) { o[0][3].add(l(0, e, m(r) ? r : M, e.notifyWith)), o[1][3].add(l(0, e, m(t) ? t : M)), o[2][3].add(l(0, e, m(n) ? n : I)) }).promise() }, promise: function (e) { return null != e ? k.extend(e, a) : a } }, s = {}; return k.each(o, function (e, t) { var n = t[2], r = t[5]; a[t[1]] = n.add, r && n.add(function () { i = r }, o[3 - e][2].disable, o[3 - e][3].disable, o[0][2].lock, o[0][3].lock), n.add(t[3].fire), s[t[0]] = function () { return s[t[0] + "With"](this === s ? void 0 : this, arguments), this }, s[t[0] + "With"] = n.fireWith }), a.promise(s), e && e.call(s, s), s }, when: function (e) { var n = arguments.length, t = n, r = Array(t), i = s.call(arguments), o = k.Deferred(), a = function (t) { return function (e) { r[t] = this, i[t] = 1 < arguments.length ? s.call(arguments) : e, --n || o.resolveWith(r, i) } }; if (n <= 1 && (W(e, o.done(a(t)).resolve, o.reject, !n), "pending" === o.state() || m(i[t] && i[t].then))) return o.then(); while (t--) W(i[t], a(t), o.reject); return o.promise() } }); var $ = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/; k.Deferred.exceptionHook = function (e, t) { C.console && C.console.warn && e && $.test(e.name) && C.console.warn("jQuery.Deferred exception: " + e.message, e.stack, t) }, k.readyException = function (e) { C.setTimeout(function () { throw e }) }; var F = k.Deferred(); function B() { E.removeEventListener("DOMContentLoaded", B), C.removeEventListener("load", B), k.ready() } k.fn.ready = function (e) { return F.then(e)["catch"](function (e) { k.readyException(e) }), this }, k.extend({ isReady: !1, readyWait: 1, ready: function (e) { (!0 === e ? --k.readyWait : k.isReady) || (k.isReady = !0) !== e && 0 < --k.readyWait || F.resolveWith(E, [k]) } }), k.ready.then = F.then, "complete" === E.readyState || "loading" !== E.readyState && !E.documentElement.doScroll ? C.setTimeout(k.ready) : (E.addEventListener("DOMContentLoaded", B), C.addEventListener("load", B)); var _ = function (e, t, n, r, i, o, a) { var s = 0, u = e.length, l = null == n; if ("object" === w(n)) for (s in i = !0, n) _(e, t, s, n[s], !0, o, a); else if (void 0 !== r && (i = !0, m(r) || (a = !0), l && (a ? (t.call(e, r), t = null) : (l = t, t = function (e, t, n) { return l.call(k(e), n) })), t)) for (; s < u; s++)t(e[s], n, a ? r : r.call(e[s], s, t(e[s], n))); return i ? e : l ? t.call(e) : u ? t(e[0], n) : o }, z = /^-ms-/, U = /-([a-z])/g; function X(e, t) { return t.toUpperCase() } function V(e) { return e.replace(z, "ms-").replace(U, X) } var G = function (e) { return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType }; function Y() { this.expando = k.expando + Y.uid++ } Y.uid = 1, Y.prototype = { cache: function (e) { var t = e[this.expando]; return t || (t = {}, G(e) && (e.nodeType ? e[this.expando] = t : Object.defineProperty(e, this.expando, { value: t, configurable: !0 }))), t }, set: function (e, t, n) { var r, i = this.cache(e); if ("string" == typeof t) i[V(t)] = n; else for (r in t) i[V(r)] = t[r]; return i }, get: function (e, t) { return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][V(t)] }, access: function (e, t, n) { return void 0 === t || t && "string" == typeof t && void 0 === n ? this.get(e, t) : (this.set(e, t, n), void 0 !== n ? n : t) }, remove: function (e, t) { var n, r = e[this.expando]; if (void 0 !== r) { if (void 0 !== t) { n = (t = Array.isArray(t) ? t.map(V) : (t = V(t)) in r ? [t] : t.match(R) || []).length; while (n--) delete r[t[n]] } (void 0 === t || k.isEmptyObject(r)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando]) } }, hasData: function (e) { var t = e[this.expando]; return void 0 !== t && !k.isEmptyObject(t) } }; var Q = new Y, J = new Y, K = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, Z = /[A-Z]/g; function ee(e, t, n) { var r, i; if (void 0 === n && 1 === e.nodeType) if (r = "data-" + t.replace(Z, "-$&").toLowerCase(), "string" == typeof (n = e.getAttribute(r))) { try { n = "true" === (i = n) || "false" !== i && ("null" === i ? null : i === +i + "" ? +i : K.test(i) ? JSON.parse(i) : i) } catch (e) { } J.set(e, t, n) } else n = void 0; return n } k.extend({ hasData: function (e) { return J.hasData(e) || Q.hasData(e) }, data: function (e, t, n) { return J.access(e, t, n) }, removeData: function (e, t) { J.remove(e, t) }, _data: function (e, t, n) { return Q.access(e, t, n) }, _removeData: function (e, t) { Q.remove(e, t) } }), k.fn.extend({ data: function (n, e) { var t, r, i, o = this[0], a = o && o.attributes; if (void 0 === n) { if (this.length && (i = J.get(o), 1 === o.nodeType && !Q.get(o, "hasDataAttrs"))) { t = a.length; while (t--) a[t] && 0 === (r = a[t].name).indexOf("data-") && (r = V(r.slice(5)), ee(o, r, i[r])); Q.set(o, "hasDataAttrs", !0) } return i } return "object" == typeof n ? this.each(function () { J.set(this, n) }) : _(this, function (e) { var t; if (o && void 0 === e) return void 0 !== (t = J.get(o, n)) ? t : void 0 !== (t = ee(o, n)) ? t : void 0; this.each(function () { J.set(this, n, e) }) }, null, e, 1 < arguments.length, null, !0) }, removeData: function (e) { return this.each(function () { J.remove(this, e) }) } }), k.extend({ queue: function (e, t, n) { var r; if (e) return t = (t || "fx") + "queue", r = Q.get(e, t), n && (!r || Array.isArray(n) ? r = Q.access(e, t, k.makeArray(n)) : r.push(n)), r || [] }, dequeue: function (e, t) { t = t || "fx"; var n = k.queue(e, t), r = n.length, i = n.shift(), o = k._queueHooks(e, t); "inprogress" === i && (i = n.shift(), r--), i && ("fx" === t && n.unshift("inprogress"), delete o.stop, i.call(e, function () { k.dequeue(e, t) }, o)), !r && o && o.empty.fire() }, _queueHooks: function (e, t) { var n = t + "queueHooks"; return Q.get(e, n) || Q.access(e, n, { empty: k.Callbacks("once memory").add(function () { Q.remove(e, [t + "queue", n]) }) }) } }), k.fn.extend({ queue: function (t, n) { var e = 2; return "string" != typeof t && (n = t, t = "fx", e--), arguments.length < e ? k.queue(this[0], t) : void 0 === n ? this : this.each(function () { var e = k.queue(this, t, n); k._queueHooks(this, t), "fx" === t && "inprogress" !== e[0] && k.dequeue(this, t) }) }, dequeue: function (e) { return this.each(function () { k.dequeue(this, e) }) }, clearQueue: function (e) { return this.queue(e || "fx", []) }, promise: function (e, t) { var n, r = 1, i = k.Deferred(), o = this, a = this.length, s = function () { --r || i.resolveWith(o, [o]) }; "string" != typeof e && (t = e, e = void 0), e = e || "fx"; while (a--) (n = Q.get(o[a], e + "queueHooks")) && n.empty && (r++ , n.empty.add(s)); return s(), i.promise(t) } }); var te = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, ne = new RegExp("^(?:([+-])=|)(" + te + ")([a-z%]*)$", "i"), re = ["Top", "Right", "Bottom", "Left"], ie = E.documentElement, oe = function (e) { return k.contains(e.ownerDocument, e) }, ae = { composed: !0 }; ie.getRootNode && (oe = function (e) { return k.contains(e.ownerDocument, e) || e.getRootNode(ae) === e.ownerDocument }); var se = function (e, t) { return "none" === (e = t || e).style.display || "" === e.style.display && oe(e) && "none" === k.css(e, "display") }, ue = function (e, t, n, r) { var i, o, a = {}; for (o in t) a[o] = e.style[o], e.style[o] = t[o]; for (o in i = n.apply(e, r || []), t) e.style[o] = a[o]; return i }; function le(e, t, n, r) { var i, o, a = 20, s = r ? function () { return r.cur() } : function () { return k.css(e, t, "") }, u = s(), l = n && n[3] || (k.cssNumber[t] ? "" : "px"), c = e.nodeType && (k.cssNumber[t] || "px" !== l && +u) && ne.exec(k.css(e, t)); if (c && c[3] !== l) { u /= 2, l = l || c[3], c = +u || 1; while (a--) k.style(e, t, c + l), (1 - o) * (1 - (o = s() / u || .5)) <= 0 && (a = 0), c /= o; c *= 2, k.style(e, t, c + l), n = n || [] } return n && (c = +c || +u || 0, i = n[1] ? c + (n[1] + 1) * n[2] : +n[2], r && (r.unit = l, r.start = c, r.end = i)), i } var ce = {}; function fe(e, t) { for (var n, r, i, o, a, s, u, l = [], c = 0, f = e.length; c < f; c++)(r = e[c]).style && (n = r.style.display, t ? ("none" === n && (l[c] = Q.get(r, "display") || null, l[c] || (r.style.display = "")), "" === r.style.display && se(r) && (l[c] = (u = a = o = void 0, a = (i = r).ownerDocument, s = i.nodeName, (u = ce[s]) || (o = a.body.appendChild(a.createElement(s)), u = k.css(o, "display"), o.parentNode.removeChild(o), "none" === u && (u = "block"), ce[s] = u)))) : "none" !== n && (l[c] = "none", Q.set(r, "display", n))); for (c = 0; c < f; c++)null != l[c] && (e[c].style.display = l[c]); return e } k.fn.extend({ show: function () { return fe(this, !0) }, hide: function () { return fe(this) }, toggle: function (e) { return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function () { se(this) ? k(this).show() : k(this).hide() }) } }); var pe = /^(?:checkbox|radio)$/i, de = /<([a-z][^\/\0>\x20\t\r\n\f]*)/i, he = /^$|^module$|\/(?:java|ecma)script/i, ge = { option: [1, "<select multiple='multiple'>", "</select>"], thead: [1, "<table>", "</table>"], col: [2, "<table><colgroup>", "</colgroup></table>"], tr: [2, "<table><tbody>", "</tbody></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], _default: [0, "", ""] }; function ve(e, t) { var n; return n = "undefined" != typeof e.getElementsByTagName ? e.getElementsByTagName(t || "*") : "undefined" != typeof e.querySelectorAll ? e.querySelectorAll(t || "*") : [], void 0 === t || t && A(e, t) ? k.merge([e], n) : n } function ye(e, t) { for (var n = 0, r = e.length; n < r; n++)Q.set(e[n], "globalEval", !t || Q.get(t[n], "globalEval")) } ge.optgroup = ge.option, ge.tbody = ge.tfoot = ge.colgroup = ge.caption = ge.thead, ge.th = ge.td; var me, xe, be = /<|&#?\w+;/; function we(e, t, n, r, i) { for (var o, a, s, u, l, c, f = t.createDocumentFragment(), p = [], d = 0, h = e.length; d < h; d++)if ((o = e[d]) || 0 === o) if ("object" === w(o)) k.merge(p, o.nodeType ? [o] : o); else if (be.test(o)) { a = a || f.appendChild(t.createElement("div")), s = (de.exec(o) || ["", ""])[1].toLowerCase(), u = ge[s] || ge._default, a.innerHTML = u[1] + k.htmlPrefilter(o) + u[2], c = u[0]; while (c--) a = a.lastChild; k.merge(p, a.childNodes), (a = f.firstChild).textContent = "" } else p.push(t.createTextNode(o)); f.textContent = "", d = 0; while (o = p[d++]) if (r && -1 < k.inArray(o, r)) i && i.push(o); else if (l = oe(o), a = ve(f.appendChild(o), "script"), l && ye(a), n) { c = 0; while (o = a[c++]) he.test(o.type || "") && n.push(o) } return f } me = E.createDocumentFragment().appendChild(E.createElement("div")), (xe = E.createElement("input")).setAttribute("type", "radio"), xe.setAttribute("checked", "checked"), xe.setAttribute("name", "t"), me.appendChild(xe), y.checkClone = me.cloneNode(!0).cloneNode(!0).lastChild.checked, me.innerHTML = "<textarea>x</textarea>", y.noCloneChecked = !!me.cloneNode(!0).lastChild.defaultValue; var Te = /^key/, Ce = /^(?:mouse|pointer|contextmenu|drag|drop)|click/, Ee = /^([^.]*)(?:\.(.+)|)/; function ke() { return !0 } function Se() { return !1 } function Ne(e, t) { return e === function () { try { return E.activeElement } catch (e) { } }() == ("focus" === t) } function Ae(e, t, n, r, i, o) { var a, s; if ("object" == typeof t) { for (s in "string" != typeof n && (r = r || n, n = void 0), t) Ae(e, s, n, r, t[s], o); return e } if (null == r && null == i ? (i = n, r = n = void 0) : null == i && ("string" == typeof n ? (i = r, r = void 0) : (i = r, r = n, n = void 0)), !1 === i) i = Se; else if (!i) return e; return 1 === o && (a = i, (i = function (e) { return k().off(e), a.apply(this, arguments) }).guid = a.guid || (a.guid = k.guid++)), e.each(function () { k.event.add(this, t, i, r, n) }) } function De(e, i, o) { o ? (Q.set(e, i, !1), k.event.add(e, i, { namespace: !1, handler: function (e) { var t, n, r = Q.get(this, i); if (1 & e.isTrigger && this[i]) { if (r.length) (k.event.special[i] || {}).delegateType && e.stopPropagation(); else if (r = s.call(arguments), Q.set(this, i, r), t = o(this, i), this[i](), r !== (n = Q.get(this, i)) || t ? Q.set(this, i, !1) : n = {}, r !== n) return e.stopImmediatePropagation(), e.preventDefault(), n.value } else r.length && (Q.set(this, i, { value: k.event.trigger(k.extend(r[0], k.Event.prototype), r.slice(1), this) }), e.stopImmediatePropagation()) } })) : void 0 === Q.get(e, i) && k.event.add(e, i, ke) } k.event = { global: {}, add: function (t, e, n, r, i) { var o, a, s, u, l, c, f, p, d, h, g, v = Q.get(t); if (v) { n.handler && (n = (o = n).handler, i = o.selector), i && k.find.matchesSelector(ie, i), n.guid || (n.guid = k.guid++), (u = v.events) || (u = v.events = {}), (a = v.handle) || (a = v.handle = function (e) { return "undefined" != typeof k && k.event.triggered !== e.type ? k.event.dispatch.apply(t, arguments) : void 0 }), l = (e = (e || "").match(R) || [""]).length; while (l--) d = g = (s = Ee.exec(e[l]) || [])[1], h = (s[2] || "").split(".").sort(), d && (f = k.event.special[d] || {}, d = (i ? f.delegateType : f.bindType) || d, f = k.event.special[d] || {}, c = k.extend({ type: d, origType: g, data: r, handler: n, guid: n.guid, selector: i, needsContext: i && k.expr.match.needsContext.test(i), namespace: h.join(".") }, o), (p = u[d]) || ((p = u[d] = []).delegateCount = 0, f.setup && !1 !== f.setup.call(t, r, h, a) || t.addEventListener && t.addEventListener(d, a)), f.add && (f.add.call(t, c), c.handler.guid || (c.handler.guid = n.guid)), i ? p.splice(p.delegateCount++, 0, c) : p.push(c), k.event.global[d] = !0) } }, remove: function (e, t, n, r, i) { var o, a, s, u, l, c, f, p, d, h, g, v = Q.hasData(e) && Q.get(e); if (v && (u = v.events)) { l = (t = (t || "").match(R) || [""]).length; while (l--) if (d = g = (s = Ee.exec(t[l]) || [])[1], h = (s[2] || "").split(".").sort(), d) { f = k.event.special[d] || {}, p = u[d = (r ? f.delegateType : f.bindType) || d] || [], s = s[2] && new RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = o = p.length; while (o--) c = p[o], !i && g !== c.origType || n && n.guid !== c.guid || s && !s.test(c.namespace) || r && r !== c.selector && ("**" !== r || !c.selector) || (p.splice(o, 1), c.selector && p.delegateCount-- , f.remove && f.remove.call(e, c)); a && !p.length && (f.teardown && !1 !== f.teardown.call(e, h, v.handle) || k.removeEvent(e, d, v.handle), delete u[d]) } else for (d in u) k.event.remove(e, d + t[l], n, r, !0); k.isEmptyObject(u) && Q.remove(e, "handle events") } }, dispatch: function (e) { var t, n, r, i, o, a, s = k.event.fix(e), u = new Array(arguments.length), l = (Q.get(this, "events") || {})[s.type] || [], c = k.event.special[s.type] || {}; for (u[0] = s, t = 1; t < arguments.length; t++)u[t] = arguments[t]; if (s.delegateTarget = this, !c.preDispatch || !1 !== c.preDispatch.call(this, s)) { a = k.event.handlers.call(this, s, l), t = 0; while ((i = a[t++]) && !s.isPropagationStopped()) { s.currentTarget = i.elem, n = 0; while ((o = i.handlers[n++]) && !s.isImmediatePropagationStopped()) s.rnamespace && !1 !== o.namespace && !s.rnamespace.test(o.namespace) || (s.handleObj = o, s.data = o.data, void 0 !== (r = ((k.event.special[o.origType] || {}).handle || o.handler).apply(i.elem, u)) && !1 === (s.result = r) && (s.preventDefault(), s.stopPropagation())) } return c.postDispatch && c.postDispatch.call(this, s), s.result } }, handlers: function (e, t) { var n, r, i, o, a, s = [], u = t.delegateCount, l = e.target; if (u && l.nodeType && !("click" === e.type && 1 <= e.button)) for (; l !== this; l = l.parentNode || this)if (1 === l.nodeType && ("click" !== e.type || !0 !== l.disabled)) { for (o = [], a = {}, n = 0; n < u; n++)void 0 === a[i = (r = t[n]).selector + " "] && (a[i] = r.needsContext ? -1 < k(i, this).index(l) : k.find(i, this, null, [l]).length), a[i] && o.push(r); o.length && s.push({ elem: l, handlers: o }) } return l = this, u < t.length && s.push({ elem: l, handlers: t.slice(u) }), s }, addProp: function (t, e) { Object.defineProperty(k.Event.prototype, t, { enumerable: !0, configurable: !0, get: m(e) ? function () { if (this.originalEvent) return e(this.originalEvent) } : function () { if (this.originalEvent) return this.originalEvent[t] }, set: function (e) { Object.defineProperty(this, t, { enumerable: !0, configurable: !0, writable: !0, value: e }) } }) }, fix: function (e) { return e[k.expando] ? e : new k.Event(e) }, special: { load: { noBubble: !0 }, click: { setup: function (e) { var t = this || e; return pe.test(t.type) && t.click && A(t, "input") && De(t, "click", ke), !1 }, trigger: function (e) { var t = this || e; return pe.test(t.type) && t.click && A(t, "input") && De(t, "click"), !0 }, _default: function (e) { var t = e.target; return pe.test(t.type) && t.click && A(t, "input") && Q.get(t, "click") || A(t, "a") } }, beforeunload: { postDispatch: function (e) { void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result) } } } }, k.removeEvent = function (e, t, n) { e.removeEventListener && e.removeEventListener(t, n) }, k.Event = function (e, t) { if (!(this instanceof k.Event)) return new k.Event(e, t); e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? ke : Se, this.target = e.target && 3 === e.target.nodeType ? e.target.parentNode : e.target, this.currentTarget = e.currentTarget, this.relatedTarget = e.relatedTarget) : this.type = e, t && k.extend(this, t), this.timeStamp = e && e.timeStamp || Date.now(), this[k.expando] = !0 }, k.Event.prototype = { constructor: k.Event, isDefaultPrevented: Se, isPropagationStopped: Se, isImmediatePropagationStopped: Se, isSimulated: !1, preventDefault: function () { var e = this.originalEvent; this.isDefaultPrevented = ke, e && !this.isSimulated && e.preventDefault() }, stopPropagation: function () { var e = this.originalEvent; this.isPropagationStopped = ke, e && !this.isSimulated && e.stopPropagation() }, stopImmediatePropagation: function () { var e = this.originalEvent; this.isImmediatePropagationStopped = ke, e && !this.isSimulated && e.stopImmediatePropagation(), this.stopPropagation() } }, k.each({ altKey: !0, bubbles: !0, cancelable: !0, changedTouches: !0, ctrlKey: !0, detail: !0, eventPhase: !0, metaKey: !0, pageX: !0, pageY: !0, shiftKey: !0, view: !0, "char": !0, code: !0, charCode: !0, key: !0, keyCode: !0, button: !0, buttons: !0, clientX: !0, clientY: !0, offsetX: !0, offsetY: !0, pointerId: !0, pointerType: !0, screenX: !0, screenY: !0, targetTouches: !0, toElement: !0, touches: !0, which: function (e) { var t = e.button; return null == e.which && Te.test(e.type) ? null != e.charCode ? e.charCode : e.keyCode : !e.which && void 0 !== t && Ce.test(e.type) ? 1 & t ? 1 : 2 & t ? 3 : 4 & t ? 2 : 0 : e.which } }, k.event.addProp), k.each({ focus: "focusin", blur: "focusout" }, function (e, t) { k.event.special[e] = { setup: function () { return De(this, e, Ne), !1 }, trigger: function () { return De(this, e), !0 }, delegateType: t } }), k.each({ mouseenter: "mouseover", mouseleave: "mouseout", pointerenter: "pointerover", pointerleave: "pointerout" }, function (e, i) { k.event.special[e] = { delegateType: i, bindType: i, handle: function (e) { var t, n = e.relatedTarget, r = e.handleObj; return n && (n === this || k.contains(this, n)) || (e.type = r.origType, t = r.handler.apply(this, arguments), e.type = i), t } } }), k.fn.extend({ on: function (e, t, n, r) { return Ae(this, e, t, n, r) }, one: function (e, t, n, r) { return Ae(this, e, t, n, r, 1) }, off: function (e, t, n) { var r, i; if (e && e.preventDefault && e.handleObj) return r = e.handleObj, k(e.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace : r.origType, r.selector, r.handler), this; if ("object" == typeof e) { for (i in e) this.off(i, t, e[i]); return this } return !1 !== t && "function" != typeof t || (n = t, t = void 0), !1 === n && (n = Se), this.each(function () { k.event.remove(this, e, n, t) }) } }); var je = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi, qe = /<script|<style|<link/i, Le = /checked\s*(?:[^=]|=\s*.checked.)/i, He = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g; function Oe(e, t) { return A(e, "table") && A(11 !== t.nodeType ? t : t.firstChild, "tr") && k(e).children("tbody")[0] || e } function Pe(e) { return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e } function Re(e) { return "true/" === (e.type || "").slice(0, 5) ? e.type = e.type.slice(5) : e.removeAttribute("type"), e } function Me(e, t) { var n, r, i, o, a, s, u, l; if (1 === t.nodeType) { if (Q.hasData(e) && (o = Q.access(e), a = Q.set(t, o), l = o.events)) for (i in delete a.handle, a.events = {}, l) for (n = 0, r = l[i].length; n < r; n++)k.event.add(t, i, l[i][n]); J.hasData(e) && (s = J.access(e), u = k.extend({}, s), J.set(t, u)) } } function Ie(n, r, i, o) { r = g.apply([], r); var e, t, a, s, u, l, c = 0, f = n.length, p = f - 1, d = r[0], h = m(d); if (h || 1 < f && "string" == typeof d && !y.checkClone && Le.test(d)) return n.each(function (e) { var t = n.eq(e); h && (r[0] = d.call(this, e, t.html())), Ie(t, r, i, o) }); if (f && (t = (e = we(r, n[0].ownerDocument, !1, n, o)).firstChild, 1 === e.childNodes.length && (e = t), t || o)) { for (s = (a = k.map(ve(e, "script"), Pe)).length; c < f; c++)u = e, c !== p && (u = k.clone(u, !0, !0), s && k.merge(a, ve(u, "script"))), i.call(n[c], u, c); if (s) for (l = a[a.length - 1].ownerDocument, k.map(a, Re), c = 0; c < s; c++)u = a[c], he.test(u.type || "") && !Q.access(u, "globalEval") && k.contains(l, u) && (u.src && "module" !== (u.type || "").toLowerCase() ? k._evalUrl && !u.noModule && k._evalUrl(u.src, { nonce: u.nonce || u.getAttribute("nonce") }) : b(u.textContent.replace(He, ""), u, l)) } return n } function We(e, t, n) { for (var r, i = t ? k.filter(t, e) : e, o = 0; null != (r = i[o]); o++)n || 1 !== r.nodeType || k.cleanData(ve(r)), r.parentNode && (n && oe(r) && ye(ve(r, "script")), r.parentNode.removeChild(r)); return e } k.extend({ htmlPrefilter: function (e) { return e.replace(je, "<$1></$2>") }, clone: function (e, t, n) { var r, i, o, a, s, u, l, c = e.cloneNode(!0), f = oe(e); if (!(y.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || k.isXMLDoc(e))) for (a = ve(c), r = 0, i = (o = ve(e)).length; r < i; r++)s = o[r], u = a[r], void 0, "input" === (l = u.nodeName.toLowerCase()) && pe.test(s.type) ? u.checked = s.checked : "input" !== l && "textarea" !== l || (u.defaultValue = s.defaultValue); if (t) if (n) for (o = o || ve(e), a = a || ve(c), r = 0, i = o.length; r < i; r++)Me(o[r], a[r]); else Me(e, c); return 0 < (a = ve(c, "script")).length && ye(a, !f && ve(e, "script")), c }, cleanData: function (e) { for (var t, n, r, i = k.event.special, o = 0; void 0 !== (n = e[o]); o++)if (G(n)) { if (t = n[Q.expando]) { if (t.events) for (r in t.events) i[r] ? k.event.remove(n, r) : k.removeEvent(n, r, t.handle); n[Q.expando] = void 0 } n[J.expando] && (n[J.expando] = void 0) } } }), k.fn.extend({ detach: function (e) { return We(this, e, !0) }, remove: function (e) { return We(this, e) }, text: function (e) { return _(this, function (e) { return void 0 === e ? k.text(this) : this.empty().each(function () { 1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e) }) }, null, e, arguments.length) }, append: function () { return Ie(this, arguments, function (e) { 1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || Oe(this, e).appendChild(e) }) }, prepend: function () { return Ie(this, arguments, function (e) { if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) { var t = Oe(this, e); t.insertBefore(e, t.firstChild) } }) }, before: function () { return Ie(this, arguments, function (e) { this.parentNode && this.parentNode.insertBefore(e, this) }) }, after: function () { return Ie(this, arguments, function (e) { this.parentNode && this.parentNode.insertBefore(e, this.nextSibling) }) }, empty: function () { for (var e, t = 0; null != (e = this[t]); t++)1 === e.nodeType && (k.cleanData(ve(e, !1)), e.textContent = ""); return this }, clone: function (e, t) { return e = null != e && e, t = null == t ? e : t, this.map(function () { return k.clone(this, e, t) }) }, html: function (e) { return _(this, function (e) { var t = this[0] || {}, n = 0, r = this.length; if (void 0 === e && 1 === t.nodeType) return t.innerHTML; if ("string" == typeof e && !qe.test(e) && !ge[(de.exec(e) || ["", ""])[1].toLowerCase()]) { e = k.htmlPrefilter(e); try { for (; n < r; n++)1 === (t = this[n] || {}).nodeType && (k.cleanData(ve(t, !1)), t.innerHTML = e); t = 0 } catch (e) { } } t && this.empty().append(e) }, null, e, arguments.length) }, replaceWith: function () { var n = []; return Ie(this, arguments, function (e) { var t = this.parentNode; k.inArray(this, n) < 0 && (k.cleanData(ve(this)), t && t.replaceChild(e, this)) }, n) } }), k.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (e, a) { k.fn[e] = function (e) { for (var t, n = [], r = k(e), i = r.length - 1, o = 0; o <= i; o++)t = o === i ? this : this.clone(!0), k(r[o])[a](t), u.apply(n, t.get()); return this.pushStack(n) } }); var $e = new RegExp("^(" + te + ")(?!px)[a-z%]+$", "i"), Fe = function (e) { var t = e.ownerDocument.defaultView; return t && t.opener || (t = C), t.getComputedStyle(e) }, Be = new RegExp(re.join("|"), "i"); function _e(e, t, n) { var r, i, o, a, s = e.style; return (n = n || Fe(e)) && ("" !== (a = n.getPropertyValue(t) || n[t]) || oe(e) || (a = k.style(e, t)), !y.pixelBoxStyles() && $e.test(a) && Be.test(t) && (r = s.width, i = s.minWidth, o = s.maxWidth, s.minWidth = s.maxWidth = s.width = a, a = n.width, s.width = r, s.minWidth = i, s.maxWidth = o)), void 0 !== a ? a + "" : a } function ze(e, t) { return { get: function () { if (!e()) return (this.get = t).apply(this, arguments); delete this.get } } } !function () { function e() { if (u) { s.style.cssText = "position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0", u.style.cssText = "position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%", ie.appendChild(s).appendChild(u); var e = C.getComputedStyle(u); n = "1%" !== e.top, a = 12 === t(e.marginLeft), u.style.right = "60%", o = 36 === t(e.right), r = 36 === t(e.width), u.style.position = "absolute", i = 12 === t(u.offsetWidth / 3), ie.removeChild(s), u = null } } function t(e) { return Math.round(parseFloat(e)) } var n, r, i, o, a, s = E.createElement("div"), u = E.createElement("div"); u.style && (u.style.backgroundClip = "content-box", u.cloneNode(!0).style.backgroundClip = "", y.clearCloneStyle = "content-box" === u.style.backgroundClip, k.extend(y, { boxSizingReliable: function () { return e(), r }, pixelBoxStyles: function () { return e(), o }, pixelPosition: function () { return e(), n }, reliableMarginLeft: function () { return e(), a }, scrollboxSize: function () { return e(), i } })) }(); var Ue = ["Webkit", "Moz", "ms"], Xe = E.createElement("div").style, Ve = {}; function Ge(e) { var t = k.cssProps[e] || Ve[e]; return t || (e in Xe ? e : Ve[e] = function (e) { var t = e[0].toUpperCase() + e.slice(1), n = Ue.length; while (n--) if ((e = Ue[n] + t) in Xe) return e }(e) || e) } var Ye = /^(none|table(?!-c[ea]).+)/, Qe = /^--/, Je = { position: "absolute", visibility: "hidden", display: "block" }, Ke = { letterSpacing: "0", fontWeight: "400" }; function Ze(e, t, n) { var r = ne.exec(t); return r ? Math.max(0, r[2] - (n || 0)) + (r[3] || "px") : t } function et(e, t, n, r, i, o) { var a = "width" === t ? 1 : 0, s = 0, u = 0; if (n === (r ? "border" : "content")) return 0; for (; a < 4; a += 2)"margin" === n && (u += k.css(e, n + re[a], !0, i)), r ? ("content" === n && (u -= k.css(e, "padding" + re[a], !0, i)), "margin" !== n && (u -= k.css(e, "border" + re[a] + "Width", !0, i))) : (u += k.css(e, "padding" + re[a], !0, i), "padding" !== n ? u += k.css(e, "border" + re[a] + "Width", !0, i) : s += k.css(e, "border" + re[a] + "Width", !0, i)); return !r && 0 <= o && (u += Math.max(0, Math.ceil(e["offset" + t[0].toUpperCase() + t.slice(1)] - o - u - s - .5)) || 0), u } function tt(e, t, n) { var r = Fe(e), i = (!y.boxSizingReliable() || n) && "border-box" === k.css(e, "boxSizing", !1, r), o = i, a = _e(e, t, r), s = "offset" + t[0].toUpperCase() + t.slice(1); if ($e.test(a)) { if (!n) return a; a = "auto" } return (!y.boxSizingReliable() && i || "auto" === a || !parseFloat(a) && "inline" === k.css(e, "display", !1, r)) && e.getClientRects().length && (i = "border-box" === k.css(e, "boxSizing", !1, r), (o = s in e) && (a = e[s])), (a = parseFloat(a) || 0) + et(e, t, n || (i ? "border" : "content"), o, r, a) + "px" } function nt(e, t, n, r, i) { return new nt.prototype.init(e, t, n, r, i) } k.extend({ cssHooks: { opacity: { get: function (e, t) { if (t) { var n = _e(e, "opacity"); return "" === n ? "1" : n } } } }, cssNumber: { animationIterationCount: !0, columnCount: !0, fillOpacity: !0, flexGrow: !0, flexShrink: !0, fontWeight: !0, gridArea: !0, gridColumn: !0, gridColumnEnd: !0, gridColumnStart: !0, gridRow: !0, gridRowEnd: !0, gridRowStart: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 }, cssProps: {}, style: function (e, t, n, r) { if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) { var i, o, a, s = V(t), u = Qe.test(t), l = e.style; if (u || (t = Ge(s)), a = k.cssHooks[t] || k.cssHooks[s], void 0 === n) return a && "get" in a && void 0 !== (i = a.get(e, !1, r)) ? i : l[t]; "string" === (o = typeof n) && (i = ne.exec(n)) && i[1] && (n = le(e, t, i), o = "number"), null != n && n == n && ("number" !== o || u || (n += i && i[3] || (k.cssNumber[s] ? "" : "px")), y.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (l[t] = "inherit"), a && "set" in a && void 0 === (n = a.set(e, n, r)) || (u ? l.setProperty(t, n) : l[t] = n)) } }, css: function (e, t, n, r) { var i, o, a, s = V(t); return Qe.test(t) || (t = Ge(s)), (a = k.cssHooks[t] || k.cssHooks[s]) && "get" in a && (i = a.get(e, !0, n)), void 0 === i && (i = _e(e, t, r)), "normal" === i && t in Ke && (i = Ke[t]), "" === n || n ? (o = parseFloat(i), !0 === n || isFinite(o) ? o || 0 : i) : i } }), k.each(["height", "width"], function (e, u) { k.cssHooks[u] = { get: function (e, t, n) { if (t) return !Ye.test(k.css(e, "display")) || e.getClientRects().length && e.getBoundingClientRect().width ? tt(e, u, n) : ue(e, Je, function () { return tt(e, u, n) }) }, set: function (e, t, n) { var r, i = Fe(e), o = !y.scrollboxSize() && "absolute" === i.position, a = (o || n) && "border-box" === k.css(e, "boxSizing", !1, i), s = n ? et(e, u, n, a, i) : 0; return a && o && (s -= Math.ceil(e["offset" + u[0].toUpperCase() + u.slice(1)] - parseFloat(i[u]) - et(e, u, "border", !1, i) - .5)), s && (r = ne.exec(t)) && "px" !== (r[3] || "px") && (e.style[u] = t, t = k.css(e, u)), Ze(0, t, s) } } }), k.cssHooks.marginLeft = ze(y.reliableMarginLeft, function (e, t) { if (t) return (parseFloat(_e(e, "marginLeft")) || e.getBoundingClientRect().left - ue(e, { marginLeft: 0 }, function () { return e.getBoundingClientRect().left })) + "px" }), k.each({ margin: "", padding: "", border: "Width" }, function (i, o) { k.cssHooks[i + o] = { expand: function (e) { for (var t = 0, n = {}, r = "string" == typeof e ? e.split(" ") : [e]; t < 4; t++)n[i + re[t] + o] = r[t] || r[t - 2] || r[0]; return n } }, "margin" !== i && (k.cssHooks[i + o].set = Ze) }), k.fn.extend({ css: function (e, t) { return _(this, function (e, t, n) { var r, i, o = {}, a = 0; if (Array.isArray(t)) { for (r = Fe(e), i = t.length; a < i; a++)o[t[a]] = k.css(e, t[a], !1, r); return o } return void 0 !== n ? k.style(e, t, n) : k.css(e, t) }, e, t, 1 < arguments.length) } }), ((k.Tween = nt).prototype = { constructor: nt, init: function (e, t, n, r, i, o) { this.elem = e, this.prop = n, this.easing = i || k.easing._default, this.options = t, this.start = this.now = this.cur(), this.end = r, this.unit = o || (k.cssNumber[n] ? "" : "px") }, cur: function () { var e = nt.propHooks[this.prop]; return e && e.get ? e.get(this) : nt.propHooks._default.get(this) }, run: function (e) { var t, n = nt.propHooks[this.prop]; return this.options.duration ? this.pos = t = k.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : nt.propHooks._default.set(this), this } }).init.prototype = nt.prototype, (nt.propHooks = { _default: { get: function (e) { var t; return 1 !== e.elem.nodeType || null != e.elem[e.prop] && null == e.elem.style[e.prop] ? e.elem[e.prop] : (t = k.css(e.elem, e.prop, "")) && "auto" !== t ? t : 0 }, set: function (e) { k.fx.step[e.prop] ? k.fx.step[e.prop](e) : 1 !== e.elem.nodeType || !k.cssHooks[e.prop] && null == e.elem.style[Ge(e.prop)] ? e.elem[e.prop] = e.now : k.style(e.elem, e.prop, e.now + e.unit) } } }).scrollTop = nt.propHooks.scrollLeft = { set: function (e) { e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now) } }, k.easing = { linear: function (e) { return e }, swing: function (e) { return .5 - Math.cos(e * Math.PI) / 2 }, _default: "swing" }, k.fx = nt.prototype.init, k.fx.step = {}; var rt, it, ot, at, st = /^(?:toggle|show|hide)$/, ut = /queueHooks$/; function lt() { it && (!1 === E.hidden && C.requestAnimationFrame ? C.requestAnimationFrame(lt) : C.setTimeout(lt, k.fx.interval), k.fx.tick()) } function ct() { return C.setTimeout(function () { rt = void 0 }), rt = Date.now() } function ft(e, t) { var n, r = 0, i = { height: e }; for (t = t ? 1 : 0; r < 4; r += 2 - t)i["margin" + (n = re[r])] = i["padding" + n] = e; return t && (i.opacity = i.width = e), i } function pt(e, t, n) { for (var r, i = (dt.tweeners[t] || []).concat(dt.tweeners["*"]), o = 0, a = i.length; o < a; o++)if (r = i[o].call(n, t, e)) return r } function dt(o, e, t) { var n, a, r = 0, i = dt.prefilters.length, s = k.Deferred().always(function () { delete u.elem }), u = function () { if (a) return !1; for (var e = rt || ct(), t = Math.max(0, l.startTime + l.duration - e), n = 1 - (t / l.duration || 0), r = 0, i = l.tweens.length; r < i; r++)l.tweens[r].run(n); return s.notifyWith(o, [l, n, t]), n < 1 && i ? t : (i || s.notifyWith(o, [l, 1, 0]), s.resolveWith(o, [l]), !1) }, l = s.promise({ elem: o, props: k.extend({}, e), opts: k.extend(!0, { specialEasing: {}, easing: k.easing._default }, t), originalProperties: e, originalOptions: t, startTime: rt || ct(), duration: t.duration, tweens: [], createTween: function (e, t) { var n = k.Tween(o, l.opts, e, t, l.opts.specialEasing[e] || l.opts.easing); return l.tweens.push(n), n }, stop: function (e) { var t = 0, n = e ? l.tweens.length : 0; if (a) return this; for (a = !0; t < n; t++)l.tweens[t].run(1); return e ? (s.notifyWith(o, [l, 1, 0]), s.resolveWith(o, [l, e])) : s.rejectWith(o, [l, e]), this } }), c = l.props; for (!function (e, t) { var n, r, i, o, a; for (n in e) if (i = t[r = V(n)], o = e[n], Array.isArray(o) && (i = o[1], o = e[n] = o[0]), n !== r && (e[r] = o, delete e[n]), (a = k.cssHooks[r]) && "expand" in a) for (n in o = a.expand(o), delete e[r], o) n in e || (e[n] = o[n], t[n] = i); else t[r] = i }(c, l.opts.specialEasing); r < i; r++)if (n = dt.prefilters[r].call(l, o, c, l.opts)) return m(n.stop) && (k._queueHooks(l.elem, l.opts.queue).stop = n.stop.bind(n)), n; return k.map(c, pt, l), m(l.opts.start) && l.opts.start.call(o, l), l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always), k.fx.timer(k.extend(u, { elem: o, anim: l, queue: l.opts.queue })), l } k.Animation = k.extend(dt, { tweeners: { "*": [function (e, t) { var n = this.createTween(e, t); return le(n.elem, e, ne.exec(t), n), n }] }, tweener: function (e, t) { m(e) ? (t = e, e = ["*"]) : e = e.match(R); for (var n, r = 0, i = e.length; r < i; r++)n = e[r], dt.tweeners[n] = dt.tweeners[n] || [], dt.tweeners[n].unshift(t) }, prefilters: [function (e, t, n) { var r, i, o, a, s, u, l, c, f = "width" in t || "height" in t, p = this, d = {}, h = e.style, g = e.nodeType && se(e), v = Q.get(e, "fxshow"); for (r in n.queue || (null == (a = k._queueHooks(e, "fx")).unqueued && (a.unqueued = 0, s = a.empty.fire, a.empty.fire = function () { a.unqueued || s() }), a.unqueued++ , p.always(function () { p.always(function () { a.unqueued-- , k.queue(e, "fx").length || a.empty.fire() }) })), t) if (i = t[r], st.test(i)) { if (delete t[r], o = o || "toggle" === i, i === (g ? "hide" : "show")) { if ("show" !== i || !v || void 0 === v[r]) continue; g = !0 } d[r] = v && v[r] || k.style(e, r) } if ((u = !k.isEmptyObject(t)) || !k.isEmptyObject(d)) for (r in f && 1 === e.nodeType && (n.overflow = [h.overflow, h.overflowX, h.overflowY], null == (l = v && v.display) && (l = Q.get(e, "display")), "none" === (c = k.css(e, "display")) && (l ? c = l : (fe([e], !0), l = e.style.display || l, c = k.css(e, "display"), fe([e]))), ("inline" === c || "inline-block" === c && null != l) && "none" === k.css(e, "float") && (u || (p.done(function () { h.display = l }), null == l && (c = h.display, l = "none" === c ? "" : c)), h.display = "inline-block")), n.overflow && (h.overflow = "hidden", p.always(function () { h.overflow = n.overflow[0], h.overflowX = n.overflow[1], h.overflowY = n.overflow[2] })), u = !1, d) u || (v ? "hidden" in v && (g = v.hidden) : v = Q.access(e, "fxshow", { display: l }), o && (v.hidden = !g), g && fe([e], !0), p.done(function () { for (r in g || fe([e]), Q.remove(e, "fxshow"), d) k.style(e, r, d[r]) })), u = pt(g ? v[r] : 0, r, p), r in v || (v[r] = u.start, g && (u.end = u.start, u.start = 0)) }], prefilter: function (e, t) { t ? dt.prefilters.unshift(e) : dt.prefilters.push(e) } }), k.speed = function (e, t, n) { var r = e && "object" == typeof e ? k.extend({}, e) : { complete: n || !n && t || m(e) && e, duration: e, easing: n && t || t && !m(t) && t }; return k.fx.off ? r.duration = 0 : "number" != typeof r.duration && (r.duration in k.fx.speeds ? r.duration = k.fx.speeds[r.duration] : r.duration = k.fx.speeds._default), null != r.queue && !0 !== r.queue || (r.queue = "fx"), r.old = r.complete, r.complete = function () { m(r.old) && r.old.call(this), r.queue && k.dequeue(this, r.queue) }, r }, k.fn.extend({ fadeTo: function (e, t, n, r) { return this.filter(se).css("opacity", 0).show().end().animate({ opacity: t }, e, n, r) }, animate: function (t, e, n, r) { var i = k.isEmptyObject(t), o = k.speed(e, n, r), a = function () { var e = dt(this, k.extend({}, t), o); (i || Q.get(this, "finish")) && e.stop(!0) }; return a.finish = a, i || !1 === o.queue ? this.each(a) : this.queue(o.queue, a) }, stop: function (i, e, o) { var a = function (e) { var t = e.stop; delete e.stop, t(o) }; return "string" != typeof i && (o = e, e = i, i = void 0), e && !1 !== i && this.queue(i || "fx", []), this.each(function () { var e = !0, t = null != i && i + "queueHooks", n = k.timers, r = Q.get(this); if (t) r[t] && r[t].stop && a(r[t]); else for (t in r) r[t] && r[t].stop && ut.test(t) && a(r[t]); for (t = n.length; t--;)n[t].elem !== this || null != i && n[t].queue !== i || (n[t].anim.stop(o), e = !1, n.splice(t, 1)); !e && o || k.dequeue(this, i) }) }, finish: function (a) { return !1 !== a && (a = a || "fx"), this.each(function () { var e, t = Q.get(this), n = t[a + "queue"], r = t[a + "queueHooks"], i = k.timers, o = n ? n.length : 0; for (t.finish = !0, k.queue(this, a, []), r && r.stop && r.stop.call(this, !0), e = i.length; e--;)i[e].elem === this && i[e].queue === a && (i[e].anim.stop(!0), i.splice(e, 1)); for (e = 0; e < o; e++)n[e] && n[e].finish && n[e].finish.call(this); delete t.finish }) } }), k.each(["toggle", "show", "hide"], function (e, r) { var i = k.fn[r]; k.fn[r] = function (e, t, n) { return null == e || "boolean" == typeof e ? i.apply(this, arguments) : this.animate(ft(r, !0), e, t, n) } }), k.each({ slideDown: ft("show"), slideUp: ft("hide"), slideToggle: ft("toggle"), fadeIn: { opacity: "show" }, fadeOut: { opacity: "hide" }, fadeToggle: { opacity: "toggle" } }, function (e, r) { k.fn[e] = function (e, t, n) { return this.animate(r, e, t, n) } }), k.timers = [], k.fx.tick = function () { var e, t = 0, n = k.timers; for (rt = Date.now(); t < n.length; t++)(e = n[t])() || n[t] !== e || n.splice(t--, 1); n.length || k.fx.stop(), rt = void 0 }, k.fx.timer = function (e) { k.timers.push(e), k.fx.start() }, k.fx.interval = 13, k.fx.start = function () { it || (it = !0, lt()) }, k.fx.stop = function () { it = null }, k.fx.speeds = { slow: 600, fast: 200, _default: 400 }, k.fn.delay = function (r, e) { return r = k.fx && k.fx.speeds[r] || r, e = e || "fx", this.queue(e, function (e, t) { var n = C.setTimeout(e, r); t.stop = function () { C.clearTimeout(n) } }) }, ot = E.createElement("input"), at = E.createElement("select").appendChild(E.createElement("option")), ot.type = "checkbox", y.checkOn = "" !== ot.value, y.optSelected = at.selected, (ot = E.createElement("input")).value = "t", ot.type = "radio", y.radioValue = "t" === ot.value; var ht, gt = k.expr.attrHandle; k.fn.extend({ attr: function (e, t) { return _(this, k.attr, e, t, 1 < arguments.length) }, removeAttr: function (e) { return this.each(function () { k.removeAttr(this, e) }) } }), k.extend({ attr: function (e, t, n) { var r, i, o = e.nodeType; if (3 !== o && 8 !== o && 2 !== o) return "undefined" == typeof e.getAttribute ? k.prop(e, t, n) : (1 === o && k.isXMLDoc(e) || (i = k.attrHooks[t.toLowerCase()] || (k.expr.match.bool.test(t) ? ht : void 0)), void 0 !== n ? null === n ? void k.removeAttr(e, t) : i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : (e.setAttribute(t, n + ""), n) : i && "get" in i && null !== (r = i.get(e, t)) ? r : null == (r = k.find.attr(e, t)) ? void 0 : r) }, attrHooks: { type: { set: function (e, t) { if (!y.radioValue && "radio" === t && A(e, "input")) { var n = e.value; return e.setAttribute("type", t), n && (e.value = n), t } } } }, removeAttr: function (e, t) { var n, r = 0, i = t && t.match(R); if (i && 1 === e.nodeType) while (n = i[r++]) e.removeAttribute(n) } }), ht = { set: function (e, t, n) { return !1 === t ? k.removeAttr(e, n) : e.setAttribute(n, n), n } }, k.each(k.expr.match.bool.source.match(/\w+/g), function (e, t) { var a = gt[t] || k.find.attr; gt[t] = function (e, t, n) { var r, i, o = t.toLowerCase(); return n || (i = gt[o], gt[o] = r, r = null != a(e, t, n) ? o : null, gt[o] = i), r } }); var vt = /^(?:input|select|textarea|button)$/i, yt = /^(?:a|area)$/i; function mt(e) { return (e.match(R) || []).join(" ") } function xt(e) { return e.getAttribute && e.getAttribute("class") || "" } function bt(e) { return Array.isArray(e) ? e : "string" == typeof e && e.match(R) || [] } k.fn.extend({ prop: function (e, t) { return _(this, k.prop, e, t, 1 < arguments.length) }, removeProp: function (e) { return this.each(function () { delete this[k.propFix[e] || e] }) } }), k.extend({ prop: function (e, t, n) { var r, i, o = e.nodeType; if (3 !== o && 8 !== o && 2 !== o) return 1 === o && k.isXMLDoc(e) || (t = k.propFix[t] || t, i = k.propHooks[t]), void 0 !== n ? i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : e[t] = n : i && "get" in i && null !== (r = i.get(e, t)) ? r : e[t] }, propHooks: { tabIndex: { get: function (e) { var t = k.find.attr(e, "tabindex"); return t ? parseInt(t, 10) : vt.test(e.nodeName) || yt.test(e.nodeName) && e.href ? 0 : -1 } } }, propFix: { "for": "htmlFor", "class": "className" } }), y.optSelected || (k.propHooks.selected = { get: function (e) { var t = e.parentNode; return t && t.parentNode && t.parentNode.selectedIndex, null }, set: function (e) { var t = e.parentNode; t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex) } }), k.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () { k.propFix[this.toLowerCase()] = this }), k.fn.extend({ addClass: function (t) { var e, n, r, i, o, a, s, u = 0; if (m(t)) return this.each(function (e) { k(this).addClass(t.call(this, e, xt(this))) }); if ((e = bt(t)).length) while (n = this[u++]) if (i = xt(n), r = 1 === n.nodeType && " " + mt(i) + " ") { a = 0; while (o = e[a++]) r.indexOf(" " + o + " ") < 0 && (r += o + " "); i !== (s = mt(r)) && n.setAttribute("class", s) } return this }, removeClass: function (t) { var e, n, r, i, o, a, s, u = 0; if (m(t)) return this.each(function (e) { k(this).removeClass(t.call(this, e, xt(this))) }); if (!arguments.length) return this.attr("class", ""); if ((e = bt(t)).length) while (n = this[u++]) if (i = xt(n), r = 1 === n.nodeType && " " + mt(i) + " ") { a = 0; while (o = e[a++]) while (-1 < r.indexOf(" " + o + " ")) r = r.replace(" " + o + " ", " "); i !== (s = mt(r)) && n.setAttribute("class", s) } return this }, toggleClass: function (i, t) { var o = typeof i, a = "string" === o || Array.isArray(i); return "boolean" == typeof t && a ? t ? this.addClass(i) : this.removeClass(i) : m(i) ? this.each(function (e) { k(this).toggleClass(i.call(this, e, xt(this), t), t) }) : this.each(function () { var e, t, n, r; if (a) { t = 0, n = k(this), r = bt(i); while (e = r[t++]) n.hasClass(e) ? n.removeClass(e) : n.addClass(e) } else void 0 !== i && "boolean" !== o || ((e = xt(this)) && Q.set(this, "__className__", e), this.setAttribute && this.setAttribute("class", e || !1 === i ? "" : Q.get(this, "__className__") || "")) }) }, hasClass: function (e) { var t, n, r = 0; t = " " + e + " "; while (n = this[r++]) if (1 === n.nodeType && -1 < (" " + mt(xt(n)) + " ").indexOf(t)) return !0; return !1 } }); var wt = /\r/g; k.fn.extend({ val: function (n) { var r, e, i, t = this[0]; return arguments.length ? (i = m(n), this.each(function (e) { var t; 1 === this.nodeType && (null == (t = i ? n.call(this, e, k(this).val()) : n) ? t = "" : "number" == typeof t ? t += "" : Array.isArray(t) && (t = k.map(t, function (e) { return null == e ? "" : e + "" })), (r = k.valHooks[this.type] || k.valHooks[this.nodeName.toLowerCase()]) && "set" in r && void 0 !== r.set(this, t, "value") || (this.value = t)) })) : t ? (r = k.valHooks[t.type] || k.valHooks[t.nodeName.toLowerCase()]) && "get" in r && void 0 !== (e = r.get(t, "value")) ? e : "string" == typeof (e = t.value) ? e.replace(wt, "") : null == e ? "" : e : void 0 } }), k.extend({ valHooks: { option: { get: function (e) { var t = k.find.attr(e, "value"); return null != t ? t : mt(k.text(e)) } }, select: { get: function (e) { var t, n, r, i = e.options, o = e.selectedIndex, a = "select-one" === e.type, s = a ? null : [], u = a ? o + 1 : i.length; for (r = o < 0 ? u : a ? o : 0; r < u; r++)if (((n = i[r]).selected || r === o) && !n.disabled && (!n.parentNode.disabled || !A(n.parentNode, "optgroup"))) { if (t = k(n).val(), a) return t; s.push(t) } return s }, set: function (e, t) { var n, r, i = e.options, o = k.makeArray(t), a = i.length; while (a--) ((r = i[a]).selected = -1 < k.inArray(k.valHooks.option.get(r), o)) && (n = !0); return n || (e.selectedIndex = -1), o } } } }), k.each(["radio", "checkbox"], function () { k.valHooks[this] = { set: function (e, t) { if (Array.isArray(t)) return e.checked = -1 < k.inArray(k(e).val(), t) } }, y.checkOn || (k.valHooks[this].get = function (e) { return null === e.getAttribute("value") ? "on" : e.value }) }), y.focusin = "onfocusin" in C; var Tt = /^(?:focusinfocus|focusoutblur)$/, Ct = function (e) { e.stopPropagation() }; k.extend(k.event, { trigger: function (e, t, n, r) { var i, o, a, s, u, l, c, f, p = [n || E], d = v.call(e, "type") ? e.type : e, h = v.call(e, "namespace") ? e.namespace.split(".") : []; if (o = f = a = n = n || E, 3 !== n.nodeType && 8 !== n.nodeType && !Tt.test(d + k.event.triggered) && (-1 < d.indexOf(".") && (d = (h = d.split(".")).shift(), h.sort()), u = d.indexOf(":") < 0 && "on" + d, (e = e[k.expando] ? e : new k.Event(d, "object" == typeof e && e)).isTrigger = r ? 2 : 3, e.namespace = h.join("."), e.rnamespace = e.namespace ? new RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, e.result = void 0, e.target || (e.target = n), t = null == t ? [e] : k.makeArray(t, [e]), c = k.event.special[d] || {}, r || !c.trigger || !1 !== c.trigger.apply(n, t))) { if (!r && !c.noBubble && !x(n)) { for (s = c.delegateType || d, Tt.test(s + d) || (o = o.parentNode); o; o = o.parentNode)p.push(o), a = o; a === (n.ownerDocument || E) && p.push(a.defaultView || a.parentWindow || C) } i = 0; while ((o = p[i++]) && !e.isPropagationStopped()) f = o, e.type = 1 < i ? s : c.bindType || d, (l = (Q.get(o, "events") || {})[e.type] && Q.get(o, "handle")) && l.apply(o, t), (l = u && o[u]) && l.apply && G(o) && (e.result = l.apply(o, t), !1 === e.result && e.preventDefault()); return e.type = d, r || e.isDefaultPrevented() || c._default && !1 !== c._default.apply(p.pop(), t) || !G(n) || u && m(n[d]) && !x(n) && ((a = n[u]) && (n[u] = null), k.event.triggered = d, e.isPropagationStopped() && f.addEventListener(d, Ct), n[d](), e.isPropagationStopped() && f.removeEventListener(d, Ct), k.event.triggered = void 0, a && (n[u] = a)), e.result } }, simulate: function (e, t, n) { var r = k.extend(new k.Event, n, { type: e, isSimulated: !0 }); k.event.trigger(r, null, t) } }), k.fn.extend({ trigger: function (e, t) { return this.each(function () { k.event.trigger(e, t, this) }) }, triggerHandler: function (e, t) { var n = this[0]; if (n) return k.event.trigger(e, t, n, !0) } }), y.focusin || k.each({ focus: "focusin", blur: "focusout" }, function (n, r) { var i = function (e) { k.event.simulate(r, e.target, k.event.fix(e)) }; k.event.special[r] = { setup: function () { var e = this.ownerDocument || this, t = Q.access(e, r); t || e.addEventListener(n, i, !0), Q.access(e, r, (t || 0) + 1) }, teardown: function () { var e = this.ownerDocument || this, t = Q.access(e, r) - 1; t ? Q.access(e, r, t) : (e.removeEventListener(n, i, !0), Q.remove(e, r)) } } }); var Et = C.location, kt = Date.now(), St = /\?/; k.parseXML = function (e) { var t; if (!e || "string" != typeof e) return null; try { t = (new C.DOMParser).parseFromString(e, "text/xml") } catch (e) { t = void 0 } return t && !t.getElementsByTagName("parsererror").length || k.error("Invalid XML: " + e), t }; var Nt = /\[\]$/, At = /\r?\n/g, Dt = /^(?:submit|button|image|reset|file)$/i, jt = /^(?:input|select|textarea|keygen)/i; function qt(n, e, r, i) { var t; if (Array.isArray(e)) k.each(e, function (e, t) { r || Nt.test(n) ? i(n, t) : qt(n + "[" + ("object" == typeof t && null != t ? e : "") + "]", t, r, i) }); else if (r || "object" !== w(e)) i(n, e); else for (t in e) qt(n + "[" + t + "]", e[t], r, i) } k.param = function (e, t) { var n, r = [], i = function (e, t) { var n = m(t) ? t() : t; r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(null == n ? "" : n) }; if (null == e) return ""; if (Array.isArray(e) || e.jquery && !k.isPlainObject(e)) k.each(e, function () { i(this.name, this.value) }); else for (n in e) qt(n, e[n], t, i); return r.join("&") }, k.fn.extend({ serialize: function () { return k.param(this.serializeArray()) }, serializeArray: function () { return this.map(function () { var e = k.prop(this, "elements"); return e ? k.makeArray(e) : this }).filter(function () { var e = this.type; return this.name && !k(this).is(":disabled") && jt.test(this.nodeName) && !Dt.test(e) && (this.checked || !pe.test(e)) }).map(function (e, t) { var n = k(this).val(); return null == n ? null : Array.isArray(n) ? k.map(n, function (e) { return { name: t.name, value: e.replace(At, "\r\n") } }) : { name: t.name, value: n.replace(At, "\r\n") } }).get() } }); var Lt = /%20/g, Ht = /#.*$/, Ot = /([?&])_=[^&]*/, Pt = /^(.*?):[ \t]*([^\r\n]*)$/gm, Rt = /^(?:GET|HEAD)$/, Mt = /^\/\//, It = {}, Wt = {}, $t = "*/".concat("*"), Ft = E.createElement("a"); function Bt(o) { return function (e, t) { "string" != typeof e && (t = e, e = "*"); var n, r = 0, i = e.toLowerCase().match(R) || []; if (m(t)) while (n = i[r++]) "+" === n[0] ? (n = n.slice(1) || "*", (o[n] = o[n] || []).unshift(t)) : (o[n] = o[n] || []).push(t) } } function _t(t, i, o, a) { var s = {}, u = t === Wt; function l(e) { var r; return s[e] = !0, k.each(t[e] || [], function (e, t) { var n = t(i, o, a); return "string" != typeof n || u || s[n] ? u ? !(r = n) : void 0 : (i.dataTypes.unshift(n), l(n), !1) }), r } return l(i.dataTypes[0]) || !s["*"] && l("*") } function zt(e, t) { var n, r, i = k.ajaxSettings.flatOptions || {}; for (n in t) void 0 !== t[n] && ((i[n] ? e : r || (r = {}))[n] = t[n]); return r && k.extend(!0, e, r), e } Ft.href = Et.href, k.extend({ active: 0, lastModified: {}, etag: {}, ajaxSettings: { url: Et.href, type: "GET", isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol), global: !0, processData: !0, async: !0, contentType: "application/x-www-form-urlencoded; charset=UTF-8", accepts: { "*": $t, text: "text/plain", html: "text/html", xml: "application/xml, text/xml", json: "application/json, text/javascript" }, contents: { xml: /\bxml\b/, html: /\bhtml/, json: /\bjson\b/ }, responseFields: { xml: "responseXML", text: "responseText", json: "responseJSON" }, converters: { "* text": String, "text html": !0, "text json": JSON.parse, "text xml": k.parseXML }, flatOptions: { url: !0, context: !0 } }, ajaxSetup: function (e, t) { return t ? zt(zt(e, k.ajaxSettings), t) : zt(k.ajaxSettings, e) }, ajaxPrefilter: Bt(It), ajaxTransport: Bt(Wt), ajax: function (e, t) { "object" == typeof e && (t = e, e = void 0), t = t || {}; var c, f, p, n, d, r, h, g, i, o, v = k.ajaxSetup({}, t), y = v.context || v, m = v.context && (y.nodeType || y.jquery) ? k(y) : k.event, x = k.Deferred(), b = k.Callbacks("once memory"), w = v.statusCode || {}, a = {}, s = {}, u = "canceled", T = { readyState: 0, getResponseHeader: function (e) { var t; if (h) { if (!n) { n = {}; while (t = Pt.exec(p)) n[t[1].toLowerCase() + " "] = (n[t[1].toLowerCase() + " "] || []).concat(t[2]) } t = n[e.toLowerCase() + " "] } return null == t ? null : t.join(", ") }, getAllResponseHeaders: function () { return h ? p : null }, setRequestHeader: function (e, t) { return null == h && (e = s[e.toLowerCase()] = s[e.toLowerCase()] || e, a[e] = t), this }, overrideMimeType: function (e) { return null == h && (v.mimeType = e), this }, statusCode: function (e) { var t; if (e) if (h) T.always(e[T.status]); else for (t in e) w[t] = [w[t], e[t]]; return this }, abort: function (e) { var t = e || u; return c && c.abort(t), l(0, t), this } }; if (x.promise(T), v.url = ((e || v.url || Et.href) + "").replace(Mt, Et.protocol + "//"), v.type = t.method || t.type || v.method || v.type, v.dataTypes = (v.dataType || "*").toLowerCase().match(R) || [""], null == v.crossDomain) { r = E.createElement("a"); try { r.href = v.url, r.href = r.href, v.crossDomain = Ft.protocol + "//" + Ft.host != r.protocol + "//" + r.host } catch (e) { v.crossDomain = !0 } } if (v.data && v.processData && "string" != typeof v.data && (v.data = k.param(v.data, v.traditional)), _t(It, v, t, T), h) return T; for (i in (g = k.event && v.global) && 0 == k.active++ && k.event.trigger("ajaxStart"), v.type = v.type.toUpperCase(), v.hasContent = !Rt.test(v.type), f = v.url.replace(Ht, ""), v.hasContent ? v.data && v.processData && 0 === (v.contentType || "").indexOf("application/x-www-form-urlencoded") && (v.data = v.data.replace(Lt, "+")) : (o = v.url.slice(f.length), v.data && (v.processData || "string" == typeof v.data) && (f += (St.test(f) ? "&" : "?") + v.data, delete v.data), !1 === v.cache && (f = f.replace(Ot, "$1"), o = (St.test(f) ? "&" : "?") + "_=" + kt++ + o), v.url = f + o), v.ifModified && (k.lastModified[f] && T.setRequestHeader("If-Modified-Since", k.lastModified[f]), k.etag[f] && T.setRequestHeader("If-None-Match", k.etag[f])), (v.data && v.hasContent && !1 !== v.contentType || t.contentType) && T.setRequestHeader("Content-Type", v.contentType), T.setRequestHeader("Accept", v.dataTypes[0] && v.accepts[v.dataTypes[0]] ? v.accepts[v.dataTypes[0]] + ("*" !== v.dataTypes[0] ? ", " + $t + "; q=0.01" : "") : v.accepts["*"]), v.headers) T.setRequestHeader(i, v.headers[i]); if (v.beforeSend && (!1 === v.beforeSend.call(y, T, v) || h)) return T.abort(); if (u = "abort", b.add(v.complete), T.done(v.success), T.fail(v.error), c = _t(Wt, v, t, T)) { if (T.readyState = 1, g && m.trigger("ajaxSend", [T, v]), h) return T; v.async && 0 < v.timeout && (d = C.setTimeout(function () { T.abort("timeout") }, v.timeout)); try { h = !1, c.send(a, l) } catch (e) { if (h) throw e; l(-1, e) } } else l(-1, "No Transport"); function l(e, t, n, r) { var i, o, a, s, u, l = t; h || (h = !0, d && C.clearTimeout(d), c = void 0, p = r || "", T.readyState = 0 < e ? 4 : 0, i = 200 <= e && e < 300 || 304 === e, n && (s = function (e, t, n) { var r, i, o, a, s = e.contents, u = e.dataTypes; while ("*" === u[0]) u.shift(), void 0 === r && (r = e.mimeType || t.getResponseHeader("Content-Type")); if (r) for (i in s) if (s[i] && s[i].test(r)) { u.unshift(i); break } if (u[0] in n) o = u[0]; else { for (i in n) { if (!u[0] || e.converters[i + " " + u[0]]) { o = i; break } a || (a = i) } o = o || a } if (o) return o !== u[0] && u.unshift(o), n[o] }(v, T, n)), s = function (e, t, n, r) { var i, o, a, s, u, l = {}, c = e.dataTypes.slice(); if (c[1]) for (a in e.converters) l[a.toLowerCase()] = e.converters[a]; o = c.shift(); while (o) if (e.responseFields[o] && (n[e.responseFields[o]] = t), !u && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), u = o, o = c.shift()) if ("*" === o) o = u; else if ("*" !== u && u !== o) { if (!(a = l[u + " " + o] || l["* " + o])) for (i in l) if ((s = i.split(" "))[1] === o && (a = l[u + " " + s[0]] || l["* " + s[0]])) { !0 === a ? a = l[i] : !0 !== l[i] && (o = s[0], c.unshift(s[1])); break } if (!0 !== a) if (a && e["throws"]) t = a(t); else try { t = a(t) } catch (e) { return { state: "parsererror", error: a ? e : "No conversion from " + u + " to " + o } } } return { state: "success", data: t } }(v, s, T, i), i ? (v.ifModified && ((u = T.getResponseHeader("Last-Modified")) && (k.lastModified[f] = u), (u = T.getResponseHeader("etag")) && (k.etag[f] = u)), 204 === e || "HEAD" === v.type ? l = "nocontent" : 304 === e ? l = "notmodified" : (l = s.state, o = s.data, i = !(a = s.error))) : (a = l, !e && l || (l = "error", e < 0 && (e = 0))), T.status = e, T.statusText = (t || l) + "", i ? x.resolveWith(y, [o, l, T]) : x.rejectWith(y, [T, l, a]), T.statusCode(w), w = void 0, g && m.trigger(i ? "ajaxSuccess" : "ajaxError", [T, v, i ? o : a]), b.fireWith(y, [T, l]), g && (m.trigger("ajaxComplete", [T, v]), --k.active || k.event.trigger("ajaxStop"))) } return T }, getJSON: function (e, t, n) { return k.get(e, t, n, "json") }, getScript: function (e, t) { return k.get(e, void 0, t, "script") } }), k.each(["get", "post"], function (e, i) { k[i] = function (e, t, n, r) { return m(t) && (r = r || n, n = t, t = void 0), k.ajax(k.extend({ url: e, type: i, dataType: r, data: t, success: n }, k.isPlainObject(e) && e)) } }), k._evalUrl = function (e, t) { return k.ajax({ url: e, type: "GET", dataType: "script", cache: !0, async: !1, global: !1, converters: { "text script": function () { } }, dataFilter: function (e) { k.globalEval(e, t) } }) }, k.fn.extend({ wrapAll: function (e) { var t; return this[0] && (m(e) && (e = e.call(this[0])), t = k(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function () { var e = this; while (e.firstElementChild) e = e.firstElementChild; return e }).append(this)), this }, wrapInner: function (n) { return m(n) ? this.each(function (e) { k(this).wrapInner(n.call(this, e)) }) : this.each(function () { var e = k(this), t = e.contents(); t.length ? t.wrapAll(n) : e.append(n) }) }, wrap: function (t) { var n = m(t); return this.each(function (e) { k(this).wrapAll(n ? t.call(this, e) : t) }) }, unwrap: function (e) { return this.parent(e).not("body").each(function () { k(this).replaceWith(this.childNodes) }), this } }), k.expr.pseudos.hidden = function (e) { return !k.expr.pseudos.visible(e) }, k.expr.pseudos.visible = function (e) { return !!(e.offsetWidth || e.offsetHeight || e.getClientRects().length) }, k.ajaxSettings.xhr = function () { try { return new C.XMLHttpRequest } catch (e) { } }; var Ut = { 0: 200, 1223: 204 }, Xt = k.ajaxSettings.xhr(); y.cors = !!Xt && "withCredentials" in Xt, y.ajax = Xt = !!Xt, k.ajaxTransport(function (i) { var o, a; if (y.cors || Xt && !i.crossDomain) return { send: function (e, t) { var n, r = i.xhr(); if (r.open(i.type, i.url, i.async, i.username, i.password), i.xhrFields) for (n in i.xhrFields) r[n] = i.xhrFields[n]; for (n in i.mimeType && r.overrideMimeType && r.overrideMimeType(i.mimeType), i.crossDomain || e["X-Requested-With"] || (e["X-Requested-With"] = "XMLHttpRequest"), e) r.setRequestHeader(n, e[n]); o = function (e) { return function () { o && (o = a = r.onload = r.onerror = r.onabort = r.ontimeout = r.onreadystatechange = null, "abort" === e ? r.abort() : "error" === e ? "number" != typeof r.status ? t(0, "error") : t(r.status, r.statusText) : t(Ut[r.status] || r.status, r.statusText, "text" !== (r.responseType || "text") || "string" != typeof r.responseText ? { binary: r.response } : { text: r.responseText }, r.getAllResponseHeaders())) } }, r.onload = o(), a = r.onerror = r.ontimeout = o("error"), void 0 !== r.onabort ? r.onabort = a : r.onreadystatechange = function () { 4 === r.readyState && C.setTimeout(function () { o && a() }) }, o = o("abort"); try { r.send(i.hasContent && i.data || null) } catch (e) { if (o) throw e } }, abort: function () { o && o() } } }), k.ajaxPrefilter(function (e) { e.crossDomain && (e.contents.script = !1) }), k.ajaxSetup({ accepts: { script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript" }, contents: { script: /\b(?:java|ecma)script\b/ }, converters: { "text script": function (e) { return k.globalEval(e), e } } }), k.ajaxPrefilter("script", function (e) { void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET") }), k.ajaxTransport("script", function (n) { var r, i; if (n.crossDomain || n.scriptAttrs) return { send: function (e, t) { r = k("<script>").attr(n.scriptAttrs || {}).prop({ charset: n.scriptCharset, src: n.url }).on("load error", i = function (e) { r.remove(), i = null, e && t("error" === e.type ? 404 : 200, e.type) }), E.head.appendChild(r[0]) }, abort: function () { i && i() } } }); var Vt, Gt = [], Yt = /(=)\?(?=&|$)|\?\?/; k.ajaxSetup({ jsonp: "callback", jsonpCallback: function () { var e = Gt.pop() || k.expando + "_" + kt++; return this[e] = !0, e } }), k.ajaxPrefilter("json jsonp", function (e, t, n) { var r, i, o, a = !1 !== e.jsonp && (Yt.test(e.url) ? "url" : "string" == typeof e.data && 0 === (e.contentType || "").indexOf("application/x-www-form-urlencoded") && Yt.test(e.data) && "data"); if (a || "jsonp" === e.dataTypes[0]) return r = e.jsonpCallback = m(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback, a ? e[a] = e[a].replace(Yt, "$1" + r) : !1 !== e.jsonp && (e.url += (St.test(e.url) ? "&" : "?") + e.jsonp + "=" + r), e.converters["script json"] = function () { return o || k.error(r + " was not called"), o[0] }, e.dataTypes[0] = "json", i = C[r], C[r] = function () { o = arguments }, n.always(function () { void 0 === i ? k(C).removeProp(r) : C[r] = i, e[r] && (e.jsonpCallback = t.jsonpCallback, Gt.push(r)), o && m(i) && i(o[0]), o = i = void 0 }), "script" }), y.createHTMLDocument = ((Vt = E.implementation.createHTMLDocument("").body).innerHTML = "<form></form><form></form>", 2 === Vt.childNodes.length), k.parseHTML = function (e, t, n) { return "string" != typeof e ? [] : ("boolean" == typeof t && (n = t, t = !1), t || (y.createHTMLDocument ? ((r = (t = E.implementation.createHTMLDocument("")).createElement("base")).href = E.location.href, t.head.appendChild(r)) : t = E), o = !n && [], (i = D.exec(e)) ? [t.createElement(i[1])] : (i = we([e], t, o), o && o.length && k(o).remove(), k.merge([], i.childNodes))); var r, i, o }, k.fn.load = function (e, t, n) { var r, i, o, a = this, s = e.indexOf(" "); return -1 < s && (r = mt(e.slice(s)), e = e.slice(0, s)), m(t) ? (n = t, t = void 0) : t && "object" == typeof t && (i = "POST"), 0 < a.length && k.ajax({ url: e, type: i || "GET", dataType: "html", data: t }).done(function (e) { o = arguments, a.html(r ? k("<div>").append(k.parseHTML(e)).find(r) : e) }).always(n && function (e, t) { a.each(function () { n.apply(this, o || [e.responseText, t, e]) }) }), this }, k.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (e, t) { k.fn[t] = function (e) { return this.on(t, e) } }), k.expr.pseudos.animated = function (t) { return k.grep(k.timers, function (e) { return t === e.elem }).length }, k.offset = { setOffset: function (e, t, n) { var r, i, o, a, s, u, l = k.css(e, "position"), c = k(e), f = {}; "static" === l && (e.style.position = "relative"), s = c.offset(), o = k.css(e, "top"), u = k.css(e, "left"), ("absolute" === l || "fixed" === l) && -1 < (o + u).indexOf("auto") ? (a = (r = c.position()).top, i = r.left) : (a = parseFloat(o) || 0, i = parseFloat(u) || 0), m(t) && (t = t.call(e, n, k.extend({}, s))), null != t.top && (f.top = t.top - s.top + a), null != t.left && (f.left = t.left - s.left + i), "using" in t ? t.using.call(e, f) : c.css(f) } }, k.fn.extend({ offset: function (t) { if (arguments.length) return void 0 === t ? this : this.each(function (e) { k.offset.setOffset(this, t, e) }); var e, n, r = this[0]; return r ? r.getClientRects().length ? (e = r.getBoundingClientRect(), n = r.ownerDocument.defaultView, { top: e.top + n.pageYOffset, left: e.left + n.pageXOffset }) : { top: 0, left: 0 } : void 0 }, position: function () { if (this[0]) { var e, t, n, r = this[0], i = { top: 0, left: 0 }; if ("fixed" === k.css(r, "position")) t = r.getBoundingClientRect(); else { t = this.offset(), n = r.ownerDocument, e = r.offsetParent || n.documentElement; while (e && (e === n.body || e === n.documentElement) && "static" === k.css(e, "position")) e = e.parentNode; e && e !== r && 1 === e.nodeType && ((i = k(e).offset()).top += k.css(e, "borderTopWidth", !0), i.left += k.css(e, "borderLeftWidth", !0)) } return { top: t.top - i.top - k.css(r, "marginTop", !0), left: t.left - i.left - k.css(r, "marginLeft", !0) } } }, offsetParent: function () { return this.map(function () { var e = this.offsetParent; while (e && "static" === k.css(e, "position")) e = e.offsetParent; return e || ie }) } }), k.each({ scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function (t, i) { var o = "pageYOffset" === i; k.fn[t] = function (e) { return _(this, function (e, t, n) { var r; if (x(e) ? r = e : 9 === e.nodeType && (r = e.defaultView), void 0 === n) return r ? r[i] : e[t]; r ? r.scrollTo(o ? r.pageXOffset : n, o ? n : r.pageYOffset) : e[t] = n }, t, e, arguments.length) } }), k.each(["top", "left"], function (e, n) { k.cssHooks[n] = ze(y.pixelPosition, function (e, t) { if (t) return t = _e(e, n), $e.test(t) ? k(e).position()[n] + "px" : t }) }), k.each({ Height: "height", Width: "width" }, function (a, s) { k.each({ padding: "inner" + a, content: s, "": "outer" + a }, function (r, o) { k.fn[o] = function (e, t) { var n = arguments.length && (r || "boolean" != typeof e), i = r || (!0 === e || !0 === t ? "margin" : "border"); return _(this, function (e, t, n) { var r; return x(e) ? 0 === o.indexOf("outer") ? e["inner" + a] : e.document.documentElement["client" + a] : 9 === e.nodeType ? (r = e.documentElement, Math.max(e.body["scroll" + a], r["scroll" + a], e.body["offset" + a], r["offset" + a], r["client" + a])) : void 0 === n ? k.css(e, t, i) : k.style(e, t, n, i) }, s, n ? e : void 0, n) } }) }), k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "), function (e, n) { k.fn[n] = function (e, t) { return 0 < arguments.length ? this.on(n, null, e, t) : this.trigger(n) } }), k.fn.extend({ hover: function (e, t) { return this.mouseenter(e).mouseleave(t || e) } }), k.fn.extend({ bind: function (e, t, n) { return this.on(e, null, t, n) }, unbind: function (e, t) { return this.off(e, null, t) }, delegate: function (e, t, n, r) { return this.on(t, e, n, r) }, undelegate: function (e, t, n) { return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n) } }), k.proxy = function (e, t) { var n, r, i; if ("string" == typeof t && (n = e[t], t = e, e = n), m(e)) return r = s.call(arguments, 2), (i = function () { return e.apply(t || this, r.concat(s.call(arguments))) }).guid = e.guid = e.guid || k.guid++ , i }, k.holdReady = function (e) { e ? k.readyWait++ : k.ready(!0) }, k.isArray = Array.isArray, k.parseJSON = JSON.parse, k.nodeName = A, k.isFunction = m, k.isWindow = x, k.camelCase = V, k.type = w, k.now = Date.now, k.isNumeric = function (e) { var t = k.type(e); return ("number" === t || "string" === t) && !isNaN(e - parseFloat(e)) }, "function" == typeof define && define.amd && define("jquery", [], function () { return k }); var Qt = C.jQuery, Jt = C.$; return k.noConflict = function (e) { return C.$ === k && (C.$ = Jt), e && C.jQuery === k && (C.jQuery = Qt), k }, e || (C.jQuery = C.$ = k), k });
/*! jQuery Validation Plugin - v1.17.0 - 7/29/2017
 * https://jqueryvalidation.org/
 * Copyright (c) 2017 Jörn Zaefferer; Licensed MIT */
!function (a) { "function" == typeof define && define.amd ? define(["jquery"], a) : "object" == typeof module && module.exports ? module.exports = a(require("jquery")) : a(jQuery) }(function (a) { a.extend(a.fn, { validate: function (b) { if (!this.length) return void (b && b.debug && window.console && console.warn("Nothing selected, can't validate, returning nothing.")); var c = a.data(this[0], "validator"); return c ? c : (this.attr("novalidate", "novalidate"), c = new a.validator(b, this[0]), a.data(this[0], "validator", c), c.settings.onsubmit && (this.on("click.validate", ":submit", function (b) { c.submitButton = b.currentTarget, a(this).hasClass("cancel") && (c.cancelSubmit = !0), void 0 !== a(this).attr("formnovalidate") && (c.cancelSubmit = !0) }), this.on("submit.validate", function (b) { function d() { var d, e; return c.submitButton && (c.settings.submitHandler || c.formSubmitted) && (d = a("<input type='hidden'/>").attr("name", c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)), !c.settings.submitHandler || (e = c.settings.submitHandler.call(c, c.currentForm, b), d && d.remove(), void 0 !== e && e) } return c.settings.debug && b.preventDefault(), c.cancelSubmit ? (c.cancelSubmit = !1, d()) : c.form() ? c.pendingRequest ? (c.formSubmitted = !0, !1) : d() : (c.focusInvalid(), !1) })), c) }, valid: function () { var b, c, d; return a(this[0]).is("form") ? b = this.validate().form() : (d = [], b = !0, c = a(this[0].form).validate(), this.each(function () { b = c.element(this) && b, b || (d = d.concat(c.errorList)) }), c.errorList = d), b }, rules: function (b, c) { var d, e, f, g, h, i, j = this[0]; if (null != j && (!j.form && j.hasAttribute("contenteditable") && (j.form = this.closest("form")[0], j.name = this.attr("name")), null != j.form)) { if (b) switch (d = a.data(j.form, "validator").settings, e = d.rules, f = a.validator.staticRules(j), b) { case "add": a.extend(f, a.validator.normalizeRule(c)), delete f.messages, e[j.name] = f, c.messages && (d.messages[j.name] = a.extend(d.messages[j.name], c.messages)); break; case "remove": return c ? (i = {}, a.each(c.split(/\s/), function (a, b) { i[b] = f[b], delete f[b] }), i) : (delete e[j.name], f) }return g = a.validator.normalizeRules(a.extend({}, a.validator.classRules(j), a.validator.attributeRules(j), a.validator.dataRules(j), a.validator.staticRules(j)), j), g.required && (h = g.required, delete g.required, g = a.extend({ required: h }, g)), g.remote && (h = g.remote, delete g.remote, g = a.extend(g, { remote: h })), g } } }), a.extend(a.expr.pseudos || a.expr[":"], { blank: function (b) { return !a.trim("" + a(b).val()) }, filled: function (b) { var c = a(b).val(); return null !== c && !!a.trim("" + c) }, unchecked: function (b) { return !a(b).prop("checked") } }), a.validator = function (b, c) { this.settings = a.extend(!0, {}, a.validator.defaults, b), this.currentForm = c, this.init() }, a.validator.format = function (b, c) { return 1 === arguments.length ? function () { var c = a.makeArray(arguments); return c.unshift(b), a.validator.format.apply(this, c) } : void 0 === c ? b : (arguments.length > 2 && c.constructor !== Array && (c = a.makeArray(arguments).slice(1)), c.constructor !== Array && (c = [c]), a.each(c, function (a, c) { b = b.replace(new RegExp("\\{" + a + "\\}", "g"), function () { return c }) }), b) }, a.extend(a.validator, { defaults: { messages: {}, groups: {}, rules: {}, errorClass: "error", pendingClass: "pending", validClass: "valid", errorElement: "label", focusCleanup: !1, focusInvalid: !0, errorContainer: a([]), errorLabelContainer: a([]), onsubmit: !0, ignore: ":hidden", ignoreTitle: !1, onfocusin: function (a) { this.lastActive = a, this.settings.focusCleanup && (this.settings.unhighlight && this.settings.unhighlight.call(this, a, this.settings.errorClass, this.settings.validClass), this.hideThese(this.errorsFor(a))) }, onfocusout: function (a) { this.checkable(a) || !(a.name in this.submitted) && this.optional(a) || this.element(a) }, onkeyup: function (b, c) { var d = [16, 17, 18, 20, 35, 36, 37, 38, 39, 40, 45, 144, 225]; 9 === c.which && "" === this.elementValue(b) || a.inArray(c.keyCode, d) !== -1 || (b.name in this.submitted || b.name in this.invalid) && this.element(b) }, onclick: function (a) { a.name in this.submitted ? this.element(a) : a.parentNode.name in this.submitted && this.element(a.parentNode) }, highlight: function (b, c, d) { "radio" === b.type ? this.findByName(b.name).addClass(c).removeClass(d) : a(b).addClass(c).removeClass(d) }, unhighlight: function (b, c, d) { "radio" === b.type ? this.findByName(b.name).removeClass(c).addClass(d) : a(b).removeClass(c).addClass(d) } }, setDefaults: function (b) { a.extend(a.validator.defaults, b) }, messages: { required: "This field is required.", remote: "Please fix this field.", email: "Please enter a valid email address.", url: "Please enter a valid URL.", date: "Please enter a valid date.", dateISO: "Please enter a valid date (ISO).", number: "Please enter a valid number.", digits: "Please enter only digits.", equalTo: "Please enter the same value again.", maxlength: a.validator.format("Please enter no more than {0} characters."), minlength: a.validator.format("Please enter at least {0} characters."), rangelength: a.validator.format("Please enter a value between {0} and {1} characters long."), range: a.validator.format("Please enter a value between {0} and {1}."), max: a.validator.format("Please enter a value less than or equal to {0}."), min: a.validator.format("Please enter a value greater than or equal to {0}."), step: a.validator.format("Please enter a multiple of {0}.") }, autoCreateRanges: !1, prototype: { init: function () { function b(b) { !this.form && this.hasAttribute("contenteditable") && (this.form = a(this).closest("form")[0], this.name = a(this).attr("name")); var c = a.data(this.form, "validator"), d = "on" + b.type.replace(/^validate/, ""), e = c.settings; e[d] && !a(this).is(e.ignore) && e[d].call(c, this, b) } this.labelContainer = a(this.settings.errorLabelContainer), this.errorContext = this.labelContainer.length && this.labelContainer || a(this.currentForm), this.containers = a(this.settings.errorContainer).add(this.settings.errorLabelContainer), this.submitted = {}, this.valueCache = {}, this.pendingRequest = 0, this.pending = {}, this.invalid = {}, this.reset(); var c, d = this.groups = {}; a.each(this.settings.groups, function (b, c) { "string" == typeof c && (c = c.split(/\s/)), a.each(c, function (a, c) { d[c] = b }) }), c = this.settings.rules, a.each(c, function (b, d) { c[b] = a.validator.normalizeRule(d) }), a(this.currentForm).on("focusin.validate focusout.validate keyup.validate", ":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']", b).on("click.validate", "select, option, [type='radio'], [type='checkbox']", b), this.settings.invalidHandler && a(this.currentForm).on("invalid-form.validate", this.settings.invalidHandler) }, form: function () { return this.checkForm(), a.extend(this.submitted, this.errorMap), this.invalid = a.extend({}, this.errorMap), this.valid() || a(this.currentForm).triggerHandler("invalid-form", [this]), this.showErrors(), this.valid() }, checkForm: function () { this.prepareForm(); for (var a = 0, b = this.currentElements = this.elements(); b[a]; a++)this.check(b[a]); return this.valid() }, element: function (b) { var c, d, e = this.clean(b), f = this.validationTargetFor(e), g = this, h = !0; return void 0 === f ? delete this.invalid[e.name] : (this.prepareElement(f), this.currentElements = a(f), d = this.groups[f.name], d && a.each(this.groups, function (a, b) { b === d && a !== f.name && (e = g.validationTargetFor(g.clean(g.findByName(a))), e && e.name in g.invalid && (g.currentElements.push(e), h = g.check(e) && h)) }), c = this.check(f) !== !1, h = h && c, c ? this.invalid[f.name] = !1 : this.invalid[f.name] = !0, this.numberOfInvalids() || (this.toHide = this.toHide.add(this.containers)), this.showErrors(), a(b).attr("aria-invalid", !c)), h }, showErrors: function (b) { if (b) { var c = this; a.extend(this.errorMap, b), this.errorList = a.map(this.errorMap, function (a, b) { return { message: a, element: c.findByName(b)[0] } }), this.successList = a.grep(this.successList, function (a) { return !(a.name in b) }) } this.settings.showErrors ? this.settings.showErrors.call(this, this.errorMap, this.errorList) : this.defaultShowErrors() }, resetForm: function () { a.fn.resetForm && a(this.currentForm).resetForm(), this.invalid = {}, this.submitted = {}, this.prepareForm(), this.hideErrors(); var b = this.elements().removeData("previousValue").removeAttr("aria-invalid"); this.resetElements(b) }, resetElements: function (a) { var b; if (this.settings.unhighlight) for (b = 0; a[b]; b++)this.settings.unhighlight.call(this, a[b], this.settings.errorClass, ""), this.findByName(a[b].name).removeClass(this.settings.validClass); else a.removeClass(this.settings.errorClass).removeClass(this.settings.validClass) }, numberOfInvalids: function () { return this.objectLength(this.invalid) }, objectLength: function (a) { var b, c = 0; for (b in a) void 0 !== a[b] && null !== a[b] && a[b] !== !1 && c++; return c }, hideErrors: function () { this.hideThese(this.toHide) }, hideThese: function (a) { a.not(this.containers).text(""), this.addWrapper(a).hide() }, valid: function () { return 0 === this.size() }, size: function () { return this.errorList.length }, focusInvalid: function () { if (this.settings.focusInvalid) try { a(this.findLastActive() || this.errorList.length && this.errorList[0].element || []).filter(":visible").focus().trigger("focusin") } catch (b) { } }, findLastActive: function () { var b = this.lastActive; return b && 1 === a.grep(this.errorList, function (a) { return a.element.name === b.name }).length && b }, elements: function () { var b = this, c = {}; return a(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function () { var d = this.name || a(this).attr("name"); return !d && b.settings.debug && window.console && console.error("%o has no name assigned", this), this.hasAttribute("contenteditable") && (this.form = a(this).closest("form")[0], this.name = d), !(d in c || !b.objectLength(a(this).rules())) && (c[d] = !0, !0) }) }, clean: function (b) { return a(b)[0] }, errors: function () { var b = this.settings.errorClass.split(" ").join("."); return a(this.settings.errorElement + "." + b, this.errorContext) }, resetInternals: function () { this.successList = [], this.errorList = [], this.errorMap = {}, this.toShow = a([]), this.toHide = a([]) }, reset: function () { this.resetInternals(), this.currentElements = a([]) }, prepareForm: function () { this.reset(), this.toHide = this.errors().add(this.containers) }, prepareElement: function (a) { this.reset(), this.toHide = this.errorsFor(a) }, elementValue: function (b) { var c, d, e = a(b), f = b.type; return "radio" === f || "checkbox" === f ? this.findByName(b.name).filter(":checked").val() : "number" === f && "undefined" != typeof b.validity ? b.validity.badInput ? "NaN" : e.val() : (c = b.hasAttribute("contenteditable") ? e.text() : e.val(), "file" === f ? "C:\\fakepath\\" === c.substr(0, 12) ? c.substr(12) : (d = c.lastIndexOf("/"), d >= 0 ? c.substr(d + 1) : (d = c.lastIndexOf("\\"), d >= 0 ? c.substr(d + 1) : c)) : "string" == typeof c ? c.replace(/\r/g, "") : c) }, check: function (b) { b = this.validationTargetFor(this.clean(b)); var c, d, e, f, g = a(b).rules(), h = a.map(g, function (a, b) { return b }).length, i = !1, j = this.elementValue(b); if ("function" == typeof g.normalizer ? f = g.normalizer : "function" == typeof this.settings.normalizer && (f = this.settings.normalizer), f) { if (j = f.call(b, j), "string" != typeof j) throw new TypeError("The normalizer should return a string value."); delete g.normalizer } for (d in g) { e = { method: d, parameters: g[d] }; try { if (c = a.validator.methods[d].call(this, j, b, e.parameters), "dependency-mismatch" === c && 1 === h) { i = !0; continue } if (i = !1, "pending" === c) return void (this.toHide = this.toHide.not(this.errorsFor(b))); if (!c) return this.formatAndAdd(b, e), !1 } catch (k) { throw this.settings.debug && window.console && console.log("Exception occurred when checking element " + b.id + ", check the '" + e.method + "' method.", k), k instanceof TypeError && (k.message += ".  Exception occurred when checking element " + b.id + ", check the '" + e.method + "' method."), k } } if (!i) return this.objectLength(g) && this.successList.push(b), !0 }, customDataMessage: function (b, c) { return a(b).data("msg" + c.charAt(0).toUpperCase() + c.substring(1).toLowerCase()) || a(b).data("msg") }, customMessage: function (a, b) { var c = this.settings.messages[a]; return c && (c.constructor === String ? c : c[b]) }, findDefined: function () { for (var a = 0; a < arguments.length; a++)if (void 0 !== arguments[a]) return arguments[a] }, defaultMessage: function (b, c) { "string" == typeof c && (c = { method: c }); var d = this.findDefined(this.customMessage(b.name, c.method), this.customDataMessage(b, c.method), !this.settings.ignoreTitle && b.title || void 0, a.validator.messages[c.method], "<strong>Warning: No message defined for " + b.name + "</strong>"), e = /\$?\{(\d+)\}/g; return "function" == typeof d ? d = d.call(this, c.parameters, b) : e.test(d) && (d = a.validator.format(d.replace(e, "{$1}"), c.parameters)), d }, formatAndAdd: function (a, b) { var c = this.defaultMessage(a, b); this.errorList.push({ message: c, element: a, method: b.method }), this.errorMap[a.name] = c, this.submitted[a.name] = c }, addWrapper: function (a) { return this.settings.wrapper && (a = a.add(a.parent(this.settings.wrapper))), a }, defaultShowErrors: function () { var a, b, c; for (a = 0; this.errorList[a]; a++)c = this.errorList[a], this.settings.highlight && this.settings.highlight.call(this, c.element, this.settings.errorClass, this.settings.validClass), this.showLabel(c.element, c.message); if (this.errorList.length && (this.toShow = this.toShow.add(this.containers)), this.settings.success) for (a = 0; this.successList[a]; a++)this.showLabel(this.successList[a]); if (this.settings.unhighlight) for (a = 0, b = this.validElements(); b[a]; a++)this.settings.unhighlight.call(this, b[a], this.settings.errorClass, this.settings.validClass); this.toHide = this.toHide.not(this.toShow), this.hideErrors(), this.addWrapper(this.toShow).show() }, validElements: function () { return this.currentElements.not(this.invalidElements()) }, invalidElements: function () { return a(this.errorList).map(function () { return this.element }) }, showLabel: function (b, c) { var d, e, f, g, h = this.errorsFor(b), i = this.idOrName(b), j = a(b).attr("aria-describedby"); h.length ? (h.removeClass(this.settings.validClass).addClass(this.settings.errorClass), h.html(c)) : (h = a("<" + this.settings.errorElement + ">").attr("id", i + "-error").addClass(this.settings.errorClass).html(c || ""), d = h, this.settings.wrapper && (d = h.hide().show().wrap("<" + this.settings.wrapper + "/>").parent()), this.labelContainer.length ? this.labelContainer.append(d) : this.settings.errorPlacement ? this.settings.errorPlacement.call(this, d, a(b)) : d.insertAfter(b), h.is("label") ? h.attr("for", i) : 0 === h.parents("label[for='" + this.escapeCssMeta(i) + "']").length && (f = h.attr("id"), j ? j.match(new RegExp("\\b" + this.escapeCssMeta(f) + "\\b")) || (j += " " + f) : j = f, a(b).attr("aria-describedby", j), e = this.groups[b.name], e && (g = this, a.each(g.groups, function (b, c) { c === e && a("[name='" + g.escapeCssMeta(b) + "']", g.currentForm).attr("aria-describedby", h.attr("id")) })))), !c && this.settings.success && (h.text(""), "string" == typeof this.settings.success ? h.addClass(this.settings.success) : this.settings.success(h, b)), this.toShow = this.toShow.add(h) }, errorsFor: function (b) { var c = this.escapeCssMeta(this.idOrName(b)), d = a(b).attr("aria-describedby"), e = "label[for='" + c + "'], label[for='" + c + "'] *"; return d && (e = e + ", #" + this.escapeCssMeta(d).replace(/\s+/g, ", #")), this.errors().filter(e) }, escapeCssMeta: function (a) { return a.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g, "\\$1") }, idOrName: function (a) { return this.groups[a.name] || (this.checkable(a) ? a.name : a.id || a.name) }, validationTargetFor: function (b) { return this.checkable(b) && (b = this.findByName(b.name)), a(b).not(this.settings.ignore)[0] }, checkable: function (a) { return /radio|checkbox/i.test(a.type) }, findByName: function (b) { return a(this.currentForm).find("[name='" + this.escapeCssMeta(b) + "']") }, getLength: function (b, c) { switch (c.nodeName.toLowerCase()) { case "select": return a("option:selected", c).length; case "input": if (this.checkable(c)) return this.findByName(c.name).filter(":checked").length }return b.length }, depend: function (a, b) { return !this.dependTypes[typeof a] || this.dependTypes[typeof a](a, b) }, dependTypes: { "boolean": function (a) { return a }, string: function (b, c) { return !!a(b, c.form).length }, "function": function (a, b) { return a(b) } }, optional: function (b) { var c = this.elementValue(b); return !a.validator.methods.required.call(this, c, b) && "dependency-mismatch" }, startRequest: function (b) { this.pending[b.name] || (this.pendingRequest++ , a(b).addClass(this.settings.pendingClass), this.pending[b.name] = !0) }, stopRequest: function (b, c) { this.pendingRequest-- , this.pendingRequest < 0 && (this.pendingRequest = 0), delete this.pending[b.name], a(b).removeClass(this.settings.pendingClass), c && 0 === this.pendingRequest && this.formSubmitted && this.form() ? (a(this.currentForm).submit(), this.submitButton && a("input:hidden[name='" + this.submitButton.name + "']", this.currentForm).remove(), this.formSubmitted = !1) : !c && 0 === this.pendingRequest && this.formSubmitted && (a(this.currentForm).triggerHandler("invalid-form", [this]), this.formSubmitted = !1) }, previousValue: function (b, c) { return c = "string" == typeof c && c || "remote", a.data(b, "previousValue") || a.data(b, "previousValue", { old: null, valid: !0, message: this.defaultMessage(b, { method: c }) }) }, destroy: function () { this.resetForm(), a(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur") } }, classRuleSettings: { required: { required: !0 }, email: { email: !0 }, url: { url: !0 }, date: { date: !0 }, dateISO: { dateISO: !0 }, number: { number: !0 }, digits: { digits: !0 }, creditcard: { creditcard: !0 } }, addClassRules: function (b, c) { b.constructor === String ? this.classRuleSettings[b] = c : a.extend(this.classRuleSettings, b) }, classRules: function (b) { var c = {}, d = a(b).attr("class"); return d && a.each(d.split(" "), function () { this in a.validator.classRuleSettings && a.extend(c, a.validator.classRuleSettings[this]) }), c }, normalizeAttributeRule: function (a, b, c, d) { /min|max|step/.test(c) && (null === b || /number|range|text/.test(b)) && (d = Number(d), isNaN(d) && (d = void 0)), d || 0 === d ? a[c] = d : b === c && "range" !== b && (a[c] = !0) }, attributeRules: function (b) { var c, d, e = {}, f = a(b), g = b.getAttribute("type"); for (c in a.validator.methods) "required" === c ? (d = b.getAttribute(c), "" === d && (d = !0), d = !!d) : d = f.attr(c), this.normalizeAttributeRule(e, g, c, d); return e.maxlength && /-1|2147483647|524288/.test(e.maxlength) && delete e.maxlength, e }, dataRules: function (b) { var c, d, e = {}, f = a(b), g = b.getAttribute("type"); for (c in a.validator.methods) d = f.data("rule" + c.charAt(0).toUpperCase() + c.substring(1).toLowerCase()), this.normalizeAttributeRule(e, g, c, d); return e }, staticRules: function (b) { var c = {}, d = a.data(b.form, "validator"); return d.settings.rules && (c = a.validator.normalizeRule(d.settings.rules[b.name]) || {}), c }, normalizeRules: function (b, c) { return a.each(b, function (d, e) { if (e === !1) return void delete b[d]; if (e.param || e.depends) { var f = !0; switch (typeof e.depends) { case "string": f = !!a(e.depends, c.form).length; break; case "function": f = e.depends.call(c, c) }f ? b[d] = void 0 === e.param || e.param : (a.data(c.form, "validator").resetElements(a(c)), delete b[d]) } }), a.each(b, function (d, e) { b[d] = a.isFunction(e) && "normalizer" !== d ? e(c) : e }), a.each(["minlength", "maxlength"], function () { b[this] && (b[this] = Number(b[this])) }), a.each(["rangelength", "range"], function () { var c; b[this] && (a.isArray(b[this]) ? b[this] = [Number(b[this][0]), Number(b[this][1])] : "string" == typeof b[this] && (c = b[this].replace(/[\[\]]/g, "").split(/[\s,]+/), b[this] = [Number(c[0]), Number(c[1])])) }), a.validator.autoCreateRanges && (null != b.min && null != b.max && (b.range = [b.min, b.max], delete b.min, delete b.max), null != b.minlength && null != b.maxlength && (b.rangelength = [b.minlength, b.maxlength], delete b.minlength, delete b.maxlength)), b }, normalizeRule: function (b) { if ("string" == typeof b) { var c = {}; a.each(b.split(/\s/), function () { c[this] = !0 }), b = c } return b }, addMethod: function (b, c, d) { a.validator.methods[b] = c, a.validator.messages[b] = void 0 !== d ? d : a.validator.messages[b], c.length < 3 && a.validator.addClassRules(b, a.validator.normalizeRule(b)) }, methods: { required: function (b, c, d) { if (!this.depend(d, c)) return "dependency-mismatch"; if ("select" === c.nodeName.toLowerCase()) { var e = a(c).val(); return e && e.length > 0 } return this.checkable(c) ? this.getLength(b, c) > 0 : b.length > 0 }, email: function (a, b) { return this.optional(b) || /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a) }, url: function (a, b) { return this.optional(b) || /^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(a) }, date: function (a, b) { return this.optional(b) || !/Invalid|NaN/.test(new Date(a).toString()) }, dateISO: function (a, b) { return this.optional(b) || /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a) }, number: function (a, b) { return this.optional(b) || /^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a) }, digits: function (a, b) { return this.optional(b) || /^\d+$/.test(a) }, minlength: function (b, c, d) { var e = a.isArray(b) ? b.length : this.getLength(b, c); return this.optional(c) || e >= d }, maxlength: function (b, c, d) { var e = a.isArray(b) ? b.length : this.getLength(b, c); return this.optional(c) || e <= d }, rangelength: function (b, c, d) { var e = a.isArray(b) ? b.length : this.getLength(b, c); return this.optional(c) || e >= d[0] && e <= d[1] }, min: function (a, b, c) { return this.optional(b) || a >= c }, max: function (a, b, c) { return this.optional(b) || a <= c }, range: function (a, b, c) { return this.optional(b) || a >= c[0] && a <= c[1] }, step: function (b, c, d) { var e, f = a(c).attr("type"), g = "Step attribute on input type " + f + " is not supported.", h = ["text", "number", "range"], i = new RegExp("\\b" + f + "\\b"), j = f && !i.test(h.join()), k = function (a) { var b = ("" + a).match(/(?:\.(\d+))?$/); return b && b[1] ? b[1].length : 0 }, l = function (a) { return Math.round(a * Math.pow(10, e)) }, m = !0; if (j) throw new Error(g); return e = k(d), (k(b) > e || l(b) % l(d) !== 0) && (m = !1), this.optional(c) || m }, equalTo: function (b, c, d) { var e = a(d); return this.settings.onfocusout && e.not(".validate-equalTo-blur").length && e.addClass("validate-equalTo-blur").on("blur.validate-equalTo", function () { a(c).valid() }), b === e.val() }, remote: function (b, c, d, e) { if (this.optional(c)) return "dependency-mismatch"; e = "string" == typeof e && e || "remote"; var f, g, h, i = this.previousValue(c, e); return this.settings.messages[c.name] || (this.settings.messages[c.name] = {}), i.originalMessage = i.originalMessage || this.settings.messages[c.name][e], this.settings.messages[c.name][e] = i.message, d = "string" == typeof d && { url: d } || d, h = a.param(a.extend({ data: b }, d.data)), i.old === h ? i.valid : (i.old = h, f = this, this.startRequest(c), g = {}, g[c.name] = b, a.ajax(a.extend(!0, { mode: "abort", port: "validate" + c.name, dataType: "json", data: g, context: f.currentForm, success: function (a) { var d, g, h, j = a === !0 || "true" === a; f.settings.messages[c.name][e] = i.originalMessage, j ? (h = f.formSubmitted, f.resetInternals(), f.toHide = f.errorsFor(c), f.formSubmitted = h, f.successList.push(c), f.invalid[c.name] = !1, f.showErrors()) : (d = {}, g = a || f.defaultMessage(c, { method: e, parameters: b }), d[c.name] = i.message = g, f.invalid[c.name] = !0, f.showErrors(d)), i.valid = j, f.stopRequest(c, j) } }, d)), "pending") } } }); var b, c = {}; return a.ajaxPrefilter ? a.ajaxPrefilter(function (a, b, d) { var e = a.port; "abort" === a.mode && (c[e] && c[e].abort(), c[e] = d) }) : (b = a.ajax, a.ajax = function (d) { var e = ("mode" in d ? d : a.ajaxSettings).mode, f = ("port" in d ? d : a.ajaxSettings).port; return "abort" === e ? (c[f] && c[f].abort(), c[f] = b.apply(this, arguments), c[f]) : b.apply(this, arguments) }), a });
/*! jQuery & Zepto Lazy v1.7.6 - http://jquery.eisbehr.de/lazy - MIT&GPL-2.0 license - Copyright 2012-2017 Daniel 'Eisbehr' Kern */
!function (t, e) { "use strict"; function r(r, a, i, u, l) { function f() { L = t.devicePixelRatio > 1, i = c(i), a.delay >= 0 && setTimeout(function () { s(!0) }, a.delay), (a.delay < 0 || a.combined) && (u.e = v(a.throttle, function (t) { "resize" === t.type && (w = B = -1), s(t.all) }), u.a = function (t) { t = c(t), i.push.apply(i, t) }, u.g = function () { return i = n(i).filter(function () { return !n(this).data(a.loadedName) }) }, u.f = function (t) { for (var e = 0; e < t.length; e++) { var r = i.filter(function () { return this === t[e] }); r.length && s(!1, r) } }, s(), n(a.appendScroll).on("scroll." + l + " resize." + l, u.e)) } function c(t) { var i = a.defaultImage, o = a.placeholder, u = a.imageBase, l = a.srcsetAttribute, f = a.loaderAttribute, c = a._f || {}; t = n(t).filter(function () { var t = n(this), r = m(this); return !t.data(a.handledName) && (t.attr(a.attribute) || t.attr(l) || t.attr(f) || c[r] !== e) }).data("plugin_" + a.name, r); for (var s = 0, d = t.length; s < d; s++) { var A = n(t[s]), g = m(t[s]), h = A.attr(a.imageBaseAttribute) || u; g === N && h && A.attr(l) && A.attr(l, b(A.attr(l), h)), c[g] === e || A.attr(f) || A.attr(f, c[g]), g === N && i && !A.attr(E) ? A.attr(E, i) : g === N || !o || A.css(O) && "none" !== A.css(O) || A.css(O, "url('" + o + "')") } return t } function s(t, e) { if (!i.length) return void (a.autoDestroy && r.destroy()); for (var o = e || i, u = !1, l = a.imageBase || "", f = a.srcsetAttribute, c = a.handledName, s = 0; s < o.length; s++)if (t || e || A(o[s])) { var g = n(o[s]), h = m(o[s]), b = g.attr(a.attribute), v = g.attr(a.imageBaseAttribute) || l, p = g.attr(a.loaderAttribute); g.data(c) || a.visibleOnly && !g.is(":visible") || !((b || g.attr(f)) && (h === N && (v + b !== g.attr(E) || g.attr(f) !== g.attr(F)) || h !== N && v + b !== g.css(O)) || p) || (u = !0, g.data(c, !0), d(g, h, v, p)) } u && (i = n(i).filter(function () { return !n(this).data(c) })) } function d(t, e, r, i) { ++z; var o = function () { y("onError", t), p(), o = n.noop }; y("beforeLoad", t); var u = a.attribute, l = a.srcsetAttribute, f = a.sizesAttribute, c = a.retinaAttribute, s = a.removeAttribute, d = a.loadedName, A = t.attr(c); if (i) { var g = function () { s && t.removeAttr(a.loaderAttribute), t.data(d, !0), y(T, t), setTimeout(p, 1), g = n.noop }; t.off(I).one(I, o).one(D, g), y(i, t, function (e) { e ? (t.off(D), g()) : (t.off(I), o()) }) || t.trigger(I) } else { var h = n(new Image); h.one(I, o).one(D, function () { t.hide(), e === N ? t.attr(C, h.attr(C)).attr(F, h.attr(F)).attr(E, h.attr(E)) : t.css(O, "url('" + h.attr(E) + "')"), t[a.effect](a.effectTime), s && (t.removeAttr(u + " " + l + " " + c + " " + a.imageBaseAttribute), f !== C && t.removeAttr(f)), t.data(d, !0), y(T, t), h.remove(), p() }); var m = (L && A ? A : t.attr(u)) || ""; h.attr(C, t.attr(f)).attr(F, t.attr(l)).attr(E, m ? r + m : null), h.complete && h.trigger(D) } } function A(t) { var e = t.getBoundingClientRect(), r = a.scrollDirection, n = a.threshold, i = h() + n > e.top && -n < e.bottom, o = g() + n > e.left && -n < e.right; return "vertical" === r ? i : "horizontal" === r ? o : i && o } function g() { return w >= 0 ? w : w = n(t).width() } function h() { return B >= 0 ? B : B = n(t).height() } function m(t) { return t.tagName.toLowerCase() } function b(t, e) { if (e) { var r = t.split(","); t = ""; for (var a = 0, n = r.length; a < n; a++)t += e + r[a].trim() + (a !== n - 1 ? "," : "") } return t } function v(t, e) { var n, i = 0; return function (o, u) { function l() { i = +new Date, e.call(r, o) } var f = +new Date - i; n && clearTimeout(n), f > t || !a.enableThrottle || u ? l() : n = setTimeout(l, t - f) } } function p() { --z, i.length || z || y("onFinishedAll") } function y(t, e, n) { return !!(t = a[t]) && (t.apply(r, [].slice.call(arguments, 1)), !0) } var z = 0, w = -1, B = -1, L = !1, T = "afterLoad", D = "load", I = "error", N = "img", E = "src", F = "srcset", C = "sizes", O = "background-image"; "event" === a.bind || o ? f() : n(t).on(D + "." + l, f) } function a(a, o) { var u = this, l = n.extend({}, u.config, o), f = {}, c = l.name + "-" + ++i; return u.config = function (t, r) { return r === e ? l[t] : (l[t] = r, u) }, u.addItems = function (t) { return f.a && f.a("string" === n.type(t) ? n(t) : t), u }, u.getItems = function () { return f.g ? f.g() : {} }, u.update = function (t) { return f.e && f.e({}, !t), u }, u.force = function (t) { return f.f && f.f("string" === n.type(t) ? n(t) : t), u }, u.loadAll = function () { return f.e && f.e({ all: !0 }, !0), u }, u.destroy = function () { return n(l.appendScroll).off("." + c, f.e), n(t).off("." + c), f = {}, e }, r(u, l, a, f, c), l.chainable ? a : u } var n = t.jQuery || t.Zepto, i = 0, o = !1; n.fn.Lazy = n.fn.lazy = function (t) { return new a(this, t) }, n.Lazy = n.lazy = function (t, r, i) { if (n.isFunction(r) && (i = r, r = []), n.isFunction(i)) { t = n.isArray(t) ? t : [t], r = n.isArray(r) ? r : [r]; for (var o = a.prototype.config, u = o._f || (o._f = {}), l = 0, f = t.length; l < f; l++)(o[t[l]] === e || n.isFunction(o[t[l]])) && (o[t[l]] = i); for (var c = 0, s = r.length; c < s; c++)u[r[c]] = t[0] } }, a.prototype.config = { name: "lazy", chainable: !0, autoDestroy: !0, bind: "load", threshold: 500, visibleOnly: !1, appendScroll: t, scrollDirection: "both", imageBase: null, defaultImage: "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==", placeholder: null, delay: -1, combined: !1, attribute: "data-src", srcsetAttribute: "data-srcset", sizesAttribute: "data-sizes", retinaAttribute: "data-retina", loaderAttribute: "data-loader", imageBaseAttribute: "data-imagebase", removeAttribute: !0, handledName: "handled", loadedName: "loaded", effect: "show", effectTime: 0, enableThrottle: !0, throttle: 250, beforeLoad: e, afterLoad: e, onError: e, onFinishedAll: e }, n(t).on("load", function () { o = !0 }) }(window);
/*! tooltipster v4.2.5 */!function (a, b) { "function" == typeof define && define.amd ? define(["jquery"], function (a) { return b(a) }) : "object" == typeof exports ? module.exports = b(require("jquery")) : b(jQuery) }(this, function (a) {
    function b(a) { this.$container, this.constraints = null, this.__$tooltip, this.__init(a) } function c(b, c) { var d = !0; return a.each(b, function (a, e) { return void 0 === c[a] || b[a] !== c[a] ? (d = !1, !1) : void 0 }), d } function d(b) { var c = b.attr("id"), d = c ? h.window.document.getElementById(c) : null; return d ? d === b[0] : a.contains(h.window.document.body, b[0]) } function e() { if (!g) return !1; var a = g.document.body || g.document.documentElement, b = a.style, c = "transition", d = ["Moz", "Webkit", "Khtml", "O", "ms"]; if ("string" == typeof b[c]) return !0; c = c.charAt(0).toUpperCase() + c.substr(1); for (var e = 0; e < d.length; e++)if ("string" == typeof b[d[e] + c]) return !0; return !1 } var f = { animation: "fade", animationDuration: 350, content: null, contentAsHTML: !1, contentCloning: !1, debug: !0, delay: 300, delayTouch: [300, 500], functionInit: null, functionBefore: null, functionReady: null, functionAfter: null, functionFormat: null, IEmin: 6, interactive: !1, multiple: !1, parent: null, plugins: ["sideTip"], repositionOnScroll: !1, restoration: "none", selfDestruction: !0, theme: [], timer: 0, trackerInterval: 500, trackOrigin: !1, trackTooltip: !1, trigger: "hover", triggerClose: { click: !1, mouseleave: !1, originClick: !1, scroll: !1, tap: !1, touchleave: !1 }, triggerOpen: { click: !1, mouseenter: !1, tap: !1, touchstart: !1 }, updateAnimation: "rotate", zIndex: 9999999 }, g = "undefined" != typeof window ? window : null, h = { hasTouchCapability: !(!g || !("ontouchstart" in g || g.DocumentTouch && g.document instanceof g.DocumentTouch || g.navigator.maxTouchPoints)), hasTransitions: e(), IE: !1, semVer: "4.2.5", window: g }, i = function () { this.__$emitterPrivate = a({}), this.__$emitterPublic = a({}), this.__instancesLatestArr = [], this.__plugins = {}, this._env = h }; i.prototype = { __bridge: function (b, c, d) { if (!c[d]) { var e = function () { }; e.prototype = b; var g = new e; g.__init && g.__init(c), a.each(b, function (a, b) { 0 != a.indexOf("__") && (c[a] ? f.debug && console.log("The " + a + " method of the " + d + " plugin conflicts with another plugin or native methods") : (c[a] = function () { return g[a].apply(g, Array.prototype.slice.apply(arguments)) }, c[a].bridged = g)) }), c[d] = g } return this }, __setWindow: function (a) { return h.window = a, this }, _getRuler: function (a) { return new b(a) }, _off: function () { return this.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this }, _on: function () { return this.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this }, _one: function () { return this.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this }, _plugin: function (b) { var c = this; if ("string" == typeof b) { var d = b, e = null; return d.indexOf(".") > 0 ? e = c.__plugins[d] : a.each(c.__plugins, function (a, b) { return b.name.substring(b.name.length - d.length - 1) == "." + d ? (e = b, !1) : void 0 }), e } if (b.name.indexOf(".") < 0) throw new Error("Plugins must be namespaced"); return c.__plugins[b.name] = b, b.core && c.__bridge(b.core, c, b.name), this }, _trigger: function () { var a = Array.prototype.slice.apply(arguments); return "string" == typeof a[0] && (a[0] = { type: a[0] }), this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, a), this.__$emitterPublic.trigger.apply(this.__$emitterPublic, a), this }, instances: function (b) { var c = [], d = b || ".tooltipstered"; return a(d).each(function () { var b = a(this), d = b.data("tooltipster-ns"); d && a.each(d, function (a, d) { c.push(b.data(d)) }) }), c }, instancesLatest: function () { return this.__instancesLatestArr }, off: function () { return this.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this }, on: function () { return this.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this }, one: function () { return this.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this }, origins: function (b) { var c = b ? b + " " : ""; return a(c + ".tooltipstered").toArray() }, setDefaults: function (b) { return a.extend(f, b), this }, triggerHandler: function () { return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this } }, a.tooltipster = new i, a.Tooltipster = function (b, c) { this.__callbacks = { close: [], open: [] }, this.__closingTime, this.__Content, this.__contentBcr, this.__destroyed = !1, this.__$emitterPrivate = a({}), this.__$emitterPublic = a({}), this.__enabled = !0, this.__garbageCollector, this.__Geometry, this.__lastPosition, this.__namespace = "tooltipster-" + Math.round(1e6 * Math.random()), this.__options, this.__$originParents, this.__pointerIsOverOrigin = !1, this.__previousThemes = [], this.__state = "closed", this.__timeouts = { close: [], open: null }, this.__touchEvents = [], this.__tracker = null, this._$origin, this._$tooltip, this.__init(b, c) }, a.Tooltipster.prototype = { __init: function (b, c) { var d = this; if (d._$origin = a(b), d.__options = a.extend(!0, {}, f, c), d.__optionsFormat(), !h.IE || h.IE >= d.__options.IEmin) { var e = null; if (void 0 === d._$origin.data("tooltipster-initialTitle") && (e = d._$origin.attr("title"), void 0 === e && (e = null), d._$origin.data("tooltipster-initialTitle", e)), null !== d.__options.content) d.__contentSet(d.__options.content); else { var g, i = d._$origin.attr("data-tooltip-content"); i && (g = a(i)), g && g[0] ? d.__contentSet(g.first()) : d.__contentSet(e) } d._$origin.removeAttr("title").addClass("tooltipstered"), d.__prepareOrigin(), d.__prepareGC(), a.each(d.__options.plugins, function (a, b) { d._plug(b) }), h.hasTouchCapability && a(h.window.document.body).on("touchmove." + d.__namespace + "-triggerOpen", function (a) { d._touchRecordEvent(a) }), d._on("created", function () { d.__prepareTooltip() })._on("repositioned", function (a) { d.__lastPosition = a.position }) } else d.__options.disabled = !0 }, __contentInsert: function () { var a = this, b = a._$tooltip.find(".tooltipster-content"), c = a.__Content, d = function (a) { c = a }; return a._trigger({ type: "format", content: a.__Content, format: d }), a.__options.functionFormat && (c = a.__options.functionFormat.call(a, a, { origin: a._$origin[0] }, a.__Content)), "string" != typeof c || a.__options.contentAsHTML ? b.empty().append(c) : b.text(c), a }, __contentSet: function (b) { return b instanceof a && this.__options.contentCloning && (b = b.clone(!0)), this.__Content = b, this._trigger({ type: "updated", content: b }), this }, __destroyError: function () { throw new Error("This tooltip has been destroyed and cannot execute your method call.") }, __geometry: function () { var b = this, c = b._$origin, d = b._$origin.is("area"); if (d) { var e = b._$origin.parent().attr("name"); c = a('img[usemap="#' + e + '"]') } var f = c[0].getBoundingClientRect(), g = a(h.window.document), i = a(h.window), j = c, k = { available: { document: null, window: null }, document: { size: { height: g.height(), width: g.width() } }, window: { scroll: { left: h.window.scrollX || h.window.document.documentElement.scrollLeft, top: h.window.scrollY || h.window.document.documentElement.scrollTop }, size: { height: i.height(), width: i.width() } }, origin: { fixedLineage: !1, offset: {}, size: { height: f.bottom - f.top, width: f.right - f.left }, usemapImage: d ? c[0] : null, windowOffset: { bottom: f.bottom, left: f.left, right: f.right, top: f.top } } }; if (d) { var l = b._$origin.attr("shape"), m = b._$origin.attr("coords"); if (m && (m = m.split(","), a.map(m, function (a, b) { m[b] = parseInt(a) })), "default" != l) switch (l) { case "circle": var n = m[0], o = m[1], p = m[2], q = o - p, r = n - p; k.origin.size.height = 2 * p, k.origin.size.width = k.origin.size.height, k.origin.windowOffset.left += r, k.origin.windowOffset.top += q; break; case "rect": var s = m[0], t = m[1], u = m[2], v = m[3]; k.origin.size.height = v - t, k.origin.size.width = u - s, k.origin.windowOffset.left += s, k.origin.windowOffset.top += t; break; case "poly": for (var w = 0, x = 0, y = 0, z = 0, A = "even", B = 0; B < m.length; B++) { var C = m[B]; "even" == A ? (C > y && (y = C, 0 === B && (w = y)), w > C && (w = C), A = "odd") : (C > z && (z = C, 1 == B && (x = z)), x > C && (x = C), A = "even") } k.origin.size.height = z - x, k.origin.size.width = y - w, k.origin.windowOffset.left += w, k.origin.windowOffset.top += x } } var D = function (a) { k.origin.size.height = a.height, k.origin.windowOffset.left = a.left, k.origin.windowOffset.top = a.top, k.origin.size.width = a.width }; for (b._trigger({ type: "geometry", edit: D, geometry: { height: k.origin.size.height, left: k.origin.windowOffset.left, top: k.origin.windowOffset.top, width: k.origin.size.width } }), k.origin.windowOffset.right = k.origin.windowOffset.left + k.origin.size.width, k.origin.windowOffset.bottom = k.origin.windowOffset.top + k.origin.size.height, k.origin.offset.left = k.origin.windowOffset.left + k.window.scroll.left, k.origin.offset.top = k.origin.windowOffset.top + k.window.scroll.top, k.origin.offset.bottom = k.origin.offset.top + k.origin.size.height, k.origin.offset.right = k.origin.offset.left + k.origin.size.width, k.available.document = { bottom: { height: k.document.size.height - k.origin.offset.bottom, width: k.document.size.width }, left: { height: k.document.size.height, width: k.origin.offset.left }, right: { height: k.document.size.height, width: k.document.size.width - k.origin.offset.right }, top: { height: k.origin.offset.top, width: k.document.size.width } }, k.available.window = { bottom: { height: Math.max(k.window.size.height - Math.max(k.origin.windowOffset.bottom, 0), 0), width: k.window.size.width }, left: { height: k.window.size.height, width: Math.max(k.origin.windowOffset.left, 0) }, right: { height: k.window.size.height, width: Math.max(k.window.size.width - Math.max(k.origin.windowOffset.right, 0), 0) }, top: { height: Math.max(k.origin.windowOffset.top, 0), width: k.window.size.width } }; "html" != j[0].tagName.toLowerCase();) { if ("fixed" == j.css("position")) { k.origin.fixedLineage = !0; break } j = j.parent() } return k }, __optionsFormat: function () { return "number" == typeof this.__options.animationDuration && (this.__options.animationDuration = [this.__options.animationDuration, this.__options.animationDuration]), "number" == typeof this.__options.delay && (this.__options.delay = [this.__options.delay, this.__options.delay]), "number" == typeof this.__options.delayTouch && (this.__options.delayTouch = [this.__options.delayTouch, this.__options.delayTouch]), "string" == typeof this.__options.theme && (this.__options.theme = [this.__options.theme]), null === this.__options.parent ? this.__options.parent = a(h.window.document.body) : "string" == typeof this.__options.parent && (this.__options.parent = a(this.__options.parent)), "hover" == this.__options.trigger ? (this.__options.triggerOpen = { mouseenter: !0, touchstart: !0 }, this.__options.triggerClose = { mouseleave: !0, originClick: !0, touchleave: !0 }) : "click" == this.__options.trigger && (this.__options.triggerOpen = { click: !0, tap: !0 }, this.__options.triggerClose = { click: !0, tap: !0 }), this._trigger("options"), this }, __prepareGC: function () { var b = this; return b.__options.selfDestruction ? b.__garbageCollector = setInterval(function () { var c = (new Date).getTime(); b.__touchEvents = a.grep(b.__touchEvents, function (a, b) { return c - a.time > 6e4 }), d(b._$origin) || b.close(function () { b.destroy() }) }, 2e4) : clearInterval(b.__garbageCollector), b }, __prepareOrigin: function () { var a = this; if (a._$origin.off("." + a.__namespace + "-triggerOpen"), h.hasTouchCapability && a._$origin.on("touchstart." + a.__namespace + "-triggerOpen touchend." + a.__namespace + "-triggerOpen touchcancel." + a.__namespace + "-triggerOpen", function (b) { a._touchRecordEvent(b) }), a.__options.triggerOpen.click || a.__options.triggerOpen.tap && h.hasTouchCapability) { var b = ""; a.__options.triggerOpen.click && (b += "click." + a.__namespace + "-triggerOpen "), a.__options.triggerOpen.tap && h.hasTouchCapability && (b += "touchend." + a.__namespace + "-triggerOpen"), a._$origin.on(b, function (b) { a._touchIsMeaningfulEvent(b) && a._open(b) }) } if (a.__options.triggerOpen.mouseenter || a.__options.triggerOpen.touchstart && h.hasTouchCapability) { var b = ""; a.__options.triggerOpen.mouseenter && (b += "mouseenter." + a.__namespace + "-triggerOpen "), a.__options.triggerOpen.touchstart && h.hasTouchCapability && (b += "touchstart." + a.__namespace + "-triggerOpen"), a._$origin.on(b, function (b) { !a._touchIsTouchEvent(b) && a._touchIsEmulatedEvent(b) || (a.__pointerIsOverOrigin = !0, a._openShortly(b)) }) } if (a.__options.triggerClose.mouseleave || a.__options.triggerClose.touchleave && h.hasTouchCapability) { var b = ""; a.__options.triggerClose.mouseleave && (b += "mouseleave." + a.__namespace + "-triggerOpen "), a.__options.triggerClose.touchleave && h.hasTouchCapability && (b += "touchend." + a.__namespace + "-triggerOpen touchcancel." + a.__namespace + "-triggerOpen"), a._$origin.on(b, function (b) { a._touchIsMeaningfulEvent(b) && (a.__pointerIsOverOrigin = !1) }) } return a }, __prepareTooltip: function () { var b = this, c = b.__options.interactive ? "auto" : ""; return b._$tooltip.attr("id", b.__namespace).css({ "pointer-events": c, zIndex: b.__options.zIndex }), a.each(b.__previousThemes, function (a, c) { b._$tooltip.removeClass(c) }), a.each(b.__options.theme, function (a, c) { b._$tooltip.addClass(c) }), b.__previousThemes = a.merge([], b.__options.theme), b }, __scrollHandler: function (b) { var c = this; if (c.__options.triggerClose.scroll) c._close(b); else if (d(c._$origin) && d(c._$tooltip)) { var e = null; if (b.target === h.window.document) c.__Geometry.origin.fixedLineage || c.__options.repositionOnScroll && c.reposition(b); else { e = c.__geometry(); var f = !1; if ("fixed" != c._$origin.css("position") && c.__$originParents.each(function (b, c) { var d = a(c), g = d.css("overflow-x"), h = d.css("overflow-y"); if ("visible" != g || "visible" != h) { var i = c.getBoundingClientRect(); if ("visible" != g && (e.origin.windowOffset.left < i.left || e.origin.windowOffset.right > i.right)) return f = !0, !1; if ("visible" != h && (e.origin.windowOffset.top < i.top || e.origin.windowOffset.bottom > i.bottom)) return f = !0, !1 } return "fixed" == d.css("position") ? !1 : void 0 }), f) c._$tooltip.css("visibility", "hidden"); else if (c._$tooltip.css("visibility", "visible"), c.__options.repositionOnScroll) c.reposition(b); else { var g = e.origin.offset.left - c.__Geometry.origin.offset.left, i = e.origin.offset.top - c.__Geometry.origin.offset.top; c._$tooltip.css({ left: c.__lastPosition.coord.left + g, top: c.__lastPosition.coord.top + i }) } } c._trigger({ type: "scroll", event: b, geo: e }) } return c }, __stateSet: function (a) { return this.__state = a, this._trigger({ type: "state", state: a }), this }, __timeoutsClear: function () { return clearTimeout(this.__timeouts.open), this.__timeouts.open = null, a.each(this.__timeouts.close, function (a, b) { clearTimeout(b) }), this.__timeouts.close = [], this }, __trackerStart: function () { var a = this, b = a._$tooltip.find(".tooltipster-content"); return a.__options.trackTooltip && (a.__contentBcr = b[0].getBoundingClientRect()), a.__tracker = setInterval(function () { if (d(a._$origin) && d(a._$tooltip)) { if (a.__options.trackOrigin) { var e = a.__geometry(), f = !1; c(e.origin.size, a.__Geometry.origin.size) && (a.__Geometry.origin.fixedLineage ? c(e.origin.windowOffset, a.__Geometry.origin.windowOffset) && (f = !0) : c(e.origin.offset, a.__Geometry.origin.offset) && (f = !0)), f || (a.__options.triggerClose.mouseleave ? a._close() : a.reposition()) } if (a.__options.trackTooltip) { var g = b[0].getBoundingClientRect(); g.height === a.__contentBcr.height && g.width === a.__contentBcr.width || (a.reposition(), a.__contentBcr = g) } } else a._close() }, a.__options.trackerInterval), a }, _close: function (b, c, d) { var e = this, f = !0; if (e._trigger({ type: "close", event: b, stop: function () { f = !1 } }), f || d) { c && e.__callbacks.close.push(c), e.__callbacks.open = [], e.__timeoutsClear(); var g = function () { a.each(e.__callbacks.close, function (a, c) { c.call(e, e, { event: b, origin: e._$origin[0] }) }), e.__callbacks.close = [] }; if ("closed" != e.__state) { var i = !0, j = new Date, k = j.getTime(), l = k + e.__options.animationDuration[1]; if ("disappearing" == e.__state && l > e.__closingTime && e.__options.animationDuration[1] > 0 && (i = !1), i) { e.__closingTime = l, "disappearing" != e.__state && e.__stateSet("disappearing"); var m = function () { clearInterval(e.__tracker), e._trigger({ type: "closing", event: b }), e._$tooltip.off("." + e.__namespace + "-triggerClose").removeClass("tooltipster-dying"), a(h.window).off("." + e.__namespace + "-triggerClose"), e.__$originParents.each(function (b, c) { a(c).off("scroll." + e.__namespace + "-triggerClose") }), e.__$originParents = null, a(h.window.document.body).off("." + e.__namespace + "-triggerClose"), e._$origin.off("." + e.__namespace + "-triggerClose"), e._off("dismissable"), e.__stateSet("closed"), e._trigger({ type: "after", event: b }), e.__options.functionAfter && e.__options.functionAfter.call(e, e, { event: b, origin: e._$origin[0] }), g() }; h.hasTransitions ? (e._$tooltip.css({ "-moz-animation-duration": e.__options.animationDuration[1] + "ms", "-ms-animation-duration": e.__options.animationDuration[1] + "ms", "-o-animation-duration": e.__options.animationDuration[1] + "ms", "-webkit-animation-duration": e.__options.animationDuration[1] + "ms", "animation-duration": e.__options.animationDuration[1] + "ms", "transition-duration": e.__options.animationDuration[1] + "ms" }), e._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"), e.__options.animationDuration[1] > 0 && e._$tooltip.delay(e.__options.animationDuration[1]), e._$tooltip.queue(m)) : e._$tooltip.stop().fadeOut(e.__options.animationDuration[1], m) } } else g() } return e }, _off: function () { return this.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this }, _on: function () { return this.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this }, _one: function () { return this.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this }, _open: function (b, c) { var e = this; if (!e.__destroying && d(e._$origin) && e.__enabled) { var f = !0; if ("closed" == e.__state && (e._trigger({ type: "before", event: b, stop: function () { f = !1 } }), f && e.__options.functionBefore && (f = e.__options.functionBefore.call(e, e, { event: b, origin: e._$origin[0] }))), f !== !1 && null !== e.__Content) { c && e.__callbacks.open.push(c), e.__callbacks.close = [], e.__timeoutsClear(); var g, i = function () { "stable" != e.__state && e.__stateSet("stable"), a.each(e.__callbacks.open, function (a, b) { b.call(e, e, { origin: e._$origin[0], tooltip: e._$tooltip[0] }) }), e.__callbacks.open = [] }; if ("closed" !== e.__state) g = 0, "disappearing" === e.__state ? (e.__stateSet("appearing"), h.hasTransitions ? (e._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"), e.__options.animationDuration[0] > 0 && e._$tooltip.delay(e.__options.animationDuration[0]), e._$tooltip.queue(i)) : e._$tooltip.stop().fadeIn(i)) : "stable" == e.__state && i(); else { if (e.__stateSet("appearing"), g = e.__options.animationDuration[0], e.__contentInsert(), e.reposition(b, !0), h.hasTransitions ? (e._$tooltip.addClass("tooltipster-" + e.__options.animation).addClass("tooltipster-initial").css({ "-moz-animation-duration": e.__options.animationDuration[0] + "ms", "-ms-animation-duration": e.__options.animationDuration[0] + "ms", "-o-animation-duration": e.__options.animationDuration[0] + "ms", "-webkit-animation-duration": e.__options.animationDuration[0] + "ms", "animation-duration": e.__options.animationDuration[0] + "ms", "transition-duration": e.__options.animationDuration[0] + "ms" }), setTimeout(function () { "closed" != e.__state && (e._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"), e.__options.animationDuration[0] > 0 && e._$tooltip.delay(e.__options.animationDuration[0]), e._$tooltip.queue(i)) }, 0)) : e._$tooltip.css("display", "none").fadeIn(e.__options.animationDuration[0], i), e.__trackerStart(), a(h.window).on("resize." + e.__namespace + "-triggerClose", function (b) { var c = a(document.activeElement); (c.is("input") || c.is("textarea")) && a.contains(e._$tooltip[0], c[0]) || e.reposition(b) }).on("scroll." + e.__namespace + "-triggerClose", function (a) { e.__scrollHandler(a) }), e.__$originParents = e._$origin.parents(), e.__$originParents.each(function (b, c) { a(c).on("scroll." + e.__namespace + "-triggerClose", function (a) { e.__scrollHandler(a) }) }), e.__options.triggerClose.mouseleave || e.__options.triggerClose.touchleave && h.hasTouchCapability) { e._on("dismissable", function (a) { a.dismissable ? a.delay ? (m = setTimeout(function () { e._close(a.event) }, a.delay), e.__timeouts.close.push(m)) : e._close(a) : clearTimeout(m) }); var j = e._$origin, k = "", l = "", m = null; e.__options.interactive && (j = j.add(e._$tooltip)), e.__options.triggerClose.mouseleave && (k += "mouseenter." + e.__namespace + "-triggerClose ", l += "mouseleave." + e.__namespace + "-triggerClose "), e.__options.triggerClose.touchleave && h.hasTouchCapability && (k += "touchstart." + e.__namespace + "-triggerClose", l += "touchend." + e.__namespace + "-triggerClose touchcancel." + e.__namespace + "-triggerClose"), j.on(l, function (a) { if (e._touchIsTouchEvent(a) || !e._touchIsEmulatedEvent(a)) { var b = "mouseleave" == a.type ? e.__options.delay : e.__options.delayTouch; e._trigger({ delay: b[1], dismissable: !0, event: a, type: "dismissable" }) } }).on(k, function (a) { !e._touchIsTouchEvent(a) && e._touchIsEmulatedEvent(a) || e._trigger({ dismissable: !1, event: a, type: "dismissable" }) }) } e.__options.triggerClose.originClick && e._$origin.on("click." + e.__namespace + "-triggerClose", function (a) { e._touchIsTouchEvent(a) || e._touchIsEmulatedEvent(a) || e._close(a) }), (e.__options.triggerClose.click || e.__options.triggerClose.tap && h.hasTouchCapability) && setTimeout(function () { if ("closed" != e.__state) { var b = "", c = a(h.window.document.body); e.__options.triggerClose.click && (b += "click." + e.__namespace + "-triggerClose "), e.__options.triggerClose.tap && h.hasTouchCapability && (b += "touchend." + e.__namespace + "-triggerClose"), c.on(b, function (b) { e._touchIsMeaningfulEvent(b) && (e._touchRecordEvent(b), e.__options.interactive && a.contains(e._$tooltip[0], b.target) || e._close(b)) }), e.__options.triggerClose.tap && h.hasTouchCapability && c.on("touchstart." + e.__namespace + "-triggerClose", function (a) { e._touchRecordEvent(a) }) } }, 0), e._trigger("ready"), e.__options.functionReady && e.__options.functionReady.call(e, e, { origin: e._$origin[0], tooltip: e._$tooltip[0] }) } if (e.__options.timer > 0) { var m = setTimeout(function () { e._close() }, e.__options.timer + g); e.__timeouts.close.push(m) } } } return e }, _openShortly: function (a) { var b = this, c = !0; if ("stable" != b.__state && "appearing" != b.__state && !b.__timeouts.open && (b._trigger({ type: "start", event: a, stop: function () { c = !1 } }), c)) { var d = 0 == a.type.indexOf("touch") ? b.__options.delayTouch : b.__options.delay; d[0] ? b.__timeouts.open = setTimeout(function () { b.__timeouts.open = null, b.__pointerIsOverOrigin && b._touchIsMeaningfulEvent(a) ? (b._trigger("startend"), b._open(a)) : b._trigger("startcancel") }, d[0]) : (b._trigger("startend"), b._open(a)) } return b }, _optionsExtract: function (b, c) { var d = this, e = a.extend(!0, {}, c), f = d.__options[b]; return f || (f = {}, a.each(c, function (a, b) { var c = d.__options[a]; void 0 !== c && (f[a] = c) })), a.each(e, function (b, c) { void 0 !== f[b] && ("object" != typeof c || c instanceof Array || null == c || "object" != typeof f[b] || f[b] instanceof Array || null == f[b] ? e[b] = f[b] : a.extend(e[b], f[b])) }), e }, _plug: function (b) { var c = a.tooltipster._plugin(b); if (!c) throw new Error('The "' + b + '" plugin is not defined'); return c.instance && a.tooltipster.__bridge(c.instance, this, c.name), this }, _touchIsEmulatedEvent: function (a) { for (var b = !1, c = (new Date).getTime(), d = this.__touchEvents.length - 1; d >= 0; d--) { var e = this.__touchEvents[d]; if (!(c - e.time < 500)) break; e.target === a.target && (b = !0) } return b }, _touchIsMeaningfulEvent: function (a) { return this._touchIsTouchEvent(a) && !this._touchSwiped(a.target) || !this._touchIsTouchEvent(a) && !this._touchIsEmulatedEvent(a) }, _touchIsTouchEvent: function (a) { return 0 == a.type.indexOf("touch") }, _touchRecordEvent: function (a) { return this._touchIsTouchEvent(a) && (a.time = (new Date).getTime(), this.__touchEvents.push(a)), this }, _touchSwiped: function (a) { for (var b = !1, c = this.__touchEvents.length - 1; c >= 0; c--) { var d = this.__touchEvents[c]; if ("touchmove" == d.type) { b = !0; break } if ("touchstart" == d.type && a === d.target) break } return b }, _trigger: function () { var b = Array.prototype.slice.apply(arguments); return "string" == typeof b[0] && (b[0] = { type: b[0] }), b[0].instance = this, b[0].origin = this._$origin ? this._$origin[0] : null, b[0].tooltip = this._$tooltip ? this._$tooltip[0] : null, this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, b), a.tooltipster._trigger.apply(a.tooltipster, b), this.__$emitterPublic.trigger.apply(this.__$emitterPublic, b), this }, _unplug: function (b) { var c = this; if (c[b]) { var d = a.tooltipster._plugin(b); d.instance && a.each(d.instance, function (a, d) { c[a] && c[a].bridged === c[b] && delete c[a] }), c[b].__destroy && c[b].__destroy(), delete c[b] } return c }, close: function (a) { return this.__destroyed ? this.__destroyError() : this._close(null, a), this }, content: function (a) { var b = this; if (void 0 === a) return b.__Content; if (b.__destroyed) b.__destroyError(); else if (b.__contentSet(a), null !== b.__Content) { if ("closed" !== b.__state && (b.__contentInsert(), b.reposition(), b.__options.updateAnimation)) if (h.hasTransitions) { var c = b.__options.updateAnimation; b._$tooltip.addClass("tooltipster-update-" + c), setTimeout(function () { "closed" != b.__state && b._$tooltip.removeClass("tooltipster-update-" + c) }, 1e3) } else b._$tooltip.fadeTo(200, .5, function () { "closed" != b.__state && b._$tooltip.fadeTo(200, 1) }) } else b._close(); return b }, destroy: function () { var b = this; if (b.__destroyed) b.__destroyError(); else { "closed" != b.__state ? b.option("animationDuration", 0)._close(null, null, !0) : b.__timeoutsClear(), b._trigger("destroy"), b.__destroyed = !0, b._$origin.removeData(b.__namespace).off("." + b.__namespace + "-triggerOpen"), a(h.window.document.body).off("." + b.__namespace + "-triggerOpen"); var c = b._$origin.data("tooltipster-ns"); if (c) if (1 === c.length) { var d = null; "previous" == b.__options.restoration ? d = b._$origin.data("tooltipster-initialTitle") : "current" == b.__options.restoration && (d = "string" == typeof b.__Content ? b.__Content : a("<div></div>").append(b.__Content).html()), d && b._$origin.attr("title", d), b._$origin.removeClass("tooltipstered"), b._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle") } else c = a.grep(c, function (a, c) { return a !== b.__namespace }), b._$origin.data("tooltipster-ns", c); b._trigger("destroyed"), b._off(), b.off(), b.__Content = null, b.__$emitterPrivate = null, b.__$emitterPublic = null, b.__options.parent = null, b._$origin = null, b._$tooltip = null, a.tooltipster.__instancesLatestArr = a.grep(a.tooltipster.__instancesLatestArr, function (a, c) { return b !== a }), clearInterval(b.__garbageCollector) } return b }, disable: function () { return this.__destroyed ? (this.__destroyError(), this) : (this._close(), this.__enabled = !1, this) }, elementOrigin: function () { return this.__destroyed ? void this.__destroyError() : this._$origin[0] }, elementTooltip: function () { return this._$tooltip ? this._$tooltip[0] : null }, enable: function () { return this.__enabled = !0, this }, hide: function (a) { return this.close(a) }, instance: function () { return this }, off: function () { return this.__destroyed || this.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this }, on: function () { return this.__destroyed ? this.__destroyError() : this.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this }, one: function () { return this.__destroyed ? this.__destroyError() : this.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this }, open: function (a) { return this.__destroyed ? this.__destroyError() : this._open(null, a), this }, option: function (b, c) { return void 0 === c ? this.__options[b] : (this.__destroyed ? this.__destroyError() : (this.__options[b] = c, this.__optionsFormat(), a.inArray(b, ["trigger", "triggerClose", "triggerOpen"]) >= 0 && this.__prepareOrigin(), "selfDestruction" === b && this.__prepareGC()), this) }, reposition: function (a, b) { var c = this; return c.__destroyed ? c.__destroyError() : "closed" != c.__state && d(c._$origin) && (b || d(c._$tooltip)) && (b || c._$tooltip.detach(), c.__Geometry = c.__geometry(), c._trigger({ type: "reposition", event: a, helper: { geo: c.__Geometry } })), c }, show: function (a) { return this.open(a) }, status: function () { return { destroyed: this.__destroyed, enabled: this.__enabled, open: "closed" !== this.__state, state: this.__state } }, triggerHandler: function () { return this.__destroyed ? this.__destroyError() : this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this } }, a.fn.tooltipster = function () { var b = Array.prototype.slice.apply(arguments), c = "You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE."; if (0 === this.length) return this; if ("string" == typeof b[0]) { var d = "#*$~&"; return this.each(function () { var e = a(this).data("tooltipster-ns"), f = e ? a(this).data(e[0]) : null; if (!f) throw new Error("You called Tooltipster's \"" + b[0] + '" method on an uninitialized element'); if ("function" != typeof f[b[0]]) throw new Error('Unknown method "' + b[0] + '"'); this.length > 1 && "content" == b[0] && (b[1] instanceof a || "object" == typeof b[1] && null != b[1] && b[1].tagName) && !f.__options.contentCloning && f.__options.debug && console.log(c); var g = f[b[0]](b[1], b[2]); return g !== f || "instance" === b[0] ? (d = g, !1) : void 0 }), "#*$~&" !== d ? d : this } a.tooltipster.__instancesLatestArr = []; var e = b[0] && void 0 !== b[0].multiple, g = e && b[0].multiple || !e && f.multiple, h = b[0] && void 0 !== b[0].content, i = h && b[0].content || !h && f.content, j = b[0] && void 0 !== b[0].contentCloning, k = j && b[0].contentCloning || !j && f.contentCloning, l = b[0] && void 0 !== b[0].debug, m = l && b[0].debug || !l && f.debug; return this.length > 1 && (i instanceof a || "object" == typeof i && null != i && i.tagName) && !k && m && console.log(c), this.each(function () { var c = !1, d = a(this), e = d.data("tooltipster-ns"), f = null; e ? g ? c = !0 : m && (console.log("Tooltipster: one or more tooltips are already attached to the element below. Ignoring."), console.log(this)) : c = !0, c && (f = new a.Tooltipster(this, b[0]), e || (e = []), e.push(f.__namespace), d.data("tooltipster-ns", e), d.data(f.__namespace, f), f.__options.functionInit && f.__options.functionInit.call(f, f, { origin: this }), f._trigger("init")), a.tooltipster.__instancesLatestArr.push(f) }), this }, b.prototype = { __init: function (b) { this.__$tooltip = b, this.__$tooltip.css({ left: 0, overflow: "hidden", position: "absolute", top: 0 }).find(".tooltipster-content").css("overflow", "auto"), this.$container = a('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo(h.window.document.body) }, __forceRedraw: function () { var a = this.__$tooltip.parent(); this.__$tooltip.detach(), this.__$tooltip.appendTo(a) }, constrain: function (a, b) { return this.constraints = { width: a, height: b }, this.__$tooltip.css({ display: "block", height: "", overflow: "auto", width: a }), this }, destroy: function () { this.__$tooltip.detach().find(".tooltipster-content").css({ display: "", overflow: "" }), this.$container.remove() }, free: function () { return this.constraints = null, this.__$tooltip.css({ display: "", height: "", overflow: "visible", width: "" }), this }, measure: function () { this.__forceRedraw(); var a = this.__$tooltip[0].getBoundingClientRect(), b = { size: { height: a.height || a.bottom - a.top, width: a.width || a.right - a.left } }; if (this.constraints) { var c = this.__$tooltip.find(".tooltipster-content"), d = this.__$tooltip.outerHeight(), e = c[0].getBoundingClientRect(), f = { height: d <= this.constraints.height, width: a.width <= this.constraints.width && e.width >= c[0].scrollWidth - 1 }; b.fits = f.height && f.width } return h.IE && h.IE <= 11 && b.size.width !== h.window.document.documentElement.clientWidth && (b.size.width = Math.ceil(b.size.width) + 1), b } }; var j = navigator.userAgent.toLowerCase(); -1 != j.indexOf("msie") ? h.IE = parseInt(j.split("msie")[1]) : -1 !== j.toLowerCase().indexOf("trident") && -1 !== j.indexOf(" rv:11") ? h.IE = 11 : -1 != j.toLowerCase().indexOf("edge/") && (h.IE = parseInt(j.toLowerCase().split("edge/")[1])); var k = "tooltipster.sideTip"; return a.tooltipster._plugin({
        name: k, instance: {
            __defaults: function () { return { arrow: !0, distance: 6, functionPosition: null, maxWidth: null, minIntersection: 16, minWidth: 0, position: null, side: "top", viewportAware: !0 } }, __init: function (a) { var b = this; b.__instance = a, b.__namespace = "tooltipster-sideTip-" + Math.round(1e6 * Math.random()), b.__previousState = "closed", b.__options, b.__optionsFormat(), b.__instance._on("state." + b.__namespace, function (a) { "closed" == a.state ? b.__close() : "appearing" == a.state && "closed" == b.__previousState && b.__create(), b.__previousState = a.state }), b.__instance._on("options." + b.__namespace, function () { b.__optionsFormat() }), b.__instance._on("reposition." + b.__namespace, function (a) { b.__reposition(a.event, a.helper) }) }, __close: function () { this.__instance.content() instanceof a && this.__instance.content().detach(), this.__instance._$tooltip.remove(), this.__instance._$tooltip = null }, __create: function () {
                var b = a('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>'); this.__options.arrow || b.find(".tooltipster-box").css("margin", 0).end().find(".tooltipster-arrow").hide(), this.__options.minWidth && b.css("min-width", this.__options.minWidth + "px"), this.__options.maxWidth && b.css("max-width", this.__options.maxWidth + "px"),
                    this.__instance._$tooltip = b, this.__instance._trigger("created")
            }, __destroy: function () { this.__instance._off("." + self.__namespace) }, __optionsFormat: function () { var b = this; if (b.__options = b.__instance._optionsExtract(k, b.__defaults()), b.__options.position && (b.__options.side = b.__options.position), "object" != typeof b.__options.distance && (b.__options.distance = [b.__options.distance]), b.__options.distance.length < 4 && (void 0 === b.__options.distance[1] && (b.__options.distance[1] = b.__options.distance[0]), void 0 === b.__options.distance[2] && (b.__options.distance[2] = b.__options.distance[0]), void 0 === b.__options.distance[3] && (b.__options.distance[3] = b.__options.distance[1]), b.__options.distance = { top: b.__options.distance[0], right: b.__options.distance[1], bottom: b.__options.distance[2], left: b.__options.distance[3] }), "string" == typeof b.__options.side) { var c = { top: "bottom", right: "left", bottom: "top", left: "right" }; b.__options.side = [b.__options.side, c[b.__options.side]], "left" == b.__options.side[0] || "right" == b.__options.side[0] ? b.__options.side.push("top", "bottom") : b.__options.side.push("right", "left") } 6 === a.tooltipster._env.IE && b.__options.arrow !== !0 && (b.__options.arrow = !1) }, __reposition: function (b, c) { var d, e = this, f = e.__targetFind(c), g = []; e.__instance._$tooltip.detach(); var h = e.__instance._$tooltip.clone(), i = a.tooltipster._getRuler(h), j = !1, k = e.__instance.option("animation"); switch (k && h.removeClass("tooltipster-" + k), a.each(["window", "document"], function (d, k) { var l = null; if (e.__instance._trigger({ container: k, helper: c, satisfied: j, takeTest: function (a) { l = a }, results: g, type: "positionTest" }), 1 == l || 0 != l && 0 == j && ("window" != k || e.__options.viewportAware)) for (var d = 0; d < e.__options.side.length; d++) { var m = { horizontal: 0, vertical: 0 }, n = e.__options.side[d]; "top" == n || "bottom" == n ? m.vertical = e.__options.distance[n] : m.horizontal = e.__options.distance[n], e.__sideChange(h, n), a.each(["natural", "constrained"], function (a, d) { if (l = null, e.__instance._trigger({ container: k, event: b, helper: c, mode: d, results: g, satisfied: j, side: n, takeTest: function (a) { l = a }, type: "positionTest" }), 1 == l || 0 != l && 0 == j) { var h = { container: k, distance: m, fits: null, mode: d, outerSize: null, side: n, size: null, target: f[n], whole: null }, o = "natural" == d ? i.free() : i.constrain(c.geo.available[k][n].width - m.horizontal, c.geo.available[k][n].height - m.vertical), p = o.measure(); if (h.size = p.size, h.outerSize = { height: p.size.height + m.vertical, width: p.size.width + m.horizontal }, "natural" == d ? c.geo.available[k][n].width >= h.outerSize.width && c.geo.available[k][n].height >= h.outerSize.height ? h.fits = !0 : h.fits = !1 : h.fits = p.fits, "window" == k && (h.fits ? "top" == n || "bottom" == n ? h.whole = c.geo.origin.windowOffset.right >= e.__options.minIntersection && c.geo.window.size.width - c.geo.origin.windowOffset.left >= e.__options.minIntersection : h.whole = c.geo.origin.windowOffset.bottom >= e.__options.minIntersection && c.geo.window.size.height - c.geo.origin.windowOffset.top >= e.__options.minIntersection : h.whole = !1), g.push(h), h.whole) j = !0; else if ("natural" == h.mode && (h.fits || h.size.width <= c.geo.available[k][n].width)) return !1 } }) } }), e.__instance._trigger({ edit: function (a) { g = a }, event: b, helper: c, results: g, type: "positionTested" }), g.sort(function (a, b) { if (a.whole && !b.whole) return -1; if (!a.whole && b.whole) return 1; if (a.whole && b.whole) { var c = e.__options.side.indexOf(a.side), d = e.__options.side.indexOf(b.side); return d > c ? -1 : c > d ? 1 : "natural" == a.mode ? -1 : 1 } if (a.fits && !b.fits) return -1; if (!a.fits && b.fits) return 1; if (a.fits && b.fits) { var c = e.__options.side.indexOf(a.side), d = e.__options.side.indexOf(b.side); return d > c ? -1 : c > d ? 1 : "natural" == a.mode ? -1 : 1 } return "document" == a.container && "bottom" == a.side && "natural" == a.mode ? -1 : 1 }), d = g[0], d.coord = {}, d.side) { case "left": case "right": d.coord.top = Math.floor(d.target - d.size.height / 2); break; case "bottom": case "top": d.coord.left = Math.floor(d.target - d.size.width / 2) }switch (d.side) { case "left": d.coord.left = c.geo.origin.windowOffset.left - d.outerSize.width; break; case "right": d.coord.left = c.geo.origin.windowOffset.right + d.distance.horizontal; break; case "top": d.coord.top = c.geo.origin.windowOffset.top - d.outerSize.height; break; case "bottom": d.coord.top = c.geo.origin.windowOffset.bottom + d.distance.vertical }"window" == d.container ? "top" == d.side || "bottom" == d.side ? d.coord.left < 0 ? c.geo.origin.windowOffset.right - this.__options.minIntersection >= 0 ? d.coord.left = 0 : d.coord.left = c.geo.origin.windowOffset.right - this.__options.minIntersection - 1 : d.coord.left > c.geo.window.size.width - d.size.width && (c.geo.origin.windowOffset.left + this.__options.minIntersection <= c.geo.window.size.width ? d.coord.left = c.geo.window.size.width - d.size.width : d.coord.left = c.geo.origin.windowOffset.left + this.__options.minIntersection + 1 - d.size.width) : d.coord.top < 0 ? c.geo.origin.windowOffset.bottom - this.__options.minIntersection >= 0 ? d.coord.top = 0 : d.coord.top = c.geo.origin.windowOffset.bottom - this.__options.minIntersection - 1 : d.coord.top > c.geo.window.size.height - d.size.height && (c.geo.origin.windowOffset.top + this.__options.minIntersection <= c.geo.window.size.height ? d.coord.top = c.geo.window.size.height - d.size.height : d.coord.top = c.geo.origin.windowOffset.top + this.__options.minIntersection + 1 - d.size.height) : (d.coord.left > c.geo.window.size.width - d.size.width && (d.coord.left = c.geo.window.size.width - d.size.width), d.coord.left < 0 && (d.coord.left = 0)), e.__sideChange(h, d.side), c.tooltipClone = h[0], c.tooltipParent = e.__instance.option("parent").parent[0], c.mode = d.mode, c.whole = d.whole, c.origin = e.__instance._$origin[0], c.tooltip = e.__instance._$tooltip[0], delete d.container, delete d.fits, delete d.mode, delete d.outerSize, delete d.whole, d.distance = d.distance.horizontal || d.distance.vertical; var l = a.extend(!0, {}, d); if (e.__instance._trigger({ edit: function (a) { d = a }, event: b, helper: c, position: l, type: "position" }), e.__options.functionPosition) { var m = e.__options.functionPosition.call(e, e.__instance, c, l); m && (d = m) } i.destroy(); var n, o; "top" == d.side || "bottom" == d.side ? (n = { prop: "left", val: d.target - d.coord.left }, o = d.size.width - this.__options.minIntersection) : (n = { prop: "top", val: d.target - d.coord.top }, o = d.size.height - this.__options.minIntersection), n.val < this.__options.minIntersection ? n.val = this.__options.minIntersection : n.val > o && (n.val = o); var p; p = c.geo.origin.fixedLineage ? c.geo.origin.windowOffset : { left: c.geo.origin.windowOffset.left + c.geo.window.scroll.left, top: c.geo.origin.windowOffset.top + c.geo.window.scroll.top }, d.coord = { left: p.left + (d.coord.left - c.geo.origin.windowOffset.left), top: p.top + (d.coord.top - c.geo.origin.windowOffset.top) }, e.__sideChange(e.__instance._$tooltip, d.side), c.geo.origin.fixedLineage ? e.__instance._$tooltip.css("position", "fixed") : e.__instance._$tooltip.css("position", ""), e.__instance._$tooltip.css({ left: d.coord.left, top: d.coord.top, height: d.size.height, width: d.size.width }).find(".tooltipster-arrow").css({ left: "", top: "" }).css(n.prop, n.val), e.__instance._$tooltip.appendTo(e.__instance.option("parent")), e.__instance._trigger({ type: "repositioned", event: b, position: d }) }, __sideChange: function (a, b) { a.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-" + b) }, __targetFind: function (a) { var b = {}, c = this.__instance._$origin[0].getClientRects(); if (c.length > 1) { var d = this.__instance._$origin.css("opacity"); 1 == d && (this.__instance._$origin.css("opacity", .99), c = this.__instance._$origin[0].getClientRects(), this.__instance._$origin.css("opacity", 1)) } if (c.length < 2) b.top = Math.floor(a.geo.origin.windowOffset.left + a.geo.origin.size.width / 2), b.bottom = b.top, b.left = Math.floor(a.geo.origin.windowOffset.top + a.geo.origin.size.height / 2), b.right = b.left; else { var e = c[0]; b.top = Math.floor(e.left + (e.right - e.left) / 2), e = c.length > 2 ? c[Math.ceil(c.length / 2) - 1] : c[0], b.right = Math.floor(e.top + (e.bottom - e.top) / 2), e = c[c.length - 1], b.bottom = Math.floor(e.left + (e.right - e.left) / 2), e = c.length > 2 ? c[Math.ceil((c.length + 1) / 2) - 1] : c[c.length - 1], b.left = Math.floor(e.top + (e.bottom - e.top) / 2) } return b }
        }
    }), a
});
/*!
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery throttle / debounce: Sometimes, less is more!
//
// *Version: 1.1, Last updated: 3/7/2010*
// 
// Project Home - http://benalman.com/projects/jquery-throttle-debounce-plugin/
// GitHub       - http://github.com/cowboy/jquery-throttle-debounce/
// Source       - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.js
// (Minified)   - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.min.js (0.7kb)
// 
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
// 
// Throttle - http://benalman.com/code/projects/jquery-throttle-debounce/examples/throttle/
// Debounce - http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - none, 1.3.2, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.6, Safari 3-4, Chrome 4-5, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-throttle-debounce/unit/
// 
// About: Release History
// 
// 1.1 - (3/7/2010) Fixed a bug in <jQuery.throttle> where trailing callbacks
//       executed later than they should. Reworked a fair amount of internal
//       logic as well.
// 1.0 - (3/6/2010) Initial release as a stand-alone project. Migrated over
//       from jquery-misc repo v0.4 to jquery-throttle repo v1.0, added the
//       no_trailing throttle parameter and debounce functionality.
// 
// Topic: Note for non-jQuery users
// 
// jQuery isn't actually required for this plugin, because nothing internal
// uses any jQuery methods or properties. jQuery is just used as a namespace
// under which these methods can exist.
// 
// Since jQuery isn't actually required for this plugin, if jQuery doesn't exist
// when this plugin is loaded, the method described below will be created in
// the `Cowboy` namespace. Usage will be exactly the same, but instead of
// $.method() or jQuery.method(), you'll need to use Cowboy.method().

(function (window, undefined) {
    '$:nomunge'; // Used by YUI compressor.

    // Since jQuery really isn't required for this plugin, use `jQuery` as the
    // namespace only if it already exists, otherwise use the `Cowboy` namespace,
    // creating it if necessary.
    var $ = window.jQuery || window.Cowboy || (window.Cowboy = {}),

        // Internal method reference.
        jq_throttle;

    // Method: jQuery.throttle
    // 
    // Throttle execution of a function. Especially useful for rate limiting
    // execution of handlers on events like resize and scroll. If you want to
    // rate-limit execution of a function to a single time, see the
    // <jQuery.debounce> method.
    // 
    // In this visualization, | is a throttled-function call and X is the actual
    // callback execution:
    // 
    // > Throttled with `no_trailing` specified as false or unspecified:
    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
    // > X    X    X    X    X    X        X    X    X    X    X    X
    // > 
    // > Throttled with `no_trailing` specified as true:
    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
    // > X    X    X    X    X             X    X    X    X    X
    // 
    // Usage:
    // 
    // > var throttled = jQuery.throttle( delay, [ no_trailing, ] callback );
    // > 
    // > jQuery('selector').bind( 'someevent', throttled );
    // > jQuery('selector').unbind( 'someevent', throttled );
    // 
    // This also works in jQuery 1.4+:
    // 
    // > jQuery('selector').bind( 'someevent', jQuery.throttle( delay, [ no_trailing, ] callback ) );
    // > jQuery('selector').unbind( 'someevent', callback );
    // 
    // Arguments:
    // 
    //  delay - (Number) A zero-or-greater delay in milliseconds. For event
    //    callbacks, values around 100 or 250 (or even higher) are most useful.
    //  no_trailing - (Boolean) Optional, defaults to false. If no_trailing is
    //    true, callback will only execute every `delay` milliseconds while the
    //    throttled-function is being called. If no_trailing is false or
    //    unspecified, callback will be executed one final time after the last
    //    throttled-function call. (After the throttled-function has not been
    //    called for `delay` milliseconds, the internal counter is reset)
    //  callback - (Function) A function to be executed after delay milliseconds.
    //    The `this` context and all arguments are passed through, as-is, to
    //    `callback` when the throttled-function is executed.
    // 
    // Returns:
    // 
    //  (Function) A new, throttled, function.

    $.throttle = jq_throttle = function (delay, no_trailing, callback, debounce_mode) {
        // After wrapper has stopped being called, this timeout ensures that
        // `callback` is executed at the proper times in `throttle` and `end`
        // debounce modes.
        var timeout_id,

            // Keep track of the last time `callback` was executed.
            last_exec = 0;

        // `no_trailing` defaults to falsy.
        if (typeof no_trailing !== 'boolean') {
            debounce_mode = callback;
            callback = no_trailing;
            no_trailing = undefined;
        }

        // The `wrapper` function encapsulates all of the throttling / debouncing
        // functionality and when executed will limit the rate at which `callback`
        // is executed.
        function wrapper() {
            var that = this,
                elapsed = +new Date() - last_exec,
                args = arguments;

            // Execute `callback` and update the `last_exec` timestamp.
            function exec() {
                last_exec = +new Date();
                callback.apply(that, args);
            };

            // If `debounce_mode` is true (at_begin) this is used to clear the flag
            // to allow future `callback` executions.
            function clear() {
                timeout_id = undefined;
            };

            if (debounce_mode && !timeout_id) {
                // Since `wrapper` is being called for the first time and
                // `debounce_mode` is true (at_begin), execute `callback`.
                exec();
            }

            // Clear any existing timeout.
            timeout_id && clearTimeout(timeout_id);

            if (debounce_mode === undefined && elapsed > delay) {
                // In throttle mode, if `delay` time has been exceeded, execute
                // `callback`.
                exec();

            } else if (no_trailing !== true) {
                // In trailing throttle mode, since `delay` time has not been
                // exceeded, schedule `callback` to execute `delay` ms after most
                // recent execution.
                // 
                // If `debounce_mode` is true (at_begin), schedule `clear` to execute
                // after `delay` ms.
                // 
                // If `debounce_mode` is false (at end), schedule `callback` to
                // execute after `delay` ms.
                timeout_id = setTimeout(debounce_mode ? clear : exec, debounce_mode === undefined ? delay - elapsed : delay);
            }
        };

        // Set the guid of `wrapper` function to the same of original callback, so
        // it can be removed in jQuery 1.4+ .unbind or .die by using the original
        // callback as a reference.
        if ($.guid) {
            wrapper.guid = callback.guid = callback.guid || $.guid++;
        }

        // Return the wrapper function.
        return wrapper;
    };

    // Method: jQuery.debounce
    // 
    // Debounce execution of a function. Debouncing, unlike throttling,
    // guarantees that a function is only executed a single time, either at the
    // very beginning of a series of calls, or at the very end. If you want to
    // simply rate-limit execution of a function, see the <jQuery.throttle>
    // method.
    // 
    // In this visualization, | is a debounced-function call and X is the actual
    // callback execution:
    // 
    // > Debounced with `at_begin` specified as false or unspecified:
    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
    // >                          X                                 X
    // > 
    // > Debounced with `at_begin` specified as true:
    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
    // > X                                 X
    // 
    // Usage:
    // 
    // > var debounced = jQuery.debounce( delay, [ at_begin, ] callback );
    // > 
    // > jQuery('selector').bind( 'someevent', debounced );
    // > jQuery('selector').unbind( 'someevent', debounced );
    // 
    // This also works in jQuery 1.4+:
    // 
    // > jQuery('selector').bind( 'someevent', jQuery.debounce( delay, [ at_begin, ] callback ) );
    // > jQuery('selector').unbind( 'someevent', callback );
    // 
    // Arguments:
    // 
    //  delay - (Number) A zero-or-greater delay in milliseconds. For event
    //    callbacks, values around 100 or 250 (or even higher) are most useful.
    //  at_begin - (Boolean) Optional, defaults to false. If at_begin is false or
    //    unspecified, callback will only be executed `delay` milliseconds after
    //    the last debounced-function call. If at_begin is true, callback will be
    //    executed only at the first debounced-function call. (After the
    //    throttled-function has not been called for `delay` milliseconds, the
    //    internal counter is reset)
    //  callback - (Function) A function to be executed after delay milliseconds.
    //    The `this` context and all arguments are passed through, as-is, to
    //    `callback` when the debounced-function is executed.
    // 
    // Returns:
    // 
    //  (Function) A new, debounced, function.

    $.debounce = function (delay, at_begin, callback) {
        return callback === undefined
            ? jq_throttle(delay, at_begin, false)
            : jq_throttle(delay, callback, at_begin !== false);
    };

})(window);
(function ($) {

    $.fn.shuffle = function () {

        var allElems = this.get(),
            getRandom = function (max) {
                return Math.floor(Math.random() * max);
            },
            shuffled = $.map(allElems, function () {
                var random = getRandom(allElems.length),
                    randEl = $(allElems[random]).clone(true)[0];
                allElems.splice(random, 1);
                return randEl;
            });

        this.each(function (i) {
            $(this).replaceWith($(shuffled[i]));
        });

        return $(shuffled);

    };

})(jQuery);
/*!
 * Bowser - a browser detector
 * https://github.com/ded/bowser
 * MIT License | (c) Dustin Diaz 2015
 */
  
!function (root, name, definition) {
    if (typeof module != 'undefined' && module.exports) module.exports = definition()
    else if (typeof define == 'function' && define.amd) define(name, definition)
    else {
        window[name] = definition()
    }
}(this, 'bowser', function () {
    /**
      * See useragents.js for examples of navigator.userAgent
      */

    var t = true

    function detect(ua) {

        function getFirstMatch(regex) {
            var match = ua.match(regex);
            return (match && match.length > 1 && match[1]) || '';
        }

        function getSecondMatch(regex) {
            var match = ua.match(regex);
            return (match && match.length > 1 && match[2]) || '';
        }

        var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()
            , likeAndroid = /like android/i.test(ua)
            , android = !likeAndroid && /android/i.test(ua)
            , nexusMobile = /nexus\s*[0-6]\s*/i.test(ua)
            , nexusTablet = !nexusMobile && /nexus\s*[0-9]+/i.test(ua)
            , chromeos = /CrOS/.test(ua)
            , silk = /silk/i.test(ua)
            , sailfish = /sailfish/i.test(ua)
            , tizen = /tizen/i.test(ua)
            , webos = /(web|hpw)(o|0)s/i.test(ua)
            , windowsphone = /windows phone/i.test(ua)
            , samsungBrowser = /SamsungBrowser/i.test(ua)
            , windows = !windowsphone && /windows/i.test(ua)
            , mac = !iosdevice && !silk && /macintosh/i.test(ua)
            , linux = !android && !sailfish && !tizen && !webos && /linux/i.test(ua)
            , edgeVersion = getSecondMatch(/edg([ea]|ios)\/(\d+(\.\d+)?)/i)
            , versionIdentifier = getFirstMatch(/version\/(\d+(\.\d+)?)/i)
            , tablet = /tablet/i.test(ua) && !/tablet pc/i.test(ua)
            , mobile = !tablet && /[^-]mobi/i.test(ua)
            , xbox = /xbox/i.test(ua)
            , result

        if (/opera/i.test(ua)) {
            //  an old Opera
            result = {
                name: 'Opera'
                , opera: t
                , version: versionIdentifier || getFirstMatch(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)
            }
        } else if (/opr\/|opios/i.test(ua)) {
            // a new Opera
            result = {
                name: 'Opera'
                , opera: t
                , version: getFirstMatch(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i) || versionIdentifier
            }
        }
        else if (/SamsungBrowser/i.test(ua)) {
            result = {
                name: 'Samsung Internet for Android'
                , samsungBrowser: t
                , version: versionIdentifier || getFirstMatch(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)
            }
        }
        else if (/Whale/i.test(ua)) {
            result = {
                name: 'NAVER Whale browser'
                , whale: t
                , version: getFirstMatch(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/MZBrowser/i.test(ua)) {
            result = {
                name: 'MZ Browser'
                , mzbrowser: t
                , version: getFirstMatch(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/coast/i.test(ua)) {
            result = {
                name: 'Opera Coast'
                , coast: t
                , version: versionIdentifier || getFirstMatch(/(?:coast)[\s\/](\d+(\.\d+)?)/i)
            }
        }
        else if (/focus/i.test(ua)) {
            result = {
                name: 'Focus'
                , focus: t
                , version: getFirstMatch(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/yabrowser/i.test(ua)) {
            result = {
                name: 'Yandex Browser'
                , yandexbrowser: t
                , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)
            }
        }
        else if (/ucbrowser/i.test(ua)) {
            result = {
                name: 'UC Browser'
                , ucbrowser: t
                , version: getFirstMatch(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/mxios/i.test(ua)) {
            result = {
                name: 'Maxthon'
                , maxthon: t
                , version: getFirstMatch(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/epiphany/i.test(ua)) {
            result = {
                name: 'Epiphany'
                , epiphany: t
                , version: getFirstMatch(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/puffin/i.test(ua)) {
            result = {
                name: 'Puffin'
                , puffin: t
                , version: getFirstMatch(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)
            }
        }
        else if (/sleipnir/i.test(ua)) {
            result = {
                name: 'Sleipnir'
                , sleipnir: t
                , version: getFirstMatch(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/k-meleon/i.test(ua)) {
            result = {
                name: 'K-Meleon'
                , kMeleon: t
                , version: getFirstMatch(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (windowsphone) {
            result = {
                name: 'Windows Phone'
                , osname: 'Windows Phone'
                , windowsphone: t
            }
            if (edgeVersion) {
                result.msedge = t
                result.version = edgeVersion
            }
            else {
                result.msie = t
                result.version = getFirstMatch(/iemobile\/(\d+(\.\d+)?)/i)
            }
        }
        else if (/msie|trident/i.test(ua)) {
            result = {
                name: 'Internet Explorer'
                , msie: t
                , version: getFirstMatch(/(?:msie |rv:)(\d+(\.\d+)?)/i)
            }
        } else if (chromeos) {
            result = {
                name: 'Chrome'
                , osname: 'Chrome OS'
                , chromeos: t
                , chromeBook: t
                , chrome: t
                , version: getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)
            }
        } else if (/edg([ea]|ios)/i.test(ua)) {
            result = {
                name: 'Microsoft Edge'
                , msedge: t
                , version: edgeVersion
            }
        }
        else if (/vivaldi/i.test(ua)) {
            result = {
                name: 'Vivaldi'
                , vivaldi: t
                , version: getFirstMatch(/vivaldi\/(\d+(\.\d+)?)/i) || versionIdentifier
            }
        }
        else if (sailfish) {
            result = {
                name: 'Sailfish'
                , osname: 'Sailfish OS'
                , sailfish: t
                , version: getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i)
            }
        }
        else if (/seamonkey\//i.test(ua)) {
            result = {
                name: 'SeaMonkey'
                , seamonkey: t
                , version: getFirstMatch(/seamonkey\/(\d+(\.\d+)?)/i)
            }
        }
        else if (/firefox|iceweasel|fxios/i.test(ua)) {
            result = {
                name: 'Firefox'
                , firefox: t
                , version: getFirstMatch(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)
            }
            if (/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(ua)) {
                result.firefoxos = t
                result.osname = 'Firefox OS'
            }
        }
        else if (silk) {
            result = {
                name: 'Amazon Silk'
                , silk: t
                , version: getFirstMatch(/silk\/(\d+(\.\d+)?)/i)
            }
        }
        else if (/phantom/i.test(ua)) {
            result = {
                name: 'PhantomJS'
                , phantom: t
                , version: getFirstMatch(/phantomjs\/(\d+(\.\d+)?)/i)
            }
        }
        else if (/slimerjs/i.test(ua)) {
            result = {
                name: 'SlimerJS'
                , slimer: t
                , version: getFirstMatch(/slimerjs\/(\d+(\.\d+)?)/i)
            }
        }
        else if (/blackberry|\bbb\d+/i.test(ua) || /rim\stablet/i.test(ua)) {
            result = {
                name: 'BlackBerry'
                , osname: 'BlackBerry OS'
                , blackberry: t
                , version: versionIdentifier || getFirstMatch(/blackberry[\d]+\/(\d+(\.\d+)?)/i)
            }
        }
        else if (webos) {
            result = {
                name: 'WebOS'
                , osname: 'WebOS'
                , webos: t
                , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)
            };
            /touchpad\//i.test(ua) && (result.touchpad = t)
        }
        else if (/bada/i.test(ua)) {
            result = {
                name: 'Bada'
                , osname: 'Bada'
                , bada: t
                , version: getFirstMatch(/dolfin\/(\d+(\.\d+)?)/i)
            };
        }
        else if (tizen) {
            result = {
                name: 'Tizen'
                , osname: 'Tizen'
                , tizen: t
                , version: getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i) || versionIdentifier
            };
        }
        else if (/qupzilla/i.test(ua)) {
            result = {
                name: 'QupZilla'
                , qupzilla: t
                , version: getFirstMatch(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i) || versionIdentifier
            }
        }
        else if (/chromium/i.test(ua)) {
            result = {
                name: 'Chromium'
                , chromium: t
                , version: getFirstMatch(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i) || versionIdentifier
            }
        }
        else if (/chrome|crios|crmo/i.test(ua)) {
            result = {
                name: 'Chrome'
                , chrome: t
                , version: getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)
            }
        }
        else if (android) {
            result = {
                name: 'Android'
                , version: versionIdentifier
            }
        }
        else if (/safari|applewebkit/i.test(ua)) {
            result = {
                name: 'Safari'
                , safari: t
            }
            if (versionIdentifier) {
                result.version = versionIdentifier
            }
        }
        else if (iosdevice) {
            result = {
                name: iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'
            }
            // WTF: version is not part of user agent in web apps
            if (versionIdentifier) {
                result.version = versionIdentifier
            }
        }
        else if (/googlebot/i.test(ua)) {
            result = {
                name: 'Googlebot'
                , googlebot: t
                , version: getFirstMatch(/googlebot\/(\d+(\.\d+))/i) || versionIdentifier
            }
        }
        else {
            result = {
                name: getFirstMatch(/^(.*)\/(.*) /),
                version: getSecondMatch(/^(.*)\/(.*) /)
            };
        }

        // set webkit or gecko flag for browsers based on these engines
        if (!result.msedge && /(apple)?webkit/i.test(ua)) {
            if (/(apple)?webkit\/537\.36/i.test(ua)) {
                result.name = result.name || "Blink"
                result.blink = t
            } else {
                result.name = result.name || "Webkit"
                result.webkit = t
            }
            if (!result.version && versionIdentifier) {
                result.version = versionIdentifier
            }
        } else if (!result.opera && /gecko\//i.test(ua)) {
            result.name = result.name || "Gecko"
            result.gecko = t
            result.version = result.version || getFirstMatch(/gecko\/(\d+(\.\d+)?)/i)
        }

        // set OS flags for platforms that have multiple browsers
        if (!result.windowsphone && (android || result.silk)) {
            result.android = t
            result.osname = 'Android'
        } else if (!result.windowsphone && iosdevice) {
            result[iosdevice] = t
            result.ios = t
            result.osname = 'iOS'
        } else if (mac) {
            result.mac = t
            result.osname = 'macOS'
        } else if (xbox) {
            result.xbox = t
            result.osname = 'Xbox'
        } else if (windows) {
            result.windows = t
            result.osname = 'Windows'
        } else if (linux) {
            result.linux = t
            result.osname = 'Linux'
        }

        function getWindowsVersion(s) {
            switch (s) {
                case 'NT': return 'NT'
                case 'XP': return 'XP'
                case 'NT 5.0': return '2000'
                case 'NT 5.1': return 'XP'
                case 'NT 5.2': return '2003'
                case 'NT 6.0': return 'Vista'
                case 'NT 6.1': return '7'
                case 'NT 6.2': return '8'
                case 'NT 6.3': return '8.1'
                case 'NT 10.0': return '10'
                default: return undefined
            }
        }

        // OS version extraction
        var osVersion = '';
        if (result.windows) {
            osVersion = getWindowsVersion(getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i))
        } else if (result.windowsphone) {
            osVersion = getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i);
        } else if (result.mac) {
            osVersion = getFirstMatch(/Mac OS X (\d+([_\.\s]\d+)*)/i);
            osVersion = osVersion.replace(/[_\s]/g, '.');
        } else if (iosdevice) {
            osVersion = getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i);
            osVersion = osVersion.replace(/[_\s]/g, '.');
        } else if (android) {
            osVersion = getFirstMatch(/android[ \/-](\d+(\.\d+)*)/i);
        } else if (result.webos) {
            osVersion = getFirstMatch(/(?:web|hpw)os\/(\d+(\.\d+)*)/i);
        } else if (result.blackberry) {
            osVersion = getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i);
        } else if (result.bada) {
            osVersion = getFirstMatch(/bada\/(\d+(\.\d+)*)/i);
        } else if (result.tizen) {
            osVersion = getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i);
        }
        if (osVersion) {
            result.osversion = osVersion;
        }

        // device type extraction
        var osMajorVersion = !result.windows && osVersion.split('.')[0];
        if (
            tablet
            || nexusTablet
            || iosdevice == 'ipad'
            || (android && (osMajorVersion == 3 || (osMajorVersion >= 4 && !mobile)))
            || result.silk
        ) {
            result.tablet = t
        } else if (
            mobile
            || iosdevice == 'iphone'
            || iosdevice == 'ipod'
            || android
            || nexusMobile
            || result.blackberry
            || result.webos
            || result.bada
        ) {
            result.mobile = t
        }

        // Graded Browser Support
        // http://developer.yahoo.com/yui/articles/gbs
        if (result.msedge ||
            (result.msie && result.version >= 10) ||
            (result.yandexbrowser && result.version >= 15) ||
            (result.vivaldi && result.version >= 1.0) ||
            (result.chrome && result.version >= 20) ||
            (result.samsungBrowser && result.version >= 4) ||
            (result.whale && compareVersions([result.version, '1.0']) === 1) ||
            (result.mzbrowser && compareVersions([result.version, '6.0']) === 1) ||
            (result.focus && compareVersions([result.version, '1.0']) === 1) ||
            (result.firefox && result.version >= 20.0) ||
            (result.safari && result.version >= 6) ||
            (result.opera && result.version >= 10.0) ||
            (result.ios && result.osversion && result.osversion.split(".")[0] >= 6) ||
            (result.blackberry && result.version >= 10.1)
            || (result.chromium && result.version >= 20)
        ) {
            result.a = t;
        }
        else if ((result.msie && result.version < 10) ||
            (result.chrome && result.version < 20) ||
            (result.firefox && result.version < 20.0) ||
            (result.safari && result.version < 6) ||
            (result.opera && result.version < 10.0) ||
            (result.ios && result.osversion && result.osversion.split(".")[0] < 6)
            || (result.chromium && result.version < 20)
        ) {
            result.c = t
        } else result.x = t

        return result
    }

    var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent || '' : '')

    bowser.test = function (browserList) {
        for (var i = 0; i < browserList.length; ++i) {
            var browserItem = browserList[i];
            if (typeof browserItem === 'string') {
                if (browserItem in bowser) {
                    return true;
                }
            }
        }
        return false;
    }

    /**
     * Get version precisions count
     *
     * @example
     *   getVersionPrecision("1.10.3") // 3
     *
     * @param  {string} version
     * @return {number}
     */
    function getVersionPrecision(version) {
        return version.split(".").length;
    }

    /**
     * Array::map polyfill
     *
     * @param  {Array} arr
     * @param  {Function} iterator
     * @return {Array}
     */
    function map(arr, iterator) {
        var result = [], i;
        if (Array.prototype.map) {
            return Array.prototype.map.call(arr, iterator);
        }
        for (i = 0; i < arr.length; i++) {
            result.push(iterator(arr[i]));
        }
        return result;
    }

    /**
     * Calculate browser version weight
     *
     * @example
     *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1
     *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1
     *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0
     *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1
     *
     * @param  {Array<String>} versions versions to compare
     * @return {Number} comparison result
     */
    function compareVersions(versions) {
        // 1) get common precision for both versions, for example for "10.0" and "9" it should be 2
        var precision = Math.max(getVersionPrecision(versions[0]), getVersionPrecision(versions[1]));
        var chunks = map(versions, function (version) {
            var delta = precision - getVersionPrecision(version);

            // 2) "9" -> "9.0" (for precision = 2)
            version = version + new Array(delta + 1).join(".0");

            // 3) "9.0" -> ["000000000"", "000000009"]
            return map(version.split("."), function (chunk) {
                return new Array(20 - chunk.length).join("0") + chunk;
            }).reverse();
        });

        // iterate in reverse order by reversed chunks array
        while (--precision >= 0) {
            // 4) compare: "000000009" > "000000010" = false (but "9" > "10" = true)
            if (chunks[0][precision] > chunks[1][precision]) {
                return 1;
            }
            else if (chunks[0][precision] === chunks[1][precision]) {
                if (precision === 0) {
                    // all version chunks are same
                    return 0;
                }
            }
            else {
                return -1;
            }
        }
    }

    /**
     * Check if browser is unsupported
     *
     * @example
     *   bowser.isUnsupportedBrowser({
     *     msie: "10",
     *     firefox: "23",
     *     chrome: "29",
     *     safari: "5.1",
     *     opera: "16",
     *     phantom: "534"
     *   });
     *
     * @param  {Object}  minVersions map of minimal version to browser
     * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map
     * @param  {String}  [ua] user agent string
     * @return {Boolean}
     */
    function isUnsupportedBrowser(minVersions, strictMode, ua) {
        var _bowser = bowser;

        // make strictMode param optional with ua param usage
        if (typeof strictMode === 'string') {
            ua = strictMode;
            strictMode = void (0);
        }

        if (strictMode === void (0)) {
            strictMode = false;
        }
        if (ua) {
            _bowser = detect(ua);
        }

        var version = "" + _bowser.version;
        for (var browser in minVersions) {
            if (minVersions.hasOwnProperty(browser)) {
                if (_bowser[browser]) {
                    if (typeof minVersions[browser] !== 'string') {
                        throw new Error('Browser version in the minVersion map should be a string: ' + browser + ': ' + String(minVersions));
                    }

                    // browser version and min supported version.
                    return compareVersions([version, minVersions[browser]]) < 0;
                }
            }
        }

        return strictMode; // not found
    }

    /**
     * Check if browser is supported
     *
     * @param  {Object} minVersions map of minimal version to browser
     * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map
     * @param  {String}  [ua] user agent string
     * @return {Boolean}
     */
    function check(minVersions, strictMode, ua) {
        return !isUnsupportedBrowser(minVersions, strictMode, ua);
    }

    bowser.isUnsupportedBrowser = isUnsupportedBrowser;
    bowser.compareVersions = compareVersions;
    bowser.check = check;

    /*
     * Set our detect method to the main bowser object so we can
     * reuse it to test other user agents.
     * This is needed to implement future tests.
     */
    bowser._detect = detect;

    /*
     * Set our detect public method to the main bowser object
     * This is needed to implement bowser in server side
     */
    bowser.detect = detect;
    return bowser
});
// Promise.finally has not been implemented in Microsoft Edge
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/finally
if (Promise.prototype.finally === undefined) {
    // It's replaced unconditionally to preserve the expected behavior
    // in programs even if there's ever a native finally.
    window.Promise.prototype['finally'] = function finallyPolyfill(callback) {
        let constructor = this.constructor;

        return this.then((value) => {
            return constructor.resolve(callback()).then(() => {
                return value;
            });
        }, (reason) => {
            return constructor.resolve(callback()).then(() => {
                throw reason;
            });
        });
    };
}
var layoutr = window.layoutr || {};
{
    layoutr.siteName = 'layoutr';

    layoutr.throttleInterval = 50;
    layoutr.debounceInterval = 50;

    layoutr.transitionTime = 400;
    layoutr.fadeOutTime = 500;
    layoutr.htmlOverflowEnabled = true;
    layoutr.smallBreakpoint = 732;
    layoutr.scrollbarWidth = 0;
    layoutr.loadingCount = 0;
    layoutr.document = document.documentElement;
    layoutr.fullscreen = false;
    layoutr.ajax = 'dist/ajax/';
    layoutr.arrowKeyLocked = false;
    layoutr.sort = new Intl.Collator(undefined, { numeric: true, sensitivity: 'base' }).compare;

    layoutr.navigation = [];
    bowser.desktop = !bowser.mobile && !bowser.tablet;

    let l = window.location,
        segmentCount = l.origin.endsWith('github.io') ? 1 : 0;
    layoutr.host = `${l.protocol}//${l.hostname}${l.port ? `:${l.port}` : ''}${l.pathname.split('/').slice(0, 1 + segmentCount).join('/')}/`;

    layoutr.awaitInterval = 50;
    // window.Areion = Ghostlab
    layoutr.isLocalhost = window.Areion || l.hostname === 'localhost' || l.hostname === '127.0.0.1' || l.hostname === '192.168.40.100';

    layoutr.settings = JSON.parse(localStorage.getItem("settings"));
    if (layoutr.settings === null) layoutr.settings = [];
    layoutr.theme = 'light';
    layoutr.settings.forEach((entry) => {
        if (entry.name === 'theme') {
            layoutr.theme = entry.id.substring(entry.id.indexOf("-") + 1);
        }
    });

    $(() => {
        layoutr.html = $('html');
        layoutr.head = $('head');
        layoutr.body = $('body');
        layoutr.main = $('main');
        layoutr.content = $('#content > div');
        layoutr.header = $('header');
        layoutr.footer = $('footer');
        layoutr.left = $('#left');
        layoutr.right = $('#right');
        layoutr.loading = $('#loading');
        layoutr.overflow = $('#overflow');
        layoutr.modal = $('#modal');
        layoutr.title = $('#title');
        layoutr.authentication = $('#authentication');
        layoutr.unauthenticated = layoutr.authentication.children('.unauthenticated');
        layoutr.authenticated = layoutr.authentication.children('.authenticated');
        layoutr.authenticatedLinks = layoutr.authentication.find('.links');
        layoutr.cookie = $('#cookie');
        layoutr.focus = $('#focus');
    });
}
{
    String.prototype.replaceAll = function (search, replacement) {
        let target = this;
        return target.replace(new RegExp(search, 'g'), replacement);
    };

    layoutr.guid = () => {
        let s4 = () => {
            return Math.floor((1 + Math.random()) * 0x10000)
                .toString(16)
                .substring(1);
        };
        return `${s4() + s4()}-${s4()}-${s4()}-${s4()}-${s4() + s4() + s4()}`;
    };

    layoutr.isSmallBreakpoint = () => {
        return $(window).outerWidth() < 732 || layoutr.isAsideLeft() && !layoutr.isAsideLeftShrink() || layoutr.isAsideRight() && !layoutr.isAsideRightShrink();
    };

    layoutr.isAside = () => {
        return layoutr.html.attr('data-aside').length;
    };

    layoutr.isAsideLeft = () => {
        return layoutr.html.attr('data-aside') === 'left';
    };

    layoutr.isAsideRight = () => {
        return layoutr.html.attr('data-aside') === 'right';
    };

    layoutr.isAsideLeftShrink = () => {
        return layoutr.html.hasClass('left-shrink') && layoutr.isAsideLeft();
    };

    layoutr.isAsideRightShrink = () => {
        return layoutr.html.hasClass('right-shrink') && layoutr.isAsideRight();
    };

    layoutr.isAsideLeftCloseOnClickOutside = () => {
        return layoutr.html.hasClass('close-left-click-outside');
    };
    layoutr.isAsideRightCloseOnClickOutside = () => {
        return layoutr.html.hasClass('close-right-click-outside');
    };

    layoutr.isModal = () => {
        return layoutr.html.hasClass('modal');
    };

    layoutr.isModalForm = () => {
        return layoutr.html.attr('data-modal') === 'form';
    };

    layoutr.isModalImage = () => {
        return layoutr.html.attr('data-modal') === 'image';
    };

    layoutr.isFocus = () => {
        return layoutr.html.hasClass('focus') && layoutr.html.attr('data-focus') === 'true';
    };

    layoutr.isTTS = () => {
        return layoutr.html.hasClass('tts');
    };

    layoutr.isTTSEnabled = () => {
        return layoutr.html.hasClass('tts') && layoutr.html.attr('data-tts') === 'true';
    };

    layoutr.isAuthentication = () => {
        return layoutr.html.attr('data-authentication') !== '';
    };

    layoutr.isLoading = () => {
        return layoutr.html.hasClass('loading');
    };

    layoutr.isScrollDisabled = () => {
        return layoutr.html.hasClass('scroll-disabled');
    };

    layoutr.isCloseLeftPageChange = () => {
        return layoutr.html.hasClass('close-left-page-change');
    };

    layoutr.isTransitions = () => {
        return layoutr.html.hasClass('transitions');
    };

    layoutr.isSwipe = () => {
        return layoutr.html.hasClass('swipe');
    };

    layoutr.isSiteLoaded = () => {
        return layoutr.html.hasClass('site-loaded');
    };

    layoutr.capitalize = (string) => {
        return string.charAt(0).toUpperCase() + string.slice(1);
    };

    layoutr.scrollTop = () => {
        return Math.max(layoutr.body.scrollTop(), layoutr.main.scrollTop(), layoutr.html.scrollTop());
    };

    layoutr.tryParseInt = (str, defaultValue) => {
        let retValue = defaultValue;
        if (str !== undefined && str !== null && str.length > 0 && !isNaN(str)) {
            retValue = parseInt(str);
        }
        return retValue;
    };

    layoutr.tryParseFloat = (str, defaultValue) => {
        let retValue = defaultValue;
        if (str !== undefined && str !== null && str.length > 0 && !isNaN(str)) {
            retValue = parseFloat(str);
        }
        return retValue;
    };

    layoutr.tryParseJSON = (str, defaultValue) => {
        let retValue = defaultValue;
        try {
            retValue = JSON.parse(str);
        } catch (e) {
        }
        return retValue;
    };

    layoutr.isTrue = (str) => {
        return str === 'true';
    };
}
{
    $(() => {
        if (bowser.msedge) {
            layoutr.html.addClass('msedge'); // used by layoutr.enableScroll()
        }
        if (bowser.mobile) {
            layoutr.html.addClass('mobile'); // disables fixed footer
        } else if (bowser.tablet) {
            layoutr.html.addClass('tablet'); // does nothing currently
        } else {
            layoutr.html.addClass('desktop'); // enables hover effects
        }

        if (bowser.android) {
            layoutr.html.addClass('android'); // used by modal
        } else if (bowser.ios) {
            layoutr.html.addClass('ios'); // used to apply focus
        }

        if (bowser.msedge) {
            // disable smooth scrolling, since it causes element jumping/lagging on scroll
            // https://stackoverflow.com/questions/29416448/how-to-disable-smooth-scrolling-in-ie11
            layoutr.body.on("mousewheel", (e) => {
                let target = $(e.target);
                if (!layoutr.isModal() && event.ctrlKey !== true) {
                    e.preventDefault();
                    let aside = target.closest('aside > .content') || target.parents('aside .content'),
                        wheelDelta = e.originalEvent.wheelDelta,
                        currentScrollPosition;
                    if (aside.length) {
                        currentScrollPosition = aside.scrollTop();
                        aside.scrollTop(currentScrollPosition - wheelDelta);
                    } else {
                        currentScrollPosition = window.pageYOffset;
                        window.scrollTo(0, currentScrollPosition - wheelDelta);
                    }
                }
            });

            // at some zoom levels edge/ie makes $(window) heigher than $(document)
            // it causes a gap between footer and the bottom of $(window).
            $(window).scroll(() => {
                let scrollTop = self.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
                if (scrollTop + $(window).height() >= $(document).height()) {
                    layoutr.html.addClass('subpixel');
                } else {
                    layoutr.html.removeClass('subpixel');
                }
            });
        }
    });
}
{
    layoutr.load = (() => {
        let _load = (tag) => {
            return (url) => {
                return new Promise((resolve, reject) => {
                    if (tag === 'link' || tag === 'script' || tag === 'img') {
                        let element = document.createElement(tag);

                        element.onload = () => {
                            if (tag === 'img') {
                                document.body.removeChild(element);
                            }
                            resolve();
                        };
                        element.onerror = () => {
                            reject();
                        };
                        if (tag === 'link') {
                            element.type = 'text/css';
                            element.rel = 'stylesheet';
                            element.href = url;
                        } else if (tag === 'script' || tag === 'img') {
                            element.async = true;
                            element.src = url;
                            if (tag === 'img') {
                                element.className = 'hidden';
                            }
                        }
                        document.body.appendChild(element);
                    } else if (tag === 'html') {
                        fetch(url).then((response) => {
                            if (response.status === 200) {
                                return response.text();
                            } else {
                                reject(response.status);
                            }
                        }).then((response) => {
                            resolve(response);
                        });
                    }
                });
            };
        };

        return {
            css: _load('link'),
            js: _load('script'),
            img: _load('img'),
            html: _load('html')
        };
    })();
}
{
    layoutr.promiseCSS = layoutr.load.css(`${layoutr.host}dist/css/theme/${layoutr.theme}.css`).catch((e) => {
        console.error('Failed to load css:', e);
    });
    
    $(() => {
        layoutr.footer.html(`<p>\u00A9 ${new Date().getFullYear()} Frederik Nielsen</p>`);

        //layoutr.setHtmlScroll(); // outcomment if it can be disabled at first page load

        layoutr.load.html(`${layoutr.host}${layoutr.ajax}svg/base.html`).then((response) => {
            $(response).prependTo(layoutr.body);
        }).catch((e) => {
            layoutr.showPopupAlert('Failed to load base svg html', 'danger');
            console.error(e);
        });

        if (bowser.android) {
            // android doesn't handle vh correctly, so it gets converted to px
            $(window).resize(() => {
                if (layoutr.isModal() && layoutr.isModalImage()) {
                    layoutr.modal.find('#modal-img').css('max-height', window.innerHeight);
                }
            });
        }
    });

    $(window).click((e) => {
        let target = $(e.target),
            modal = target.closest(layoutr.modal[0]);

        if (!layoutr.isLoading() && !layoutr.isFocus()) {
            if (bowser.ios) {
                // ios browsers doesn't apply :focus to buttons in many cases,
                // this forces :focus to be applied correctly.
                if (target.parents('button').length) {
                    target.parents('button').focus();
                } else if (target.closest('button').length) {
                    target.focus();
                }
            }

            if (layoutr.isAuthentication() && !target.closest('#authentication').length && !target.closest('#modal').length) {
                layoutr.html.attr('data-authentication', '');
            } else if (modal.length) {
                let image = layoutr.isModalImage() && !target.closest('#modal-toggle').length && !target.closest('#modal-title').length && !target.closest('#modal-description').length,
                    form = layoutr.isModalForm() && !target.closest('#modal > div > div > div').length;
                if (image || form || target.closest('#modal-close').length) {
                    layoutr.closeModal();
                }
            } else {
                let isSmallBreakpoint = layoutr.isSmallBreakpoint(),
                    left = layoutr.isAsideLeft() && (layoutr.isAsideLeftCloseOnClickOutside() || isSmallBreakpoint) && !target.closest("#left").length,
                    right = layoutr.isAsideRight() && (layoutr.isAsideRightCloseOnClickOutside() || isSmallBreakpoint) && !target.closest("#right").length,
                    notTarget = !target.closest(".aside").length && !target.closest('.popup').length && !target.closest('#cookie').length;
                if ((left || right) && notTarget && !layoutr.isLoading()) {
                    layoutr.enableScroll();
                    layoutr.toggleAside(undefined, false);
                }
            }
        }
    });
}
{
    layoutr.promiseFont = new Promise((resolve, reject) => {
        WebFont.load({
            typekit: {
                id: ['bhz3dxx']
            },
            active: () => {
                resolve();
            },
            inactive: () => {
                reject();
            }
        });
    }).catch((e) => {
        //layoutr.showPopupAlert('Failed to load fonts', 'danger');
        console.error(e);
    });
}
{
    layoutr.contentLoaded = (element) => {
        layoutr.checkResponsiveBackground(element.find('.rb'));
        layoutr.checkLazy(element.find('.lazy'));
        layoutr.checkAccordion(element.find('.accordion'));
        layoutr.checkDropdown(element.find('select.dropdown'));
        layoutr.checkTooltip(element.find('.tooltip'));
        layoutr.checkAssignment(element.find('.assignment'));
        layoutr.checkMath(element.find('.math'));
        layoutr.checkMedia(element.find('audio, video'));
        layoutr.checkMap(element.find('.map'));
        layoutr.checkDatatable(element.find('.dataTable'));
        layoutr.checkSwiper(element.find('.swiper'));
    };

    layoutr.pageLoaded = (initial) => {
        let promiseScrollTop = new Promise((resolve, reject) => {
            layoutr.main.css('overflow', 'auto');
            layoutr.main.scrollTop(0);
            layoutr.main.css('overflow', '');
            setTimeout(() => {
                layoutr.html.scrollTop(0);
                resolve();
            });
        }).then(() => {
            setTimeout(() => {
                if (!initial && layoutr.isCloseLeftPageChange()) {
                    layoutr.toggleAside(undefined, true);
                }
            }, 200);

            if (initial) {
                layoutr.promiseFont.then(() => {
                    $('#site').css('display', 'block');
                    layoutr.responsiveHeader();
                    layoutr.contentLoaded(layoutr.content);
                    let scroll = JSON.parse(localStorage.getItem("scroll"));
                    layoutr.enableScroll();
                    // promise version doesn't always scroll to correct position
                    $.Deferred((defer) => {
                        if (scroll !== null && window.location.href === scroll.href) {
                            let scrollTop = layoutr.body[0].scrollHeight >= scroll.scrollTop ? scroll.scrollTop : layoutr.body[0].scrollHeight;
                            $("html, body").animate({
                                scrollTop: scrollTop
                            }, 0, defer.resolve);
                        } else {
                            defer.resolve();
                        }
                    }).done(() => {
                        layoutr.hideLoading();
                        layoutr.html.addClass('site-loaded');
                        $(window).scroll($.throttle(layoutr.throttleInterval, false, () => {
                            layoutr.setScrollTop();
                        }));

                        $(window).resize($.throttle(layoutr.throttleInterval, false, () => {
                            layoutr.checkModal();
                            layoutr.setHtmlScroll();
                            layoutr.setScrollTop();
                        }));
                    });
                });
            } else {
                layoutr.hideLoading();
                layoutr.contentLoaded(layoutr.content);
            }
        });
    };
}
{
    $(() => {
        $.validator.setDefaults({
            submitHandler: () => {
                alert("Fake submitted!");
            }
        });

        $.validator.addMethod('password_regex', (value) => {
            return /^(?=.*[a-zæøå])(?=.*[A-ZÆØÅ])(?=.*\d).{8,}$/.test(value);
        }, 'Password must contain at least eight characters, one uppercase letter, one lowercase letter and one number');
    });

    layoutr.addValidation = (form, rules, messages) => {
        form.validate({
            rules: rules,
            messages: messages,
            errorElement: "em",
            errorPlacement: (error, element) => {
                element = element.parent();
                if (element.hasClass('checkbox') || element.hasClass('radio') || element.hasClass('input-group')) {
                    element = element.parent();
                }
                element.append(error);
            },
            highlight: (element, errorClass, validClass) => {
                $(element).parents(".form-group").addClass("theme-danger");
            },
            unhighlight: (element, errorClass, validClass) => {
                $(element).parents(".form-group").removeClass("theme-danger");
            }
        });
        form.on('change', 'input, textarea, select', (e) => {
            $(e.currentTarget).valid();
        });
    };
}
{
    let fullscreenScrollTop;

    layoutr.requestFullScreen = () => {
        if (!layoutr.fullscreen && bowser.desktop) {
            fullscreenScrollTop = layoutr.scrollTop();
            if (layoutr.document.requestFullscreen) {
                layoutr.document.requestFullscreen();
            }
            else if (layoutr.document.msRequestFullscreen) {
                layoutr.document.msRequestFullscreen();
            }
            else if (layoutr.document.mozRequestFullScreen) {
                layoutr.document.mozRequestFullScreen();
            }
            else if (layoutr.document.webkitRequestFullscreen) {
                layoutr.document.webkitRequestFullscreen();
            }
        }
    };

    let fullscreenChange = () => {
        layoutr.fullscreen = !layoutr.fullscreen;
        if (!layoutr.fullscreen && bowser.desktop) {
            if (layoutr.isModal()) {
                layoutr.closeModal();
            }
            layoutr.body.scrollTop(fullscreenScrollTop);
            layoutr.html.scrollTop(fullscreenScrollTop);
        }
    };

    document.addEventListener('webkitfullscreenchange', fullscreenChange, false);
    document.addEventListener('mozfullscreenchange', fullscreenChange, false);
    document.addEventListener('fullscreenchange', fullscreenChange, false);
    document.addEventListener('MSFullscreenChange', fullscreenChange, false);

    layoutr.exitFullScreen = () => {
        if (layoutr.fullscreen && bowser.desktop) {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            }
            else if (document.msExitFullscreen) {
                document.msExitFullscreen();
            }
            else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen();
            }
            else if (document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
            }
        }
    };

    layoutr.toggleFullScreen = (element) => {
        if (layoutr.fullscreen)
            exitFullScreen();
        else
            requestFullScreen(element);
    };
}
{
    let scrollbarWidth = () => {
        layoutr.body.append('<div id="scrollbar-width"></div>');
        let element = layoutr.body.children('#scrollbar-width');
        element.css({
            'overflow': "scroll",
            'visibility': "hidden",
            'position': 'absolute',
            'width': '100px',
            'height': '100px'
        });
        layoutr.scrollbarWidth = element[0].offsetWidth - element[0].clientWidth;
        element.remove();
    };

    layoutr.disableScroll = () => {
        if (layoutr.htmlOverflowEnabled) {
            layoutr.htmlOverflowEnabled = false;
            if (layoutr.isModal()) {
                layoutr.checkModal();
                layoutr.modal.focus();
            }
            let scrollTop = layoutr.scrollTop();
            layoutr.html.addClass('scroll-disabled');
            layoutr.body.scrollTop(scrollTop);
            layoutr.main.scrollTop(scrollTop);
        }
    };

    layoutr.enableScroll = () => {
        if (!layoutr.htmlOverflowEnabled) {
            layoutr.htmlOverflowEnabled = true;
            if (layoutr.isSiteLoaded()) {
                let scrollTop = layoutr.scrollTop();
                layoutr.html.removeClass('scroll-disabled modal');
                layoutr.main.focus();
                layoutr.body.scrollTop(scrollTop); // edge, safari
                layoutr.html.scrollTop(scrollTop); // chrome, firefox, ie
            } else {
                layoutr.html.removeClass('scroll-disabled modal');
            }
        }
    };

    layoutr.setHtmlScroll = () => {
        if (!layoutr.isModal() && !layoutr.isLoading() && !layoutr.htmlOverflowEnabled && (!layoutr.isSmallBreakpoint() || layoutr.isSmallBreakpoint() && !layoutr.isAsideLeft() && !layoutr.isAsideRight())) {
            layoutr.enableScroll();
        } else if (layoutr.isModal() || layoutr.isSmallBreakpoint() && layoutr.htmlOverflowEnabled && (layoutr.isAsideLeft() || layoutr.isAsideRight())) {
            layoutr.disableScroll();
        }
    };

    $(() => {
        scrollbarWidth();
    });

    layoutr.setScrollTop = () => {
        let entry = {
            href: window.location.href,
            scrollTop: layoutr.scrollTop()
        };
        localStorage.setItem('scroll', JSON.stringify(entry));
    };

}
{
    layoutr.showLoading = () => {
        layoutr.loadingCount++;
        layoutr.disableScroll();
        layoutr.html.addClass('loading');
    };

    layoutr.hideLoading = () => {
        layoutr.loadingCount--;
        if (layoutr.loadingCount <= 0) {
            layoutr.loadingCount = 0;
            layoutr.html.removeClass('loading');
            layoutr.setHtmlScroll();
        }
    };
}
{
    let transitionLock = false;

    layoutr.asideChanged = () => {
        let trigger = () => {
            layoutr.html.trigger('aside-changed.datatables');
            layoutr.html.trigger('aside-changed.rb');
            layoutr.html.trigger('aside-changed.map');
        };

        if (layoutr.isTransitions()) {
            let awaitInterval = setInterval(() => {
                if (!transitionLock) {
                    clearInterval(awaitInterval);
                } else {
                    trigger();
                }
            }, layoutr.awaitInterval);
            setTimeout(() => {
                transitionLock = false;
            }, layoutr.transitionTime);
        } else {
            transitionLock = false;
            trigger();
        }
    };

    layoutr.toggleAside = (aside, pageChanged) => {
        if (!transitionLock) {
            transitionLock = true;
            layoutr.html.attr('data-authentication', '');
            let currentAside = layoutr.html.attr('data-aside');
            if (currentAside.length) {
                if (aside === undefined || currentAside === aside) {
                    let scrollTop = layoutr.scrollTop();
                    layoutr.html.attr('data-aside', '');
                    layoutr.main.focus();
                    layoutr.body.scrollTop(scrollTop); // edge, safari
                    layoutr.html.scrollTop(scrollTop); // chrome, firefox, ie
                } else {
                    layoutr.html.attr('data-aside', aside);
                }
            } else {
                layoutr.html.attr('data-aside', aside);
            }
            if (aside === 'left') {
                layoutr.left.focus();
            } else if (aside === 'right') {
                layoutr.right.focus();
            }

            layoutr.asideChanged();
            layoutr.setHtmlScroll();
        }
    };

    $(() => {
        layoutr.main.find('.aside.left').click(() => {
            layoutr.toggleAside('left');
        });

        layoutr.main.find('.aside.right').click(() => {
            layoutr.toggleAside('right');
        });
    });
}
{
    $(() => {
        layoutr.authentication.on('click', '> div > button', (e) => {
            let $this = $(e.currentTarget),
                type = $this.attr('data-type');
            if (layoutr.html.attr('data-authentication') === type) {
                layoutr.html.attr('data-authentication', '');
            } else {
                layoutr.html.attr('data-authentication', type);
                layoutr.authentication.children(':last-child').focus();
            }
        });

        layoutr.authenticatedLinks.on('click', '> a', (e) => {
            e.preventDefault();
        });

        layoutr.addValidation(
            layoutr.authentication.find('.register > form'),
            {
                register_username: {
                    required: true,
                    minlength: 2
                },
                register_password: {
                    required: true,
                    password_regex: true
                },
                register_confirm_password: {
                    required: true,
                    equalTo: "#register_password"
                },
                register_email: {
                    required: true,
                    email: true
                }
            },
            {
                register_username: {
                    required: "Please enter your username"
                },
                register_password: {
                    required: "Please enter your password"
                },
                register_confirm_password: {
                    required: "Please provide a password",
                    equalTo: "Please enter the same password as above"
                },
                register_email: "Please enter a valid email address"
            }
        );

        layoutr.addValidation(
            layoutr.authentication.find('.login > form'),
            {
                username: {
                    required: true
                },
                password: {
                    required: true
                }
            },
            {
                username: {
                    required: "Please enter your username"
                },
                password: {
                    required: "Please enter your password"
                }
            }
        );
    });
}
{
    $(() => {
        layoutr.cookie.on('click', '#cookie-accept', () => {
            localStorage.setItem('cookie', 'cookie');
            layoutr.html.removeClass('cookie');
        });

        let cookie = localStorage.getItem("cookie");
        if (cookie === null) {
            layoutr.html.addClass('cookie');
        }
    });
}
{
    layoutr.loadPage = (url, pushState, initial) => {
        layoutr.showLoading();
        layoutr.load.html(`${layoutr.host}${layoutr.ajax}pages${url === '/' ? '/home' : url}.html`).then((response) => {
            layoutr.content.html(response);
            let q = url.indexOf('?');
            url = url.substring(0, q !== -1 ? q : url.length);
            layoutr.left.find('.tree a.label.active').removeClass('active');
            layoutr.left.find(`a.label[href="${url}"]`).addClass('active');
            layoutr.html.attr('data-status', '');
            layoutr.title.html('');
            document.title = layoutr.siteName;
            if (url === '/') {
                if (layoutr.body.children('#svg-browser').length === 0) {
                    layoutr.load.html(layoutr.host + layoutr.ajax + 'svg/browser.html').then((response) => {
                        $(response).prependTo(layoutr.body);
                    }).catch((e) => {
                        layoutr.showPopupAlert('Failed to load browser svg html', 'danger');
                        console.error(e);
                    });
                }
                if (layoutr.body.children('#svg-os').length === 0) {
                    layoutr.load.html(layoutr.host + layoutr.ajax + 'svg/os.html').then((response) => {
                        $(response).prependTo(layoutr.body);
                    }).catch((e) => {
                        layoutr.showPopupAlert('Failed to load os svg html', 'danger');
                        console.error(e);
                    });
                }
            } else {
                let title = layoutr.capitalize(url.replace('/', '').replaceAll('-', ' '));
                layoutr.title.html(title);
                document.title = `${title} - ${layoutr.siteName}`;
                if (url === '/form') {
                    layoutr.pageForm();
                }
            }
            layoutr.html.trigger('header-changed.responsiveHeader');
            layoutr.promiseCSS.then(() => {
                layoutr.pageLoaded(initial);
            });
        }).catch((response) => {
            layoutr.load.html(layoutr.host + layoutr.ajax + 'pages/error.html').then((response2) => {
                layoutr.content.html(response2);
                layoutr.html.attr('data-status', 'error');
                document.title = `${response}-${layoutr.siteName}`;
                let title = `${response} - `;
                if (response === 404) {
                    title += 'Page not found';
                } else {
                    title += 'Server error';
                }
                layoutr.content.find('#error-title').html(title);
                layoutr.html.trigger('header-changed.responsiveHeader');
            }).catch((e) => {
                layoutr.showPopupAlert('Failed to load content html', 'danger');
                console.error(e);
            }).finally(() => {
                layoutr.promiseCSS.then(() => {
                    layoutr.pageLoaded(initial);
                });
            });
        });

        let historyUrl = (layoutr.isLocalhost ? '' : `/${window.location.pathname.split('/')[1]}`) + url;
        if (pushState) {
            window.history.pushState(null, null, historyUrl);
            loadPage = true;
        }
    };

    layoutr.internalLinkClick = (href, e) => {
        if (!e.ctrlKey) {
            e.preventDefault();
            layoutr.loadPage(href, true, false);
        }
    };

    if (window.location.search) {
        layoutr.url = {};
        window.location.search.slice(1).split('&').forEach((v) => {
            let a = v.split('=');
            layoutr.url[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&');
        });
        if (layoutr.url.p !== undefined) {
            window.history.replaceState(null, null,
                window.location.pathname.slice(0, -1) + layoutr.url.p +
                (layoutr.url.q ? `?${layoutr.url.q}` : '') +
                window.location.hash
            );
        }
    }

    let loadPage = window.history.state;
    window.onpopstate = (e) => {
        if (loadPage) {
            let url = location.pathname;
            if (!layoutr.isLocalhost) {
                url = url.substring(url.indexOf("/", url.indexOf("/") + 1));
            }
            layoutr.loadPage(url, false, true);
        }
    };

    layoutr.applyNavigation = (id, value, set) => {
        if (set) {
            let entry = {
                "id": id,
                "value": value
            },
                exists = $.grep(layoutr.navigation, (e) => { return e.name === name; });
            if (exists.length === 0) {
                // not found
                layoutr.navigation.push(entry);
            } else if (exists.length === 1) {
                // found
                exists[0].value = value;
            }
            localStorage.setItem('navigation', JSON.stringify(layoutr.navigation));
        } else {
            layoutr.left.find(`#${id}`).prop('checked', value);
        }
    };

    $(() => {
        layoutr.load.html(layoutr.host + layoutr.ajax + 'layout/navigation.html').then((response) => {
            layoutr.left.find('> .content > div').html(response);
            layoutr.navigationTree = layoutr.left.find('.tree');
            layoutr.navigation = JSON.parse(localStorage.getItem("navigation"));
            if (layoutr.navigation === null) layoutr.navigation = [];
            $.each(layoutr.navigation, (i, entry) => {
                layoutr.applyNavigation(entry.id, entry.value, false);
            });
            layoutr.navigationTree.on('change', 'input[type=checkbox]', (e) => {
                let checkbox = $(e.currentTarget),
                    id = checkbox.attr('id'),
                    value = checkbox.is(':checked');
                layoutr.applyNavigation(id, value, true);
            });
            layoutr.header.find('.aside.left').addClass('loaded');
            if (layoutr.url && layoutr.url.p) {
                layoutr.navigationTree.find(`a.label[href="${layoutr.url.p}"]`).addClass('active');
            } else {
                layoutr.navigationTree.find('a.label[href=""]').addClass('active');
            }
        }).catch((e) => {
            layoutr.showPopupAlert('Failed to load navigation html', 'danger');
            console.error(e);
        });

        if (layoutr.url && layoutr.url.p) {
            layoutr.loadPage(layoutr.url.p, true, true);
        } else {
            let l = window.location,
                segmentCount = l.origin.endsWith('github.io') ? 1 : 0,
                url = `/${l.pathname.slice(1).split('/').slice(segmentCount)}`;
            layoutr.loadPage(url, true, true);
        }
        layoutr.left.on('click', '.tree a.label:not(.active)', (e) => {
            layoutr.internalLinkClick($(e.currentTarget).attr('href'), e);
        });

        layoutr.body.on('click', '.internal-link', (e) => {
            layoutr.internalLinkClick($(e.currentTarget).attr('href'), e);
        });

        layoutr.left.on('click', '#navigation-expand', () => {
            layoutr.navigationTree.find('input[type=checkbox]:not(:checked)').click();
        });

        layoutr.left.on('click', '#navigation-collapse', () => {
            layoutr.navigationTree.find('input[type=checkbox]:checked').click();
        });
    });
}
{
    layoutr.applySettings = (id, name, type, value, set) => {
        if (set) {
            let entry = {
                "id": id,
                "name": name,
                "type": type,
                "value": value
            },
                exists = $.grep(layoutr.settings, (e) => { return e.name === name; });
            if (exists.length === 0) {
                // not found
                layoutr.settings.push(entry);
            } else if (exists.length === 1) {
                // found
                exists[0].id = id;
                exists[0].value = value;
            }
            localStorage.setItem('settings', JSON.stringify(layoutr.settings));
        } else {
            if (type === "checkbox" || type === "radio") {
                layoutr.right.find(`#settings-${id}`).prop('checked', value);
            } else if (type === "slider") {
                layoutr.right.find(`#settings-${id}`).slider('setValue', value);
            }
        }
        if (type === 'checkbox' || type === "radio") {
            if (type === 'radio') {
                $.each(layoutr.right.find(`input[type=radio][name="settings-${name}"]:not(#settings-${id})`), (i, radio) => {
                    layoutr.html.removeClass($(radio).attr('id').replace('settings-', ''));
                });
            }
            if (name === 'theme') {
                layoutr.loadTheme(id);
            }
            if (name === 'focus' && value) {
                layoutr.enableFocus();
            } else if (name === 'tts' && value) {
                //layoutr.enableTTS();
            } else if (name === 'swipe' && value) {
                layoutr.enableSwipe();
            }
            if (value) {
                layoutr.html.addClass(id);
            } else {
                layoutr.html.removeClass(id);
            }
            if (id === 'two-columns') {
                layoutr.html.trigger('columns-changed.rb');
            }
            if (id === 'signed-in' || id === 'focus' || id === 'tts') {
                layoutr.html.trigger('header-changed.responsiveHeader');
            }
            if (name === 'aside-left' || 'aside-right') {
                layoutr.asideChanged();
            }
        }
    };

    $(() => {
        layoutr.load.html(layoutr.host + layoutr.ajax + 'layout/settings.html').then((response) => {
            let $this = layoutr.right.find('> .content > div');
            $this.html(response);
            layoutr.promiseCSS.then(() => {
                $.each(layoutr.settings, (i, entry) => {
                    layoutr.applySettings(entry.id, entry.name, entry.type, entry.value, false);
                });
                layoutr.header.find('.aside.right').addClass('loaded');
                $this.on('change', 'input[type=checkbox], input[type=radio]', (e) => {
                    let input = $(e.currentTarget),
                        id = input.attr('id').replace('settings-', ''),
                        name = input.attr('name').replace('settings-', ''),
                        type = input.attr('type'),
                        value = input.is(':checked');
                    layoutr.applySettings(id, name, type, value, true);
                    if (id === 'left-shrink' || id === 'right-shrink' ||
                        id === 'left-push' || id === 'right-push' ||
                        id === 'left-overlay' || id === 'right-overlay') {
                        layoutr.setHtmlScroll();
                    }
                });
            });
        }).catch((e) => {
            layoutr.showPopupAlert('Failed to load settings html', 'danger');
            console.error(e);
        });

        layoutr.right.on('click', '#settings-clear-localstorage', () => {
            localStorage.clear();
            location.reload();
        });
    });
}
{
    $(() => {
        layoutr.body.on("keydown", (e) => {
            let target = $(e.target),
                parent = target.parent();
            if (layoutr.isLoading()) {
                if (e.which === 9 || e.ctrlKey && e.keyCode === 65) { // tab ||  ctrl + a
                    e.preventDefault();
                }
            } else {
                if (e.which === 37 && !layoutr.isFocus() && !layoutr.isModal()) { // left
                    if (!layoutr.arrowKeyLocked) {
                        if (layoutr.isAsideLeft()) {
                            layoutr.toggleAside(); // closes right
                        } else if (!layoutr.isAsideRight()) {
                            layoutr.toggleAside('right'); // opens right
                        }
                    }
                } else if (e.which === 39 && !layoutr.isFocus() && !layoutr.isModal()) { // right
                    if (!layoutr.arrowKeyLocked) {
                        if (layoutr.isAsideRight()) {
                            layoutr.toggleAside(); // closes left
                        } else if (!layoutr.isAsideLeft()) {
                            layoutr.toggleAside('left'); // opens left
                        }
                    }
                } else if (e.which === 27) { // esc
                    e.stopPropagation();
                    if (layoutr.tts !== undefined && layoutr.tts.IsSpeaking()) {
                        layoutr.stopTTS();
                    } else if (layoutr.isFocus()) {
                        layoutr.hideFocus();
                    } else if (layoutr.isModal()) {
                        layoutr.closeModal();
                    } else {
                        if (layoutr.isAside()) {
                            layoutr.toggleAside(); // closes aside
                        }
                        let popups = layoutr.body.children('.popup');
                        if (popups.length) {
                            popups.fadeOut(layoutr.fadeOutTime, () => {
                                popups.remove();
                            });
                        }
                        let dropdowns = layoutr.content.find('div.dropdown.open');
                        if (dropdowns.length) {
                            dropdowns.removeClass('open');
                        }
                        layoutr.html.attr('data-authentication', '');
                    }
                }
                if (e.which === 13) { // enter
                    let dropdown = target.parents('div.dropdown');
                    if (dropdown.length || parent.parent().hasClass('accordion')) {
                        target.click();
                        e.preventDefault();
                        if (dropdown.length) {
                            dropdown.children('div').focus();
                        }
                    } else if (parent.hasClass('checkbox') || parent.hasClass('radio') || parent.hasClass('switch') || target.hasClass('toggle')) {
                        target.siblings('input').click();
                        e.preventDefault();
                    }
                }
            }
        });

        layoutr.body.on('keyup', (e) => {
            if (!layoutr.isLoading() && !layoutr.isFocus()) {
                if (e.which === 9) { // tab
                    let target = $(e.target);
                    if (!target.parents('div.dropdown.open').length) {
                        $('div.dropdown.open').removeClass('open');
                    }
                    if (!target.parents('#authenticated.open').length || target.closest('#authenticated > button').length) {
                        $('#authenticated.open').removeClass('open');
                    }
                    if (layoutr.isModal()) {
                        if (!target.parents('#modal').length) {
                            layoutr.closeModal();
                        }
                    } else {
                        let aside = target.parents('aside');
                        if (aside.length === 0 && target.is('aside')) {
                            aside = target;
                        }
                        if (aside.length && aside.attr('id') !== layoutr.html.attr('data-aside')) {
                            layoutr.toggleAside(aside.attr('id'));
                        } else if (!aside.length && layoutr.isAside()) {
                            layoutr.toggleAside();
                        }
                    }
                }
            }
        });
    });
}
{
    layoutr.showModal = (type) => {
        layoutr.html.attr('data-modal', type);
        layoutr.html.addClass('modal');
        layoutr.hideLoading();
        layoutr.checkModal();
        layoutr.modal.focus();
    };

    layoutr.closeModal = () => {
        if (layoutr.fullscreen) {
            layoutr.exitFullScreen();
        } else {
            layoutr.html.removeClass('modal').attr('data-modal', '');
            layoutr.modal.removeClass('info-shown').empty();
            layoutr.checkModal();
            layoutr.setHtmlScroll();
        }
    };

    layoutr.checkModal = () => {
        if (layoutr.isModal()) {
            layoutr.body.css('padding-right', layoutr.scrollbarWidth);
            if (layoutr.html.attr('data-aside') === 'right') {
                layoutr.right.css('margin-right', layoutr.scrollbarWidth);
            }
            layoutr.body.children('.popup').css('margin-right', layoutr.scrollbarWidth);
        } else {
            layoutr.body.css('padding-right', 0);
            layoutr.right.css('margin-right', 0);
            layoutr.body.children('.popup').css('margin-right', 0);
        }
        layoutr.html.trigger('model-check');
    };

    $(() => {
        layoutr.body.on('click', '.modal', (e) => {
            let $this = $(e.currentTarget),
                type = $this.attr('data-modal');
            if (type !== undefined && type.length && (type === 'image' || type === 'form')) {
                layoutr.showLoading();
                let id = $this.attr('data-modal-id'),
                    dataTitle = $this.attr('data-modal-title'),
                    dataContent = $this.attr('data-modal-content'),
                    dataFullscreen = $this.attr('data-modal-fullscreen') === 'true';

                let template = () => {
                    let result;

                    if (type === 'image' && $this.attr('data-modal-img').length) {
                        if (dataTitle !== undefined || dataContent !== undefined) {
                            layoutr.modal.addClass('has-info');
                        }
                        result = 
`${dataTitle !== undefined || dataContent !== undefined ? `
<button id="modal-toggle" class="btn" aria-label="Toggle info">
    <svg focusable="false"><use xlink:href="#svg-info"></use></svg>
</button>
${dataTitle !== undefined ? `<div id="modal-title">${dataTitle}</div>` : ''}
${dataContent !== undefined ? `<div id="modal-content">${dataContent}</div>` : ''}
` : ''}
<img id="modal-img" />`;
                    } else if (type === 'form') {
                        result = 
`<div class="header">
    ${dataTitle !== undefined ? `<span class="title">${dataTitle}</span>` : ''}
    <button id="modal-close" class="close expand" aria-label="Close ${dataTitle !== undefined ? dataTitle : ''}">
        <svg focusable="false"><use xlink:href="#svg-close"></use></svg>
    </button>
</div>
<div class="content">
</div>`;
                    }
                    return result;
                };

                let html = 
`<div>
    <div>
        <div id="modal-container">
            ${template()}
        </div>
    </div>
</div>`;
                layoutr.modal.html(html);
                if (type === 'image') {
                    let image = layoutr.modal.find('#modal-img');
                    image.on('load', () => {
                        if (bowser.android) {
                            image.css('max-height', window.innerHeight);
                        }
                        layoutr.showModal(type);
                    });
                    image.attr('src', $this.attr('data-modal-img'));
                } else {
                    let dataSize = $this.attr('data-modal-size');
                    if (dataSize !== undefined) {
                        layoutr.modal.children('div').attr('data-modal-size', dataSize);
                    }
                    let content = layoutr.modal.find('#modal-container > .content');
                    content.append(dataContent);
                    layoutr.contentLoaded(content);
                    layoutr.showModal(type);
                }
                if (dataFullscreen) {
                    layoutr.requestFullScreen();
                }
            }
        });

        layoutr.body.on('click', '#modal-toggle', () => {
            layoutr.modal.toggleClass('info-shown');
        });
    });
}
{
    layoutr.responsiveHeader = () => {
        let h1 = layoutr.header.find('h1'),
            link = h1.children('a');

        let check = () => {
            h1.addClass('show-title');
            layoutr.unauthenticated.addClass('show-text');
            if (h1.outerWidth() < link.outerWidth()) {
                layoutr.unauthenticated.removeClass('show-text');
                if (h1.outerWidth() < link.outerWidth()) {
                    h1.removeClass('show-title');
                }
            }
        };

        $(window).on('resize', () => {
            check();
        });

        check();

        layoutr.html.on('header-changed.responsiveHeader', () => {
            check();
        });
    };
}
{
    layoutr.enableFocus = () => {
        let component = layoutr.focus.find('> .component > div');

        if (!layoutr.html.hasClass('focus-loaded')) {
            layoutr.showLoading();
            layoutr.promiseFocus = layoutr.load.js('dist/js/focus.js').finally(() => {
                layoutr.hideLoading();
            });
            layoutr.html.addClass('focus-loaded');
        }

        layoutr.promiseFocus.then(() => {
            component
                .draggable({
                    axis: "y",
                    containment: "parent",
                    handle: ".move"
                })
                .resizable({
                    handles: {
                        n: '.ui-resizable-n',
                        s: '.ui-resizable-s'
                    },
                    minHeight: 50,
                    containment: "parent"
                }).on('resize', (e) => {
                    e.stopPropagation();
                });

            layoutr.focus.on('click', '.close', () => {
                layoutr.hideFocus();
            });

            layoutr.main.find('.focus').click(() => {
                layoutr.showFocus();
            });

            let height = $(window).height();
            $(window).resize(() => {
                // do nothing if the height is the same
                if ($(window).height() === height) return;
                height = $(window).height();
                component.removeAttr('style');
            });
        }).catch((e) => {
            layoutr.showPopupAlert('Failed to load focus', 'danger');
            console.error(e);
        });
    };

    layoutr.showFocus = () => {
        layoutr.html.attr('data-authentication', '');
        layoutr.html.attr('data-focus', true);
        layoutr.focus.focus();
    };
    layoutr.hideFocus = () => {
        let scrollTop = layoutr.scrollTop();
        layoutr.html.attr('data-focus', false);
        layoutr.main.focus();
        layoutr.body.scrollTop(scrollTop); // edge, safari
        layoutr.html.scrollTop(scrollTop); // chrome, firefox, ie
    };
}
{
    layoutr.enableSwipe = () => {
        if (bowser.android) {
            let xDown = null,
                yDown = null,
                offsetBefore;

            let handleTouchStart = (e) => {
                if (layoutr.isSwipe()) {
                    xDown = e.touches[0].clientX;
                    yDown = e.touches[0].clientY;

                    offsetBefore = $(e.target).offset().left;
                }
            };

            let handleTouchMove = (e) => {
                if (layoutr.isSwipe()) {
                    let offsetAfter = $(e.target).offset().left;
                    if (!xDown || !yDown || offsetBefore !== offsetAfter) {
                        return;
                    }
                    let xUp = e.changedTouches[0].clientX,
                        yUp = e.changedTouches[0].clientY,
                        xDiff = xDown - xUp,
                        yDiff = yDown - yUp;
                    if (Math.abs(xDiff) > Math.abs(yDiff)) {
                        let distance = parseInt($(window).width() / 2);
                        if (yDiff > -100 || yDiff < 100) {
                            let currentAside;
                            if (xDiff > distance) {
                                /* left swipe */
                                if (!layoutr.isModal() && !layoutr.isLoading()) {
                                    currentAside = layoutr.html.attr('data-aside');
                                    if (currentAside === 'left' && currentAside !== 'right') {
                                        layoutr.toggleAside();
                                    } else if (currentAside !== 'right') {
                                        layoutr.toggleAside('right');
                                    }
                                }
                            } else if (xDiff < -distance) {
                                /* right swipe */
                                if (!layoutr.isModal() && !layoutr.isLoading()) {
                                    currentAside = layoutr.html.attr('data-aside');
                                    if (currentAside === 'right' && currentAside !== 'left') {
                                        layoutr.toggleAside();
                                    } else if (currentAside !== 'left') {
                                        layoutr.toggleAside('left');
                                    }
                                }
                            }
                        }

                    }
                    /* reset values */
                    xDown = null;
                    yDown = null;
                }
            };
            document.addEventListener('touchstart', handleTouchStart, false);
            document.addEventListener('touchend', handleTouchMove, false);
        }
    };
}
{
    layoutr.clearSelection = () => {
        let selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(document.createRange());
    };

    layoutr.stopTTS = () => {
        layoutr.clearSelection();
        if (layoutr.tts && layoutr.tts.IsSpeaking()) {
            layoutr.tts.ShutUp();
        }
    };

    layoutr.enableTTS = () => {
        if (bowser.desktop) {
            let snapSelectionToWord = () => {
                let selection = window.getSelection();
                if (!selection.isCollapsed) {
                    let range = selection.getRangeAt(0);
                    if (range.collapsed || range.toString().length === 0) {
                        return;
                    }

                    try {
                        // select full start word
                        while (range.startOffset > 0 && range.toString()[0].match(/[^\s]/)) {
                            range.setStart(range.startContainer, range.startOffset - 1);
                        }
                        // remove space as first selected
                        let start = range.startContainer.data.substring(range.startOffset).charAt(0);
                        if (start === ' ') {
                            range.setStart(range.startContainer, range.startOffset + 1);
                        }
                    } catch (e) {
                        console.error(e);
                    }

                    try {
                        // select full end word
                        while (range.endOffset < range.endContainer.length && range.toString()[range.toString().length - 1].match(/[^\s]/)) {
                            range.setEnd(range.endContainer, range.endOffset + 1);
                        }
                        // remove space as last selected
                        let end = range.endContainer.data.substring(0, range.endOffset).slice(-1);
                        if (end === ' ') {
                            range.setEnd(range.endContainer, range.endOffset - 1);
                        }
                    } catch (e) {
                        console.error(e);
                    }

                    selection.removeAllRanges();
                    selection.addRange(range);
                }
                return selection;
            };

            let getText = (node, selection) => {
                let text = [],
                    nonWhitespaceMatcher = /\S/,
                    getTextNodes = (node) => {
                        let parent = $(node.parentNode),
                            special = false;

                        if (selection.containsNode(node, false) && (node.nodeName.toLowerCase() === 'input' ||
                            node.nodeName.toLowerCase() === 'textarea') && nonWhitespaceMatcher.test(node.value)) {
                            special = true;
                        }

                        if (!special &&
                            selection.containsNode(node, true) &&
                            node.nodeType === 3 &&
                            nonWhitespaceMatcher.test(node.nodeValue) &&
                            parent.is(':visible') &&
                            parent.css('user-select') !== 'none' &&
                            parent.parents().css('user-select') !== 'none' &&
                            node.parentNode.tagName !== 'SCRIPT'
                        ) {
                            if (!(selection.extentNode.nodeType !== 3 && $(selection.extentNode).is(parent))) {
                                if (!node.nodeValue.match(/\.\s*$/) && node.nextElementSibling === null && parent.is('h1 span, h1, h2, h3, h4, h5, h6, p, th, td, .dataTable th span')) {
                                    text.push(node.nodeValue + '. ');
                                } else {
                                    text.push(node.nodeValue);
                                }
                            }
                            if (text.length === 1) {
                                if ($(selection.anchorNode).is(selection.focusNode)) {
                                    text[0] = text[0].substring(0, selection.focusOffset).substring(selection.baseOffset);
                                } else {
                                    text[0] = text[0].substring(selection.baseOffset);
                                }
                                if (text[0] === '. ' || text[0] === ' ') {
                                    text[0] = '';
                                }
                            }
                        } else {
                            for (let i = 0; i < node.childNodes.length; i++) {
                                getTextNodes(node.childNodes[i]);
                            }
                        }
                    };

                getTextNodes(node);
                if (text.length && text.length > 1) {
                    text[text.length - 1] = text[text.length - 1].substring(0, selection.focusOffset);
                }
                text = text.join(' ').replace(/(?:\r\n|\r|\n)/g, ' ').replace(/ +\./g, '. ').replace(/\s\s+/g, ' ').replace(',.', '.').trim();
                return text;
            };

            if (!layoutr.html.hasClass('tts-loaded')) {
                layoutr.showLoading();
                layoutr.PromiseTTS = layoutr.load.js('dist/js/tts.js').finally(() => {
                    layoutr.hideLoading();
                });
                layoutr.html.addClass('tts-loaded');
            }
            layoutr.PromiseTTS.then(() => {
                let awsCredentials = new AWS.Credentials('AKIAI5JMCVBZ4CWSSOOQ', 'FM7j9FbQLkUU8u3tHScv0IOG4IoayUkp/RNNNNni'),
                    settings = {
                        awsCredentials: awsCredentials,
                        awsRegion: 'eu-central-1',
                        pollyVoiceId: 'Russell'
                    };

                layoutr.tts = ChattyKathy(settings);

                layoutr.html.attr('data-tts', true);

                $(window).on('mousedown touchstart', (e) => {
                    if (!layoutr.isLoading() && !layoutr.isFocus() && layoutr.isTTS() && layoutr.isTTSEnabled()) {
                        layoutr.clearSelection();
                    }
                });

                $(window).on('mouseup touchend', (e) => {
                    if (!$(document.activeElement).is('input, textarea, button, select, .dropdown')) {
                        if (!layoutr.isLoading() && !layoutr.isFocus() && layoutr.isTTS() && layoutr.isTTSEnabled() && e.originalEvent.detail < 3) {
                            setTimeout(() => {
                                let selection = snapSelectionToWord(),
                                    text = getText(selection.getRangeAt(0).commonAncestorContainer, selection);

                                if (text.length) {
                                    layoutr.tts.SpeakWithPromise(text).then(() => {
                                        layoutr.clearSelection();
                                    });
                                } else {
                                    layoutr.stopTTS();
                                }
                            });
                        }
                    }
                });

                layoutr.header.find('.tts').click(() => {
                    if (layoutr.html.attr('data-tts') === 'true') {
                        layoutr.html.attr('data-tts', false);
                        layoutr.stopTTS();
                    } else {
                        layoutr.html.attr('data-tts', true);
                    }
                });
            }).catch((e) => {
                layoutr.showPopupAlert('Failed to load tts', 'danger');
                console.error(e);
            });
        }
    };
}
{
    $(() => {
        layoutr.html.on('model-check', () => {
            let contentHeader = layoutr.content.children('.content-header:not(.full)');
            if (contentHeader.length) {
                if (layoutr.isModal() && contentHeader.css('position') === 'fixed') {
                    let halfOverflowY = layoutr.scrollbarWidth / 2;
                    contentHeader.children().css('width', `calc(100% - ${halfOverflowY}px)`);
                } else {
                    contentHeader.children().css('width', '');
                }
            }
        });
    });
}
{
    //layoutr.loadTheme = (id) => {
    //    let stylesheet = layoutr.body.children(`link[rel="stylesheet"][href^="${layoutr.host}dist/css/theme/"]`),
    //        href1 = stylesheet.attr('href'),
    //        split1 = href1.split('/'),
    //        split2 = split1[split1.length - 1].split('.');
    //    let href2 = [];
    //    for (let i = 0; i < split1.length - 1; i++) {
    //        href2.push(split1[i] + '/');
    //    }
    //    let theme = id.substring(id.indexOf("-") + 1);
    //    href2.push(theme);

    //    for (let i = 1; i < split2.length; i++) {
    //        href2.push(`.${split2[i]}`);
    //    }
    //    href2 = href2.join("");
    //    if (href1 !== href2) {
    //        layoutr.showLoading();
    //        layoutr.load.css(href2).then(() => {
    //            stylesheet.remove();
    //        }).catch((e) => {
    //            layoutr.showPopupAlert('Failed to load theme', 'danger');
    //            console.error(e);
    //        }).finally(() => {
    //            layoutr.hideLoading();
    //        });
    //    }
    //};

    $(() => {
        let body = $("body"),
            colors = [
                {
                    name: 'blue',
                    value: '#0072ED'
                },
                {
                    name: 'indigo',
                    value: '#6610f2'
                },
                {
                    name: 'purple',
                    value: '´#6f42c1'
                },
                {
                    name: 'pink',
                    value: '#e83e8c'
                },
                {
                    name: 'red',
                    value: '#dc3545'
                },
                {
                    name: 'orange',
                    value: '#BE5A06'
                },
                {
                    name: 'yellow',
                    value: '#ffc107'
                },
                {
                    name: 'green',
                    value: '#218838'
                },
                {
                    name: 'teal',
                    value: '#20c997'
                },
                {
                    name: 'cyan',
                    value: '#138294'
                }
            ];
        let themeLight = {
            name: 'light',
            hover: 7.5,
            grays: [
                "#ffffff",
                "#f8f9fa",
                "#e9ecef",
                "#dee2e6",
                "#ced4da",
                "#adb5bd",
                "#6F7780",
                "#495057",
                "#343a40",
                "#212529",
                "#000000"
            ],
            colors: [
                {
                    name: "primary",
                    hex: () => { return colors.find(x => x.name === 'blue').value }
                },
                {
                    name: "secondary",
                    hex: () => { return themeLight.grays[6] }
                },
                {
                    name: "success",
                    hex: () => { return colors.find(x => x.name === 'green').value }
                },
                {
                    name: "info",
                    hex: () => { return colors.find(x => x.name === 'cyan').value }
                },
                {
                    name: "warning",
                    hex: () => { return colors.find(x => x.name === 'orange').value }
                },
                {
                    name: "danger",
                    hex: () => { return colors.find(x => x.name === 'red').value }
                },
                {
                    name: "light",
                    hex: () => { return themeLight.grays[1] }
                },
                {
                    name: "dark",
                    hex: () => { return themeLight.grays[8] }
                }
            ]
        };
        let themes = [
            themeLight
        ];

        function arraysEqual(a, b) {
            if (a === b) return true;
            if (a == null || b == null) return false;
            if (a.length != b.length) return false;

            // If you don't care about the order of the elements inside
            // the array, you should sort both arrays here.
            // Please note that calling sort on an array will modify that array.
            // you might want to clone your array first.

            for (var i = 0; i < a.length; ++i) {
                if (a[i] !== b[i]) return false;
            }
            return true;
        }

        let rgbAlpha = (rgb, percentage) => {
            return rgb.map(d => (d += percentage) < 0 ? 0 : d > 255 ? 255 : d | 0);
        };


        let yiq = rgb => {
            return rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114 > 145 ? [ 0, 0, 0 ] : [ 255, 255, 255 ];
        };

        let lighten = (rgb, percent) => {
            return rgbAlpha(rgb, percent);
        };

        let darken = (rgb, percent) => {
            return rgbAlpha(rgb, -percent);
        };

        let border = (color, yiq, percent) => {
            if (arraysEqual(yiq, [0, 0, 0])) {
                return darken(color, percent);
            } else {
                return lighten(color, percent);
            }
        };

        let hexToRgb = (hex) => {
            hex = hex.replace('#', '');
            return [
                parseInt(hex.substring(0, 2), 16),
                parseInt(hex.substring(2, 4), 16),
                parseInt(hex.substring(4, 6), 16)
            ];
        }



        let loadTheme = (name) => {
            let theme = themes.find(x => x.name === name);

            $.each(theme.grays, (i, gray) => {
                body.css(`--gray-${i * 10}`, hexToRgb(gray));
            });
            $.each(theme.colors, (i, color) => {
                let rgb = hexToRgb(color.hex());

                let variants = [
                    {
                        name: 'default',
                        value: rgb
                    },
                    {
                        name: 'default-hover',
                        value: rgbAlpha(rgb, theme.hover)
                    }
                ];

                $.each(variants, (j, variant) => {
                    let textColor = yiq(variant.value);
                    body.css(`--${color.name}-${variant.name}-background`, variant.value);
                    body.css(`--${color.name}-${variant.name}-text`, textColor);
                    body.css(`--${color.name}-${variant.name}-border`, border(variant.value, textColor, 20));
                });
            });
        };

        loadTheme('light');
    });
}
{
    layoutr.setOnline = () => {
        let online = navigator.onLine;

        layoutr.body.find('.alert[data-type="connected"]').remove();
        if (online) {
            layoutr.showPopupAlert('You are online', 'success', 'bottom right', 'connected');
        } else {
            layoutr.showPopupAlert('You are offline', 'danger', 'bottom right', 'connected');
        }
    };

    $(() => {
        window.addEventListener('online', layoutr.setOnline);
        window.addEventListener('offline', layoutr.setOnline);

        if (!navigator.onLine) {
            layoutr.setOnline();
        }
    });
}
{
    layoutr.checkDropdown = (dropdowns) => {
        dropdowns.each((i, e) => {
            let $this = $(e),
                selected = $this.children('option:selected'),
                attr = $this.attr('class'),
                theme = '',
                width = $this.attr('data-width');
            if (selected.length !== 1) {
                selected = $this.children().first();
            }
            if (typeof attr !== typeof undefined && attr !== false) {
                let temp = attr.split(' ');
                temp = $.grep(temp, (item, index) => {
                    return item.trim().match(/^theme-/);
                });
                if (temp.length === 1) {
                    theme = temp[0];
                }
            }

            let liTemplate = (e) => {
                let li = $(e),
                    text = li.text();
                if (!text.length) {
                    text = '&nbsp;';
                }
                if (text.indexOf('$$') === 0) {
                    li.attr('data-math', text);
                }
                return `<li data-id="${li.val()}"${li.is(':selected') ? ' class="selected"' : ''}>
    <div tabindex="0" class="theme-light">
        <label>${text}</label>
        <svg focusable="false"><use xlink:href="#svg-checkmark"></use></svg>
    </div>
</li>`;
            };
            let html = 
`<div class="dropdown
    ${$this.hasClass('not-first') ? ' not-first' : ''}
    ${$this.hasClass('nowrap') ? ' nowrap' : ''}
    ${$this.hasClass('check') ? ' check' : ''}
    ${$this.hasClass('ellipsis') ? ' ellipsis' : ''}
    ${$this.hasClass('align-left') ? ' align-left' : ''}
    ${$this.hasClass('align-right') ? ' align-right' : ''}
    ${$this.hasClass('direction-up') ? ' direction-up' : ''}
    "
    ${width !== undefined ? ` style="width: ${width}px"` : ''}
>
    <div tabindex="0" class="${theme}">
        <label>${selected.text()}</label>
        <svg focusable="false"><use xlink:href="#svg-arrow"></use></svg>
    </div>
    <ul class="${theme}">
        ${$.makeArray($this.children()).map(liTemplate).join('')}
    </ul>
</div>`;
            $this.after(html);
            html = $this.next();

            if ($this.hasClass('nowrap')) {
                let top = html.children().eq(0),
                    bottom = html.children().eq(1),
                    topWidth = top.width(),
                    bottomWidth = bottom.width();
                if (bottomWidth > topWidth) {
                    top.css('min-width', bottomWidth);
                }
            }

            html.on('click', '> div', (e) => {
                let $that = $(e.currentTarget);
                $that.parent().toggleClass('open');
            });
            html.on('click', 'li', (e) => {
                let $that = $(e.currentTarget);
                if (!$that.hasClass('selected')) {
                    console.log('test a');
                    $that.siblings('.selected').removeClass('selected');
                    $that.addClass('selected');
                    let option = $this.children(`[value="${$that.attr('data-id')}"]`),
                        text = $that.text(),
                        math = option.attr('data-math');
                    if (math !== undefined) {
                        text = math;
                    }
                    let label = html.children('div').children('label');
                    label.text(text);
                    if (math !== undefined) {
                        renderMathInElement(label[0]);
                    }
                    $this.children(':selected').removeAttr('selected');
                    option.prop('selected', true);
                    $this.change();
                }
                html.removeClass('open');
            });
        });
    };

    $(window).click((e) => {
        let target = $(e.target);
        if (target.closest("div.dropdown").length) {
            $('div.dropdown').not(target.closest("div.dropdown")).removeClass('open');
        }

        if (!target.closest(".dropdown").length) {
            $('div.dropdown').removeClass('open');
        }
    });
}
{
    layoutr.checkAccordion = (elements) => {
        elements.on("click", ".headline", (e) => {
            let content = $(e.currentTarget).next();
            if (content.hasClass('open')) {
                content
                    .removeClass('open')
                    .slideUp("800");
            } else {
                content
                    .addClass("open")
                    .slideToggle("800")
                    .parents('.accordion').find(".content.open").not(content).removeClass('open').slideUp("800");
            }
        });
    };
}
{
    let closeAlert = (target) => {
        target.fadeOut(layoutr.fadeOutTime, () => {
            let parent = target.parent();
            if (parent.hasClass('popup') && parent.children().length === 1) {
                parent.remove();
            } else {
                target.remove();
            }
        });
    };

    $(() => {
        layoutr.body.on('click', '.alert .close', (e) => {
            let target = $(e.currentTarget).parent();
            closeAlert(target);
        });
    });
}
{
    layoutr.checkMap = (maps) => {
        layoutr.head.find('script[src^="https://maps.googleapis.com/maps-api-"]').remove();
        if (maps.length) {
            if (!layoutr.html.hasClass('map-loaded')) {
                layoutr.showLoading();
                layoutr.promiseMap = layoutr.load.js('https://maps.googleapis.com/maps/api/js?key=AIzaSyBEcomDjRS4Nu3RQCkkSIQ0nrBhuQM0gng').finally(() => {
                    layoutr.hideLoading();
                });
                layoutr.html.addClass('map-loaded');
            }

            layoutr.promiseMap.then(() => {
                maps.each((i, e) => {
                    let $this = $(e),
                        lat = layoutr.tryParseFloat($this.attr('data-lat'), 37.4029937),
                        lng = layoutr.tryParseFloat($this.attr('data-lng'), -122.1811793),
                        zoom = layoutr.tryParseInt($this.attr('data-zoom'), 4),
                        cords = { lat: lat, lng: lng };

                    let map = new google.maps.Map($this[0], {
                        zoom: zoom,
                        center: cords
                    });

                    let marker = new google.maps.Marker({
                        position: cords,
                        map: map
                    });

                    $(window).bind('resize.map', $.throttle(layoutr.throttleInterval, false, () => {
                        google.maps.event.trigger($this[0], 'resize');
                    }));

                    layoutr.html.on('aside-changed.map', () => {
                        google.maps.event.trigger($this[0], 'resize');
                    });
                });
            }).catch((e) => {
                layoutr.showPopupAlert('Failed to load maps', 'danger');
                console.error(e);
            });
        } else {
            $(window).unbind('resize.map');
            layoutr.html.off('aside-changed.map');
        }
    };
}
{
    layoutr.checkMath = (math) => {
        if (math.length) {
            if (!layoutr.html.hasClass('math-loaded')) {
                layoutr.showLoading();
                layoutr.promiseMath = Promise.all([
                    layoutr.load.css('dist/css/katex.css'),
                    layoutr.load.js('dist/js/katex.js')
                ]).finally(() => {
                    layoutr.hideLoading();
                });
                layoutr.html.addClass('math-loaded');
            }

            layoutr.promiseMath.then(() => {
                math.each((i, e) => {
                    let $this = $(e);
                    renderMathInElement($this[0]);
                    setTimeout(() => {
                        $this.removeClass('math');
                    });
                });
            }).catch((e) => {
                layoutr.showPopupAlert('Failed to load math', 'danger');
                console.error(e);
            });
        }
    };
}
{
    layoutr.checkMedia = (media) => {
        if (media.length) {
            if (!layoutr.html.hasClass('media-loaded')) {
                layoutr.showLoading();
                layoutr.promiseMedia = Promise.all([
                    layoutr.load.css('dist/css/plyr.css'),
                    layoutr.load.js('dist/js/plyr.js')
                ]).finally(() => {
                    layoutr.hideLoading();
                });
                layoutr.html.addClass('media-loaded');
            }

            layoutr.promiseMedia.then(() => {
                media.each((i, item) => {
                    new Plyr(item);
                });
            }).catch((e) => {
                layoutr.showPopupAlert('Failed to load media', 'danger');
                console.error(e);
            });
        }
    };
}
{
    layoutr.checkLazy = (elements) => {
        elements.lazy({
            afterLoad: (element) => {
                element.removeClass('lazy');
            }
        });
    };
};
{
    $(() => {
        layoutr.body.on('click', '.show-popup-alert', (e) => {
            let $this = $(e.currentTarget),
                title = $this.attr('data-popup-title'),
                theme = $this.attr('data-popup-theme'),
                position = $this.attr('data-popup-position');
            layoutr.showPopupAlert(title, theme, position);
        });
    });

    layoutr.showPopupAlert = (title, theme = 'light', position = 'top left', type = 'default') => {
        if (title !== undefined) {
            let popup = layoutr.body.children(`.popup[data-position="${position}"]`),
                html =
                    `<div class="alert theme-${theme}" data-type="${type}">
<div><p>${title}</p></div>
<button class="close" aria-label="Close popup"><svg focusable="false"><use xlink:href="#svg-close"></use></svg></button>
</div>`;
            if (popup.length) {
                popup.append(html);
            } else {
                html = `<div class="popup position ${position}" data-position="${position}">${html}`;
                html = `${html}</div>`;
                layoutr.body.prepend(html);
            }
        }
    };
}
{
    layoutr.checkResponsiveBackground = (elements) => {
        let setRb = (element) => {
            let clone = element.children('.clone'),
                image = element.attr('data-rb-image'),
                filetype = element.attr('data-rb-image-filetype'),
                sizesWidth = element.attr('data-rb-sizes'),
                current = element.attr('data-rb-current'),
                aspectRatio = element.attr('data-rb-aspect-ratio');
            if (image !== undefined && image.length &&
                filetype !== undefined && filetype.length &&
                sizesWidth !== undefined && sizesWidth.length &&
                aspectRatio !== undefined && aspectRatio.length) {
                if ((filetype === 'jpg' || filetype === 'jpeg' || filetype === 'png') &&
                    (aspectRatio === '21by9' || aspectRatio === '16by9' || aspectRatio === '4by3' || aspectRatio === '1by1')) {
                    sizesWidth = sizesWidth.replace(/\s/g, '').split(',').sort((a, b) => { return a - b; });
                    clone.attr('style', element.attr('style'));

                    let goalWidth = element.width(),
                        goalHeight = element.height(),
                        closestWidth,
                        closestHeight,
                        heightPercentage;

                    let getHeightInPercentage = (num, amount) => {
                        return num * 100 / amount;
                    };

                    if (aspectRatio === '21by9') {
                        heightPercentage = getHeightInPercentage(9, 21);
                    } else if (aspectRatio === '16by9') {
                        heightPercentage = getHeightInPercentage(9, 16);

                    } else if (aspectRatio === '4by3') {
                        heightPercentage = getHeightInPercentage(3, 4);

                    } else if (aspectRatio === '1by1') {
                        heightPercentage = 100;
                    }

                    let getHeightInPixels = (num, amount) => {
                        return num * amount / 100;
                    };

                    $.each(sizesWidth, (i, e) => {
                        let width = parseInt(e),
                            height = getHeightInPixels(heightPercentage, width);
                        if (closestWidth === undefined || width < goalWidth || closestWidth < goalWidth ||
                            closestHeight === undefined || height < goalHeight || closestHeight < goalHeight) {
                            closestWidth = width;
                            closestHeight = height;
                        }
                    });

                    if (current !== undefined && current.length && parseInt(current) < closestWidth || current === undefined || current.length === 0) {
                        let src = `${image}-${closestWidth}.${filetype}`;
                        layoutr.load.img(src).then(() => {
                            clone.css('background-image', `url(${src})`);
                            setTimeout(function () {
                                element.css('background-image', `url(${src})`);
                            }, 500);
                            // todo: find replacement for 500 ms timeout
                            element.attr('data-rb-current', closestWidth);
                        }).catch((e) => {
                            layoutr.showPopupAlert('Failed to load responsive background image', 'danger');
                            console.error(e);
                        });
                    }
                }
            }
        };

        if (elements.length) {
            elements.each((i, e) => {
                let element = $(e);

                setRb(element);

                $(window).on('resize.rb', () => {
                    setRb(element);
                });

                layoutr.html.on('columns-changed.rb', () => {
                    setRb(element);
                });

                layoutr.html.on('aside-changed.rb', () => {
                    setRb(element);
                });
            });

        } else {
            $(window).off('resize.rb');
            layoutr.html.off('columns-changed.rb');
            layoutr.html.off('aside-changed.rb');
        }

    };
}
{
    layoutr.checkTooltip = (tooltips) => {
        tooltips.each((i, e) => {
            let $this = $(e),
                interactive = $this.hasClass('interactive');
            $this.tooltipster({
                animationDuration: 0,
                interactive: interactive,
                trigger: 'custom',
                triggerOpen: {
                    mouseenter: true,
                    touchstart: true
                },
                triggerClose: {
                    mouseleave: true,
                    tap: true,
                    scroll: true
                }
            });
        });
    };
}
{
    layoutr.checkDatatable = (tables) => {
        if (tables.length) {
            if (!layoutr.html.hasClass('datatables-loaded')) {
                layoutr.showLoading();
                layoutr.promiseDatatables = layoutr.load.js('dist/js/datatables.js').finally(() => {
                    layoutr.hideLoading();
                });
                layoutr.html.addClass('datatables-loaded');
            }
            layoutr.promiseDatatables.then(() => {
                let count = 0,
                    gap = 'gap-3';
                let table_header_input = (instance, wrapper) => {
                    let ths = wrapper.find('thead th'),
                        elements = jQuery.grep(ths, (e) => {
                            let column = $(e);
                            return column.hasClass('dropdown') || column.hasClass('text');
                        });
                    for (let i = 0; i < ths.length; i++) {
                        let column = $(ths[i]),
                            text = column.html(),
                            minWidth = column.attr('data-min-width'),
                            style = minWidth ? `min-width: ${minWidth}px;` : '',
                            html =
                                `<div style="${style}">
    <div>
        <span>${text}</span>
    </div>
    ${elements.length ? '<div></div>' : ''}
</div>`;
                        column.empty().append(html);
                        let index = column.index();

                        if (column.hasClass('dropdown')) {
                            let select = $('<select class="dropdown align-left nowrap"><option value=""></option></select>')
                                .appendTo(column.find('> div > div:last-child'))
                                .on('change', (e) => {
                                    instance.column(index).search(e.currentTarget.value).draw();
                                });

                            instance.column(i).data().unique().sort(layoutr.sort).each((d, j) => {
                                select.append(`<option value="${d}">${d}</option>`);
                            });
                        } else if (column.hasClass('text')) {
                            let input = $('<input type="text" />')
                                .appendTo(column.find('> div > div:last-child'))
                                .on('keyup', (e) => {
                                    let $this = $(e.currentTarget),
                                        val = $this.val();

                                    if ($this.attr('data-last') !== val) {
                                        instance.column(index).search(val).draw();
                                    }
                                    $this.attr('data-last', val);
                                });
                            input.parent().addClass('form-group');
                        }
                        //debugger;
                    }
                };
                let table_header_sort = (instance, wrapper) => {
                    wrapper.find('thead th').unbind('click');

                    let enabled = wrapper.find('thead th:not(.sorting-disabled)'),
                        disabled = wrapper.find('thead th.sorting-disabled');

                    disabled.removeAttr('tabindex');

                    enabled.find('> div > div:first-child').append('<span class="sort-btn"></span>');
                    enabled.click((e) => {
                        let $this = $(e.target);
                        if (!$this.closest('div.dropdown').length && !$this.closest('input').length) {
                            let parent = $this.parents('th'),
                                index = parent.index();
                            if (parent.hasClass('sorting_asc')) {
                                instance.column(index).order('desc').draw();

                            } else {
                                instance.column(index).order('asc').draw();
                            }
                        }
                    });
                };
                let table_header_length = (wrapper, header) => {
                    let length = wrapper.find('.dataTables_length'),
                        dropdown = length.find('select');

                    length.append(dropdown);
                    length.children('label').remove();
                    dropdown.addClass('dropdown').attr('data-width', 100);
                    header.append(length);
                };
                let table_header_buttons = (wrapper, header) => {
                    let container = wrapper.find('.dt-buttons');

                    container.append(`<div class="flex wrap ${gap}"></div>`);

                    let div = container.children('div'),
                        buttons = container.children('button');

                    container.append(div);
                    buttons.addClass('btn');
                    div.append(buttons);
                    header.append(container);
                };
                let table_header_filter = (wrapper, header) => {
                    let filter = wrapper.find('.dataTables_filter');

                    filter.addClass('input-group');
                    filter.find('input').appendTo(filter);
                    filter.append('<div class="input-group-addon"><svg focusable="false"><use xlink:href="#svg-search"></use></svg></div>');
                    filter.find('label').remove();
                    header.append(filter);
                };
                let table_content = (wrapper, content) => {
                    let table = wrapper.find('table');
                    content.append(table);
                    return table;
                };
                let table_footer_info = (wrapper, footer) => {
                    let info = wrapper.find('.dataTables_info');
                    footer.append(info);
                };
                let paginateFix = (paginate) => {
                    let span = paginate.children('span'),
                        prev = paginate.find('.paginate_button.previous'),
                        next = paginate.find('.paginate_button.next');

                    prev.html('<svg focusable="false"><use xlink:href="#svg-arrow"></use></svg>');
                    next.html('<svg focusable="false"><use xlink:href="#svg-arrow"></use></svg>');

                    prev.prependTo(span);
                    next.appendTo(span);
                };
                let table_footer_paginate = (wrapper, footer, paginate) => {
                    paginate.addClass('flex wrap');
                    footer.append('<div class="dataTables_paginate_container"></div>');
                    let container = footer.find('.dataTables_paginate_container');
                    paginateFix(paginate);
                    container.append(paginate);
                };
                let table_dropdowns = (wrapper) => {
                    let dropdowns = wrapper.find('select.dropdown');
                    layoutr.checkDropdown(dropdowns);
                };

                tables.each((i, e) => {
                    let $this = $(e),
                        exportOptions = {
                            "format": {
                                header: (text, index, th) => {
                                    return $(th).find('span:first').html();
                                }
                            }
                        };
                    $this.addClass('nowrap');
                    $this.DataTable({
                        "dom": 'lBfrtip',
                        "bSortCellsTop": true,
                        buttons: [
                            {
                                extend: 'copyHtml5',
                                footer: false,
                                exportOptions: exportOptions
                            },
                            {
                                extend: 'excelHtml5',
                                footer: false,
                                exportOptions: exportOptions
                            },
                            {
                                extend: 'csvHtml5',
                                footer: false,
                                exportOptions: exportOptions
                            }
                        ],
                        responsive: true,
                        initComplete: (settings) => {
                            let instance = settings.oInstance.api(true),
                                wrapper = $(settings.nTableWrapper);

                            wrapper.append(`<div class="dataTables_header flex column grow"><div class="flex wrap ${gap}"></div></div>`);
                            let header = wrapper.find('> .dataTables_header > div');

                            wrapper.append('<div class="dataTables_content table"></div>');
                            let content = wrapper.find('> .dataTables_content');

                            wrapper.append(`<div class="dataTables_footer"><div class="flex wrap vertical-center ${gap}"></div></div>`);
                            let footer = wrapper.find('> .dataTables_footer > div');

                            table_header_input(instance, wrapper);
                            table_header_sort(instance, wrapper);
                            table_header_length(wrapper, header);
                            table_header_buttons(wrapper, header);
                            table_header_filter(wrapper, header);

                            let table = table_content(wrapper, content);

                            table_footer_info(wrapper, footer);

                            let paginate = wrapper.find('.dataTables_paginate');
                            table_footer_paginate(wrapper, footer, paginate);

                            table_dropdowns(wrapper);

                            count++;
                            if (count === tables.length) {
                                layoutr.hideLoading();
                            }

                            $this.on('draw.dt', () => {
                                let columns = instance.columns().responsiveHidden();
                                $this.trigger('responsive-resize.dt', [table[0], columns]);
                            });

                            layoutr.html.on('aside-changed.datatables', () => {
                                instance.responsive.recalc();
                            });

                            $this.on('responsive-resize.dt', (e, datatable, columns) => {
                                let count = columns.reduce((a, b) => {
                                    return b === false ? a + 1 : a;
                                }, 0);

                                let elements = table.find('tbody tr:not(.child) > *:first-child:not(.dataTables_empty)');
                                elements.removeAttr('tabindex');

                                elements.children('i').remove();
                                if (count) {
                                    elements.prepend('<i tabindex="0"><svg focusable="false"><use xlink:href="#svg-plus"></use></svg><svg focusable="false"><use xlink:href="#svg-minus"></use></svg></i>');
                                }
                            });

                        }
                    });
                });
            }).catch((e) => {
                layoutr.showPopupAlert('Failed to load datatables', 'danger');
                console.error(e);
            });
        } else {
            layoutr.html.off('aside-changed.datatables');
        }
    };
}
{
    layoutr.checkSwiper = (swiper) => {
        if (swiper.length) {
            if (!layoutr.html.hasClass('swiper-loaded')) {
                layoutr.showLoading();
                layoutr.promiseSwiper = Promise.all([
                    layoutr.load.css('dist/css/swiper.css'),
                    layoutr.load.js('dist/js/swiper.js')
                ]).finally(() => {
                    layoutr.hideLoading();
                });
                layoutr.html.addClass('swiper-loaded');
            }

            layoutr.promiseSwiper.then(() => {
                swiper.each((i, e) => {
                    let $this = $(e);
                    if (!$this.hasClass('loaded')) {
                        $this.append('<div class="swiper-footer"></div>');
                        $this.children('.swiper-footer').append('<div></div>');

                        let footer = $this.find('> .swiper-footer > div'),
                            pagination = $this.hasClass('pagination'),
                            dynamicBullets = $this.hasClass('dynamic-bullets'),
                            navigation = $this.hasClass('navigation'),
                            loop = layoutr.isTrue($this.attr('data-loop')),
                            spaceBetween = $this.hasClass('space-between'),
                            slidesPerView = layoutr.tryParseInt($this.attr('data-slides-per-view'), 1),
                            breakpoints = layoutr.tryParseJSON($this.attr('data-breakpoints'), {});

                        footer.addClass('flex wrap gap-3 center');

                        if (pagination || dynamicBullets) {
                            footer.append('<div class="swiper-pagination flex wrap gap-1 center vertical-center"></div>');
                        }

                        if (navigation) {
                            footer.append('<button class="btn square circle prev theme-dark"><svg focusable="false"><use xlink:href="#svg-arrow"></use></svg></button>');
                            footer.append('<button class="btn square circle next theme-dark"><svg focusable="false"><use xlink:href="#svg-arrow"></use></svg></button>');
                        }

                        if (spaceBetween) {
                            spaceBetween = 16;
                        }

                        let swiper = new Swiper($this[0], {
                            loop: loop,
                            slidesPerView: slidesPerView,
                            spaceBetween: spaceBetween,

                            // If we need pagination
                            pagination: {
                                el: '.swiper-pagination',
                                dynamicBullets: dynamicBullets
                            },

                            // Navigation arrows
                            navigation: {
                                nextEl: '.swiper-footer .next',
                                prevEl: '.swiper-footer .prev'
                            },

                            // And if we need scrollbar
                            scrollbar: {
                                el: '.swiper-scrollbar'
                            },
                            breakpoints: breakpoints,
                            on: {
                                init: () => {
                                    $this.addClass('loaded');
                                },
                                slideChange: () => {
                                    layoutr.checkLazy($this.find('.lazy'));
                                }
                            }
                        });
                    }
                });
            }).catch((e) => {
                layoutr.showPopupAlert('Failed to load swiper', 'danger');
                console.error(e);
            });
        }
    };
}
{
    layoutr.getAssignmentItem = (items, id) => {
        return $($.map(items, (item) => {
            if (item.getAttribute("data-id") === id) {
                return item;
            }
        }));
    };

    layoutr.checkAssignment = (assignments) => {
        if (assignments.length) {
            if (!layoutr.html.hasClass('assignment-loaded')) {
                layoutr.showLoading();
                layoutr.promiseAssignment = layoutr.load.js('dist/js/assignment.js').finally(() => {
                    layoutr.hideLoading();
                });
                layoutr.html.addClass('assignment-loaded');
            }

            layoutr.promiseAssignment.then(() => {
                $(assignments).each((i, assignment) => {
                    assignment = $(assignment);
                    layoutr.checkAssignmentSort(assignment);
                    layoutr.checkAssignmentDragAndDrop(assignment);
                    layoutr.checkAssignmentColor(assignment);
                    layoutr.checkAssignmentPuzzle(assignment);
                });
            }).catch((e) => {
                layoutr.showPopupAlert('Failed to load assignment', 'danger');
                console.error(e);
            });
        } else {
            layoutr.arrowKeyLocked = false;
            $(window).unbind('resize.assignmentSort');
            layoutr.body.on('keydown.assignmentPuzzle');
        }
    };
}
{
    layoutr.pageForm = () => {
        layoutr.addValidation(
            layoutr.content.find('#form'),
            {
                firstName: {
                    required: true,
                    minlength: 2
                },
                lastName: {
                    required: true,
                    minlength: 2
                },
                username: {
                    required: true,
                    minlength: 2
                },
                password: {
                    required: true,
                    password_regex: true
                },
                confirm_password: {
                    required: true,
                    equalTo: "#password"
                },
                email: {
                    required: true,
                    email: true
                },
                dropdown_1: "required",
                dropdown_2: "required",
                dropdown_3: "required",
                dropdown_4: "required",
                dropdown_5: "required",
                dropdown_6: "required",
                gender: "required",
                interests: "required",
                agree: "required",
                font_size: "required"
            },
            {
                firstName: {
                    required: "Please enter your first name",
                    minlength: "Your first name must consist of at least 2 characters"
                },
                lastName: {
                    required: "Please enter your last name",
                    minlength: "Your last name must consist of at least 2 characters"
                },
                username: {
                    required: "Please enter a username",
                    minlength: "Your username must consist of at least 2 characters"
                },
                password: {
                    required: "Please provide a password"
                },
                confirm_password: {
                    required: "Please provide a password",
                    equalTo: "Please enter the same password as above"
                },
                email: "Please enter a valid email address",
                dropdown_1: "Please select an option",
                dropdown_2: "Please select an option",
                dropdown_3: "Please select an option",
                dropdown_4: "Please select an option",
                dropdown_5: "Please select an option",
                dropdown_6: "Please select an option",
                gender: "Please select your gender",
                interests: "Please select at least one interest",
                agree: "Please accept our policy"
            }
        );
    };
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9icm93c2VyLmpzIiwid2ViZm9udGxvYWRlci5taW4uanMiLCJqcXVlcnktMy40LjEubWluLmpzIiwianF1ZXJ5LnZhbGlkYXRlLm1pbi5qcyIsImpxdWVyeS5sYXp5Lm1pbi5qcyIsInRvb2x0aXBzdGVyLm1pbi5qcyIsImpxdWVyeS5iYS10aHJvdHRsZS1kZWJvdW5jZS5qcyIsImpxdWVyeS5zaHVmZmxlLmpzIiwiYm93c2VyLmpzIiwiX3BvbHlmaWxsLmpzIiwiX3ZhcmlhYmxlLmpzIiwiX2Z1bmN0aW9uLmpzIiwiX2Jvd3Nlci5qcyIsIl9sb2FkLmpzIiwiX2FwcC5qcyIsImZvbnQuanMiLCJsb2FkZWQuanMiLCJmb3JtLmpzIiwiZnVsbHNjcmVlbi5qcyIsInNjcm9sbC5qcyIsImxvYWRpbmcuanMiLCJhc2lkZS5qcyIsImF1dGhlbnRpY2F0aW9uLmpzIiwiY29va2llLmpzIiwibmF2aWdhdGlvbi5qcyIsInNldHRpbmdzLmpzIiwia2V5Ym9hcmQuanMiLCJtb2RhbC5qcyIsInJlc3BvbnNpdmVIZWFkZXIuanMiLCJmb2N1cy5qcyIsInN3aXBlLmpzIiwidHRzLmpzIiwiY29udGVudEhlYWRlci5qcyIsInRoZW1lLmpzIiwiY29ubmVjdGVkLmpzIiwiZHJvcGRvd24uanMiLCJhY2NvcmRpb24uanMiLCJhbGVydC5qcyIsIm1hcC5qcyIsIm1hdGguanMiLCJtZWRpYS5qcyIsImxhenkuanMiLCJwb3B1cC5qcyIsInJlc3BvbnNpdmVCYWNrZ3JvdW5kLmpzIiwidG9vbHRpcC5qcyIsImRhdGF0YWJsZXMuanMiLCJzd2lwZXIuanMiLCJfYXNzaWdubWVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqQkE7QUFDQTtBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FDSEE7QUFDQTtBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcE5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOUJyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgIT09IC0xIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1RyaWRlbnRcXC83XFwuLykpIHtcclxuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdicm93c2VyLW5vdC1zdXBwb3J0ZWQnKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5pbm5lckhUTUwgPVxyXG5gPG1haW4+XHJcbjxoMT5JbnRlcm5ldCBFeHBsb3JlciBpcyBub3Qgc3VwcG9ydGVkPC9oMT5cclxuPHA+WW91J3JlIHVzaW5nIGEgd2ViIGJyb3dzZXIgd2UgZG9uJ3Qgc3VwcG9ydC48YnIgLz5cclxuVHJ5IG9uZSBvZiB0aGVzZSBvcHRpb25zIHRvIGhhdmUgYSBiZXR0ZXIgZXhwZXJpZW5jZSBvbiBsYXlvdXRyLjwvcD5cclxuPHVsPlxyXG48bGk+T3BlbiBNaWNyb3NvZnQgRWRnZTwvbGk+XHJcbjxsaT48YSBocmVmPVwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9jaHJvbWUvXCI+RG93bmxvYWQgR29vZ2xlIENocm9tZTwvYT48L2xpPlxyXG48bGk+PGEgaHJlZj1cImh0dHBzOi8vd3d3Lm1vemlsbGEub3JnL2ZpcmVmb3hcIj5Eb3dubG9hZCBNb3ppbGxhIEZpcmVmb3g8L2E+PC9saT5cclxuPC91bD5cclxuPC9tYWluPmA7XHJcbiAgICB0aHJvdyAnYnJvd3Nlci1ub3Qtc3VwcG9ydGVkJztcclxufSIsIi8qIFdlYiBGb250IExvYWRlciB2MS42LjI4IC0gKGMpIEFkb2JlIFN5c3RlbXMsIEdvb2dsZS4gTGljZW5zZTogQXBhY2hlIDIuMCAqLyhmdW5jdGlvbigpe2Z1bmN0aW9uIGFhKGEsYixjKXtyZXR1cm4gYS5jYWxsLmFwcGx5KGEuYmluZCxhcmd1bWVudHMpfWZ1bmN0aW9uIGJhKGEsYixjKXtpZighYSl0aHJvdyBFcnJvcigpO2lmKDI8YXJndW1lbnRzLmxlbmd0aCl7dmFyIGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7QXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkoYyxkKTtyZXR1cm4gYS5hcHBseShiLGMpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHAoYSxiLGMpe3A9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQmJi0xIT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC50b1N0cmluZygpLmluZGV4T2YoXCJuYXRpdmUgY29kZVwiKT9hYTpiYTtyZXR1cm4gcC5hcHBseShudWxsLGFyZ3VtZW50cyl9dmFyIHE9RGF0ZS5ub3d8fGZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfTtmdW5jdGlvbiBjYShhLGIpe3RoaXMuYT1hO3RoaXMubz1ifHxhO3RoaXMuYz10aGlzLm8uZG9jdW1lbnR9dmFyIGRhPSEhd2luZG93LkZvbnRGYWNlO2Z1bmN0aW9uIHQoYSxiLGMsZCl7Yj1hLmMuY3JlYXRlRWxlbWVudChiKTtpZihjKWZvcih2YXIgZSBpbiBjKWMuaGFzT3duUHJvcGVydHkoZSkmJihcInN0eWxlXCI9PWU/Yi5zdHlsZS5jc3NUZXh0PWNbZV06Yi5zZXRBdHRyaWJ1dGUoZSxjW2VdKSk7ZCYmYi5hcHBlbmRDaGlsZChhLmMuY3JlYXRlVGV4dE5vZGUoZCkpO3JldHVybiBifWZ1bmN0aW9uIHUoYSxiLGMpe2E9YS5jLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpWzBdO2F8fChhPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7YS5pbnNlcnRCZWZvcmUoYyxhLmxhc3RDaGlsZCl9ZnVuY3Rpb24gdihhKXthLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX1cclxuZnVuY3Rpb24gdyhhLGIsYyl7Yj1ifHxbXTtjPWN8fFtdO2Zvcih2YXIgZD1hLmNsYXNzTmFtZS5zcGxpdCgvXFxzKy8pLGU9MDtlPGIubGVuZ3RoO2UrPTEpe2Zvcih2YXIgZj0hMSxnPTA7ZzxkLmxlbmd0aDtnKz0xKWlmKGJbZV09PT1kW2ddKXtmPSEwO2JyZWFrfWZ8fGQucHVzaChiW2VdKX1iPVtdO2ZvcihlPTA7ZTxkLmxlbmd0aDtlKz0xKXtmPSExO2ZvcihnPTA7ZzxjLmxlbmd0aDtnKz0xKWlmKGRbZV09PT1jW2ddKXtmPSEwO2JyZWFrfWZ8fGIucHVzaChkW2VdKX1hLmNsYXNzTmFtZT1iLmpvaW4oXCIgXCIpLnJlcGxhY2UoL1xccysvZyxcIiBcIikucmVwbGFjZSgvXlxccyt8XFxzKyQvLFwiXCIpfWZ1bmN0aW9uIHkoYSxiKXtmb3IodmFyIGM9YS5jbGFzc05hbWUuc3BsaXQoL1xccysvKSxkPTAsZT1jLmxlbmd0aDtkPGU7ZCsrKWlmKGNbZF09PWIpcmV0dXJuITA7cmV0dXJuITF9XHJcbmZ1bmN0aW9uIGVhKGEpe3JldHVybiBhLm8ubG9jYXRpb24uaG9zdG5hbWV8fGEuYS5sb2NhdGlvbi5ob3N0bmFtZX1mdW5jdGlvbiB6KGEsYixjKXtmdW5jdGlvbiBkKCl7bSYmZSYmZiYmKG0oZyksbT1udWxsKX1iPXQoYSxcImxpbmtcIix7cmVsOlwic3R5bGVzaGVldFwiLGhyZWY6YixtZWRpYTpcImFsbFwifSk7dmFyIGU9ITEsZj0hMCxnPW51bGwsbT1jfHxudWxsO2RhPyhiLm9ubG9hZD1mdW5jdGlvbigpe2U9ITA7ZCgpfSxiLm9uZXJyb3I9ZnVuY3Rpb24oKXtlPSEwO2c9RXJyb3IoXCJTdHlsZXNoZWV0IGZhaWxlZCB0byBsb2FkXCIpO2QoKX0pOnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlPSEwO2QoKX0sMCk7dShhLFwiaGVhZFwiLGIpfVxyXG5mdW5jdGlvbiBBKGEsYixjLGQpe3ZhciBlPWEuYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07aWYoZSl7dmFyIGY9dChhLFwic2NyaXB0XCIse3NyYzpifSksZz0hMTtmLm9ubG9hZD1mLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2d8fHRoaXMucmVhZHlTdGF0ZSYmXCJsb2FkZWRcIiE9dGhpcy5yZWFkeVN0YXRlJiZcImNvbXBsZXRlXCIhPXRoaXMucmVhZHlTdGF0ZXx8KGc9ITAsYyYmYyhudWxsKSxmLm9ubG9hZD1mLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLFwiSEVBRFwiPT1mLnBhcmVudE5vZGUudGFnTmFtZSYmZS5yZW1vdmVDaGlsZChmKSl9O2UuYXBwZW5kQ2hpbGQoZik7c2V0VGltZW91dChmdW5jdGlvbigpe2d8fChnPSEwLGMmJmMoRXJyb3IoXCJTY3JpcHQgbG9hZCB0aW1lb3V0XCIpKSl9LGR8fDVFMyk7cmV0dXJuIGZ9cmV0dXJuIG51bGx9O2Z1bmN0aW9uIEIoKXt0aGlzLmE9MDt0aGlzLmM9bnVsbH1mdW5jdGlvbiBDKGEpe2EuYSsrO3JldHVybiBmdW5jdGlvbigpe2EuYS0tO0QoYSl9fWZ1bmN0aW9uIEUoYSxiKXthLmM9YjtEKGEpfWZ1bmN0aW9uIEQoYSl7MD09YS5hJiZhLmMmJihhLmMoKSxhLmM9bnVsbCl9O2Z1bmN0aW9uIEYoYSl7dGhpcy5hPWF8fFwiLVwifUYucHJvdG90eXBlLmM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MDtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKWIucHVzaChhcmd1bWVudHNbY10ucmVwbGFjZSgvW1xcV19dKy9nLFwiXCIpLnRvTG93ZXJDYXNlKCkpO3JldHVybiBiLmpvaW4odGhpcy5hKX07ZnVuY3Rpb24gRyhhLGIpe3RoaXMuYz1hO3RoaXMuZj00O3RoaXMuYT1cIm5cIjt2YXIgYz0oYnx8XCJuNFwiKS5tYXRjaCgvXihbbmlvXSkoWzEtOV0pJC9pKTtjJiYodGhpcy5hPWNbMV0sdGhpcy5mPXBhcnNlSW50KGNbMl0sMTApKX1mdW5jdGlvbiBmYShhKXtyZXR1cm4gSChhKStcIiBcIisoYS5mK1wiMDBcIikrXCIgMzAwcHggXCIrSShhLmMpfWZ1bmN0aW9uIEkoYSl7dmFyIGI9W107YT1hLnNwbGl0KC8sXFxzKi8pO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLnJlcGxhY2UoL1snXCJdL2csXCJcIik7LTEhPWQuaW5kZXhPZihcIiBcIil8fC9eXFxkLy50ZXN0KGQpP2IucHVzaChcIidcIitkK1wiJ1wiKTpiLnB1c2goZCl9cmV0dXJuIGIuam9pbihcIixcIil9ZnVuY3Rpb24gSihhKXtyZXR1cm4gYS5hK2EuZn1mdW5jdGlvbiBIKGEpe3ZhciBiPVwibm9ybWFsXCI7XCJvXCI9PT1hLmE/Yj1cIm9ibGlxdWVcIjpcImlcIj09PWEuYSYmKGI9XCJpdGFsaWNcIik7cmV0dXJuIGJ9XHJcbmZ1bmN0aW9uIGdhKGEpe3ZhciBiPTQsYz1cIm5cIixkPW51bGw7YSYmKChkPWEubWF0Y2goLyhub3JtYWx8b2JsaXF1ZXxpdGFsaWMpL2kpKSYmZFsxXSYmKGM9ZFsxXS5zdWJzdHIoMCwxKS50b0xvd2VyQ2FzZSgpKSwoZD1hLm1hdGNoKC8oWzEtOV0wMHxub3JtYWx8Ym9sZCkvaSkpJiZkWzFdJiYoL2JvbGQvaS50ZXN0KGRbMV0pP2I9NzovWzEtOV0wMC8udGVzdChkWzFdKSYmKGI9cGFyc2VJbnQoZFsxXS5zdWJzdHIoMCwxKSwxMCkpKSk7cmV0dXJuIGMrYn07ZnVuY3Rpb24gaGEoYSxiKXt0aGlzLmM9YTt0aGlzLmY9YS5vLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDt0aGlzLmg9Yjt0aGlzLmE9bmV3IEYoXCItXCIpO3RoaXMuaj0hMSE9PWIuZXZlbnRzO3RoaXMuZz0hMSE9PWIuY2xhc3Nlc31mdW5jdGlvbiBpYShhKXthLmcmJncoYS5mLFthLmEuYyhcIndmXCIsXCJsb2FkaW5nXCIpXSk7SyhhLFwibG9hZGluZ1wiKX1mdW5jdGlvbiBMKGEpe2lmKGEuZyl7dmFyIGI9eShhLmYsYS5hLmMoXCJ3ZlwiLFwiYWN0aXZlXCIpKSxjPVtdLGQ9W2EuYS5jKFwid2ZcIixcImxvYWRpbmdcIildO2J8fGMucHVzaChhLmEuYyhcIndmXCIsXCJpbmFjdGl2ZVwiKSk7dyhhLmYsYyxkKX1LKGEsXCJpbmFjdGl2ZVwiKX1mdW5jdGlvbiBLKGEsYixjKXtpZihhLmomJmEuaFtiXSlpZihjKWEuaFtiXShjLmMsSihjKSk7ZWxzZSBhLmhbYl0oKX07ZnVuY3Rpb24gamEoKXt0aGlzLmM9e319ZnVuY3Rpb24ga2EoYSxiLGMpe3ZhciBkPVtdLGU7Zm9yKGUgaW4gYilpZihiLmhhc093blByb3BlcnR5KGUpKXt2YXIgZj1hLmNbZV07ZiYmZC5wdXNoKGYoYltlXSxjKSl9cmV0dXJuIGR9O2Z1bmN0aW9uIE0oYSxiKXt0aGlzLmM9YTt0aGlzLmY9Yjt0aGlzLmE9dCh0aGlzLmMsXCJzcGFuXCIse1wiYXJpYS1oaWRkZW5cIjpcInRydWVcIn0sdGhpcy5mKX1mdW5jdGlvbiBOKGEpe3UoYS5jLFwiYm9keVwiLGEuYSl9ZnVuY3Rpb24gTyhhKXtyZXR1cm5cImRpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7dG9wOi05OTk5cHg7bGVmdDotOTk5OXB4O2ZvbnQtc2l6ZTozMDBweDt3aWR0aDphdXRvO2hlaWdodDphdXRvO2xpbmUtaGVpZ2h0Om5vcm1hbDttYXJnaW46MDtwYWRkaW5nOjA7Zm9udC12YXJpYW50Om5vcm1hbDt3aGl0ZS1zcGFjZTpub3dyYXA7Zm9udC1mYW1pbHk6XCIrSShhLmMpK1wiO1wiKyhcImZvbnQtc3R5bGU6XCIrSChhKStcIjtmb250LXdlaWdodDpcIisoYS5mK1wiMDBcIikrXCI7XCIpfTtmdW5jdGlvbiBQKGEsYixjLGQsZSxmKXt0aGlzLmc9YTt0aGlzLmo9Yjt0aGlzLmE9ZDt0aGlzLmM9Yzt0aGlzLmY9ZXx8M0UzO3RoaXMuaD1mfHx2b2lkIDB9UC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmMuby5kb2N1bWVudCxiPXRoaXMsYz1xKCksZD1uZXcgUHJvbWlzZShmdW5jdGlvbihkLGUpe2Z1bmN0aW9uIGYoKXtxKCktYz49Yi5mP2UoKTphLmZvbnRzLmxvYWQoZmEoYi5hKSxiLmgpLnRoZW4oZnVuY3Rpb24oYSl7MTw9YS5sZW5ndGg/ZCgpOnNldFRpbWVvdXQoZiwyNSl9LGZ1bmN0aW9uKCl7ZSgpfSl9ZigpfSksZT1udWxsLGY9bmV3IFByb21pc2UoZnVuY3Rpb24oYSxkKXtlPXNldFRpbWVvdXQoZCxiLmYpfSk7UHJvbWlzZS5yYWNlKFtmLGRdKS50aGVuKGZ1bmN0aW9uKCl7ZSYmKGNsZWFyVGltZW91dChlKSxlPW51bGwpO2IuZyhiLmEpfSxmdW5jdGlvbigpe2IuaihiLmEpfSl9O2Z1bmN0aW9uIFEoYSxiLGMsZCxlLGYsZyl7dGhpcy52PWE7dGhpcy5CPWI7dGhpcy5jPWM7dGhpcy5hPWQ7dGhpcy5zPWd8fFwiQkVTYnN3eVwiO3RoaXMuZj17fTt0aGlzLnc9ZXx8M0UzO3RoaXMudT1mfHxudWxsO3RoaXMubT10aGlzLmo9dGhpcy5oPXRoaXMuZz1udWxsO3RoaXMuZz1uZXcgTSh0aGlzLmMsdGhpcy5zKTt0aGlzLmg9bmV3IE0odGhpcy5jLHRoaXMucyk7dGhpcy5qPW5ldyBNKHRoaXMuYyx0aGlzLnMpO3RoaXMubT1uZXcgTSh0aGlzLmMsdGhpcy5zKTthPW5ldyBHKHRoaXMuYS5jK1wiLHNlcmlmXCIsSih0aGlzLmEpKTthPU8oYSk7dGhpcy5nLmEuc3R5bGUuY3NzVGV4dD1hO2E9bmV3IEcodGhpcy5hLmMrXCIsc2Fucy1zZXJpZlwiLEoodGhpcy5hKSk7YT1PKGEpO3RoaXMuaC5hLnN0eWxlLmNzc1RleHQ9YTthPW5ldyBHKFwic2VyaWZcIixKKHRoaXMuYSkpO2E9TyhhKTt0aGlzLmouYS5zdHlsZS5jc3NUZXh0PWE7YT1uZXcgRyhcInNhbnMtc2VyaWZcIixKKHRoaXMuYSkpO2E9XHJcbk8oYSk7dGhpcy5tLmEuc3R5bGUuY3NzVGV4dD1hO04odGhpcy5nKTtOKHRoaXMuaCk7Tih0aGlzLmopO04odGhpcy5tKX12YXIgUj17RDpcInNlcmlmXCIsQzpcInNhbnMtc2VyaWZcIn0sUz1udWxsO2Z1bmN0aW9uIFQoKXtpZihudWxsPT09Uyl7dmFyIGE9L0FwcGxlV2ViS2l0XFwvKFswLTldKykoPzpcXC4oWzAtOV0rKSkvLmV4ZWMod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1M9ISFhJiYoNTM2PnBhcnNlSW50KGFbMV0sMTApfHw1MzY9PT1wYXJzZUludChhWzFdLDEwKSYmMTE+PXBhcnNlSW50KGFbMl0sMTApKX1yZXR1cm4gU31RLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuZi5zZXJpZj10aGlzLmouYS5vZmZzZXRXaWR0aDt0aGlzLmZbXCJzYW5zLXNlcmlmXCJdPXRoaXMubS5hLm9mZnNldFdpZHRoO3RoaXMuQT1xKCk7VSh0aGlzKX07XHJcbmZ1bmN0aW9uIGxhKGEsYixjKXtmb3IodmFyIGQgaW4gUilpZihSLmhhc093blByb3BlcnR5KGQpJiZiPT09YS5mW1JbZF1dJiZjPT09YS5mW1JbZF1dKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIFUoYSl7dmFyIGI9YS5nLmEub2Zmc2V0V2lkdGgsYz1hLmguYS5vZmZzZXRXaWR0aCxkOyhkPWI9PT1hLmYuc2VyaWYmJmM9PT1hLmZbXCJzYW5zLXNlcmlmXCJdKXx8KGQ9VCgpJiZsYShhLGIsYykpO2Q/cSgpLWEuQT49YS53P1QoKSYmbGEoYSxiLGMpJiYobnVsbD09PWEudXx8YS51Lmhhc093blByb3BlcnR5KGEuYS5jKSk/VihhLGEudik6VihhLGEuQik6bWEoYSk6VihhLGEudil9ZnVuY3Rpb24gbWEoYSl7c2V0VGltZW91dChwKGZ1bmN0aW9uKCl7VSh0aGlzKX0sYSksNTApfWZ1bmN0aW9uIFYoYSxiKXtzZXRUaW1lb3V0KHAoZnVuY3Rpb24oKXt2KHRoaXMuZy5hKTt2KHRoaXMuaC5hKTt2KHRoaXMuai5hKTt2KHRoaXMubS5hKTtiKHRoaXMuYSl9LGEpLDApfTtmdW5jdGlvbiBXKGEsYixjKXt0aGlzLmM9YTt0aGlzLmE9Yjt0aGlzLmY9MDt0aGlzLm09dGhpcy5qPSExO3RoaXMucz1jfXZhciBYPW51bGw7Vy5wcm90b3R5cGUuZz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmE7Yi5nJiZ3KGIuZixbYi5hLmMoXCJ3ZlwiLGEuYyxKKGEpLnRvU3RyaW5nKCksXCJhY3RpdmVcIildLFtiLmEuYyhcIndmXCIsYS5jLEooYSkudG9TdHJpbmcoKSxcImxvYWRpbmdcIiksYi5hLmMoXCJ3ZlwiLGEuYyxKKGEpLnRvU3RyaW5nKCksXCJpbmFjdGl2ZVwiKV0pO0soYixcImZvbnRhY3RpdmVcIixhKTt0aGlzLm09ITA7bmEodGhpcyl9O1xyXG5XLnByb3RvdHlwZS5oPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYTtpZihiLmcpe3ZhciBjPXkoYi5mLGIuYS5jKFwid2ZcIixhLmMsSihhKS50b1N0cmluZygpLFwiYWN0aXZlXCIpKSxkPVtdLGU9W2IuYS5jKFwid2ZcIixhLmMsSihhKS50b1N0cmluZygpLFwibG9hZGluZ1wiKV07Y3x8ZC5wdXNoKGIuYS5jKFwid2ZcIixhLmMsSihhKS50b1N0cmluZygpLFwiaW5hY3RpdmVcIikpO3coYi5mLGQsZSl9SyhiLFwiZm9udGluYWN0aXZlXCIsYSk7bmEodGhpcyl9O2Z1bmN0aW9uIG5hKGEpezA9PS0tYS5mJiZhLmomJihhLm0/KGE9YS5hLGEuZyYmdyhhLmYsW2EuYS5jKFwid2ZcIixcImFjdGl2ZVwiKV0sW2EuYS5jKFwid2ZcIixcImxvYWRpbmdcIiksYS5hLmMoXCJ3ZlwiLFwiaW5hY3RpdmVcIildKSxLKGEsXCJhY3RpdmVcIikpOkwoYS5hKSl9O2Z1bmN0aW9uIG9hKGEpe3RoaXMuaj1hO3RoaXMuYT1uZXcgamE7dGhpcy5oPTA7dGhpcy5mPXRoaXMuZz0hMH1vYS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihhKXt0aGlzLmM9bmV3IGNhKHRoaXMuaixhLmNvbnRleHR8fHRoaXMuaik7dGhpcy5nPSExIT09YS5ldmVudHM7dGhpcy5mPSExIT09YS5jbGFzc2VzO3BhKHRoaXMsbmV3IGhhKHRoaXMuYyxhKSxhKX07XHJcbmZ1bmN0aW9uIHFhKGEsYixjLGQsZSl7dmFyIGY9MD09LS1hLmg7KGEuZnx8YS5nKSYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBhPWV8fG51bGwsbT1kfHxudWxsfHx7fTtpZigwPT09Yy5sZW5ndGgmJmYpTChiLmEpO2Vsc2V7Yi5mKz1jLmxlbmd0aDtmJiYoYi5qPWYpO3ZhciBoLGw9W107Zm9yKGg9MDtoPGMubGVuZ3RoO2grKyl7dmFyIGs9Y1toXSxuPW1bay5jXSxyPWIuYSx4PWs7ci5nJiZ3KHIuZixbci5hLmMoXCJ3ZlwiLHguYyxKKHgpLnRvU3RyaW5nKCksXCJsb2FkaW5nXCIpXSk7SyhyLFwiZm9udGxvYWRpbmdcIix4KTtyPW51bGw7aWYobnVsbD09PVgpaWYod2luZG93LkZvbnRGYWNlKXt2YXIgeD0vR2Vja28uKkZpcmVmb3hcXC8oXFxkKykvLmV4ZWMod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpLHhhPS9PUyBYLipWZXJzaW9uXFwvMTBcXC4uKlNhZmFyaS8uZXhlYyh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkmJi9BcHBsZS8uZXhlYyh3aW5kb3cubmF2aWdhdG9yLnZlbmRvcik7XHJcblg9eD80MjxwYXJzZUludCh4WzFdLDEwKTp4YT8hMTohMH1lbHNlIFg9ITE7WD9yPW5ldyBQKHAoYi5nLGIpLHAoYi5oLGIpLGIuYyxrLGIucyxuKTpyPW5ldyBRKHAoYi5nLGIpLHAoYi5oLGIpLGIuYyxrLGIucyxhLG4pO2wucHVzaChyKX1mb3IoaD0wO2g8bC5sZW5ndGg7aCsrKWxbaF0uc3RhcnQoKX19LDApfWZ1bmN0aW9uIHBhKGEsYixjKXt2YXIgZD1bXSxlPWMudGltZW91dDtpYShiKTt2YXIgZD1rYShhLmEsYyxhLmMpLGY9bmV3IFcoYS5jLGIsZSk7YS5oPWQubGVuZ3RoO2I9MDtmb3IoYz1kLmxlbmd0aDtiPGM7YisrKWRbYl0ubG9hZChmdW5jdGlvbihiLGQsYyl7cWEoYSxmLGIsZCxjKX0pfTtmdW5jdGlvbiByYShhLGIpe3RoaXMuYz1hO3RoaXMuYT1ifVxyXG5yYS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoZltcIl9fbXRpX2ZudExzdFwiK2RdKXt2YXIgYz1mW1wiX19tdGlfZm50THN0XCIrZF0oKSxlPVtdLGg7aWYoYylmb3IodmFyIGw9MDtsPGMubGVuZ3RoO2wrKyl7dmFyIGs9Y1tsXS5mb250ZmFtaWx5O3ZvaWQgMCE9Y1tsXS5mb250U3R5bGUmJnZvaWQgMCE9Y1tsXS5mb250V2VpZ2h0PyhoPWNbbF0uZm9udFN0eWxlK2NbbF0uZm9udFdlaWdodCxlLnB1c2gobmV3IEcoayxoKSkpOmUucHVzaChuZXcgRyhrKSl9YShlKX1lbHNlIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiKCl9LDUwKX12YXIgYz10aGlzLGQ9Yy5hLnByb2plY3RJZCxlPWMuYS52ZXJzaW9uO2lmKGQpe3ZhciBmPWMuYy5vO0EodGhpcy5jLChjLmEuYXBpfHxcImh0dHBzOi8vZmFzdC5mb250cy5uZXQvanNhcGlcIikrXCIvXCIrZCtcIi5qc1wiKyhlP1wiP3Y9XCIrZTpcIlwiKSxmdW5jdGlvbihlKXtlP2EoW10pOihmW1wiX19Nb25vdHlwZUNvbmZpZ3VyYXRpb25fX1wiK1xyXG5kXT1mdW5jdGlvbigpe3JldHVybiBjLmF9LGIoKSl9KS5pZD1cIl9fTW9ub3R5cGVBUElTY3JpcHRfX1wiK2R9ZWxzZSBhKFtdKX07ZnVuY3Rpb24gc2EoYSxiKXt0aGlzLmM9YTt0aGlzLmE9Yn1zYS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcy5hLnVybHN8fFtdLGU9dGhpcy5hLmZhbWlsaWVzfHxbXSxmPXRoaXMuYS50ZXN0U3RyaW5nc3x8e30sZz1uZXcgQjtiPTA7Zm9yKGM9ZC5sZW5ndGg7YjxjO2IrKyl6KHRoaXMuYyxkW2JdLEMoZykpO3ZhciBtPVtdO2I9MDtmb3IoYz1lLmxlbmd0aDtiPGM7YisrKWlmKGQ9ZVtiXS5zcGxpdChcIjpcIiksZFsxXSlmb3IodmFyIGg9ZFsxXS5zcGxpdChcIixcIiksbD0wO2w8aC5sZW5ndGg7bCs9MSltLnB1c2gobmV3IEcoZFswXSxoW2xdKSk7ZWxzZSBtLnB1c2gobmV3IEcoZFswXSkpO0UoZyxmdW5jdGlvbigpe2EobSxmKX0pfTtmdW5jdGlvbiB0YShhLGIpe2E/dGhpcy5jPWE6dGhpcy5jPXVhO3RoaXMuYT1bXTt0aGlzLmY9W107dGhpcy5nPWJ8fFwiXCJ9dmFyIHVhPVwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3NcIjtmdW5jdGlvbiB2YShhLGIpe2Zvcih2YXIgYz1iLmxlbmd0aCxkPTA7ZDxjO2QrKyl7dmFyIGU9YltkXS5zcGxpdChcIjpcIik7Mz09ZS5sZW5ndGgmJmEuZi5wdXNoKGUucG9wKCkpO3ZhciBmPVwiXCI7Mj09ZS5sZW5ndGgmJlwiXCIhPWVbMV0mJihmPVwiOlwiKTthLmEucHVzaChlLmpvaW4oZikpfX1cclxuZnVuY3Rpb24gd2EoYSl7aWYoMD09YS5hLmxlbmd0aCl0aHJvdyBFcnJvcihcIk5vIGZvbnRzIHRvIGxvYWQhXCIpO2lmKC0xIT1hLmMuaW5kZXhPZihcImtpdD1cIikpcmV0dXJuIGEuYztmb3IodmFyIGI9YS5hLmxlbmd0aCxjPVtdLGQ9MDtkPGI7ZCsrKWMucHVzaChhLmFbZF0ucmVwbGFjZSgvIC9nLFwiK1wiKSk7Yj1hLmMrXCI/ZmFtaWx5PVwiK2Muam9pbihcIiU3Q1wiKTswPGEuZi5sZW5ndGgmJihiKz1cIiZzdWJzZXQ9XCIrYS5mLmpvaW4oXCIsXCIpKTswPGEuZy5sZW5ndGgmJihiKz1cIiZ0ZXh0PVwiK2VuY29kZVVSSUNvbXBvbmVudChhLmcpKTtyZXR1cm4gYn07ZnVuY3Rpb24geWEoYSl7dGhpcy5mPWE7dGhpcy5hPVtdO3RoaXMuYz17fX1cclxudmFyIHphPXtsYXRpbjpcIkJFU2Jzd3lcIixcImxhdGluLWV4dFwiOlwiXFx1MDBlN1xcdTAwZjZcXHUwMGZjXFx1MDExZlxcdTAxNWZcIixjeXJpbGxpYzpcIlxcdTA0MzlcXHUwNDRmXFx1MDQxNlwiLGdyZWVrOlwiXFx1MDNiMVxcdTAzYjJcXHUwM2EzXCIsa2htZXI6XCJcXHUxNzgwXFx1MTc4MVxcdTE3ODJcIixIYW51bWFuOlwiXFx1MTc4MFxcdTE3ODFcXHUxNzgyXCJ9LEFhPXt0aGluOlwiMVwiLGV4dHJhbGlnaHQ6XCIyXCIsXCJleHRyYS1saWdodFwiOlwiMlwiLHVsdHJhbGlnaHQ6XCIyXCIsXCJ1bHRyYS1saWdodFwiOlwiMlwiLGxpZ2h0OlwiM1wiLHJlZ3VsYXI6XCI0XCIsYm9vazpcIjRcIixtZWRpdW06XCI1XCIsXCJzZW1pLWJvbGRcIjpcIjZcIixzZW1pYm9sZDpcIjZcIixcImRlbWktYm9sZFwiOlwiNlwiLGRlbWlib2xkOlwiNlwiLGJvbGQ6XCI3XCIsXCJleHRyYS1ib2xkXCI6XCI4XCIsZXh0cmFib2xkOlwiOFwiLFwidWx0cmEtYm9sZFwiOlwiOFwiLHVsdHJhYm9sZDpcIjhcIixibGFjazpcIjlcIixoZWF2eTpcIjlcIixsOlwiM1wiLHI6XCI0XCIsYjpcIjdcIn0sQmE9e2k6XCJpXCIsaXRhbGljOlwiaVwiLG46XCJuXCIsbm9ybWFsOlwiblwifSxcclxuQ2E9L14odGhpbnwoPzooPzpleHRyYXx1bHRyYSktPyk/bGlnaHR8cmVndWxhcnxib29rfG1lZGl1bXwoPzooPzpzZW1pfGRlbWl8ZXh0cmF8dWx0cmEpLT8pP2JvbGR8YmxhY2t8aGVhdnl8bHxyfGJ8WzEtOV0wMCk/KG58aXxub3JtYWx8aXRhbGljKT8kLztcclxuZnVuY3Rpb24gRGEoYSl7Zm9yKHZhciBiPWEuZi5sZW5ndGgsYz0wO2M8YjtjKyspe3ZhciBkPWEuZltjXS5zcGxpdChcIjpcIiksZT1kWzBdLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSxmPVtcIm40XCJdO2lmKDI8PWQubGVuZ3RoKXt2YXIgZzt2YXIgbT1kWzFdO2c9W107aWYobSlmb3IodmFyIG09bS5zcGxpdChcIixcIiksaD1tLmxlbmd0aCxsPTA7bDxoO2wrKyl7dmFyIGs7az1tW2xdO2lmKGsubWF0Y2goL15bXFx3LV0rJC8pKXt2YXIgbj1DYS5leGVjKGsudG9Mb3dlckNhc2UoKSk7aWYobnVsbD09bilrPVwiXCI7ZWxzZXtrPW5bMl07az1udWxsPT1rfHxcIlwiPT1rP1wiblwiOkJhW2tdO249blsxXTtpZihudWxsPT1ufHxcIlwiPT1uKW49XCI0XCI7ZWxzZSB2YXIgcj1BYVtuXSxuPXI/cjppc05hTihuKT9cIjRcIjpuLnN1YnN0cigwLDEpO2s9W2ssbl0uam9pbihcIlwiKX19ZWxzZSBrPVwiXCI7ayYmZy5wdXNoKGspfTA8Zy5sZW5ndGgmJihmPWcpOzM9PWQubGVuZ3RoJiYoZD1kWzJdLGc9W10sZD1kP2Quc3BsaXQoXCIsXCIpOlxyXG5nLDA8ZC5sZW5ndGgmJihkPXphW2RbMF1dKSYmKGEuY1tlXT1kKSl9YS5jW2VdfHwoZD16YVtlXSkmJihhLmNbZV09ZCk7Zm9yKGQ9MDtkPGYubGVuZ3RoO2QrPTEpYS5hLnB1c2gobmV3IEcoZSxmW2RdKSl9fTtmdW5jdGlvbiBFYShhLGIpe3RoaXMuYz1hO3RoaXMuYT1ifXZhciBGYT17QXJpbW86ITAsQ291c2luZTohMCxUaW5vczohMH07RWEucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEIsYz10aGlzLmMsZD1uZXcgdGEodGhpcy5hLmFwaSx0aGlzLmEudGV4dCksZT10aGlzLmEuZmFtaWxpZXM7dmEoZCxlKTt2YXIgZj1uZXcgeWEoZSk7RGEoZik7eihjLHdhKGQpLEMoYikpO0UoYixmdW5jdGlvbigpe2EoZi5hLGYuYyxGYSl9KX07ZnVuY3Rpb24gR2EoYSxiKXt0aGlzLmM9YTt0aGlzLmE9Yn1HYS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmEuaWQsYz10aGlzLmMubztiP0EodGhpcy5jLCh0aGlzLmEuYXBpfHxcImh0dHBzOi8vdXNlLnR5cGVraXQubmV0XCIpK1wiL1wiK2IrXCIuanNcIixmdW5jdGlvbihiKXtpZihiKWEoW10pO2Vsc2UgaWYoYy5UeXBla2l0JiZjLlR5cGVraXQuY29uZmlnJiZjLlR5cGVraXQuY29uZmlnLmZuKXtiPWMuVHlwZWtpdC5jb25maWcuZm47Zm9yKHZhciBlPVtdLGY9MDtmPGIubGVuZ3RoO2YrPTIpZm9yKHZhciBnPWJbZl0sbT1iW2YrMV0saD0wO2g8bS5sZW5ndGg7aCsrKWUucHVzaChuZXcgRyhnLG1baF0pKTt0cnl7Yy5UeXBla2l0LmxvYWQoe2V2ZW50czohMSxjbGFzc2VzOiExLGFzeW5jOiEwfSl9Y2F0Y2gobCl7fWEoZSl9fSwyRTMpOmEoW10pfTtmdW5jdGlvbiBIYShhLGIpe3RoaXMuYz1hO3RoaXMuZj1iO3RoaXMuYT1bXX1IYS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmYuaWQsYz10aGlzLmMubyxkPXRoaXM7Yj8oYy5fX3dlYmZvbnRmb250ZGVja21vZHVsZV9ffHwoYy5fX3dlYmZvbnRmb250ZGVja21vZHVsZV9fPXt9KSxjLl9fd2ViZm9udGZvbnRkZWNrbW9kdWxlX19bYl09ZnVuY3Rpb24oYixjKXtmb3IodmFyIGc9MCxtPWMuZm9udHMubGVuZ3RoO2c8bTsrK2cpe3ZhciBoPWMuZm9udHNbZ107ZC5hLnB1c2gobmV3IEcoaC5uYW1lLGdhKFwiZm9udC13ZWlnaHQ6XCIraC53ZWlnaHQrXCI7Zm9udC1zdHlsZTpcIitoLnN0eWxlKSkpfWEoZC5hKX0sQSh0aGlzLmMsKHRoaXMuZi5hcGl8fFwiaHR0cHM6Ly9mLmZvbnRkZWNrLmNvbS9zL2Nzcy9qcy9cIikrZWEodGhpcy5jKStcIi9cIitiK1wiLmpzXCIsZnVuY3Rpb24oYil7YiYmYShbXSl9KSk6YShbXSl9O3ZhciBZPW5ldyBvYSh3aW5kb3cpO1kuYS5jLmN1c3RvbT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgc2EoYixhKX07WS5hLmMuZm9udGRlY2s9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEhhKGIsYSl9O1kuYS5jLm1vbm90eXBlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyByYShiLGEpfTtZLmEuYy50eXBla2l0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBHYShiLGEpfTtZLmEuYy5nb29nbGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEVhKGIsYSl9O3ZhciBaPXtsb2FkOnAoWS5sb2FkLFkpfTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShmdW5jdGlvbigpe3JldHVybiBafSk6XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPVo6KHdpbmRvdy5XZWJGb250PVosd2luZG93LldlYkZvbnRDb25maWcmJlkubG9hZCh3aW5kb3cuV2ViRm9udENvbmZpZykpO30oKSk7XHJcbiIsIi8qISBqUXVlcnkgdjMuNC4xIHwgKGMpIEpTIEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyB8IGpxdWVyeS5vcmcvbGljZW5zZSAqL1xyXG4hZnVuY3Rpb24gKGUsIHQpIHsgXCJ1c2Ugc3RyaWN0XCI7IFwib2JqZWN0XCIgPT0gdHlwZW9mIG1vZHVsZSAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA/IG1vZHVsZS5leHBvcnRzID0gZS5kb2N1bWVudCA/IHQoZSwgITApIDogZnVuY3Rpb24gKGUpIHsgaWYgKCFlLmRvY3VtZW50KSB0aHJvdyBuZXcgRXJyb3IoXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIpOyByZXR1cm4gdChlKSB9IDogdChlKSB9KFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uIChDLCBlKSB7IFwidXNlIHN0cmljdFwiOyB2YXIgdCA9IFtdLCBFID0gQy5kb2N1bWVudCwgciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiwgcyA9IHQuc2xpY2UsIGcgPSB0LmNvbmNhdCwgdSA9IHQucHVzaCwgaSA9IHQuaW5kZXhPZiwgbiA9IHt9LCBvID0gbi50b1N0cmluZywgdiA9IG4uaGFzT3duUHJvcGVydHksIGEgPSB2LnRvU3RyaW5nLCBsID0gYS5jYWxsKE9iamVjdCksIHkgPSB7fSwgbSA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUgJiYgXCJudW1iZXJcIiAhPSB0eXBlb2YgZS5ub2RlVHlwZSB9LCB4ID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG51bGwgIT0gZSAmJiBlID09PSBlLndpbmRvdyB9LCBjID0geyB0eXBlOiAhMCwgc3JjOiAhMCwgbm9uY2U6ICEwLCBub01vZHVsZTogITAgfTsgZnVuY3Rpb24gYihlLCB0LCBuKSB7IHZhciByLCBpLCBvID0gKG4gPSBuIHx8IEUpLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7IGlmIChvLnRleHQgPSBlLCB0KSBmb3IgKHIgaW4gYykgKGkgPSB0W3JdIHx8IHQuZ2V0QXR0cmlidXRlICYmIHQuZ2V0QXR0cmlidXRlKHIpKSAmJiBvLnNldEF0dHJpYnV0ZShyLCBpKTsgbi5oZWFkLmFwcGVuZENoaWxkKG8pLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobykgfSBmdW5jdGlvbiB3KGUpIHsgcmV0dXJuIG51bGwgPT0gZSA/IGUgKyBcIlwiIDogXCJvYmplY3RcIiA9PSB0eXBlb2YgZSB8fCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUgPyBuW28uY2FsbChlKV0gfHwgXCJvYmplY3RcIiA6IHR5cGVvZiBlIH0gdmFyIGYgPSBcIjMuNC4xXCIsIGsgPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gbmV3IGsuZm4uaW5pdChlLCB0KSB9LCBwID0gL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nOyBmdW5jdGlvbiBkKGUpIHsgdmFyIHQgPSAhIWUgJiYgXCJsZW5ndGhcIiBpbiBlICYmIGUubGVuZ3RoLCBuID0gdyhlKTsgcmV0dXJuICFtKGUpICYmICF4KGUpICYmIChcImFycmF5XCIgPT09IG4gfHwgMCA9PT0gdCB8fCBcIm51bWJlclwiID09IHR5cGVvZiB0ICYmIDAgPCB0ICYmIHQgLSAxIGluIGUpIH0gay5mbiA9IGsucHJvdG90eXBlID0geyBqcXVlcnk6IGYsIGNvbnN0cnVjdG9yOiBrLCBsZW5ndGg6IDAsIHRvQXJyYXk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHMuY2FsbCh0aGlzKSB9LCBnZXQ6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBudWxsID09IGUgPyBzLmNhbGwodGhpcykgOiBlIDwgMCA/IHRoaXNbZSArIHRoaXMubGVuZ3RoXSA6IHRoaXNbZV0gfSwgcHVzaFN0YWNrOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGsubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLCBlKTsgcmV0dXJuIHQucHJldk9iamVjdCA9IHRoaXMsIHQgfSwgZWFjaDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGsuZWFjaCh0aGlzLCBlKSB9LCBtYXA6IGZ1bmN0aW9uIChuKSB7IHJldHVybiB0aGlzLnB1c2hTdGFjayhrLm1hcCh0aGlzLCBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gbi5jYWxsKGUsIHQsIGUpIH0pKSB9LCBzbGljZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5wdXNoU3RhY2socy5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB9LCBmaXJzdDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5lcSgwKSB9LCBsYXN0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmVxKC0xKSB9LCBlcTogZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSB0aGlzLmxlbmd0aCwgbiA9ICtlICsgKGUgPCAwID8gdCA6IDApOyByZXR1cm4gdGhpcy5wdXNoU3RhY2soMCA8PSBuICYmIG4gPCB0ID8gW3RoaXNbbl1dIDogW10pIH0sIGVuZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IoKSB9LCBwdXNoOiB1LCBzb3J0OiB0LnNvcnQsIHNwbGljZTogdC5zcGxpY2UgfSwgay5leHRlbmQgPSBrLmZuLmV4dGVuZCA9IGZ1bmN0aW9uICgpIHsgdmFyIGUsIHQsIG4sIHIsIGksIG8sIGEgPSBhcmd1bWVudHNbMF0gfHwge30sIHMgPSAxLCB1ID0gYXJndW1lbnRzLmxlbmd0aCwgbCA9ICExOyBmb3IgKFwiYm9vbGVhblwiID09IHR5cGVvZiBhICYmIChsID0gYSwgYSA9IGFyZ3VtZW50c1tzXSB8fCB7fSwgcysrKSwgXCJvYmplY3RcIiA9PSB0eXBlb2YgYSB8fCBtKGEpIHx8IChhID0ge30pLCBzID09PSB1ICYmIChhID0gdGhpcywgcy0tKTsgcyA8IHU7IHMrKylpZiAobnVsbCAhPSAoZSA9IGFyZ3VtZW50c1tzXSkpIGZvciAodCBpbiBlKSByID0gZVt0XSwgXCJfX3Byb3RvX19cIiAhPT0gdCAmJiBhICE9PSByICYmIChsICYmIHIgJiYgKGsuaXNQbGFpbk9iamVjdChyKSB8fCAoaSA9IEFycmF5LmlzQXJyYXkocikpKSA/IChuID0gYVt0XSwgbyA9IGkgJiYgIUFycmF5LmlzQXJyYXkobikgPyBbXSA6IGkgfHwgay5pc1BsYWluT2JqZWN0KG4pID8gbiA6IHt9LCBpID0gITEsIGFbdF0gPSBrLmV4dGVuZChsLCBvLCByKSkgOiB2b2lkIDAgIT09IHIgJiYgKGFbdF0gPSByKSk7IHJldHVybiBhIH0sIGsuZXh0ZW5kKHsgZXhwYW5kbzogXCJqUXVlcnlcIiArIChmICsgTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXFxEL2csIFwiXCIpLCBpc1JlYWR5OiAhMCwgZXJyb3I6IGZ1bmN0aW9uIChlKSB7IHRocm93IG5ldyBFcnJvcihlKSB9LCBub29wOiBmdW5jdGlvbiAoKSB7IH0sIGlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBuOyByZXR1cm4gISghZSB8fCBcIltvYmplY3QgT2JqZWN0XVwiICE9PSBvLmNhbGwoZSkpICYmICghKHQgPSByKGUpKSB8fCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIChuID0gdi5jYWxsKHQsIFwiY29uc3RydWN0b3JcIikgJiYgdC5jb25zdHJ1Y3RvcikgJiYgYS5jYWxsKG4pID09PSBsKSB9LCBpc0VtcHR5T2JqZWN0OiBmdW5jdGlvbiAoZSkgeyB2YXIgdDsgZm9yICh0IGluIGUpIHJldHVybiAhMTsgcmV0dXJuICEwIH0sIGdsb2JhbEV2YWw6IGZ1bmN0aW9uIChlLCB0KSB7IGIoZSwgeyBub25jZTogdCAmJiB0Lm5vbmNlIH0pIH0sIGVhY2g6IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuLCByID0gMDsgaWYgKGQoZSkpIHsgZm9yIChuID0gZS5sZW5ndGg7IHIgPCBuOyByKyspaWYgKCExID09PSB0LmNhbGwoZVtyXSwgciwgZVtyXSkpIGJyZWFrIH0gZWxzZSBmb3IgKHIgaW4gZSkgaWYgKCExID09PSB0LmNhbGwoZVtyXSwgciwgZVtyXSkpIGJyZWFrOyByZXR1cm4gZSB9LCB0cmltOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gbnVsbCA9PSBlID8gXCJcIiA6IChlICsgXCJcIikucmVwbGFjZShwLCBcIlwiKSB9LCBtYWtlQXJyYXk6IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gdCB8fCBbXTsgcmV0dXJuIG51bGwgIT0gZSAmJiAoZChPYmplY3QoZSkpID8gay5tZXJnZShuLCBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gW2VdIDogZSkgOiB1LmNhbGwobiwgZSkpLCBuIH0sIGluQXJyYXk6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiBudWxsID09IHQgPyAtMSA6IGkuY2FsbCh0LCBlLCBuKSB9LCBtZXJnZTogZnVuY3Rpb24gKGUsIHQpIHsgZm9yICh2YXIgbiA9ICt0Lmxlbmd0aCwgciA9IDAsIGkgPSBlLmxlbmd0aDsgciA8IG47IHIrKyllW2krK10gPSB0W3JdOyByZXR1cm4gZS5sZW5ndGggPSBpLCBlIH0sIGdyZXA6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IGZvciAodmFyIHIgPSBbXSwgaSA9IDAsIG8gPSBlLmxlbmd0aCwgYSA9ICFuOyBpIDwgbzsgaSsrKSF0KGVbaV0sIGkpICE9PSBhICYmIHIucHVzaChlW2ldKTsgcmV0dXJuIHIgfSwgbWFwOiBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciwgaSwgbyA9IDAsIGEgPSBbXTsgaWYgKGQoZSkpIGZvciAociA9IGUubGVuZ3RoOyBvIDwgcjsgbysrKW51bGwgIT0gKGkgPSB0KGVbb10sIG8sIG4pKSAmJiBhLnB1c2goaSk7IGVsc2UgZm9yIChvIGluIGUpIG51bGwgIT0gKGkgPSB0KGVbb10sIG8sIG4pKSAmJiBhLnB1c2goaSk7IHJldHVybiBnLmFwcGx5KFtdLCBhKSB9LCBndWlkOiAxLCBzdXBwb3J0OiB5IH0pLCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiAoay5mbltTeW1ib2wuaXRlcmF0b3JdID0gdFtTeW1ib2wuaXRlcmF0b3JdKSwgay5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciBTeW1ib2xcIi5zcGxpdChcIiBcIiksIGZ1bmN0aW9uIChlLCB0KSB7IG5bXCJbb2JqZWN0IFwiICsgdCArIFwiXVwiXSA9IHQudG9Mb3dlckNhc2UoKSB9KTsgdmFyIGggPSBmdW5jdGlvbiAobikgeyB2YXIgZSwgZCwgYiwgbywgaSwgaCwgZiwgZywgdywgdSwgbCwgVCwgQywgYSwgRSwgdiwgcywgYywgeSwgayA9IFwic2l6emxlXCIgKyAxICogbmV3IERhdGUsIG0gPSBuLmRvY3VtZW50LCBTID0gMCwgciA9IDAsIHAgPSB1ZSgpLCB4ID0gdWUoKSwgTiA9IHVlKCksIEEgPSB1ZSgpLCBEID0gZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIGUgPT09IHQgJiYgKGwgPSAhMCksIDAgfSwgaiA9IHt9Lmhhc093blByb3BlcnR5LCB0ID0gW10sIHEgPSB0LnBvcCwgTCA9IHQucHVzaCwgSCA9IHQucHVzaCwgTyA9IHQuc2xpY2UsIFAgPSBmdW5jdGlvbiAoZSwgdCkgeyBmb3IgKHZhciBuID0gMCwgciA9IGUubGVuZ3RoOyBuIDwgcjsgbisrKWlmIChlW25dID09PSB0KSByZXR1cm4gbjsgcmV0dXJuIC0xIH0sIFIgPSBcImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkXCIsIE0gPSBcIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsIEkgPSBcIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcMC1cXFxceGEwXSkrXCIsIFcgPSBcIlxcXFxbXCIgKyBNICsgXCIqKFwiICsgSSArIFwiKSg/OlwiICsgTSArIFwiKihbKl4kfCF+XT89KVwiICsgTSArIFwiKig/OicoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcInwoXCIgKyBJICsgXCIpKXwpXCIgKyBNICsgXCIqXFxcXF1cIiwgJCA9IFwiOihcIiArIEkgKyBcIikoPzpcXFxcKCgoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXwoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIgKyBXICsgXCIpKil8LiopXFxcXCl8KVwiLCBGID0gbmV3IFJlZ0V4cChNICsgXCIrXCIsIFwiZ1wiKSwgQiA9IG5ldyBSZWdFeHAoXCJeXCIgKyBNICsgXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiICsgTSArIFwiKyRcIiwgXCJnXCIpLCBfID0gbmV3IFJlZ0V4cChcIl5cIiArIE0gKyBcIiosXCIgKyBNICsgXCIqXCIpLCB6ID0gbmV3IFJlZ0V4cChcIl5cIiArIE0gKyBcIiooWz4rfl18XCIgKyBNICsgXCIpXCIgKyBNICsgXCIqXCIpLCBVID0gbmV3IFJlZ0V4cChNICsgXCJ8PlwiKSwgWCA9IG5ldyBSZWdFeHAoJCksIFYgPSBuZXcgUmVnRXhwKFwiXlwiICsgSSArIFwiJFwiKSwgRyA9IHsgSUQ6IG5ldyBSZWdFeHAoXCJeIyhcIiArIEkgKyBcIilcIiksIENMQVNTOiBuZXcgUmVnRXhwKFwiXlxcXFwuKFwiICsgSSArIFwiKVwiKSwgVEFHOiBuZXcgUmVnRXhwKFwiXihcIiArIEkgKyBcInxbKl0pXCIpLCBBVFRSOiBuZXcgUmVnRXhwKFwiXlwiICsgVyksIFBTRVVETzogbmV3IFJlZ0V4cChcIl5cIiArICQpLCBDSElMRDogbmV3IFJlZ0V4cChcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIgKyBNICsgXCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIiArIE0gKyBcIiooPzooWystXXwpXCIgKyBNICsgXCIqKFxcXFxkKyl8KSlcIiArIE0gKyBcIipcXFxcKXwpXCIsIFwiaVwiKSwgYm9vbDogbmV3IFJlZ0V4cChcIl4oPzpcIiArIFIgKyBcIikkXCIsIFwiaVwiKSwgbmVlZHNDb250ZXh0OiBuZXcgUmVnRXhwKFwiXlwiICsgTSArIFwiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIiArIE0gKyBcIiooKD86LVxcXFxkKT9cXFxcZCopXCIgKyBNICsgXCIqXFxcXCl8KSg/PVteLV18JClcIiwgXCJpXCIpIH0sIFkgPSAvSFRNTCQvaSwgUSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksIEogPSAvXmhcXGQkL2ksIEsgPSAvXltee10rXFx7XFxzKlxcW25hdGl2ZSBcXHcvLCBaID0gL14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC8sIGVlID0gL1srfl0vLCB0ZSA9IG5ldyBSZWdFeHAoXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIiArIE0gKyBcIj98KFwiICsgTSArIFwiKXwuKVwiLCBcImlnXCIpLCBuZSA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciByID0gXCIweFwiICsgdCAtIDY1NTM2OyByZXR1cm4gciAhPSByIHx8IG4gPyB0IDogciA8IDAgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKHIgKyA2NTUzNikgOiBTdHJpbmcuZnJvbUNoYXJDb2RlKHIgPj4gMTAgfCA1NTI5NiwgMTAyMyAmIHIgfCA1NjMyMCkgfSwgcmUgPSAvKFtcXDAtXFx4MWZcXHg3Zl18Xi0/XFxkKXxeLSR8W15cXDAtXFx4MWZcXHg3Zi1cXHVGRkZGXFx3LV0vZywgaWUgPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gdCA/IFwiXFwwXCIgPT09IGUgPyBcIlxcdWZmZmRcIiA6IGUuc2xpY2UoMCwgLTEpICsgXCJcXFxcXCIgKyBlLmNoYXJDb2RlQXQoZS5sZW5ndGggLSAxKS50b1N0cmluZygxNikgKyBcIiBcIiA6IFwiXFxcXFwiICsgZSB9LCBvZSA9IGZ1bmN0aW9uICgpIHsgVCgpIH0sIGFlID0gYmUoZnVuY3Rpb24gKGUpIHsgcmV0dXJuICEwID09PSBlLmRpc2FibGVkICYmIFwiZmllbGRzZXRcIiA9PT0gZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIH0sIHsgZGlyOiBcInBhcmVudE5vZGVcIiwgbmV4dDogXCJsZWdlbmRcIiB9KTsgdHJ5IHsgSC5hcHBseSh0ID0gTy5jYWxsKG0uY2hpbGROb2RlcyksIG0uY2hpbGROb2RlcyksIHRbbS5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGUgfSBjYXRjaCAoZSkgeyBIID0geyBhcHBseTogdC5sZW5ndGggPyBmdW5jdGlvbiAoZSwgdCkgeyBMLmFwcGx5KGUsIE8uY2FsbCh0KSkgfSA6IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gZS5sZW5ndGgsIHIgPSAwOyB3aGlsZSAoZVtuKytdID0gdFtyKytdKTsgZS5sZW5ndGggPSBuIC0gMSB9IH0gfSBmdW5jdGlvbiBzZSh0LCBlLCBuLCByKSB7IHZhciBpLCBvLCBhLCBzLCB1LCBsLCBjLCBmID0gZSAmJiBlLm93bmVyRG9jdW1lbnQsIHAgPSBlID8gZS5ub2RlVHlwZSA6IDk7IGlmIChuID0gbiB8fCBbXSwgXCJzdHJpbmdcIiAhPSB0eXBlb2YgdCB8fCAhdCB8fCAxICE9PSBwICYmIDkgIT09IHAgJiYgMTEgIT09IHApIHJldHVybiBuOyBpZiAoIXIgJiYgKChlID8gZS5vd25lckRvY3VtZW50IHx8IGUgOiBtKSAhPT0gQyAmJiBUKGUpLCBlID0gZSB8fCBDLCBFKSkgeyBpZiAoMTEgIT09IHAgJiYgKHUgPSBaLmV4ZWModCkpKSBpZiAoaSA9IHVbMV0pIHsgaWYgKDkgPT09IHApIHsgaWYgKCEoYSA9IGUuZ2V0RWxlbWVudEJ5SWQoaSkpKSByZXR1cm4gbjsgaWYgKGEuaWQgPT09IGkpIHJldHVybiBuLnB1c2goYSksIG4gfSBlbHNlIGlmIChmICYmIChhID0gZi5nZXRFbGVtZW50QnlJZChpKSkgJiYgeShlLCBhKSAmJiBhLmlkID09PSBpKSByZXR1cm4gbi5wdXNoKGEpLCBuIH0gZWxzZSB7IGlmICh1WzJdKSByZXR1cm4gSC5hcHBseShuLCBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHQpKSwgbjsgaWYgKChpID0gdVszXSkgJiYgZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSkgcmV0dXJuIEguYXBwbHkobiwgZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGkpKSwgbiB9IGlmIChkLnFzYSAmJiAhQVt0ICsgXCIgXCJdICYmICghdiB8fCAhdi50ZXN0KHQpKSAmJiAoMSAhPT0gcCB8fCBcIm9iamVjdFwiICE9PSBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpKSB7IGlmIChjID0gdCwgZiA9IGUsIDEgPT09IHAgJiYgVS50ZXN0KHQpKSB7IChzID0gZS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSkgPyBzID0gcy5yZXBsYWNlKHJlLCBpZSkgOiBlLnNldEF0dHJpYnV0ZShcImlkXCIsIHMgPSBrKSwgbyA9IChsID0gaCh0KSkubGVuZ3RoOyB3aGlsZSAoby0tKSBsW29dID0gXCIjXCIgKyBzICsgXCIgXCIgKyB4ZShsW29dKTsgYyA9IGwuam9pbihcIixcIiksIGYgPSBlZS50ZXN0KHQpICYmIHllKGUucGFyZW50Tm9kZSkgfHwgZSB9IHRyeSB7IHJldHVybiBILmFwcGx5KG4sIGYucXVlcnlTZWxlY3RvckFsbChjKSksIG4gfSBjYXRjaCAoZSkgeyBBKHQsICEwKSB9IGZpbmFsbHkgeyBzID09PSBrICYmIGUucmVtb3ZlQXR0cmlidXRlKFwiaWRcIikgfSB9IH0gcmV0dXJuIGcodC5yZXBsYWNlKEIsIFwiJDFcIiksIGUsIG4sIHIpIH0gZnVuY3Rpb24gdWUoKSB7IHZhciByID0gW107IHJldHVybiBmdW5jdGlvbiBlKHQsIG4pIHsgcmV0dXJuIHIucHVzaCh0ICsgXCIgXCIpID4gYi5jYWNoZUxlbmd0aCAmJiBkZWxldGUgZVtyLnNoaWZ0KCldLCBlW3QgKyBcIiBcIl0gPSBuIH0gfSBmdW5jdGlvbiBsZShlKSB7IHJldHVybiBlW2tdID0gITAsIGUgfSBmdW5jdGlvbiBjZShlKSB7IHZhciB0ID0gQy5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIik7IHRyeSB7IHJldHVybiAhIWUodCkgfSBjYXRjaCAoZSkgeyByZXR1cm4gITEgfSBmaW5hbGx5IHsgdC5wYXJlbnROb2RlICYmIHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSwgdCA9IG51bGwgfSB9IGZ1bmN0aW9uIGZlKGUsIHQpIHsgdmFyIG4gPSBlLnNwbGl0KFwifFwiKSwgciA9IG4ubGVuZ3RoOyB3aGlsZSAoci0tKSBiLmF0dHJIYW5kbGVbbltyXV0gPSB0IH0gZnVuY3Rpb24gcGUoZSwgdCkgeyB2YXIgbiA9IHQgJiYgZSwgciA9IG4gJiYgMSA9PT0gZS5ub2RlVHlwZSAmJiAxID09PSB0Lm5vZGVUeXBlICYmIGUuc291cmNlSW5kZXggLSB0LnNvdXJjZUluZGV4OyBpZiAocikgcmV0dXJuIHI7IGlmIChuKSB3aGlsZSAobiA9IG4ubmV4dFNpYmxpbmcpIGlmIChuID09PSB0KSByZXR1cm4gLTE7IHJldHVybiBlID8gMSA6IC0xIH0gZnVuY3Rpb24gZGUodCkgeyByZXR1cm4gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIFwiaW5wdXRcIiA9PT0gZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICYmIGUudHlwZSA9PT0gdCB9IH0gZnVuY3Rpb24gaGUobikgeyByZXR1cm4gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7IHJldHVybiAoXCJpbnB1dFwiID09PSB0IHx8IFwiYnV0dG9uXCIgPT09IHQpICYmIGUudHlwZSA9PT0gbiB9IH0gZnVuY3Rpb24gZ2UodCkgeyByZXR1cm4gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIFwiZm9ybVwiIGluIGUgPyBlLnBhcmVudE5vZGUgJiYgITEgPT09IGUuZGlzYWJsZWQgPyBcImxhYmVsXCIgaW4gZSA/IFwibGFiZWxcIiBpbiBlLnBhcmVudE5vZGUgPyBlLnBhcmVudE5vZGUuZGlzYWJsZWQgPT09IHQgOiBlLmRpc2FibGVkID09PSB0IDogZS5pc0Rpc2FibGVkID09PSB0IHx8IGUuaXNEaXNhYmxlZCAhPT0gIXQgJiYgYWUoZSkgPT09IHQgOiBlLmRpc2FibGVkID09PSB0IDogXCJsYWJlbFwiIGluIGUgJiYgZS5kaXNhYmxlZCA9PT0gdCB9IH0gZnVuY3Rpb24gdmUoYSkgeyByZXR1cm4gbGUoZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gPSArbywgbGUoZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4sIHIgPSBhKFtdLCBlLmxlbmd0aCwgbyksIGkgPSByLmxlbmd0aDsgd2hpbGUgKGktLSkgZVtuID0gcltpXV0gJiYgKGVbbl0gPSAhKHRbbl0gPSBlW25dKSkgfSkgfSkgfSBmdW5jdGlvbiB5ZShlKSB7IHJldHVybiBlICYmIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUgJiYgZSB9IGZvciAoZSBpbiBkID0gc2Uuc3VwcG9ydCA9IHt9LCBpID0gc2UuaXNYTUwgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGUubmFtZXNwYWNlVVJJLCBuID0gKGUub3duZXJEb2N1bWVudCB8fCBlKS5kb2N1bWVudEVsZW1lbnQ7IHJldHVybiAhWS50ZXN0KHQgfHwgbiAmJiBuLm5vZGVOYW1lIHx8IFwiSFRNTFwiKSB9LCBUID0gc2Uuc2V0RG9jdW1lbnQgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiwgciA9IGUgPyBlLm93bmVyRG9jdW1lbnQgfHwgZSA6IG07IHJldHVybiByICE9PSBDICYmIDkgPT09IHIubm9kZVR5cGUgJiYgci5kb2N1bWVudEVsZW1lbnQgJiYgKGEgPSAoQyA9IHIpLmRvY3VtZW50RWxlbWVudCwgRSA9ICFpKEMpLCBtICE9PSBDICYmIChuID0gQy5kZWZhdWx0VmlldykgJiYgbi50b3AgIT09IG4gJiYgKG4uYWRkRXZlbnRMaXN0ZW5lciA/IG4uYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZFwiLCBvZSwgITEpIDogbi5hdHRhY2hFdmVudCAmJiBuLmF0dGFjaEV2ZW50KFwib251bmxvYWRcIiwgb2UpKSwgZC5hdHRyaWJ1dGVzID0gY2UoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUuY2xhc3NOYW1lID0gXCJpXCIsICFlLmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKSB9KSwgZC5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGNlKGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLmFwcGVuZENoaWxkKEMuY3JlYXRlQ29tbWVudChcIlwiKSksICFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGggfSksIGQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IEsudGVzdChDLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLCBkLmdldEJ5SWQgPSBjZShmdW5jdGlvbiAoZSkgeyByZXR1cm4gYS5hcHBlbmRDaGlsZChlKS5pZCA9IGssICFDLmdldEVsZW1lbnRzQnlOYW1lIHx8ICFDLmdldEVsZW1lbnRzQnlOYW1lKGspLmxlbmd0aCB9KSwgZC5nZXRCeUlkID8gKGIuZmlsdGVyLklEID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBlLnJlcGxhY2UodGUsIG5lKTsgcmV0dXJuIGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLmdldEF0dHJpYnV0ZShcImlkXCIpID09PSB0IH0gfSwgYi5maW5kLklEID0gZnVuY3Rpb24gKGUsIHQpIHsgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQgJiYgRSkgeyB2YXIgbiA9IHQuZ2V0RWxlbWVudEJ5SWQoZSk7IHJldHVybiBuID8gW25dIDogW10gfSB9KSA6IChiLmZpbHRlci5JRCA9IGZ1bmN0aW9uIChlKSB7IHZhciBuID0gZS5yZXBsYWNlKHRlLCBuZSk7IHJldHVybiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSAmJiBlLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTsgcmV0dXJuIHQgJiYgdC52YWx1ZSA9PT0gbiB9IH0sIGIuZmluZC5JRCA9IGZ1bmN0aW9uIChlLCB0KSB7IGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB0LmdldEVsZW1lbnRCeUlkICYmIEUpIHsgdmFyIG4sIHIsIGksIG8gPSB0LmdldEVsZW1lbnRCeUlkKGUpOyBpZiAobykgeyBpZiAoKG4gPSBvLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKSkgJiYgbi52YWx1ZSA9PT0gZSkgcmV0dXJuIFtvXTsgaSA9IHQuZ2V0RWxlbWVudHNCeU5hbWUoZSksIHIgPSAwOyB3aGlsZSAobyA9IGlbcisrXSkgaWYgKChuID0gby5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIikpICYmIG4udmFsdWUgPT09IGUpIHJldHVybiBbb10gfSByZXR1cm4gW10gfSB9KSwgYi5maW5kLlRBRyA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPyBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgdC5nZXRFbGVtZW50c0J5VGFnTmFtZSA/IHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSkgOiBkLnFzYSA/IHQucXVlcnlTZWxlY3RvckFsbChlKSA6IHZvaWQgMCB9IDogZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4sIHIgPSBbXSwgaSA9IDAsIG8gPSB0LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpOyBpZiAoXCIqXCIgPT09IGUpIHsgd2hpbGUgKG4gPSBvW2krK10pIDEgPT09IG4ubm9kZVR5cGUgJiYgci5wdXNoKG4pOyByZXR1cm4gciB9IHJldHVybiBvIH0sIGIuZmluZC5DTEFTUyA9IGQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJiBmdW5jdGlvbiAoZSwgdCkgeyBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIEUpIHJldHVybiB0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZSkgfSwgcyA9IFtdLCB2ID0gW10sIChkLnFzYSA9IEsudGVzdChDLnF1ZXJ5U2VsZWN0b3JBbGwpKSAmJiAoY2UoZnVuY3Rpb24gKGUpIHsgYS5hcHBlbmRDaGlsZChlKS5pbm5lckhUTUwgPSBcIjxhIGlkPSdcIiArIGsgKyBcIic+PC9hPjxzZWxlY3QgaWQ9J1wiICsgayArIFwiLVxcclxcXFwnIG1zYWxsb3djYXB0dXJlPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCIsIGUucXVlcnlTZWxlY3RvckFsbChcIlttc2FsbG93Y2FwdHVyZV49JyddXCIpLmxlbmd0aCAmJiB2LnB1c2goXCJbKl4kXT1cIiArIE0gKyBcIiooPzonJ3xcXFwiXFxcIilcIiksIGUucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RoIHx8IHYucHVzaChcIlxcXFxbXCIgKyBNICsgXCIqKD86dmFsdWV8XCIgKyBSICsgXCIpXCIpLCBlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaWR+PVwiICsgayArIFwiLV1cIikubGVuZ3RoIHx8IHYucHVzaChcIn49XCIpLCBlLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGggfHwgdi5wdXNoKFwiOmNoZWNrZWRcIiksIGUucXVlcnlTZWxlY3RvckFsbChcImEjXCIgKyBrICsgXCIrKlwiKS5sZW5ndGggfHwgdi5wdXNoKFwiLiMuK1srfl1cIikgfSksIGNlKGZ1bmN0aW9uIChlKSB7IGUuaW5uZXJIVE1MID0gXCI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD5cIjsgdmFyIHQgPSBDLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTsgdC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiaGlkZGVuXCIpLCBlLmFwcGVuZENoaWxkKHQpLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJEXCIpLCBlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmFtZT1kXVwiKS5sZW5ndGggJiYgdi5wdXNoKFwibmFtZVwiICsgTSArIFwiKlsqXiR8IX5dPz1cIiksIDIgIT09IGUucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aCAmJiB2LnB1c2goXCI6ZW5hYmxlZFwiLCBcIjpkaXNhYmxlZFwiKSwgYS5hcHBlbmRDaGlsZChlKS5kaXNhYmxlZCA9ICEwLCAyICE9PSBlLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZGlzYWJsZWRcIikubGVuZ3RoICYmIHYucHVzaChcIjplbmFibGVkXCIsIFwiOmRpc2FibGVkXCIpLCBlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpLCB2LnB1c2goXCIsLio6XCIpIH0pKSwgKGQubWF0Y2hlc1NlbGVjdG9yID0gSy50ZXN0KGMgPSBhLm1hdGNoZXMgfHwgYS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHwgYS5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgYS5vTWF0Y2hlc1NlbGVjdG9yIHx8IGEubXNNYXRjaGVzU2VsZWN0b3IpKSAmJiBjZShmdW5jdGlvbiAoZSkgeyBkLmRpc2Nvbm5lY3RlZE1hdGNoID0gYy5jYWxsKGUsIFwiKlwiKSwgYy5jYWxsKGUsIFwiW3MhPScnXTp4XCIpLCBzLnB1c2goXCIhPVwiLCAkKSB9KSwgdiA9IHYubGVuZ3RoICYmIG5ldyBSZWdFeHAodi5qb2luKFwifFwiKSksIHMgPSBzLmxlbmd0aCAmJiBuZXcgUmVnRXhwKHMuam9pbihcInxcIikpLCB0ID0gSy50ZXN0KGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24pLCB5ID0gdCB8fCBLLnRlc3QoYS5jb250YWlucykgPyBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IDkgPT09IGUubm9kZVR5cGUgPyBlLmRvY3VtZW50RWxlbWVudCA6IGUsIHIgPSB0ICYmIHQucGFyZW50Tm9kZTsgcmV0dXJuIGUgPT09IHIgfHwgISghciB8fCAxICE9PSByLm5vZGVUeXBlIHx8ICEobi5jb250YWlucyA/IG4uY29udGFpbnMocikgOiBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIDE2ICYgZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKSkpIH0gOiBmdW5jdGlvbiAoZSwgdCkgeyBpZiAodCkgd2hpbGUgKHQgPSB0LnBhcmVudE5vZGUpIGlmICh0ID09PSBlKSByZXR1cm4gITA7IHJldHVybiAhMSB9LCBEID0gdCA/IGZ1bmN0aW9uIChlLCB0KSB7IGlmIChlID09PSB0KSByZXR1cm4gbCA9ICEwLCAwOyB2YXIgbiA9ICFlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIC0gIXQuY29tcGFyZURvY3VtZW50UG9zaXRpb247IHJldHVybiBuIHx8ICgxICYgKG4gPSAoZS5vd25lckRvY3VtZW50IHx8IGUpID09PSAodC5vd25lckRvY3VtZW50IHx8IHQpID8gZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KSA6IDEpIHx8ICFkLnNvcnREZXRhY2hlZCAmJiB0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGUpID09PSBuID8gZSA9PT0gQyB8fCBlLm93bmVyRG9jdW1lbnQgPT09IG0gJiYgeShtLCBlKSA/IC0xIDogdCA9PT0gQyB8fCB0Lm93bmVyRG9jdW1lbnQgPT09IG0gJiYgeShtLCB0KSA/IDEgOiB1ID8gUCh1LCBlKSAtIFAodSwgdCkgOiAwIDogNCAmIG4gPyAtMSA6IDEpIH0gOiBmdW5jdGlvbiAoZSwgdCkgeyBpZiAoZSA9PT0gdCkgcmV0dXJuIGwgPSAhMCwgMDsgdmFyIG4sIHIgPSAwLCBpID0gZS5wYXJlbnROb2RlLCBvID0gdC5wYXJlbnROb2RlLCBhID0gW2VdLCBzID0gW3RdOyBpZiAoIWkgfHwgIW8pIHJldHVybiBlID09PSBDID8gLTEgOiB0ID09PSBDID8gMSA6IGkgPyAtMSA6IG8gPyAxIDogdSA/IFAodSwgZSkgLSBQKHUsIHQpIDogMDsgaWYgKGkgPT09IG8pIHJldHVybiBwZShlLCB0KTsgbiA9IGU7IHdoaWxlIChuID0gbi5wYXJlbnROb2RlKSBhLnVuc2hpZnQobik7IG4gPSB0OyB3aGlsZSAobiA9IG4ucGFyZW50Tm9kZSkgcy51bnNoaWZ0KG4pOyB3aGlsZSAoYVtyXSA9PT0gc1tyXSkgcisrOyByZXR1cm4gciA/IHBlKGFbcl0sIHNbcl0pIDogYVtyXSA9PT0gbSA/IC0xIDogc1tyXSA9PT0gbSA/IDEgOiAwIH0pLCBDIH0sIHNlLm1hdGNoZXMgPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gc2UoZSwgbnVsbCwgbnVsbCwgdCkgfSwgc2UubWF0Y2hlc1NlbGVjdG9yID0gZnVuY3Rpb24gKGUsIHQpIHsgaWYgKChlLm93bmVyRG9jdW1lbnQgfHwgZSkgIT09IEMgJiYgVChlKSwgZC5tYXRjaGVzU2VsZWN0b3IgJiYgRSAmJiAhQVt0ICsgXCIgXCJdICYmICghcyB8fCAhcy50ZXN0KHQpKSAmJiAoIXYgfHwgIXYudGVzdCh0KSkpIHRyeSB7IHZhciBuID0gYy5jYWxsKGUsIHQpOyBpZiAobiB8fCBkLmRpc2Nvbm5lY3RlZE1hdGNoIHx8IGUuZG9jdW1lbnQgJiYgMTEgIT09IGUuZG9jdW1lbnQubm9kZVR5cGUpIHJldHVybiBuIH0gY2F0Y2ggKGUpIHsgQSh0LCAhMCkgfSByZXR1cm4gMCA8IHNlKHQsIEMsIG51bGwsIFtlXSkubGVuZ3RoIH0sIHNlLmNvbnRhaW5zID0gZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIChlLm93bmVyRG9jdW1lbnQgfHwgZSkgIT09IEMgJiYgVChlKSwgeShlLCB0KSB9LCBzZS5hdHRyID0gZnVuY3Rpb24gKGUsIHQpIHsgKGUub3duZXJEb2N1bWVudCB8fCBlKSAhPT0gQyAmJiBUKGUpOyB2YXIgbiA9IGIuYXR0ckhhbmRsZVt0LnRvTG93ZXJDYXNlKCldLCByID0gbiAmJiBqLmNhbGwoYi5hdHRySGFuZGxlLCB0LnRvTG93ZXJDYXNlKCkpID8gbihlLCB0LCAhRSkgOiB2b2lkIDA7IHJldHVybiB2b2lkIDAgIT09IHIgPyByIDogZC5hdHRyaWJ1dGVzIHx8ICFFID8gZS5nZXRBdHRyaWJ1dGUodCkgOiAociA9IGUuZ2V0QXR0cmlidXRlTm9kZSh0KSkgJiYgci5zcGVjaWZpZWQgPyByLnZhbHVlIDogbnVsbCB9LCBzZS5lc2NhcGUgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gKGUgKyBcIlwiKS5yZXBsYWNlKHJlLCBpZSkgfSwgc2UuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aHJvdyBuZXcgRXJyb3IoXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIiArIGUpIH0sIHNlLnVuaXF1ZVNvcnQgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiA9IFtdLCByID0gMCwgaSA9IDA7IGlmIChsID0gIWQuZGV0ZWN0RHVwbGljYXRlcywgdSA9ICFkLnNvcnRTdGFibGUgJiYgZS5zbGljZSgwKSwgZS5zb3J0KEQpLCBsKSB7IHdoaWxlICh0ID0gZVtpKytdKSB0ID09PSBlW2ldICYmIChyID0gbi5wdXNoKGkpKTsgd2hpbGUgKHItLSkgZS5zcGxpY2UobltyXSwgMSkgfSByZXR1cm4gdSA9IG51bGwsIGUgfSwgbyA9IHNlLmdldFRleHQgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiA9IFwiXCIsIHIgPSAwLCBpID0gZS5ub2RlVHlwZTsgaWYgKGkpIHsgaWYgKDEgPT09IGkgfHwgOSA9PT0gaSB8fCAxMSA9PT0gaSkgeyBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50ZXh0Q29udGVudCkgcmV0dXJuIGUudGV4dENvbnRlbnQ7IGZvciAoZSA9IGUuZmlyc3RDaGlsZDsgZTsgZSA9IGUubmV4dFNpYmxpbmcpbiArPSBvKGUpIH0gZWxzZSBpZiAoMyA9PT0gaSB8fCA0ID09PSBpKSByZXR1cm4gZS5ub2RlVmFsdWUgfSBlbHNlIHdoaWxlICh0ID0gZVtyKytdKSBuICs9IG8odCk7IHJldHVybiBuIH0sIChiID0gc2Uuc2VsZWN0b3JzID0geyBjYWNoZUxlbmd0aDogNTAsIGNyZWF0ZVBzZXVkbzogbGUsIG1hdGNoOiBHLCBhdHRySGFuZGxlOiB7fSwgZmluZDoge30sIHJlbGF0aXZlOiB7IFwiPlwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIsIGZpcnN0OiAhMCB9LCBcIiBcIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiIH0sIFwiK1wiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiwgZmlyc3Q6ICEwIH0sIFwiflwiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiB9IH0sIHByZUZpbHRlcjogeyBBVFRSOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZVsxXSA9IGVbMV0ucmVwbGFjZSh0ZSwgbmUpLCBlWzNdID0gKGVbM10gfHwgZVs0XSB8fCBlWzVdIHx8IFwiXCIpLnJlcGxhY2UodGUsIG5lKSwgXCJ+PVwiID09PSBlWzJdICYmIChlWzNdID0gXCIgXCIgKyBlWzNdICsgXCIgXCIpLCBlLnNsaWNlKDAsIDQpIH0sIENISUxEOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZVsxXSA9IGVbMV0udG9Mb3dlckNhc2UoKSwgXCJudGhcIiA9PT0gZVsxXS5zbGljZSgwLCAzKSA/IChlWzNdIHx8IHNlLmVycm9yKGVbMF0pLCBlWzRdID0gKyhlWzRdID8gZVs1XSArIChlWzZdIHx8IDEpIDogMiAqIChcImV2ZW5cIiA9PT0gZVszXSB8fCBcIm9kZFwiID09PSBlWzNdKSksIGVbNV0gPSArKGVbN10gKyBlWzhdIHx8IFwib2RkXCIgPT09IGVbM10pKSA6IGVbM10gJiYgc2UuZXJyb3IoZVswXSksIGUgfSwgUFNFVURPOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiA9ICFlWzZdICYmIGVbMl07IHJldHVybiBHLkNISUxELnRlc3QoZVswXSkgPyBudWxsIDogKGVbM10gPyBlWzJdID0gZVs0XSB8fCBlWzVdIHx8IFwiXCIgOiBuICYmIFgudGVzdChuKSAmJiAodCA9IGgobiwgITApKSAmJiAodCA9IG4uaW5kZXhPZihcIilcIiwgbi5sZW5ndGggLSB0KSAtIG4ubGVuZ3RoKSAmJiAoZVswXSA9IGVbMF0uc2xpY2UoMCwgdCksIGVbMl0gPSBuLnNsaWNlKDAsIHQpKSwgZS5zbGljZSgwLCAzKSkgfSB9LCBmaWx0ZXI6IHsgVEFHOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGUucmVwbGFjZSh0ZSwgbmUpLnRvTG93ZXJDYXNlKCk7IHJldHVybiBcIipcIiA9PT0gZSA/IGZ1bmN0aW9uICgpIHsgcmV0dXJuICEwIH0gOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS5ub2RlTmFtZSAmJiBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHQgfSB9LCBDTEFTUzogZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBwW2UgKyBcIiBcIl07IHJldHVybiB0IHx8ICh0ID0gbmV3IFJlZ0V4cChcIihefFwiICsgTSArIFwiKVwiICsgZSArIFwiKFwiICsgTSArIFwifCQpXCIpKSAmJiBwKGUsIGZ1bmN0aW9uIChlKSB7IHJldHVybiB0LnRlc3QoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5jbGFzc05hbWUgJiYgZS5jbGFzc05hbWUgfHwgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZS5nZXRBdHRyaWJ1dGUgJiYgZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiKSB9KSB9LCBBVFRSOiBmdW5jdGlvbiAobiwgciwgaSkgeyByZXR1cm4gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBzZS5hdHRyKGUsIG4pOyByZXR1cm4gbnVsbCA9PSB0ID8gXCIhPVwiID09PSByIDogIXIgfHwgKHQgKz0gXCJcIiwgXCI9XCIgPT09IHIgPyB0ID09PSBpIDogXCIhPVwiID09PSByID8gdCAhPT0gaSA6IFwiXj1cIiA9PT0gciA/IGkgJiYgMCA9PT0gdC5pbmRleE9mKGkpIDogXCIqPVwiID09PSByID8gaSAmJiAtMSA8IHQuaW5kZXhPZihpKSA6IFwiJD1cIiA9PT0gciA/IGkgJiYgdC5zbGljZSgtaS5sZW5ndGgpID09PSBpIDogXCJ+PVwiID09PSByID8gLTEgPCAoXCIgXCIgKyB0LnJlcGxhY2UoRiwgXCIgXCIpICsgXCIgXCIpLmluZGV4T2YoaSkgOiBcInw9XCIgPT09IHIgJiYgKHQgPT09IGkgfHwgdC5zbGljZSgwLCBpLmxlbmd0aCArIDEpID09PSBpICsgXCItXCIpKSB9IH0sIENISUxEOiBmdW5jdGlvbiAoaCwgZSwgdCwgZywgdikgeyB2YXIgeSA9IFwibnRoXCIgIT09IGguc2xpY2UoMCwgMyksIG0gPSBcImxhc3RcIiAhPT0gaC5zbGljZSgtNCksIHggPSBcIm9mLXR5cGVcIiA9PT0gZTsgcmV0dXJuIDEgPT09IGcgJiYgMCA9PT0gdiA/IGZ1bmN0aW9uIChlKSB7IHJldHVybiAhIWUucGFyZW50Tm9kZSB9IDogZnVuY3Rpb24gKGUsIHQsIG4pIHsgdmFyIHIsIGksIG8sIGEsIHMsIHUsIGwgPSB5ICE9PSBtID8gXCJuZXh0U2libGluZ1wiIDogXCJwcmV2aW91c1NpYmxpbmdcIiwgYyA9IGUucGFyZW50Tm9kZSwgZiA9IHggJiYgZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLCBwID0gIW4gJiYgIXgsIGQgPSAhMTsgaWYgKGMpIHsgaWYgKHkpIHsgd2hpbGUgKGwpIHsgYSA9IGU7IHdoaWxlIChhID0gYVtsXSkgaWYgKHggPyBhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IGYgOiAxID09PSBhLm5vZGVUeXBlKSByZXR1cm4gITE7IHUgPSBsID0gXCJvbmx5XCIgPT09IGggJiYgIXUgJiYgXCJuZXh0U2libGluZ1wiIH0gcmV0dXJuICEwIH0gaWYgKHUgPSBbbSA/IGMuZmlyc3RDaGlsZCA6IGMubGFzdENoaWxkXSwgbSAmJiBwKSB7IGQgPSAocyA9IChyID0gKGkgPSAobyA9IChhID0gYylba10gfHwgKGFba10gPSB7fSkpW2EudW5pcXVlSURdIHx8IChvW2EudW5pcXVlSURdID0ge30pKVtoXSB8fCBbXSlbMF0gPT09IFMgJiYgclsxXSkgJiYgclsyXSwgYSA9IHMgJiYgYy5jaGlsZE5vZGVzW3NdOyB3aGlsZSAoYSA9ICsrcyAmJiBhICYmIGFbbF0gfHwgKGQgPSBzID0gMCkgfHwgdS5wb3AoKSkgaWYgKDEgPT09IGEubm9kZVR5cGUgJiYgKytkICYmIGEgPT09IGUpIHsgaVtoXSA9IFtTLCBzLCBkXTsgYnJlYWsgfSB9IGVsc2UgaWYgKHAgJiYgKGQgPSBzID0gKHIgPSAoaSA9IChvID0gKGEgPSBlKVtrXSB8fCAoYVtrXSA9IHt9KSlbYS51bmlxdWVJRF0gfHwgKG9bYS51bmlxdWVJRF0gPSB7fSkpW2hdIHx8IFtdKVswXSA9PT0gUyAmJiByWzFdKSwgITEgPT09IGQpIHdoaWxlIChhID0gKytzICYmIGEgJiYgYVtsXSB8fCAoZCA9IHMgPSAwKSB8fCB1LnBvcCgpKSBpZiAoKHggPyBhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IGYgOiAxID09PSBhLm5vZGVUeXBlKSAmJiArK2QgJiYgKHAgJiYgKChpID0gKG8gPSBhW2tdIHx8IChhW2tdID0ge30pKVthLnVuaXF1ZUlEXSB8fCAob1thLnVuaXF1ZUlEXSA9IHt9KSlbaF0gPSBbUywgZF0pLCBhID09PSBlKSkgYnJlYWs7IHJldHVybiAoZCAtPSB2KSA9PT0gZyB8fCBkICUgZyA9PSAwICYmIDAgPD0gZCAvIGcgfSB9IH0sIFBTRVVETzogZnVuY3Rpb24gKGUsIG8pIHsgdmFyIHQsIGEgPSBiLnBzZXVkb3NbZV0gfHwgYi5zZXRGaWx0ZXJzW2UudG9Mb3dlckNhc2UoKV0gfHwgc2UuZXJyb3IoXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiICsgZSk7IHJldHVybiBhW2tdID8gYShvKSA6IDEgPCBhLmxlbmd0aCA/ICh0ID0gW2UsIGUsIFwiXCIsIG9dLCBiLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKSA/IGxlKGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuLCByID0gYShlLCBvKSwgaSA9IHIubGVuZ3RoOyB3aGlsZSAoaS0tKSBlW24gPSBQKGUsIHJbaV0pXSA9ICEodFtuXSA9IHJbaV0pIH0pIDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGEoZSwgMCwgdCkgfSkgOiBhIH0gfSwgcHNldWRvczogeyBub3Q6IGxlKGZ1bmN0aW9uIChlKSB7IHZhciByID0gW10sIGkgPSBbXSwgcyA9IGYoZS5yZXBsYWNlKEIsIFwiJDFcIikpOyByZXR1cm4gc1trXSA/IGxlKGZ1bmN0aW9uIChlLCB0LCBuLCByKSB7IHZhciBpLCBvID0gcyhlLCBudWxsLCByLCBbXSksIGEgPSBlLmxlbmd0aDsgd2hpbGUgKGEtLSkgKGkgPSBvW2FdKSAmJiAoZVthXSA9ICEodFthXSA9IGkpKSB9KSA6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiByWzBdID0gZSwgcyhyLCBudWxsLCBuLCBpKSwgclswXSA9IG51bGwsICFpLnBvcCgpIH0gfSksIGhhczogbGUoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGZ1bmN0aW9uIChlKSB7IHJldHVybiAwIDwgc2UodCwgZSkubGVuZ3RoIH0gfSksIGNvbnRhaW5zOiBsZShmdW5jdGlvbiAodCkgeyByZXR1cm4gdCA9IHQucmVwbGFjZSh0ZSwgbmUpLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gLTEgPCAoZS50ZXh0Q29udGVudCB8fCBvKGUpKS5pbmRleE9mKHQpIH0gfSksIGxhbmc6IGxlKGZ1bmN0aW9uIChuKSB7IHJldHVybiBWLnRlc3QobiB8fCBcIlwiKSB8fCBzZS5lcnJvcihcInVuc3VwcG9ydGVkIGxhbmc6IFwiICsgbiksIG4gPSBuLnJlcGxhY2UodGUsIG5lKS50b0xvd2VyQ2FzZSgpLCBmdW5jdGlvbiAoZSkgeyB2YXIgdDsgZG8geyBpZiAodCA9IEUgPyBlLmxhbmcgOiBlLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpIHx8IGUuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSkgcmV0dXJuICh0ID0gdC50b0xvd2VyQ2FzZSgpKSA9PT0gbiB8fCAwID09PSB0LmluZGV4T2YobiArIFwiLVwiKSB9IHdoaWxlICgoZSA9IGUucGFyZW50Tm9kZSkgJiYgMSA9PT0gZS5ub2RlVHlwZSk7IHJldHVybiAhMSB9IH0pLCB0YXJnZXQ6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gbi5sb2NhdGlvbiAmJiBuLmxvY2F0aW9uLmhhc2g7IHJldHVybiB0ICYmIHQuc2xpY2UoMSkgPT09IGUuaWQgfSwgcm9vdDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUgPT09IGEgfSwgZm9jdXM6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlID09PSBDLmFjdGl2ZUVsZW1lbnQgJiYgKCFDLmhhc0ZvY3VzIHx8IEMuaGFzRm9jdXMoKSkgJiYgISEoZS50eXBlIHx8IGUuaHJlZiB8fCB+ZS50YWJJbmRleCkgfSwgZW5hYmxlZDogZ2UoITEpLCBkaXNhYmxlZDogZ2UoITApLCBjaGVja2VkOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsgcmV0dXJuIFwiaW5wdXRcIiA9PT0gdCAmJiAhIWUuY2hlY2tlZCB8fCBcIm9wdGlvblwiID09PSB0ICYmICEhZS5zZWxlY3RlZCB9LCBzZWxlY3RlZDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUucGFyZW50Tm9kZSAmJiBlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCwgITAgPT09IGUuc2VsZWN0ZWQgfSwgZW1wdHk6IGZ1bmN0aW9uIChlKSB7IGZvciAoZSA9IGUuZmlyc3RDaGlsZDsgZTsgZSA9IGUubmV4dFNpYmxpbmcpaWYgKGUubm9kZVR5cGUgPCA2KSByZXR1cm4gITE7IHJldHVybiAhMCB9LCBwYXJlbnQ6IGZ1bmN0aW9uIChlKSB7IHJldHVybiAhYi5wc2V1ZG9zLmVtcHR5KGUpIH0sIGhlYWRlcjogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIEoudGVzdChlLm5vZGVOYW1lKSB9LCBpbnB1dDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIFEudGVzdChlLm5vZGVOYW1lKSB9LCBidXR0b246IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOyByZXR1cm4gXCJpbnB1dFwiID09PSB0ICYmIFwiYnV0dG9uXCIgPT09IGUudHlwZSB8fCBcImJ1dHRvblwiID09PSB0IH0sIHRleHQ6IGZ1bmN0aW9uIChlKSB7IHZhciB0OyByZXR1cm4gXCJpbnB1dFwiID09PSBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgJiYgXCJ0ZXh0XCIgPT09IGUudHlwZSAmJiAobnVsbCA9PSAodCA9IGUuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSkgfHwgXCJ0ZXh0XCIgPT09IHQudG9Mb3dlckNhc2UoKSkgfSwgZmlyc3Q6IHZlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFswXSB9KSwgbGFzdDogdmUoZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIFt0IC0gMV0gfSksIGVxOiB2ZShmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gW24gPCAwID8gbiArIHQgOiBuXSB9KSwgZXZlbjogdmUoZnVuY3Rpb24gKGUsIHQpIHsgZm9yICh2YXIgbiA9IDA7IG4gPCB0OyBuICs9IDIpZS5wdXNoKG4pOyByZXR1cm4gZSB9KSwgb2RkOiB2ZShmdW5jdGlvbiAoZSwgdCkgeyBmb3IgKHZhciBuID0gMTsgbiA8IHQ7IG4gKz0gMillLnB1c2gobik7IHJldHVybiBlIH0pLCBsdDogdmUoZnVuY3Rpb24gKGUsIHQsIG4pIHsgZm9yICh2YXIgciA9IG4gPCAwID8gbiArIHQgOiB0IDwgbiA/IHQgOiBuOyAwIDw9IC0tcjspZS5wdXNoKHIpOyByZXR1cm4gZSB9KSwgZ3Q6IHZlKGZ1bmN0aW9uIChlLCB0LCBuKSB7IGZvciAodmFyIHIgPSBuIDwgMCA/IG4gKyB0IDogbjsgKytyIDwgdDspZS5wdXNoKHIpOyByZXR1cm4gZSB9KSB9IH0pLnBzZXVkb3MubnRoID0gYi5wc2V1ZG9zLmVxLCB7IHJhZGlvOiAhMCwgY2hlY2tib3g6ICEwLCBmaWxlOiAhMCwgcGFzc3dvcmQ6ICEwLCBpbWFnZTogITAgfSkgYi5wc2V1ZG9zW2VdID0gZGUoZSk7IGZvciAoZSBpbiB7IHN1Ym1pdDogITAsIHJlc2V0OiAhMCB9KSBiLnBzZXVkb3NbZV0gPSBoZShlKTsgZnVuY3Rpb24gbWUoKSB7IH0gZnVuY3Rpb24geGUoZSkgeyBmb3IgKHZhciB0ID0gMCwgbiA9IGUubGVuZ3RoLCByID0gXCJcIjsgdCA8IG47IHQrKylyICs9IGVbdF0udmFsdWU7IHJldHVybiByIH0gZnVuY3Rpb24gYmUocywgZSwgdCkgeyB2YXIgdSA9IGUuZGlyLCBsID0gZS5uZXh0LCBjID0gbCB8fCB1LCBmID0gdCAmJiBcInBhcmVudE5vZGVcIiA9PT0gYywgcCA9IHIrKzsgcmV0dXJuIGUuZmlyc3QgPyBmdW5jdGlvbiAoZSwgdCwgbikgeyB3aGlsZSAoZSA9IGVbdV0pIGlmICgxID09PSBlLm5vZGVUeXBlIHx8IGYpIHJldHVybiBzKGUsIHQsIG4pOyByZXR1cm4gITEgfSA6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciByLCBpLCBvLCBhID0gW1MsIHBdOyBpZiAobikgeyB3aGlsZSAoZSA9IGVbdV0pIGlmICgoMSA9PT0gZS5ub2RlVHlwZSB8fCBmKSAmJiBzKGUsIHQsIG4pKSByZXR1cm4gITAgfSBlbHNlIHdoaWxlIChlID0gZVt1XSkgaWYgKDEgPT09IGUubm9kZVR5cGUgfHwgZikgaWYgKGkgPSAobyA9IGVba10gfHwgKGVba10gPSB7fSkpW2UudW5pcXVlSURdIHx8IChvW2UudW5pcXVlSURdID0ge30pLCBsICYmIGwgPT09IGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkgZSA9IGVbdV0gfHwgZTsgZWxzZSB7IGlmICgociA9IGlbY10pICYmIHJbMF0gPT09IFMgJiYgclsxXSA9PT0gcCkgcmV0dXJuIGFbMl0gPSByWzJdOyBpZiAoKGlbY10gPSBhKVsyXSA9IHMoZSwgdCwgbikpIHJldHVybiAhMCB9IHJldHVybiAhMSB9IH0gZnVuY3Rpb24gd2UoaSkgeyByZXR1cm4gMSA8IGkubGVuZ3RoID8gZnVuY3Rpb24gKGUsIHQsIG4pIHsgdmFyIHIgPSBpLmxlbmd0aDsgd2hpbGUgKHItLSkgaWYgKCFpW3JdKGUsIHQsIG4pKSByZXR1cm4gITE7IHJldHVybiAhMCB9IDogaVswXSB9IGZ1bmN0aW9uIFRlKGUsIHQsIG4sIHIsIGkpIHsgZm9yICh2YXIgbywgYSA9IFtdLCBzID0gMCwgdSA9IGUubGVuZ3RoLCBsID0gbnVsbCAhPSB0OyBzIDwgdTsgcysrKShvID0gZVtzXSkgJiYgKG4gJiYgIW4obywgciwgaSkgfHwgKGEucHVzaChvKSwgbCAmJiB0LnB1c2gocykpKTsgcmV0dXJuIGEgfSBmdW5jdGlvbiBDZShkLCBoLCBnLCB2LCB5LCBlKSB7IHJldHVybiB2ICYmICF2W2tdICYmICh2ID0gQ2UodikpLCB5ICYmICF5W2tdICYmICh5ID0gQ2UoeSwgZSkpLCBsZShmdW5jdGlvbiAoZSwgdCwgbiwgcikgeyB2YXIgaSwgbywgYSwgcyA9IFtdLCB1ID0gW10sIGwgPSB0Lmxlbmd0aCwgYyA9IGUgfHwgZnVuY3Rpb24gKGUsIHQsIG4pIHsgZm9yICh2YXIgciA9IDAsIGkgPSB0Lmxlbmd0aDsgciA8IGk7IHIrKylzZShlLCB0W3JdLCBuKTsgcmV0dXJuIG4gfShoIHx8IFwiKlwiLCBuLm5vZGVUeXBlID8gW25dIDogbiwgW10pLCBmID0gIWQgfHwgIWUgJiYgaCA/IGMgOiBUZShjLCBzLCBkLCBuLCByKSwgcCA9IGcgPyB5IHx8IChlID8gZCA6IGwgfHwgdikgPyBbXSA6IHQgOiBmOyBpZiAoZyAmJiBnKGYsIHAsIG4sIHIpLCB2KSB7IGkgPSBUZShwLCB1KSwgdihpLCBbXSwgbiwgciksIG8gPSBpLmxlbmd0aDsgd2hpbGUgKG8tLSkgKGEgPSBpW29dKSAmJiAocFt1W29dXSA9ICEoZlt1W29dXSA9IGEpKSB9IGlmIChlKSB7IGlmICh5IHx8IGQpIHsgaWYgKHkpIHsgaSA9IFtdLCBvID0gcC5sZW5ndGg7IHdoaWxlIChvLS0pIChhID0gcFtvXSkgJiYgaS5wdXNoKGZbb10gPSBhKTsgeShudWxsLCBwID0gW10sIGksIHIpIH0gbyA9IHAubGVuZ3RoOyB3aGlsZSAoby0tKSAoYSA9IHBbb10pICYmIC0xIDwgKGkgPSB5ID8gUChlLCBhKSA6IHNbb10pICYmIChlW2ldID0gISh0W2ldID0gYSkpIH0gfSBlbHNlIHAgPSBUZShwID09PSB0ID8gcC5zcGxpY2UobCwgcC5sZW5ndGgpIDogcCksIHkgPyB5KG51bGwsIHQsIHAsIHIpIDogSC5hcHBseSh0LCBwKSB9KSB9IGZ1bmN0aW9uIEVlKGUpIHsgZm9yICh2YXIgaSwgdCwgbiwgciA9IGUubGVuZ3RoLCBvID0gYi5yZWxhdGl2ZVtlWzBdLnR5cGVdLCBhID0gbyB8fCBiLnJlbGF0aXZlW1wiIFwiXSwgcyA9IG8gPyAxIDogMCwgdSA9IGJlKGZ1bmN0aW9uIChlKSB7IHJldHVybiBlID09PSBpIH0sIGEsICEwKSwgbCA9IGJlKGZ1bmN0aW9uIChlKSB7IHJldHVybiAtMSA8IFAoaSwgZSkgfSwgYSwgITApLCBjID0gW2Z1bmN0aW9uIChlLCB0LCBuKSB7IHZhciByID0gIW8gJiYgKG4gfHwgdCAhPT0gdykgfHwgKChpID0gdCkubm9kZVR5cGUgPyB1KGUsIHQsIG4pIDogbChlLCB0LCBuKSk7IHJldHVybiBpID0gbnVsbCwgciB9XTsgcyA8IHI7IHMrKylpZiAodCA9IGIucmVsYXRpdmVbZVtzXS50eXBlXSkgYyA9IFtiZSh3ZShjKSwgdCldOyBlbHNlIHsgaWYgKCh0ID0gYi5maWx0ZXJbZVtzXS50eXBlXS5hcHBseShudWxsLCBlW3NdLm1hdGNoZXMpKVtrXSkgeyBmb3IgKG4gPSArK3M7IG4gPCByOyBuKyspaWYgKGIucmVsYXRpdmVbZVtuXS50eXBlXSkgYnJlYWs7IHJldHVybiBDZSgxIDwgcyAmJiB3ZShjKSwgMSA8IHMgJiYgeGUoZS5zbGljZSgwLCBzIC0gMSkuY29uY2F0KHsgdmFsdWU6IFwiIFwiID09PSBlW3MgLSAyXS50eXBlID8gXCIqXCIgOiBcIlwiIH0pKS5yZXBsYWNlKEIsIFwiJDFcIiksIHQsIHMgPCBuICYmIEVlKGUuc2xpY2UocywgbikpLCBuIDwgciAmJiBFZShlID0gZS5zbGljZShuKSksIG4gPCByICYmIHhlKGUpKSB9IGMucHVzaCh0KSB9IHJldHVybiB3ZShjKSB9IHJldHVybiBtZS5wcm90b3R5cGUgPSBiLmZpbHRlcnMgPSBiLnBzZXVkb3MsIGIuc2V0RmlsdGVycyA9IG5ldyBtZSwgaCA9IHNlLnRva2VuaXplID0gZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4sIHIsIGksIG8sIGEsIHMsIHUsIGwgPSB4W2UgKyBcIiBcIl07IGlmIChsKSByZXR1cm4gdCA/IDAgOiBsLnNsaWNlKDApOyBhID0gZSwgcyA9IFtdLCB1ID0gYi5wcmVGaWx0ZXI7IHdoaWxlIChhKSB7IGZvciAobyBpbiBuICYmICEociA9IF8uZXhlYyhhKSkgfHwgKHIgJiYgKGEgPSBhLnNsaWNlKHJbMF0ubGVuZ3RoKSB8fCBhKSwgcy5wdXNoKGkgPSBbXSkpLCBuID0gITEsIChyID0gei5leGVjKGEpKSAmJiAobiA9IHIuc2hpZnQoKSwgaS5wdXNoKHsgdmFsdWU6IG4sIHR5cGU6IHJbMF0ucmVwbGFjZShCLCBcIiBcIikgfSksIGEgPSBhLnNsaWNlKG4ubGVuZ3RoKSksIGIuZmlsdGVyKSAhKHIgPSBHW29dLmV4ZWMoYSkpIHx8IHVbb10gJiYgIShyID0gdVtvXShyKSkgfHwgKG4gPSByLnNoaWZ0KCksIGkucHVzaCh7IHZhbHVlOiBuLCB0eXBlOiBvLCBtYXRjaGVzOiByIH0pLCBhID0gYS5zbGljZShuLmxlbmd0aCkpOyBpZiAoIW4pIGJyZWFrIH0gcmV0dXJuIHQgPyBhLmxlbmd0aCA6IGEgPyBzZS5lcnJvcihlKSA6IHgoZSwgcykuc2xpY2UoMCkgfSwgZiA9IHNlLmNvbXBpbGUgPSBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiwgdiwgeSwgbSwgeCwgciwgaSA9IFtdLCBvID0gW10sIGEgPSBOW2UgKyBcIiBcIl07IGlmICghYSkgeyB0IHx8ICh0ID0gaChlKSksIG4gPSB0Lmxlbmd0aDsgd2hpbGUgKG4tLSkgKGEgPSBFZSh0W25dKSlba10gPyBpLnB1c2goYSkgOiBvLnB1c2goYSk7IChhID0gTihlLCAodiA9IG8sIG0gPSAwIDwgKHkgPSBpKS5sZW5ndGgsIHggPSAwIDwgdi5sZW5ndGgsIHIgPSBmdW5jdGlvbiAoZSwgdCwgbiwgciwgaSkgeyB2YXIgbywgYSwgcywgdSA9IDAsIGwgPSBcIjBcIiwgYyA9IGUgJiYgW10sIGYgPSBbXSwgcCA9IHcsIGQgPSBlIHx8IHggJiYgYi5maW5kLlRBRyhcIipcIiwgaSksIGggPSBTICs9IG51bGwgPT0gcCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IC4xLCBnID0gZC5sZW5ndGg7IGZvciAoaSAmJiAodyA9IHQgPT09IEMgfHwgdCB8fCBpKTsgbCAhPT0gZyAmJiBudWxsICE9IChvID0gZFtsXSk7IGwrKykgeyBpZiAoeCAmJiBvKSB7IGEgPSAwLCB0IHx8IG8ub3duZXJEb2N1bWVudCA9PT0gQyB8fCAoVChvKSwgbiA9ICFFKTsgd2hpbGUgKHMgPSB2W2ErK10pIGlmIChzKG8sIHQgfHwgQywgbikpIHsgci5wdXNoKG8pOyBicmVhayB9IGkgJiYgKFMgPSBoKSB9IG0gJiYgKChvID0gIXMgJiYgbykgJiYgdS0tICwgZSAmJiBjLnB1c2gobykpIH0gaWYgKHUgKz0gbCwgbSAmJiBsICE9PSB1KSB7IGEgPSAwOyB3aGlsZSAocyA9IHlbYSsrXSkgcyhjLCBmLCB0LCBuKTsgaWYgKGUpIHsgaWYgKDAgPCB1KSB3aGlsZSAobC0tKSBjW2xdIHx8IGZbbF0gfHwgKGZbbF0gPSBxLmNhbGwocikpOyBmID0gVGUoZikgfSBILmFwcGx5KHIsIGYpLCBpICYmICFlICYmIDAgPCBmLmxlbmd0aCAmJiAxIDwgdSArIHkubGVuZ3RoICYmIHNlLnVuaXF1ZVNvcnQocikgfSByZXR1cm4gaSAmJiAoUyA9IGgsIHcgPSBwKSwgYyB9LCBtID8gbGUocikgOiByKSkpLnNlbGVjdG9yID0gZSB9IHJldHVybiBhIH0sIGcgPSBzZS5zZWxlY3QgPSBmdW5jdGlvbiAoZSwgdCwgbiwgcikgeyB2YXIgaSwgbywgYSwgcywgdSwgbCA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZSAmJiBlLCBjID0gIXIgJiYgaChlID0gbC5zZWxlY3RvciB8fCBlKTsgaWYgKG4gPSBuIHx8IFtdLCAxID09PSBjLmxlbmd0aCkgeyBpZiAoMiA8IChvID0gY1swXSA9IGNbMF0uc2xpY2UoMCkpLmxlbmd0aCAmJiBcIklEXCIgPT09IChhID0gb1swXSkudHlwZSAmJiA5ID09PSB0Lm5vZGVUeXBlICYmIEUgJiYgYi5yZWxhdGl2ZVtvWzFdLnR5cGVdKSB7IGlmICghKHQgPSAoYi5maW5kLklEKGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLCBuZSksIHQpIHx8IFtdKVswXSkpIHJldHVybiBuOyBsICYmICh0ID0gdC5wYXJlbnROb2RlKSwgZSA9IGUuc2xpY2Uoby5zaGlmdCgpLnZhbHVlLmxlbmd0aCkgfSBpID0gRy5uZWVkc0NvbnRleHQudGVzdChlKSA/IDAgOiBvLmxlbmd0aDsgd2hpbGUgKGktLSkgeyBpZiAoYSA9IG9baV0sIGIucmVsYXRpdmVbcyA9IGEudHlwZV0pIGJyZWFrOyBpZiAoKHUgPSBiLmZpbmRbc10pICYmIChyID0gdShhLm1hdGNoZXNbMF0ucmVwbGFjZSh0ZSwgbmUpLCBlZS50ZXN0KG9bMF0udHlwZSkgJiYgeWUodC5wYXJlbnROb2RlKSB8fCB0KSkpIHsgaWYgKG8uc3BsaWNlKGksIDEpLCAhKGUgPSByLmxlbmd0aCAmJiB4ZShvKSkpIHJldHVybiBILmFwcGx5KG4sIHIpLCBuOyBicmVhayB9IH0gfSByZXR1cm4gKGwgfHwgZihlLCBjKSkociwgdCwgIUUsIG4sICF0IHx8IGVlLnRlc3QoZSkgJiYgeWUodC5wYXJlbnROb2RlKSB8fCB0KSwgbiB9LCBkLnNvcnRTdGFibGUgPSBrLnNwbGl0KFwiXCIpLnNvcnQoRCkuam9pbihcIlwiKSA9PT0gaywgZC5kZXRlY3REdXBsaWNhdGVzID0gISFsLCBUKCksIGQuc29ydERldGFjaGVkID0gY2UoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIDEgJiBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKEMuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpKSB9KSwgY2UoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUuaW5uZXJIVE1MID0gXCI8YSBocmVmPScjJz48L2E+XCIsIFwiI1wiID09PSBlLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSB9KSB8fCBmZShcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIiwgZnVuY3Rpb24gKGUsIHQsIG4pIHsgaWYgKCFuKSByZXR1cm4gZS5nZXRBdHRyaWJ1dGUodCwgXCJ0eXBlXCIgPT09IHQudG9Mb3dlckNhc2UoKSA/IDEgOiAyKSB9KSwgZC5hdHRyaWJ1dGVzICYmIGNlKGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLmlubmVySFRNTCA9IFwiPGlucHV0Lz5cIiwgZS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiXCIpLCBcIlwiID09PSBlLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIikgfSkgfHwgZmUoXCJ2YWx1ZVwiLCBmdW5jdGlvbiAoZSwgdCwgbikgeyBpZiAoIW4gJiYgXCJpbnB1dFwiID09PSBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpIHJldHVybiBlLmRlZmF1bHRWYWx1ZSB9KSwgY2UoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG51bGwgPT0gZS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSB9KSB8fCBmZShSLCBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgcjsgaWYgKCFuKSByZXR1cm4gITAgPT09IGVbdF0gPyB0LnRvTG93ZXJDYXNlKCkgOiAociA9IGUuZ2V0QXR0cmlidXRlTm9kZSh0KSkgJiYgci5zcGVjaWZpZWQgPyByLnZhbHVlIDogbnVsbCB9KSwgc2UgfShDKTsgay5maW5kID0gaCwgay5leHByID0gaC5zZWxlY3RvcnMsIGsuZXhwcltcIjpcIl0gPSBrLmV4cHIucHNldWRvcywgay51bmlxdWVTb3J0ID0gay51bmlxdWUgPSBoLnVuaXF1ZVNvcnQsIGsudGV4dCA9IGguZ2V0VGV4dCwgay5pc1hNTERvYyA9IGguaXNYTUwsIGsuY29udGFpbnMgPSBoLmNvbnRhaW5zLCBrLmVzY2FwZVNlbGVjdG9yID0gaC5lc2NhcGU7IHZhciBUID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsgdmFyIHIgPSBbXSwgaSA9IHZvaWQgMCAhPT0gbjsgd2hpbGUgKChlID0gZVt0XSkgJiYgOSAhPT0gZS5ub2RlVHlwZSkgaWYgKDEgPT09IGUubm9kZVR5cGUpIHsgaWYgKGkgJiYgayhlKS5pcyhuKSkgYnJlYWs7IHIucHVzaChlKSB9IHJldHVybiByIH0sIFMgPSBmdW5jdGlvbiAoZSwgdCkgeyBmb3IgKHZhciBuID0gW107IGU7IGUgPSBlLm5leHRTaWJsaW5nKTEgPT09IGUubm9kZVR5cGUgJiYgZSAhPT0gdCAmJiBuLnB1c2goZSk7IHJldHVybiBuIH0sIE4gPSBrLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0OyBmdW5jdGlvbiBBKGUsIHQpIHsgcmV0dXJuIGUubm9kZU5hbWUgJiYgZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSB0LnRvTG93ZXJDYXNlKCkgfSB2YXIgRCA9IC9ePChbYS16XVteXFwvXFwwPjpcXHgyMFxcdFxcclxcblxcZl0qKVtcXHgyMFxcdFxcclxcblxcZl0qXFwvPz4oPzo8XFwvXFwxPnwpJC9pOyBmdW5jdGlvbiBqKGUsIG4sIHIpIHsgcmV0dXJuIG0obikgPyBrLmdyZXAoZSwgZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuICEhbi5jYWxsKGUsIHQsIGUpICE9PSByIH0pIDogbi5ub2RlVHlwZSA/IGsuZ3JlcChlLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSA9PT0gbiAhPT0gciB9KSA6IFwic3RyaW5nXCIgIT0gdHlwZW9mIG4gPyBrLmdyZXAoZSwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIC0xIDwgaS5jYWxsKG4sIGUpICE9PSByIH0pIDogay5maWx0ZXIobiwgZSwgcikgfSBrLmZpbHRlciA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciByID0gdFswXTsgcmV0dXJuIG4gJiYgKGUgPSBcIjpub3QoXCIgKyBlICsgXCIpXCIpLCAxID09PSB0Lmxlbmd0aCAmJiAxID09PSByLm5vZGVUeXBlID8gay5maW5kLm1hdGNoZXNTZWxlY3RvcihyLCBlKSA/IFtyXSA6IFtdIDogay5maW5kLm1hdGNoZXMoZSwgay5ncmVwKHQsIGZ1bmN0aW9uIChlKSB7IHJldHVybiAxID09PSBlLm5vZGVUeXBlIH0pKSB9LCBrLmZuLmV4dGVuZCh7IGZpbmQ6IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBuLCByID0gdGhpcy5sZW5ndGgsIGkgPSB0aGlzOyBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2YgZSkgcmV0dXJuIHRoaXMucHVzaFN0YWNrKGsoZSkuZmlsdGVyKGZ1bmN0aW9uICgpIHsgZm9yICh0ID0gMDsgdCA8IHI7IHQrKylpZiAoay5jb250YWlucyhpW3RdLCB0aGlzKSkgcmV0dXJuICEwIH0pKTsgZm9yIChuID0gdGhpcy5wdXNoU3RhY2soW10pLCB0ID0gMDsgdCA8IHI7IHQrKylrLmZpbmQoZSwgaVt0XSwgbik7IHJldHVybiAxIDwgciA/IGsudW5pcXVlU29ydChuKSA6IG4gfSwgZmlsdGVyOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy5wdXNoU3RhY2soaih0aGlzLCBlIHx8IFtdLCAhMSkpIH0sIG5vdDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRoaXMucHVzaFN0YWNrKGoodGhpcywgZSB8fCBbXSwgITApKSB9LCBpczogZnVuY3Rpb24gKGUpIHsgcmV0dXJuICEhaih0aGlzLCBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIE4udGVzdChlKSA/IGsoZSkgOiBlIHx8IFtdLCAhMSkubGVuZ3RoIH0gfSk7IHZhciBxLCBMID0gL14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKykpJC87IChrLmZuLmluaXQgPSBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciwgaTsgaWYgKCFlKSByZXR1cm4gdGhpczsgaWYgKG4gPSBuIHx8IHEsIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHsgaWYgKCEociA9IFwiPFwiID09PSBlWzBdICYmIFwiPlwiID09PSBlW2UubGVuZ3RoIC0gMV0gJiYgMyA8PSBlLmxlbmd0aCA/IFtudWxsLCBlLCBudWxsXSA6IEwuZXhlYyhlKSkgfHwgIXJbMV0gJiYgdCkgcmV0dXJuICF0IHx8IHQuanF1ZXJ5ID8gKHQgfHwgbikuZmluZChlKSA6IHRoaXMuY29uc3RydWN0b3IodCkuZmluZChlKTsgaWYgKHJbMV0pIHsgaWYgKHQgPSB0IGluc3RhbmNlb2YgayA/IHRbMF0gOiB0LCBrLm1lcmdlKHRoaXMsIGsucGFyc2VIVE1MKHJbMV0sIHQgJiYgdC5ub2RlVHlwZSA/IHQub3duZXJEb2N1bWVudCB8fCB0IDogRSwgITApKSwgRC50ZXN0KHJbMV0pICYmIGsuaXNQbGFpbk9iamVjdCh0KSkgZm9yIChyIGluIHQpIG0odGhpc1tyXSkgPyB0aGlzW3JdKHRbcl0pIDogdGhpcy5hdHRyKHIsIHRbcl0pOyByZXR1cm4gdGhpcyB9IHJldHVybiAoaSA9IEUuZ2V0RWxlbWVudEJ5SWQoclsyXSkpICYmICh0aGlzWzBdID0gaSwgdGhpcy5sZW5ndGggPSAxKSwgdGhpcyB9IHJldHVybiBlLm5vZGVUeXBlID8gKHRoaXNbMF0gPSBlLCB0aGlzLmxlbmd0aCA9IDEsIHRoaXMpIDogbShlKSA/IHZvaWQgMCAhPT0gbi5yZWFkeSA/IG4ucmVhZHkoZSkgOiBlKGspIDogay5tYWtlQXJyYXkoZSwgdGhpcykgfSkucHJvdG90eXBlID0gay5mbiwgcSA9IGsoRSk7IHZhciBIID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sIE8gPSB7IGNoaWxkcmVuOiAhMCwgY29udGVudHM6ICEwLCBuZXh0OiAhMCwgcHJldjogITAgfTsgZnVuY3Rpb24gUChlLCB0KSB7IHdoaWxlICgoZSA9IGVbdF0pICYmIDEgIT09IGUubm9kZVR5cGUpOyByZXR1cm4gZSB9IGsuZm4uZXh0ZW5kKHsgaGFzOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGsoZSwgdGhpcyksIG4gPSB0Lmxlbmd0aDsgcmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uICgpIHsgZm9yICh2YXIgZSA9IDA7IGUgPCBuOyBlKyspaWYgKGsuY29udGFpbnModGhpcywgdFtlXSkpIHJldHVybiAhMCB9KSB9LCBjbG9zZXN0OiBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiwgciA9IDAsIGkgPSB0aGlzLmxlbmd0aCwgbyA9IFtdLCBhID0gXCJzdHJpbmdcIiAhPSB0eXBlb2YgZSAmJiBrKGUpOyBpZiAoIU4udGVzdChlKSkgZm9yICg7IHIgPCBpOyByKyspZm9yIChuID0gdGhpc1tyXTsgbiAmJiBuICE9PSB0OyBuID0gbi5wYXJlbnROb2RlKWlmIChuLm5vZGVUeXBlIDwgMTEgJiYgKGEgPyAtMSA8IGEuaW5kZXgobikgOiAxID09PSBuLm5vZGVUeXBlICYmIGsuZmluZC5tYXRjaGVzU2VsZWN0b3IobiwgZSkpKSB7IG8ucHVzaChuKTsgYnJlYWsgfSByZXR1cm4gdGhpcy5wdXNoU3RhY2soMSA8IG8ubGVuZ3RoID8gay51bmlxdWVTb3J0KG8pIDogbykgfSwgaW5kZXg6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlID8gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IGkuY2FsbChrKGUpLCB0aGlzWzBdKSA6IGkuY2FsbCh0aGlzLCBlLmpxdWVyeSA/IGVbMF0gOiBlKSA6IHRoaXNbMF0gJiYgdGhpc1swXS5wYXJlbnROb2RlID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMSB9LCBhZGQ6IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiB0aGlzLnB1c2hTdGFjayhrLnVuaXF1ZVNvcnQoay5tZXJnZSh0aGlzLmdldCgpLCBrKGUsIHQpKSkpIH0sIGFkZEJhY2s6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLmFkZChudWxsID09IGUgPyB0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKSB9IH0pLCBrLmVhY2goeyBwYXJlbnQ6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gZS5wYXJlbnROb2RlOyByZXR1cm4gdCAmJiAxMSAhPT0gdC5ub2RlVHlwZSA/IHQgOiBudWxsIH0sIHBhcmVudHM6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBUKGUsIFwicGFyZW50Tm9kZVwiKSB9LCBwYXJlbnRzVW50aWw6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiBUKGUsIFwicGFyZW50Tm9kZVwiLCBuKSB9LCBuZXh0OiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gUChlLCBcIm5leHRTaWJsaW5nXCIpIH0sIHByZXY6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBQKGUsIFwicHJldmlvdXNTaWJsaW5nXCIpIH0sIG5leHRBbGw6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBUKGUsIFwibmV4dFNpYmxpbmdcIikgfSwgcHJldkFsbDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIFQoZSwgXCJwcmV2aW91c1NpYmxpbmdcIikgfSwgbmV4dFVudGlsOiBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gVChlLCBcIm5leHRTaWJsaW5nXCIsIG4pIH0sIHByZXZVbnRpbDogZnVuY3Rpb24gKGUsIHQsIG4pIHsgcmV0dXJuIFQoZSwgXCJwcmV2aW91c1NpYmxpbmdcIiwgbikgfSwgc2libGluZ3M6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBTKChlLnBhcmVudE5vZGUgfHwge30pLmZpcnN0Q2hpbGQsIGUpIH0sIGNoaWxkcmVuOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gUyhlLmZpcnN0Q2hpbGQpIH0sIGNvbnRlbnRzOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZS5jb250ZW50RG9jdW1lbnQgPyBlLmNvbnRlbnREb2N1bWVudCA6IChBKGUsIFwidGVtcGxhdGVcIikgJiYgKGUgPSBlLmNvbnRlbnQgfHwgZSksIGsubWVyZ2UoW10sIGUuY2hpbGROb2RlcykpIH0gfSwgZnVuY3Rpb24gKHIsIGkpIHsgay5mbltyXSA9IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gay5tYXAodGhpcywgaSwgZSk7IHJldHVybiBcIlVudGlsXCIgIT09IHIuc2xpY2UoLTUpICYmICh0ID0gZSksIHQgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCAmJiAobiA9IGsuZmlsdGVyKHQsIG4pKSwgMSA8IHRoaXMubGVuZ3RoICYmIChPW3JdIHx8IGsudW5pcXVlU29ydChuKSwgSC50ZXN0KHIpICYmIG4ucmV2ZXJzZSgpKSwgdGhpcy5wdXNoU3RhY2sobikgfSB9KTsgdmFyIFIgPSAvW15cXHgyMFxcdFxcclxcblxcZl0rL2c7IGZ1bmN0aW9uIE0oZSkgeyByZXR1cm4gZSB9IGZ1bmN0aW9uIEkoZSkgeyB0aHJvdyBlIH0gZnVuY3Rpb24gVyhlLCB0LCBuLCByKSB7IHZhciBpOyB0cnkgeyBlICYmIG0oaSA9IGUucHJvbWlzZSkgPyBpLmNhbGwoZSkuZG9uZSh0KS5mYWlsKG4pIDogZSAmJiBtKGkgPSBlLnRoZW4pID8gaS5jYWxsKGUsIHQsIG4pIDogdC5hcHBseSh2b2lkIDAsIFtlXS5zbGljZShyKSkgfSBjYXRjaCAoZSkgeyBuLmFwcGx5KHZvaWQgMCwgW2VdKSB9IH0gay5DYWxsYmFja3MgPSBmdW5jdGlvbiAocikgeyB2YXIgZSwgbjsgciA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHIgPyAoZSA9IHIsIG4gPSB7fSwgay5lYWNoKGUubWF0Y2goUikgfHwgW10sIGZ1bmN0aW9uIChlLCB0KSB7IG5bdF0gPSAhMCB9KSwgbikgOiBrLmV4dGVuZCh7fSwgcik7IHZhciBpLCB0LCBvLCBhLCBzID0gW10sIHUgPSBbXSwgbCA9IC0xLCBjID0gZnVuY3Rpb24gKCkgeyBmb3IgKGEgPSBhIHx8IHIub25jZSwgbyA9IGkgPSAhMDsgdS5sZW5ndGg7IGwgPSAtMSkgeyB0ID0gdS5zaGlmdCgpOyB3aGlsZSAoKytsIDwgcy5sZW5ndGgpICExID09PSBzW2xdLmFwcGx5KHRbMF0sIHRbMV0pICYmIHIuc3RvcE9uRmFsc2UgJiYgKGwgPSBzLmxlbmd0aCwgdCA9ICExKSB9IHIubWVtb3J5IHx8ICh0ID0gITEpLCBpID0gITEsIGEgJiYgKHMgPSB0ID8gW10gOiBcIlwiKSB9LCBmID0geyBhZGQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHMgJiYgKHQgJiYgIWkgJiYgKGwgPSBzLmxlbmd0aCAtIDEsIHUucHVzaCh0KSksIGZ1bmN0aW9uIG4oZSkgeyBrLmVhY2goZSwgZnVuY3Rpb24gKGUsIHQpIHsgbSh0KSA/IHIudW5pcXVlICYmIGYuaGFzKHQpIHx8IHMucHVzaCh0KSA6IHQgJiYgdC5sZW5ndGggJiYgXCJzdHJpbmdcIiAhPT0gdyh0KSAmJiBuKHQpIH0pIH0oYXJndW1lbnRzKSwgdCAmJiAhaSAmJiBjKCkpLCB0aGlzIH0sIHJlbW92ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gay5lYWNoKGFyZ3VtZW50cywgZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG47IHdoaWxlICgtMSA8IChuID0gay5pbkFycmF5KHQsIHMsIG4pKSkgcy5zcGxpY2UobiwgMSksIG4gPD0gbCAmJiBsLS0gfSksIHRoaXMgfSwgaGFzOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSA/IC0xIDwgay5pbkFycmF5KGUsIHMpIDogMCA8IHMubGVuZ3RoIH0sIGVtcHR5OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzICYmIChzID0gW10pLCB0aGlzIH0sIGRpc2FibGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGEgPSB1ID0gW10sIHMgPSB0ID0gXCJcIiwgdGhpcyB9LCBkaXNhYmxlZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gIXMgfSwgbG9jazogZnVuY3Rpb24gKCkgeyByZXR1cm4gYSA9IHUgPSBbXSwgdCB8fCBpIHx8IChzID0gdCA9IFwiXCIpLCB0aGlzIH0sIGxvY2tlZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gISFhIH0sIGZpcmVXaXRoOiBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gYSB8fCAodCA9IFtlLCAodCA9IHQgfHwgW10pLnNsaWNlID8gdC5zbGljZSgpIDogdF0sIHUucHVzaCh0KSwgaSB8fCBjKCkpLCB0aGlzIH0sIGZpcmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGYuZmlyZVdpdGgodGhpcywgYXJndW1lbnRzKSwgdGhpcyB9LCBmaXJlZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gISFvIH0gfTsgcmV0dXJuIGYgfSwgay5leHRlbmQoeyBEZWZlcnJlZDogZnVuY3Rpb24gKGUpIHsgdmFyIG8gPSBbW1wibm90aWZ5XCIsIFwicHJvZ3Jlc3NcIiwgay5DYWxsYmFja3MoXCJtZW1vcnlcIiksIGsuQ2FsbGJhY2tzKFwibWVtb3J5XCIpLCAyXSwgW1wicmVzb2x2ZVwiLCBcImRvbmVcIiwgay5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgay5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgMCwgXCJyZXNvbHZlZFwiXSwgW1wicmVqZWN0XCIsIFwiZmFpbFwiLCBrLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLCBrLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLCAxLCBcInJlamVjdGVkXCJdXSwgaSA9IFwicGVuZGluZ1wiLCBhID0geyBzdGF0ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gaSB9LCBhbHdheXM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHMuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSwgdGhpcyB9LCBcImNhdGNoXCI6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBhLnRoZW4obnVsbCwgZSkgfSwgcGlwZTogZnVuY3Rpb24gKCkgeyB2YXIgaSA9IGFyZ3VtZW50czsgcmV0dXJuIGsuRGVmZXJyZWQoZnVuY3Rpb24gKHIpIHsgay5lYWNoKG8sIGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gbShpW3RbNF1dKSAmJiBpW3RbNF1dOyBzW3RbMV1dKGZ1bmN0aW9uICgpIHsgdmFyIGUgPSBuICYmIG4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsgZSAmJiBtKGUucHJvbWlzZSkgPyBlLnByb21pc2UoKS5wcm9ncmVzcyhyLm5vdGlmeSkuZG9uZShyLnJlc29sdmUpLmZhaWwoci5yZWplY3QpIDogclt0WzBdICsgXCJXaXRoXCJdKHRoaXMsIG4gPyBbZV0gOiBhcmd1bWVudHMpIH0pIH0pLCBpID0gbnVsbCB9KS5wcm9taXNlKCkgfSwgdGhlbjogZnVuY3Rpb24gKHQsIG4sIHIpIHsgdmFyIHUgPSAwOyBmdW5jdGlvbiBsKGksIG8sIGEsIHMpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIG4gPSB0aGlzLCByID0gYXJndW1lbnRzLCBlID0gZnVuY3Rpb24gKCkgeyB2YXIgZSwgdDsgaWYgKCEoaSA8IHUpKSB7IGlmICgoZSA9IGEuYXBwbHkobiwgcikpID09PSBvLnByb21pc2UoKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvblwiKTsgdCA9IGUgJiYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgfHwgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlKSAmJiBlLnRoZW4sIG0odCkgPyBzID8gdC5jYWxsKGUsIGwodSwgbywgTSwgcyksIGwodSwgbywgSSwgcykpIDogKHUrKyAsIHQuY2FsbChlLCBsKHUsIG8sIE0sIHMpLCBsKHUsIG8sIEksIHMpLCBsKHUsIG8sIE0sIG8ubm90aWZ5V2l0aCkpKSA6IChhICE9PSBNICYmIChuID0gdm9pZCAwLCByID0gW2VdKSwgKHMgfHwgby5yZXNvbHZlV2l0aCkobiwgcikpIH0gfSwgdCA9IHMgPyBlIDogZnVuY3Rpb24gKCkgeyB0cnkgeyBlKCkgfSBjYXRjaCAoZSkgeyBrLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2sgJiYgay5EZWZlcnJlZC5leGNlcHRpb25Ib29rKGUsIHQuc3RhY2tUcmFjZSksIHUgPD0gaSArIDEgJiYgKGEgIT09IEkgJiYgKG4gPSB2b2lkIDAsIHIgPSBbZV0pLCBvLnJlamVjdFdpdGgobiwgcikpIH0gfTsgaSA/IHQoKSA6IChrLkRlZmVycmVkLmdldFN0YWNrSG9vayAmJiAodC5zdGFja1RyYWNlID0gay5EZWZlcnJlZC5nZXRTdGFja0hvb2soKSksIEMuc2V0VGltZW91dCh0KSkgfSB9IHJldHVybiBrLkRlZmVycmVkKGZ1bmN0aW9uIChlKSB7IG9bMF1bM10uYWRkKGwoMCwgZSwgbShyKSA/IHIgOiBNLCBlLm5vdGlmeVdpdGgpKSwgb1sxXVszXS5hZGQobCgwLCBlLCBtKHQpID8gdCA6IE0pKSwgb1syXVszXS5hZGQobCgwLCBlLCBtKG4pID8gbiA6IEkpKSB9KS5wcm9taXNlKCkgfSwgcHJvbWlzZTogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG51bGwgIT0gZSA/IGsuZXh0ZW5kKGUsIGEpIDogYSB9IH0sIHMgPSB7fTsgcmV0dXJuIGsuZWFjaChvLCBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IHRbMl0sIHIgPSB0WzVdOyBhW3RbMV1dID0gbi5hZGQsIHIgJiYgbi5hZGQoZnVuY3Rpb24gKCkgeyBpID0gciB9LCBvWzMgLSBlXVsyXS5kaXNhYmxlLCBvWzMgLSBlXVszXS5kaXNhYmxlLCBvWzBdWzJdLmxvY2ssIG9bMF1bM10ubG9jayksIG4uYWRkKHRbM10uZmlyZSksIHNbdFswXV0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzW3RbMF0gKyBcIldpdGhcIl0odGhpcyA9PT0gcyA/IHZvaWQgMCA6IHRoaXMsIGFyZ3VtZW50cyksIHRoaXMgfSwgc1t0WzBdICsgXCJXaXRoXCJdID0gbi5maXJlV2l0aCB9KSwgYS5wcm9taXNlKHMpLCBlICYmIGUuY2FsbChzLCBzKSwgcyB9LCB3aGVuOiBmdW5jdGlvbiAoZSkgeyB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHQgPSBuLCByID0gQXJyYXkodCksIGkgPSBzLmNhbGwoYXJndW1lbnRzKSwgbyA9IGsuRGVmZXJyZWQoKSwgYSA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBmdW5jdGlvbiAoZSkgeyByW3RdID0gdGhpcywgaVt0XSA9IDEgPCBhcmd1bWVudHMubGVuZ3RoID8gcy5jYWxsKGFyZ3VtZW50cykgOiBlLCAtLW4gfHwgby5yZXNvbHZlV2l0aChyLCBpKSB9IH07IGlmIChuIDw9IDEgJiYgKFcoZSwgby5kb25lKGEodCkpLnJlc29sdmUsIG8ucmVqZWN0LCAhbiksIFwicGVuZGluZ1wiID09PSBvLnN0YXRlKCkgfHwgbShpW3RdICYmIGlbdF0udGhlbikpKSByZXR1cm4gby50aGVuKCk7IHdoaWxlICh0LS0pIFcoaVt0XSwgYSh0KSwgby5yZWplY3QpOyByZXR1cm4gby5wcm9taXNlKCkgfSB9KTsgdmFyICQgPSAvXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLzsgay5EZWZlcnJlZC5leGNlcHRpb25Ib29rID0gZnVuY3Rpb24gKGUsIHQpIHsgQy5jb25zb2xlICYmIEMuY29uc29sZS53YXJuICYmIGUgJiYgJC50ZXN0KGUubmFtZSkgJiYgQy5jb25zb2xlLndhcm4oXCJqUXVlcnkuRGVmZXJyZWQgZXhjZXB0aW9uOiBcIiArIGUubWVzc2FnZSwgZS5zdGFjaywgdCkgfSwgay5yZWFkeUV4Y2VwdGlvbiA9IGZ1bmN0aW9uIChlKSB7IEMuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHRocm93IGUgfSkgfTsgdmFyIEYgPSBrLkRlZmVycmVkKCk7IGZ1bmN0aW9uIEIoKSB7IEUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgQiksIEMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgQiksIGsucmVhZHkoKSB9IGsuZm4ucmVhZHkgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gRi50aGVuKGUpW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGUpIHsgay5yZWFkeUV4Y2VwdGlvbihlKSB9KSwgdGhpcyB9LCBrLmV4dGVuZCh7IGlzUmVhZHk6ICExLCByZWFkeVdhaXQ6IDEsIHJlYWR5OiBmdW5jdGlvbiAoZSkgeyAoITAgPT09IGUgPyAtLWsucmVhZHlXYWl0IDogay5pc1JlYWR5KSB8fCAoay5pc1JlYWR5ID0gITApICE9PSBlICYmIDAgPCAtLWsucmVhZHlXYWl0IHx8IEYucmVzb2x2ZVdpdGgoRSwgW2tdKSB9IH0pLCBrLnJlYWR5LnRoZW4gPSBGLnRoZW4sIFwiY29tcGxldGVcIiA9PT0gRS5yZWFkeVN0YXRlIHx8IFwibG9hZGluZ1wiICE9PSBFLnJlYWR5U3RhdGUgJiYgIUUuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsID8gQy5zZXRUaW1lb3V0KGsucmVhZHkpIDogKEUuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgQiksIEMuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgQikpOyB2YXIgXyA9IGZ1bmN0aW9uIChlLCB0LCBuLCByLCBpLCBvLCBhKSB7IHZhciBzID0gMCwgdSA9IGUubGVuZ3RoLCBsID0gbnVsbCA9PSBuOyBpZiAoXCJvYmplY3RcIiA9PT0gdyhuKSkgZm9yIChzIGluIGkgPSAhMCwgbikgXyhlLCB0LCBzLCBuW3NdLCAhMCwgbywgYSk7IGVsc2UgaWYgKHZvaWQgMCAhPT0gciAmJiAoaSA9ICEwLCBtKHIpIHx8IChhID0gITApLCBsICYmIChhID8gKHQuY2FsbChlLCByKSwgdCA9IG51bGwpIDogKGwgPSB0LCB0ID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsgcmV0dXJuIGwuY2FsbChrKGUpLCBuKSB9KSksIHQpKSBmb3IgKDsgcyA8IHU7IHMrKyl0KGVbc10sIG4sIGEgPyByIDogci5jYWxsKGVbc10sIHMsIHQoZVtzXSwgbikpKTsgcmV0dXJuIGkgPyBlIDogbCA/IHQuY2FsbChlKSA6IHUgPyB0KGVbMF0sIG4pIDogbyB9LCB6ID0gL14tbXMtLywgVSA9IC8tKFthLXpdKS9nOyBmdW5jdGlvbiBYKGUsIHQpIHsgcmV0dXJuIHQudG9VcHBlckNhc2UoKSB9IGZ1bmN0aW9uIFYoZSkgeyByZXR1cm4gZS5yZXBsYWNlKHosIFwibXMtXCIpLnJlcGxhY2UoVSwgWCkgfSB2YXIgRyA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiAxID09PSBlLm5vZGVUeXBlIHx8IDkgPT09IGUubm9kZVR5cGUgfHwgIStlLm5vZGVUeXBlIH07IGZ1bmN0aW9uIFkoKSB7IHRoaXMuZXhwYW5kbyA9IGsuZXhwYW5kbyArIFkudWlkKysgfSBZLnVpZCA9IDEsIFkucHJvdG90eXBlID0geyBjYWNoZTogZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBlW3RoaXMuZXhwYW5kb107IHJldHVybiB0IHx8ICh0ID0ge30sIEcoZSkgJiYgKGUubm9kZVR5cGUgPyBlW3RoaXMuZXhwYW5kb10gPSB0IDogT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHRoaXMuZXhwYW5kbywgeyB2YWx1ZTogdCwgY29uZmlndXJhYmxlOiAhMCB9KSkpLCB0IH0sIHNldDogZnVuY3Rpb24gKGUsIHQsIG4pIHsgdmFyIHIsIGkgPSB0aGlzLmNhY2hlKGUpOyBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgaVtWKHQpXSA9IG47IGVsc2UgZm9yIChyIGluIHQpIGlbVihyKV0gPSB0W3JdOyByZXR1cm4gaSB9LCBnZXQ6IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiB2b2lkIDAgPT09IHQgPyB0aGlzLmNhY2hlKGUpIDogZVt0aGlzLmV4cGFuZG9dICYmIGVbdGhpcy5leHBhbmRvXVtWKHQpXSB9LCBhY2Nlc3M6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiB2b2lkIDAgPT09IHQgfHwgdCAmJiBcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmIHZvaWQgMCA9PT0gbiA/IHRoaXMuZ2V0KGUsIHQpIDogKHRoaXMuc2V0KGUsIHQsIG4pLCB2b2lkIDAgIT09IG4gPyBuIDogdCkgfSwgcmVtb3ZlOiBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiwgciA9IGVbdGhpcy5leHBhbmRvXTsgaWYgKHZvaWQgMCAhPT0gcikgeyBpZiAodm9pZCAwICE9PSB0KSB7IG4gPSAodCA9IEFycmF5LmlzQXJyYXkodCkgPyB0Lm1hcChWKSA6ICh0ID0gVih0KSkgaW4gciA/IFt0XSA6IHQubWF0Y2goUikgfHwgW10pLmxlbmd0aDsgd2hpbGUgKG4tLSkgZGVsZXRlIHJbdFtuXV0gfSAodm9pZCAwID09PSB0IHx8IGsuaXNFbXB0eU9iamVjdChyKSkgJiYgKGUubm9kZVR5cGUgPyBlW3RoaXMuZXhwYW5kb10gPSB2b2lkIDAgOiBkZWxldGUgZVt0aGlzLmV4cGFuZG9dKSB9IH0sIGhhc0RhdGE6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gZVt0aGlzLmV4cGFuZG9dOyByZXR1cm4gdm9pZCAwICE9PSB0ICYmICFrLmlzRW1wdHlPYmplY3QodCkgfSB9OyB2YXIgUSA9IG5ldyBZLCBKID0gbmV3IFksIEsgPSAvXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sIFogPSAvW0EtWl0vZzsgZnVuY3Rpb24gZWUoZSwgdCwgbikgeyB2YXIgciwgaTsgaWYgKHZvaWQgMCA9PT0gbiAmJiAxID09PSBlLm5vZGVUeXBlKSBpZiAociA9IFwiZGF0YS1cIiArIHQucmVwbGFjZShaLCBcIi0kJlwiKS50b0xvd2VyQ2FzZSgpLCBcInN0cmluZ1wiID09IHR5cGVvZiAobiA9IGUuZ2V0QXR0cmlidXRlKHIpKSkgeyB0cnkgeyBuID0gXCJ0cnVlXCIgPT09IChpID0gbikgfHwgXCJmYWxzZVwiICE9PSBpICYmIChcIm51bGxcIiA9PT0gaSA/IG51bGwgOiBpID09PSAraSArIFwiXCIgPyAraSA6IEsudGVzdChpKSA/IEpTT04ucGFyc2UoaSkgOiBpKSB9IGNhdGNoIChlKSB7IH0gSi5zZXQoZSwgdCwgbikgfSBlbHNlIG4gPSB2b2lkIDA7IHJldHVybiBuIH0gay5leHRlbmQoeyBoYXNEYXRhOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gSi5oYXNEYXRhKGUpIHx8IFEuaGFzRGF0YShlKSB9LCBkYXRhOiBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gSi5hY2Nlc3MoZSwgdCwgbikgfSwgcmVtb3ZlRGF0YTogZnVuY3Rpb24gKGUsIHQpIHsgSi5yZW1vdmUoZSwgdCkgfSwgX2RhdGE6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiBRLmFjY2VzcyhlLCB0LCBuKSB9LCBfcmVtb3ZlRGF0YTogZnVuY3Rpb24gKGUsIHQpIHsgUS5yZW1vdmUoZSwgdCkgfSB9KSwgay5mbi5leHRlbmQoeyBkYXRhOiBmdW5jdGlvbiAobiwgZSkgeyB2YXIgdCwgciwgaSwgbyA9IHRoaXNbMF0sIGEgPSBvICYmIG8uYXR0cmlidXRlczsgaWYgKHZvaWQgMCA9PT0gbikgeyBpZiAodGhpcy5sZW5ndGggJiYgKGkgPSBKLmdldChvKSwgMSA9PT0gby5ub2RlVHlwZSAmJiAhUS5nZXQobywgXCJoYXNEYXRhQXR0cnNcIikpKSB7IHQgPSBhLmxlbmd0aDsgd2hpbGUgKHQtLSkgYVt0XSAmJiAwID09PSAociA9IGFbdF0ubmFtZSkuaW5kZXhPZihcImRhdGEtXCIpICYmIChyID0gVihyLnNsaWNlKDUpKSwgZWUobywgciwgaVtyXSkpOyBRLnNldChvLCBcImhhc0RhdGFBdHRyc1wiLCAhMCkgfSByZXR1cm4gaSB9IHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiBuID8gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsgSi5zZXQodGhpcywgbikgfSkgOiBfKHRoaXMsIGZ1bmN0aW9uIChlKSB7IHZhciB0OyBpZiAobyAmJiB2b2lkIDAgPT09IGUpIHJldHVybiB2b2lkIDAgIT09ICh0ID0gSi5nZXQobywgbikpID8gdCA6IHZvaWQgMCAhPT0gKHQgPSBlZShvLCBuKSkgPyB0IDogdm9pZCAwOyB0aGlzLmVhY2goZnVuY3Rpb24gKCkgeyBKLnNldCh0aGlzLCBuLCBlKSB9KSB9LCBudWxsLCBlLCAxIDwgYXJndW1lbnRzLmxlbmd0aCwgbnVsbCwgITApIH0sIHJlbW92ZURhdGE6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgeyBKLnJlbW92ZSh0aGlzLCBlKSB9KSB9IH0pLCBrLmV4dGVuZCh7IHF1ZXVlOiBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgcjsgaWYgKGUpIHJldHVybiB0ID0gKHQgfHwgXCJmeFwiKSArIFwicXVldWVcIiwgciA9IFEuZ2V0KGUsIHQpLCBuICYmICghciB8fCBBcnJheS5pc0FycmF5KG4pID8gciA9IFEuYWNjZXNzKGUsIHQsIGsubWFrZUFycmF5KG4pKSA6IHIucHVzaChuKSksIHIgfHwgW10gfSwgZGVxdWV1ZTogZnVuY3Rpb24gKGUsIHQpIHsgdCA9IHQgfHwgXCJmeFwiOyB2YXIgbiA9IGsucXVldWUoZSwgdCksIHIgPSBuLmxlbmd0aCwgaSA9IG4uc2hpZnQoKSwgbyA9IGsuX3F1ZXVlSG9va3MoZSwgdCk7IFwiaW5wcm9ncmVzc1wiID09PSBpICYmIChpID0gbi5zaGlmdCgpLCByLS0pLCBpICYmIChcImZ4XCIgPT09IHQgJiYgbi51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSwgZGVsZXRlIG8uc3RvcCwgaS5jYWxsKGUsIGZ1bmN0aW9uICgpIHsgay5kZXF1ZXVlKGUsIHQpIH0sIG8pKSwgIXIgJiYgbyAmJiBvLmVtcHR5LmZpcmUoKSB9LCBfcXVldWVIb29rczogZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4gPSB0ICsgXCJxdWV1ZUhvb2tzXCI7IHJldHVybiBRLmdldChlLCBuKSB8fCBRLmFjY2VzcyhlLCBuLCB7IGVtcHR5OiBrLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbiAoKSB7IFEucmVtb3ZlKGUsIFt0ICsgXCJxdWV1ZVwiLCBuXSkgfSkgfSkgfSB9KSwgay5mbi5leHRlbmQoeyBxdWV1ZTogZnVuY3Rpb24gKHQsIG4pIHsgdmFyIGUgPSAyOyByZXR1cm4gXCJzdHJpbmdcIiAhPSB0eXBlb2YgdCAmJiAobiA9IHQsIHQgPSBcImZ4XCIsIGUtLSksIGFyZ3VtZW50cy5sZW5ndGggPCBlID8gay5xdWV1ZSh0aGlzWzBdLCB0KSA6IHZvaWQgMCA9PT0gbiA/IHRoaXMgOiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgeyB2YXIgZSA9IGsucXVldWUodGhpcywgdCwgbik7IGsuX3F1ZXVlSG9va3ModGhpcywgdCksIFwiZnhcIiA9PT0gdCAmJiBcImlucHJvZ3Jlc3NcIiAhPT0gZVswXSAmJiBrLmRlcXVldWUodGhpcywgdCkgfSkgfSwgZGVxdWV1ZTogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IGsuZGVxdWV1ZSh0aGlzLCBlKSB9KSB9LCBjbGVhclF1ZXVlOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy5xdWV1ZShlIHx8IFwiZnhcIiwgW10pIH0sIHByb21pc2U6IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuLCByID0gMSwgaSA9IGsuRGVmZXJyZWQoKSwgbyA9IHRoaXMsIGEgPSB0aGlzLmxlbmd0aCwgcyA9IGZ1bmN0aW9uICgpIHsgLS1yIHx8IGkucmVzb2x2ZVdpdGgobywgW29dKSB9OyBcInN0cmluZ1wiICE9IHR5cGVvZiBlICYmICh0ID0gZSwgZSA9IHZvaWQgMCksIGUgPSBlIHx8IFwiZnhcIjsgd2hpbGUgKGEtLSkgKG4gPSBRLmdldChvW2FdLCBlICsgXCJxdWV1ZUhvb2tzXCIpKSAmJiBuLmVtcHR5ICYmIChyKysgLCBuLmVtcHR5LmFkZChzKSk7IHJldHVybiBzKCksIGkucHJvbWlzZSh0KSB9IH0pOyB2YXIgdGUgPSAvWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLy5zb3VyY2UsIG5lID0gbmV3IFJlZ0V4cChcIl4oPzooWystXSk9fCkoXCIgKyB0ZSArIFwiKShbYS16JV0qKSRcIiwgXCJpXCIpLCByZSA9IFtcIlRvcFwiLCBcIlJpZ2h0XCIsIFwiQm90dG9tXCIsIFwiTGVmdFwiXSwgaWUgPSBFLmRvY3VtZW50RWxlbWVudCwgb2UgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gay5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsIGUpIH0sIGFlID0geyBjb21wb3NlZDogITAgfTsgaWUuZ2V0Um9vdE5vZGUgJiYgKG9lID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGsuY29udGFpbnMoZS5vd25lckRvY3VtZW50LCBlKSB8fCBlLmdldFJvb3ROb2RlKGFlKSA9PT0gZS5vd25lckRvY3VtZW50IH0pOyB2YXIgc2UgPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gXCJub25lXCIgPT09IChlID0gdCB8fCBlKS5zdHlsZS5kaXNwbGF5IHx8IFwiXCIgPT09IGUuc3R5bGUuZGlzcGxheSAmJiBvZShlKSAmJiBcIm5vbmVcIiA9PT0gay5jc3MoZSwgXCJkaXNwbGF5XCIpIH0sIHVlID0gZnVuY3Rpb24gKGUsIHQsIG4sIHIpIHsgdmFyIGksIG8sIGEgPSB7fTsgZm9yIChvIGluIHQpIGFbb10gPSBlLnN0eWxlW29dLCBlLnN0eWxlW29dID0gdFtvXTsgZm9yIChvIGluIGkgPSBuLmFwcGx5KGUsIHIgfHwgW10pLCB0KSBlLnN0eWxlW29dID0gYVtvXTsgcmV0dXJuIGkgfTsgZnVuY3Rpb24gbGUoZSwgdCwgbiwgcikgeyB2YXIgaSwgbywgYSA9IDIwLCBzID0gciA/IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHIuY3VyKCkgfSA6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGsuY3NzKGUsIHQsIFwiXCIpIH0sIHUgPSBzKCksIGwgPSBuICYmIG5bM10gfHwgKGsuY3NzTnVtYmVyW3RdID8gXCJcIiA6IFwicHhcIiksIGMgPSBlLm5vZGVUeXBlICYmIChrLmNzc051bWJlclt0XSB8fCBcInB4XCIgIT09IGwgJiYgK3UpICYmIG5lLmV4ZWMoay5jc3MoZSwgdCkpOyBpZiAoYyAmJiBjWzNdICE9PSBsKSB7IHUgLz0gMiwgbCA9IGwgfHwgY1szXSwgYyA9ICt1IHx8IDE7IHdoaWxlIChhLS0pIGsuc3R5bGUoZSwgdCwgYyArIGwpLCAoMSAtIG8pICogKDEgLSAobyA9IHMoKSAvIHUgfHwgLjUpKSA8PSAwICYmIChhID0gMCksIGMgLz0gbzsgYyAqPSAyLCBrLnN0eWxlKGUsIHQsIGMgKyBsKSwgbiA9IG4gfHwgW10gfSByZXR1cm4gbiAmJiAoYyA9ICtjIHx8ICt1IHx8IDAsIGkgPSBuWzFdID8gYyArIChuWzFdICsgMSkgKiBuWzJdIDogK25bMl0sIHIgJiYgKHIudW5pdCA9IGwsIHIuc3RhcnQgPSBjLCByLmVuZCA9IGkpKSwgaSB9IHZhciBjZSA9IHt9OyBmdW5jdGlvbiBmZShlLCB0KSB7IGZvciAodmFyIG4sIHIsIGksIG8sIGEsIHMsIHUsIGwgPSBbXSwgYyA9IDAsIGYgPSBlLmxlbmd0aDsgYyA8IGY7IGMrKykociA9IGVbY10pLnN0eWxlICYmIChuID0gci5zdHlsZS5kaXNwbGF5LCB0ID8gKFwibm9uZVwiID09PSBuICYmIChsW2NdID0gUS5nZXQociwgXCJkaXNwbGF5XCIpIHx8IG51bGwsIGxbY10gfHwgKHIuc3R5bGUuZGlzcGxheSA9IFwiXCIpKSwgXCJcIiA9PT0gci5zdHlsZS5kaXNwbGF5ICYmIHNlKHIpICYmIChsW2NdID0gKHUgPSBhID0gbyA9IHZvaWQgMCwgYSA9IChpID0gcikub3duZXJEb2N1bWVudCwgcyA9IGkubm9kZU5hbWUsICh1ID0gY2Vbc10pIHx8IChvID0gYS5ib2R5LmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudChzKSksIHUgPSBrLmNzcyhvLCBcImRpc3BsYXlcIiksIG8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvKSwgXCJub25lXCIgPT09IHUgJiYgKHUgPSBcImJsb2NrXCIpLCBjZVtzXSA9IHUpKSkpIDogXCJub25lXCIgIT09IG4gJiYgKGxbY10gPSBcIm5vbmVcIiwgUS5zZXQociwgXCJkaXNwbGF5XCIsIG4pKSk7IGZvciAoYyA9IDA7IGMgPCBmOyBjKyspbnVsbCAhPSBsW2NdICYmIChlW2NdLnN0eWxlLmRpc3BsYXkgPSBsW2NdKTsgcmV0dXJuIGUgfSBrLmZuLmV4dGVuZCh7IHNob3c6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZlKHRoaXMsICEwKSB9LCBoaWRlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBmZSh0aGlzKSB9LCB0b2dnbGU6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBcImJvb2xlYW5cIiA9PSB0eXBlb2YgZSA/IGUgPyB0aGlzLnNob3coKSA6IHRoaXMuaGlkZSgpIDogdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsgc2UodGhpcykgPyBrKHRoaXMpLnNob3coKSA6IGsodGhpcykuaGlkZSgpIH0pIH0gfSk7IHZhciBwZSA9IC9eKD86Y2hlY2tib3h8cmFkaW8pJC9pLCBkZSA9IC88KFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKikvaSwgaGUgPSAvXiR8Xm1vZHVsZSR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLCBnZSA9IHsgb3B0aW9uOiBbMSwgXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsIFwiPC9zZWxlY3Q+XCJdLCB0aGVhZDogWzEsIFwiPHRhYmxlPlwiLCBcIjwvdGFibGU+XCJdLCBjb2w6IFsyLCBcIjx0YWJsZT48Y29sZ3JvdXA+XCIsIFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSwgdHI6IFsyLCBcIjx0YWJsZT48dGJvZHk+XCIsIFwiPC90Ym9keT48L3RhYmxlPlwiXSwgdGQ6IFszLCBcIjx0YWJsZT48dGJvZHk+PHRyPlwiLCBcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiXSwgX2RlZmF1bHQ6IFswLCBcIlwiLCBcIlwiXSB9OyBmdW5jdGlvbiB2ZShlLCB0KSB7IHZhciBuOyByZXR1cm4gbiA9IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPyBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHQgfHwgXCIqXCIpIDogXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZS5xdWVyeVNlbGVjdG9yQWxsID8gZS5xdWVyeVNlbGVjdG9yQWxsKHQgfHwgXCIqXCIpIDogW10sIHZvaWQgMCA9PT0gdCB8fCB0ICYmIEEoZSwgdCkgPyBrLm1lcmdlKFtlXSwgbikgOiBuIH0gZnVuY3Rpb24geWUoZSwgdCkgeyBmb3IgKHZhciBuID0gMCwgciA9IGUubGVuZ3RoOyBuIDwgcjsgbisrKVEuc2V0KGVbbl0sIFwiZ2xvYmFsRXZhbFwiLCAhdCB8fCBRLmdldCh0W25dLCBcImdsb2JhbEV2YWxcIikpIH0gZ2Uub3B0Z3JvdXAgPSBnZS5vcHRpb24sIGdlLnRib2R5ID0gZ2UudGZvb3QgPSBnZS5jb2xncm91cCA9IGdlLmNhcHRpb24gPSBnZS50aGVhZCwgZ2UudGggPSBnZS50ZDsgdmFyIG1lLCB4ZSwgYmUgPSAvPHwmIz9cXHcrOy87IGZ1bmN0aW9uIHdlKGUsIHQsIG4sIHIsIGkpIHsgZm9yICh2YXIgbywgYSwgcywgdSwgbCwgYywgZiA9IHQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLCBwID0gW10sIGQgPSAwLCBoID0gZS5sZW5ndGg7IGQgPCBoOyBkKyspaWYgKChvID0gZVtkXSkgfHwgMCA9PT0gbykgaWYgKFwib2JqZWN0XCIgPT09IHcobykpIGsubWVyZ2UocCwgby5ub2RlVHlwZSA/IFtvXSA6IG8pOyBlbHNlIGlmIChiZS50ZXN0KG8pKSB7IGEgPSBhIHx8IGYuYXBwZW5kQ2hpbGQodC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSwgcyA9IChkZS5leGVjKG8pIHx8IFtcIlwiLCBcIlwiXSlbMV0udG9Mb3dlckNhc2UoKSwgdSA9IGdlW3NdIHx8IGdlLl9kZWZhdWx0LCBhLmlubmVySFRNTCA9IHVbMV0gKyBrLmh0bWxQcmVmaWx0ZXIobykgKyB1WzJdLCBjID0gdVswXTsgd2hpbGUgKGMtLSkgYSA9IGEubGFzdENoaWxkOyBrLm1lcmdlKHAsIGEuY2hpbGROb2RlcyksIChhID0gZi5maXJzdENoaWxkKS50ZXh0Q29udGVudCA9IFwiXCIgfSBlbHNlIHAucHVzaCh0LmNyZWF0ZVRleHROb2RlKG8pKTsgZi50ZXh0Q29udGVudCA9IFwiXCIsIGQgPSAwOyB3aGlsZSAobyA9IHBbZCsrXSkgaWYgKHIgJiYgLTEgPCBrLmluQXJyYXkobywgcikpIGkgJiYgaS5wdXNoKG8pOyBlbHNlIGlmIChsID0gb2UobyksIGEgPSB2ZShmLmFwcGVuZENoaWxkKG8pLCBcInNjcmlwdFwiKSwgbCAmJiB5ZShhKSwgbikgeyBjID0gMDsgd2hpbGUgKG8gPSBhW2MrK10pIGhlLnRlc3Qoby50eXBlIHx8IFwiXCIpICYmIG4ucHVzaChvKSB9IHJldHVybiBmIH0gbWUgPSBFLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKS5hcHBlbmRDaGlsZChFLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLCAoeGUgPSBFLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSkuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInJhZGlvXCIpLCB4ZS5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiKSwgeGUuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInRcIiksIG1lLmFwcGVuZENoaWxkKHhlKSwgeS5jaGVja0Nsb25lID0gbWUuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLCBtZS5pbm5lckhUTUwgPSBcIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIiwgeS5ub0Nsb25lQ2hlY2tlZCA9ICEhbWUuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlOyB2YXIgVGUgPSAvXmtleS8sIENlID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLCBFZSA9IC9eKFteLl0qKSg/OlxcLiguKyl8KS87IGZ1bmN0aW9uIGtlKCkgeyByZXR1cm4gITAgfSBmdW5jdGlvbiBTZSgpIHsgcmV0dXJuICExIH0gZnVuY3Rpb24gTmUoZSwgdCkgeyByZXR1cm4gZSA9PT0gZnVuY3Rpb24gKCkgeyB0cnkgeyByZXR1cm4gRS5hY3RpdmVFbGVtZW50IH0gY2F0Y2ggKGUpIHsgfSB9KCkgPT0gKFwiZm9jdXNcIiA9PT0gdCkgfSBmdW5jdGlvbiBBZShlLCB0LCBuLCByLCBpLCBvKSB7IHZhciBhLCBzOyBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgdCkgeyBmb3IgKHMgaW4gXCJzdHJpbmdcIiAhPSB0eXBlb2YgbiAmJiAociA9IHIgfHwgbiwgbiA9IHZvaWQgMCksIHQpIEFlKGUsIHMsIG4sIHIsIHRbc10sIG8pOyByZXR1cm4gZSB9IGlmIChudWxsID09IHIgJiYgbnVsbCA9PSBpID8gKGkgPSBuLCByID0gbiA9IHZvaWQgMCkgOiBudWxsID09IGkgJiYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIG4gPyAoaSA9IHIsIHIgPSB2b2lkIDApIDogKGkgPSByLCByID0gbiwgbiA9IHZvaWQgMCkpLCAhMSA9PT0gaSkgaSA9IFNlOyBlbHNlIGlmICghaSkgcmV0dXJuIGU7IHJldHVybiAxID09PSBvICYmIChhID0gaSwgKGkgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gaygpLm9mZihlKSwgYS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIH0pLmd1aWQgPSBhLmd1aWQgfHwgKGEuZ3VpZCA9IGsuZ3VpZCsrKSksIGUuZWFjaChmdW5jdGlvbiAoKSB7IGsuZXZlbnQuYWRkKHRoaXMsIHQsIGksIHIsIG4pIH0pIH0gZnVuY3Rpb24gRGUoZSwgaSwgbykgeyBvID8gKFEuc2V0KGUsIGksICExKSwgay5ldmVudC5hZGQoZSwgaSwgeyBuYW1lc3BhY2U6ICExLCBoYW5kbGVyOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiwgciA9IFEuZ2V0KHRoaXMsIGkpOyBpZiAoMSAmIGUuaXNUcmlnZ2VyICYmIHRoaXNbaV0pIHsgaWYgKHIubGVuZ3RoKSAoay5ldmVudC5zcGVjaWFsW2ldIHx8IHt9KS5kZWxlZ2F0ZVR5cGUgJiYgZS5zdG9wUHJvcGFnYXRpb24oKTsgZWxzZSBpZiAociA9IHMuY2FsbChhcmd1bWVudHMpLCBRLnNldCh0aGlzLCBpLCByKSwgdCA9IG8odGhpcywgaSksIHRoaXNbaV0oKSwgciAhPT0gKG4gPSBRLmdldCh0aGlzLCBpKSkgfHwgdCA/IFEuc2V0KHRoaXMsIGksICExKSA6IG4gPSB7fSwgciAhPT0gbikgcmV0dXJuIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksIGUucHJldmVudERlZmF1bHQoKSwgbi52YWx1ZSB9IGVsc2Ugci5sZW5ndGggJiYgKFEuc2V0KHRoaXMsIGksIHsgdmFsdWU6IGsuZXZlbnQudHJpZ2dlcihrLmV4dGVuZChyWzBdLCBrLkV2ZW50LnByb3RvdHlwZSksIHIuc2xpY2UoMSksIHRoaXMpIH0pLCBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKSB9IH0pKSA6IHZvaWQgMCA9PT0gUS5nZXQoZSwgaSkgJiYgay5ldmVudC5hZGQoZSwgaSwga2UpIH0gay5ldmVudCA9IHsgZ2xvYmFsOiB7fSwgYWRkOiBmdW5jdGlvbiAodCwgZSwgbiwgciwgaSkgeyB2YXIgbywgYSwgcywgdSwgbCwgYywgZiwgcCwgZCwgaCwgZywgdiA9IFEuZ2V0KHQpOyBpZiAodikgeyBuLmhhbmRsZXIgJiYgKG4gPSAobyA9IG4pLmhhbmRsZXIsIGkgPSBvLnNlbGVjdG9yKSwgaSAmJiBrLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGllLCBpKSwgbi5ndWlkIHx8IChuLmd1aWQgPSBrLmd1aWQrKyksICh1ID0gdi5ldmVudHMpIHx8ICh1ID0gdi5ldmVudHMgPSB7fSksIChhID0gdi5oYW5kbGUpIHx8IChhID0gdi5oYW5kbGUgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgayAmJiBrLmV2ZW50LnRyaWdnZXJlZCAhPT0gZS50eXBlID8gay5ldmVudC5kaXNwYXRjaC5hcHBseSh0LCBhcmd1bWVudHMpIDogdm9pZCAwIH0pLCBsID0gKGUgPSAoZSB8fCBcIlwiKS5tYXRjaChSKSB8fCBbXCJcIl0pLmxlbmd0aDsgd2hpbGUgKGwtLSkgZCA9IGcgPSAocyA9IEVlLmV4ZWMoZVtsXSkgfHwgW10pWzFdLCBoID0gKHNbMl0gfHwgXCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSwgZCAmJiAoZiA9IGsuZXZlbnQuc3BlY2lhbFtkXSB8fCB7fSwgZCA9IChpID8gZi5kZWxlZ2F0ZVR5cGUgOiBmLmJpbmRUeXBlKSB8fCBkLCBmID0gay5ldmVudC5zcGVjaWFsW2RdIHx8IHt9LCBjID0gay5leHRlbmQoeyB0eXBlOiBkLCBvcmlnVHlwZTogZywgZGF0YTogciwgaGFuZGxlcjogbiwgZ3VpZDogbi5ndWlkLCBzZWxlY3RvcjogaSwgbmVlZHNDb250ZXh0OiBpICYmIGsuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChpKSwgbmFtZXNwYWNlOiBoLmpvaW4oXCIuXCIpIH0sIG8pLCAocCA9IHVbZF0pIHx8ICgocCA9IHVbZF0gPSBbXSkuZGVsZWdhdGVDb3VudCA9IDAsIGYuc2V0dXAgJiYgITEgIT09IGYuc2V0dXAuY2FsbCh0LCByLCBoLCBhKSB8fCB0LmFkZEV2ZW50TGlzdGVuZXIgJiYgdC5hZGRFdmVudExpc3RlbmVyKGQsIGEpKSwgZi5hZGQgJiYgKGYuYWRkLmNhbGwodCwgYyksIGMuaGFuZGxlci5ndWlkIHx8IChjLmhhbmRsZXIuZ3VpZCA9IG4uZ3VpZCkpLCBpID8gcC5zcGxpY2UocC5kZWxlZ2F0ZUNvdW50KyssIDAsIGMpIDogcC5wdXNoKGMpLCBrLmV2ZW50Lmdsb2JhbFtkXSA9ICEwKSB9IH0sIHJlbW92ZTogZnVuY3Rpb24gKGUsIHQsIG4sIHIsIGkpIHsgdmFyIG8sIGEsIHMsIHUsIGwsIGMsIGYsIHAsIGQsIGgsIGcsIHYgPSBRLmhhc0RhdGEoZSkgJiYgUS5nZXQoZSk7IGlmICh2ICYmICh1ID0gdi5ldmVudHMpKSB7IGwgPSAodCA9ICh0IHx8IFwiXCIpLm1hdGNoKFIpIHx8IFtcIlwiXSkubGVuZ3RoOyB3aGlsZSAobC0tKSBpZiAoZCA9IGcgPSAocyA9IEVlLmV4ZWModFtsXSkgfHwgW10pWzFdLCBoID0gKHNbMl0gfHwgXCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSwgZCkgeyBmID0gay5ldmVudC5zcGVjaWFsW2RdIHx8IHt9LCBwID0gdVtkID0gKHIgPyBmLmRlbGVnYXRlVHlwZSA6IGYuYmluZFR5cGUpIHx8IGRdIHx8IFtdLCBzID0gc1syXSAmJiBuZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIgKyBoLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKSArIFwiKFxcXFwufCQpXCIpLCBhID0gbyA9IHAubGVuZ3RoOyB3aGlsZSAoby0tKSBjID0gcFtvXSwgIWkgJiYgZyAhPT0gYy5vcmlnVHlwZSB8fCBuICYmIG4uZ3VpZCAhPT0gYy5ndWlkIHx8IHMgJiYgIXMudGVzdChjLm5hbWVzcGFjZSkgfHwgciAmJiByICE9PSBjLnNlbGVjdG9yICYmIChcIioqXCIgIT09IHIgfHwgIWMuc2VsZWN0b3IpIHx8IChwLnNwbGljZShvLCAxKSwgYy5zZWxlY3RvciAmJiBwLmRlbGVnYXRlQ291bnQtLSAsIGYucmVtb3ZlICYmIGYucmVtb3ZlLmNhbGwoZSwgYykpOyBhICYmICFwLmxlbmd0aCAmJiAoZi50ZWFyZG93biAmJiAhMSAhPT0gZi50ZWFyZG93bi5jYWxsKGUsIGgsIHYuaGFuZGxlKSB8fCBrLnJlbW92ZUV2ZW50KGUsIGQsIHYuaGFuZGxlKSwgZGVsZXRlIHVbZF0pIH0gZWxzZSBmb3IgKGQgaW4gdSkgay5ldmVudC5yZW1vdmUoZSwgZCArIHRbbF0sIG4sIHIsICEwKTsgay5pc0VtcHR5T2JqZWN0KHUpICYmIFEucmVtb3ZlKGUsIFwiaGFuZGxlIGV2ZW50c1wiKSB9IH0sIGRpc3BhdGNoOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiwgciwgaSwgbywgYSwgcyA9IGsuZXZlbnQuZml4KGUpLCB1ID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLCBsID0gKFEuZ2V0KHRoaXMsIFwiZXZlbnRzXCIpIHx8IHt9KVtzLnR5cGVdIHx8IFtdLCBjID0gay5ldmVudC5zcGVjaWFsW3MudHlwZV0gfHwge307IGZvciAodVswXSA9IHMsIHQgPSAxOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKXVbdF0gPSBhcmd1bWVudHNbdF07IGlmIChzLmRlbGVnYXRlVGFyZ2V0ID0gdGhpcywgIWMucHJlRGlzcGF0Y2ggfHwgITEgIT09IGMucHJlRGlzcGF0Y2guY2FsbCh0aGlzLCBzKSkgeyBhID0gay5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsIHMsIGwpLCB0ID0gMDsgd2hpbGUgKChpID0gYVt0KytdKSAmJiAhcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKSB7IHMuY3VycmVudFRhcmdldCA9IGkuZWxlbSwgbiA9IDA7IHdoaWxlICgobyA9IGkuaGFuZGxlcnNbbisrXSkgJiYgIXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkgcy5ybmFtZXNwYWNlICYmICExICE9PSBvLm5hbWVzcGFjZSAmJiAhcy5ybmFtZXNwYWNlLnRlc3Qoby5uYW1lc3BhY2UpIHx8IChzLmhhbmRsZU9iaiA9IG8sIHMuZGF0YSA9IG8uZGF0YSwgdm9pZCAwICE9PSAociA9ICgoay5ldmVudC5zcGVjaWFsW28ub3JpZ1R5cGVdIHx8IHt9KS5oYW5kbGUgfHwgby5oYW5kbGVyKS5hcHBseShpLmVsZW0sIHUpKSAmJiAhMSA9PT0gKHMucmVzdWx0ID0gcikgJiYgKHMucHJldmVudERlZmF1bHQoKSwgcy5zdG9wUHJvcGFnYXRpb24oKSkpIH0gcmV0dXJuIGMucG9zdERpc3BhdGNoICYmIGMucG9zdERpc3BhdGNoLmNhbGwodGhpcywgcyksIHMucmVzdWx0IH0gfSwgaGFuZGxlcnM6IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuLCByLCBpLCBvLCBhLCBzID0gW10sIHUgPSB0LmRlbGVnYXRlQ291bnQsIGwgPSBlLnRhcmdldDsgaWYgKHUgJiYgbC5ub2RlVHlwZSAmJiAhKFwiY2xpY2tcIiA9PT0gZS50eXBlICYmIDEgPD0gZS5idXR0b24pKSBmb3IgKDsgbCAhPT0gdGhpczsgbCA9IGwucGFyZW50Tm9kZSB8fCB0aGlzKWlmICgxID09PSBsLm5vZGVUeXBlICYmIChcImNsaWNrXCIgIT09IGUudHlwZSB8fCAhMCAhPT0gbC5kaXNhYmxlZCkpIHsgZm9yIChvID0gW10sIGEgPSB7fSwgbiA9IDA7IG4gPCB1OyBuKyspdm9pZCAwID09PSBhW2kgPSAociA9IHRbbl0pLnNlbGVjdG9yICsgXCIgXCJdICYmIChhW2ldID0gci5uZWVkc0NvbnRleHQgPyAtMSA8IGsoaSwgdGhpcykuaW5kZXgobCkgOiBrLmZpbmQoaSwgdGhpcywgbnVsbCwgW2xdKS5sZW5ndGgpLCBhW2ldICYmIG8ucHVzaChyKTsgby5sZW5ndGggJiYgcy5wdXNoKHsgZWxlbTogbCwgaGFuZGxlcnM6IG8gfSkgfSByZXR1cm4gbCA9IHRoaXMsIHUgPCB0Lmxlbmd0aCAmJiBzLnB1c2goeyBlbGVtOiBsLCBoYW5kbGVyczogdC5zbGljZSh1KSB9KSwgcyB9LCBhZGRQcm9wOiBmdW5jdGlvbiAodCwgZSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoay5FdmVudC5wcm90b3R5cGUsIHQsIHsgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIGdldDogbShlKSA/IGZ1bmN0aW9uICgpIHsgaWYgKHRoaXMub3JpZ2luYWxFdmVudCkgcmV0dXJuIGUodGhpcy5vcmlnaW5hbEV2ZW50KSB9IDogZnVuY3Rpb24gKCkgeyBpZiAodGhpcy5vcmlnaW5hbEV2ZW50KSByZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50W3RdIH0sIHNldDogZnVuY3Rpb24gKGUpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIHQsIHsgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCwgdmFsdWU6IGUgfSkgfSB9KSB9LCBmaXg6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlW2suZXhwYW5kb10gPyBlIDogbmV3IGsuRXZlbnQoZSkgfSwgc3BlY2lhbDogeyBsb2FkOiB7IG5vQnViYmxlOiAhMCB9LCBjbGljazogeyBzZXR1cDogZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSB0aGlzIHx8IGU7IHJldHVybiBwZS50ZXN0KHQudHlwZSkgJiYgdC5jbGljayAmJiBBKHQsIFwiaW5wdXRcIikgJiYgRGUodCwgXCJjbGlja1wiLCBrZSksICExIH0sIHRyaWdnZXI6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gdGhpcyB8fCBlOyByZXR1cm4gcGUudGVzdCh0LnR5cGUpICYmIHQuY2xpY2sgJiYgQSh0LCBcImlucHV0XCIpICYmIERlKHQsIFwiY2xpY2tcIiksICEwIH0sIF9kZWZhdWx0OiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGUudGFyZ2V0OyByZXR1cm4gcGUudGVzdCh0LnR5cGUpICYmIHQuY2xpY2sgJiYgQSh0LCBcImlucHV0XCIpICYmIFEuZ2V0KHQsIFwiY2xpY2tcIikgfHwgQSh0LCBcImFcIikgfSB9LCBiZWZvcmV1bmxvYWQ6IHsgcG9zdERpc3BhdGNoOiBmdW5jdGlvbiAoZSkgeyB2b2lkIDAgIT09IGUucmVzdWx0ICYmIGUub3JpZ2luYWxFdmVudCAmJiAoZS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZS5yZXN1bHQpIH0gfSB9IH0sIGsucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbiAoZSwgdCwgbikgeyBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsIG4pIH0sIGsuRXZlbnQgPSBmdW5jdGlvbiAoZSwgdCkgeyBpZiAoISh0aGlzIGluc3RhbmNlb2Ygay5FdmVudCkpIHJldHVybiBuZXcgay5FdmVudChlLCB0KTsgZSAmJiBlLnR5cGUgPyAodGhpcy5vcmlnaW5hbEV2ZW50ID0gZSwgdGhpcy50eXBlID0gZS50eXBlLCB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGUuZGVmYXVsdFByZXZlbnRlZCB8fCB2b2lkIDAgPT09IGUuZGVmYXVsdFByZXZlbnRlZCAmJiAhMSA9PT0gZS5yZXR1cm5WYWx1ZSA/IGtlIDogU2UsIHRoaXMudGFyZ2V0ID0gZS50YXJnZXQgJiYgMyA9PT0gZS50YXJnZXQubm9kZVR5cGUgPyBlLnRhcmdldC5wYXJlbnROb2RlIDogZS50YXJnZXQsIHRoaXMuY3VycmVudFRhcmdldCA9IGUuY3VycmVudFRhcmdldCwgdGhpcy5yZWxhdGVkVGFyZ2V0ID0gZS5yZWxhdGVkVGFyZ2V0KSA6IHRoaXMudHlwZSA9IGUsIHQgJiYgay5leHRlbmQodGhpcywgdCksIHRoaXMudGltZVN0YW1wID0gZSAmJiBlLnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpLCB0aGlzW2suZXhwYW5kb10gPSAhMCB9LCBrLkV2ZW50LnByb3RvdHlwZSA9IHsgY29uc3RydWN0b3I6IGsuRXZlbnQsIGlzRGVmYXVsdFByZXZlbnRlZDogU2UsIGlzUHJvcGFnYXRpb25TdG9wcGVkOiBTZSwgaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IFNlLCBpc1NpbXVsYXRlZDogITEsIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbiAoKSB7IHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50OyB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGtlLCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICYmIGUucHJldmVudERlZmF1bHQoKSB9LCBzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7IHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSBrZSwgZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCAmJiBlLnN0b3BQcm9wYWdhdGlvbigpIH0sIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24gKCkgeyB2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDsgdGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IGtlLCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICYmIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksIHRoaXMuc3RvcFByb3BhZ2F0aW9uKCkgfSB9LCBrLmVhY2goeyBhbHRLZXk6ICEwLCBidWJibGVzOiAhMCwgY2FuY2VsYWJsZTogITAsIGNoYW5nZWRUb3VjaGVzOiAhMCwgY3RybEtleTogITAsIGRldGFpbDogITAsIGV2ZW50UGhhc2U6ICEwLCBtZXRhS2V5OiAhMCwgcGFnZVg6ICEwLCBwYWdlWTogITAsIHNoaWZ0S2V5OiAhMCwgdmlldzogITAsIFwiY2hhclwiOiAhMCwgY29kZTogITAsIGNoYXJDb2RlOiAhMCwga2V5OiAhMCwga2V5Q29kZTogITAsIGJ1dHRvbjogITAsIGJ1dHRvbnM6ICEwLCBjbGllbnRYOiAhMCwgY2xpZW50WTogITAsIG9mZnNldFg6ICEwLCBvZmZzZXRZOiAhMCwgcG9pbnRlcklkOiAhMCwgcG9pbnRlclR5cGU6ICEwLCBzY3JlZW5YOiAhMCwgc2NyZWVuWTogITAsIHRhcmdldFRvdWNoZXM6ICEwLCB0b0VsZW1lbnQ6ICEwLCB0b3VjaGVzOiAhMCwgd2hpY2g6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gZS5idXR0b247IHJldHVybiBudWxsID09IGUud2hpY2ggJiYgVGUudGVzdChlLnR5cGUpID8gbnVsbCAhPSBlLmNoYXJDb2RlID8gZS5jaGFyQ29kZSA6IGUua2V5Q29kZSA6ICFlLndoaWNoICYmIHZvaWQgMCAhPT0gdCAmJiBDZS50ZXN0KGUudHlwZSkgPyAxICYgdCA/IDEgOiAyICYgdCA/IDMgOiA0ICYgdCA/IDIgOiAwIDogZS53aGljaCB9IH0sIGsuZXZlbnQuYWRkUHJvcCksIGsuZWFjaCh7IGZvY3VzOiBcImZvY3VzaW5cIiwgYmx1cjogXCJmb2N1c291dFwiIH0sIGZ1bmN0aW9uIChlLCB0KSB7IGsuZXZlbnQuc3BlY2lhbFtlXSA9IHsgc2V0dXA6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIERlKHRoaXMsIGUsIE5lKSwgITEgfSwgdHJpZ2dlcjogZnVuY3Rpb24gKCkgeyByZXR1cm4gRGUodGhpcywgZSksICEwIH0sIGRlbGVnYXRlVHlwZTogdCB9IH0pLCBrLmVhY2goeyBtb3VzZWVudGVyOiBcIm1vdXNlb3ZlclwiLCBtb3VzZWxlYXZlOiBcIm1vdXNlb3V0XCIsIHBvaW50ZXJlbnRlcjogXCJwb2ludGVyb3ZlclwiLCBwb2ludGVybGVhdmU6IFwicG9pbnRlcm91dFwiIH0sIGZ1bmN0aW9uIChlLCBpKSB7IGsuZXZlbnQuc3BlY2lhbFtlXSA9IHsgZGVsZWdhdGVUeXBlOiBpLCBiaW5kVHlwZTogaSwgaGFuZGxlOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiA9IGUucmVsYXRlZFRhcmdldCwgciA9IGUuaGFuZGxlT2JqOyByZXR1cm4gbiAmJiAobiA9PT0gdGhpcyB8fCBrLmNvbnRhaW5zKHRoaXMsIG4pKSB8fCAoZS50eXBlID0gci5vcmlnVHlwZSwgdCA9IHIuaGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBlLnR5cGUgPSBpKSwgdCB9IH0gfSksIGsuZm4uZXh0ZW5kKHsgb246IGZ1bmN0aW9uIChlLCB0LCBuLCByKSB7IHJldHVybiBBZSh0aGlzLCBlLCB0LCBuLCByKSB9LCBvbmU6IGZ1bmN0aW9uIChlLCB0LCBuLCByKSB7IHJldHVybiBBZSh0aGlzLCBlLCB0LCBuLCByLCAxKSB9LCBvZmY6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciByLCBpOyBpZiAoZSAmJiBlLnByZXZlbnREZWZhdWx0ICYmIGUuaGFuZGxlT2JqKSByZXR1cm4gciA9IGUuaGFuZGxlT2JqLCBrKGUuZGVsZWdhdGVUYXJnZXQpLm9mZihyLm5hbWVzcGFjZSA/IHIub3JpZ1R5cGUgKyBcIi5cIiArIHIubmFtZXNwYWNlIDogci5vcmlnVHlwZSwgci5zZWxlY3Rvciwgci5oYW5kbGVyKSwgdGhpczsgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIGUpIHsgZm9yIChpIGluIGUpIHRoaXMub2ZmKGksIHQsIGVbaV0pOyByZXR1cm4gdGhpcyB9IHJldHVybiAhMSAhPT0gdCAmJiBcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHQgfHwgKG4gPSB0LCB0ID0gdm9pZCAwKSwgITEgPT09IG4gJiYgKG4gPSBTZSksIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IGsuZXZlbnQucmVtb3ZlKHRoaXMsIGUsIG4sIHQpIH0pIH0gfSk7IHZhciBqZSA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKilbXj5dKilcXC8+L2dpLCBxZSA9IC88c2NyaXB0fDxzdHlsZXw8bGluay9pLCBMZSA9IC9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksIEhlID0gL15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nOyBmdW5jdGlvbiBPZShlLCB0KSB7IHJldHVybiBBKGUsIFwidGFibGVcIikgJiYgQSgxMSAhPT0gdC5ub2RlVHlwZSA/IHQgOiB0LmZpcnN0Q2hpbGQsIFwidHJcIikgJiYgayhlKS5jaGlsZHJlbihcInRib2R5XCIpWzBdIHx8IGUgfSBmdW5jdGlvbiBQZShlKSB7IHJldHVybiBlLnR5cGUgPSAobnVsbCAhPT0gZS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKSArIFwiL1wiICsgZS50eXBlLCBlIH0gZnVuY3Rpb24gUmUoZSkgeyByZXR1cm4gXCJ0cnVlL1wiID09PSAoZS50eXBlIHx8IFwiXCIpLnNsaWNlKDAsIDUpID8gZS50eXBlID0gZS50eXBlLnNsaWNlKDUpIDogZS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpLCBlIH0gZnVuY3Rpb24gTWUoZSwgdCkgeyB2YXIgbiwgciwgaSwgbywgYSwgcywgdSwgbDsgaWYgKDEgPT09IHQubm9kZVR5cGUpIHsgaWYgKFEuaGFzRGF0YShlKSAmJiAobyA9IFEuYWNjZXNzKGUpLCBhID0gUS5zZXQodCwgbyksIGwgPSBvLmV2ZW50cykpIGZvciAoaSBpbiBkZWxldGUgYS5oYW5kbGUsIGEuZXZlbnRzID0ge30sIGwpIGZvciAobiA9IDAsIHIgPSBsW2ldLmxlbmd0aDsgbiA8IHI7IG4rKylrLmV2ZW50LmFkZCh0LCBpLCBsW2ldW25dKTsgSi5oYXNEYXRhKGUpICYmIChzID0gSi5hY2Nlc3MoZSksIHUgPSBrLmV4dGVuZCh7fSwgcyksIEouc2V0KHQsIHUpKSB9IH0gZnVuY3Rpb24gSWUobiwgciwgaSwgbykgeyByID0gZy5hcHBseShbXSwgcik7IHZhciBlLCB0LCBhLCBzLCB1LCBsLCBjID0gMCwgZiA9IG4ubGVuZ3RoLCBwID0gZiAtIDEsIGQgPSByWzBdLCBoID0gbShkKTsgaWYgKGggfHwgMSA8IGYgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZCAmJiAheS5jaGVja0Nsb25lICYmIExlLnRlc3QoZCkpIHJldHVybiBuLmVhY2goZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBuLmVxKGUpOyBoICYmIChyWzBdID0gZC5jYWxsKHRoaXMsIGUsIHQuaHRtbCgpKSksIEllKHQsIHIsIGksIG8pIH0pOyBpZiAoZiAmJiAodCA9IChlID0gd2UociwgblswXS5vd25lckRvY3VtZW50LCAhMSwgbiwgbykpLmZpcnN0Q2hpbGQsIDEgPT09IGUuY2hpbGROb2Rlcy5sZW5ndGggJiYgKGUgPSB0KSwgdCB8fCBvKSkgeyBmb3IgKHMgPSAoYSA9IGsubWFwKHZlKGUsIFwic2NyaXB0XCIpLCBQZSkpLmxlbmd0aDsgYyA8IGY7IGMrKyl1ID0gZSwgYyAhPT0gcCAmJiAodSA9IGsuY2xvbmUodSwgITAsICEwKSwgcyAmJiBrLm1lcmdlKGEsIHZlKHUsIFwic2NyaXB0XCIpKSksIGkuY2FsbChuW2NdLCB1LCBjKTsgaWYgKHMpIGZvciAobCA9IGFbYS5sZW5ndGggLSAxXS5vd25lckRvY3VtZW50LCBrLm1hcChhLCBSZSksIGMgPSAwOyBjIDwgczsgYysrKXUgPSBhW2NdLCBoZS50ZXN0KHUudHlwZSB8fCBcIlwiKSAmJiAhUS5hY2Nlc3ModSwgXCJnbG9iYWxFdmFsXCIpICYmIGsuY29udGFpbnMobCwgdSkgJiYgKHUuc3JjICYmIFwibW9kdWxlXCIgIT09ICh1LnR5cGUgfHwgXCJcIikudG9Mb3dlckNhc2UoKSA/IGsuX2V2YWxVcmwgJiYgIXUubm9Nb2R1bGUgJiYgay5fZXZhbFVybCh1LnNyYywgeyBub25jZTogdS5ub25jZSB8fCB1LmdldEF0dHJpYnV0ZShcIm5vbmNlXCIpIH0pIDogYih1LnRleHRDb250ZW50LnJlcGxhY2UoSGUsIFwiXCIpLCB1LCBsKSkgfSByZXR1cm4gbiB9IGZ1bmN0aW9uIFdlKGUsIHQsIG4pIHsgZm9yICh2YXIgciwgaSA9IHQgPyBrLmZpbHRlcih0LCBlKSA6IGUsIG8gPSAwOyBudWxsICE9IChyID0gaVtvXSk7IG8rKyluIHx8IDEgIT09IHIubm9kZVR5cGUgfHwgay5jbGVhbkRhdGEodmUocikpLCByLnBhcmVudE5vZGUgJiYgKG4gJiYgb2UocikgJiYgeWUodmUociwgXCJzY3JpcHRcIikpLCByLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocikpOyByZXR1cm4gZSB9IGsuZXh0ZW5kKHsgaHRtbFByZWZpbHRlcjogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUucmVwbGFjZShqZSwgXCI8JDE+PC8kMj5cIikgfSwgY2xvbmU6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciByLCBpLCBvLCBhLCBzLCB1LCBsLCBjID0gZS5jbG9uZU5vZGUoITApLCBmID0gb2UoZSk7IGlmICghKHkubm9DbG9uZUNoZWNrZWQgfHwgMSAhPT0gZS5ub2RlVHlwZSAmJiAxMSAhPT0gZS5ub2RlVHlwZSB8fCBrLmlzWE1MRG9jKGUpKSkgZm9yIChhID0gdmUoYyksIHIgPSAwLCBpID0gKG8gPSB2ZShlKSkubGVuZ3RoOyByIDwgaTsgcisrKXMgPSBvW3JdLCB1ID0gYVtyXSwgdm9pZCAwLCBcImlucHV0XCIgPT09IChsID0gdS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSAmJiBwZS50ZXN0KHMudHlwZSkgPyB1LmNoZWNrZWQgPSBzLmNoZWNrZWQgOiBcImlucHV0XCIgIT09IGwgJiYgXCJ0ZXh0YXJlYVwiICE9PSBsIHx8ICh1LmRlZmF1bHRWYWx1ZSA9IHMuZGVmYXVsdFZhbHVlKTsgaWYgKHQpIGlmIChuKSBmb3IgKG8gPSBvIHx8IHZlKGUpLCBhID0gYSB8fCB2ZShjKSwgciA9IDAsIGkgPSBvLmxlbmd0aDsgciA8IGk7IHIrKylNZShvW3JdLCBhW3JdKTsgZWxzZSBNZShlLCBjKTsgcmV0dXJuIDAgPCAoYSA9IHZlKGMsIFwic2NyaXB0XCIpKS5sZW5ndGggJiYgeWUoYSwgIWYgJiYgdmUoZSwgXCJzY3JpcHRcIikpLCBjIH0sIGNsZWFuRGF0YTogZnVuY3Rpb24gKGUpIHsgZm9yICh2YXIgdCwgbiwgciwgaSA9IGsuZXZlbnQuc3BlY2lhbCwgbyA9IDA7IHZvaWQgMCAhPT0gKG4gPSBlW29dKTsgbysrKWlmIChHKG4pKSB7IGlmICh0ID0gbltRLmV4cGFuZG9dKSB7IGlmICh0LmV2ZW50cykgZm9yIChyIGluIHQuZXZlbnRzKSBpW3JdID8gay5ldmVudC5yZW1vdmUobiwgcikgOiBrLnJlbW92ZUV2ZW50KG4sIHIsIHQuaGFuZGxlKTsgbltRLmV4cGFuZG9dID0gdm9pZCAwIH0gbltKLmV4cGFuZG9dICYmIChuW0ouZXhwYW5kb10gPSB2b2lkIDApIH0gfSB9KSwgay5mbi5leHRlbmQoeyBkZXRhY2g6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBXZSh0aGlzLCBlLCAhMCkgfSwgcmVtb3ZlOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gV2UodGhpcywgZSkgfSwgdGV4dDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF8odGhpcywgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHZvaWQgMCA9PT0gZSA/IGsudGV4dCh0aGlzKSA6IHRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uICgpIHsgMSAhPT0gdGhpcy5ub2RlVHlwZSAmJiAxMSAhPT0gdGhpcy5ub2RlVHlwZSAmJiA5ICE9PSB0aGlzLm5vZGVUeXBlIHx8ICh0aGlzLnRleHRDb250ZW50ID0gZSkgfSkgfSwgbnVsbCwgZSwgYXJndW1lbnRzLmxlbmd0aCkgfSwgYXBwZW5kOiBmdW5jdGlvbiAoKSB7IHJldHVybiBJZSh0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uIChlKSB7IDEgIT09IHRoaXMubm9kZVR5cGUgJiYgMTEgIT09IHRoaXMubm9kZVR5cGUgJiYgOSAhPT0gdGhpcy5ub2RlVHlwZSB8fCBPZSh0aGlzLCBlKS5hcHBlbmRDaGlsZChlKSB9KSB9LCBwcmVwZW5kOiBmdW5jdGlvbiAoKSB7IHJldHVybiBJZSh0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uIChlKSB7IGlmICgxID09PSB0aGlzLm5vZGVUeXBlIHx8IDExID09PSB0aGlzLm5vZGVUeXBlIHx8IDkgPT09IHRoaXMubm9kZVR5cGUpIHsgdmFyIHQgPSBPZSh0aGlzLCBlKTsgdC5pbnNlcnRCZWZvcmUoZSwgdC5maXJzdENoaWxkKSB9IH0pIH0sIGJlZm9yZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gSWUodGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiAoZSkgeyB0aGlzLnBhcmVudE5vZGUgJiYgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLCB0aGlzKSB9KSB9LCBhZnRlcjogZnVuY3Rpb24gKCkgeyByZXR1cm4gSWUodGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiAoZSkgeyB0aGlzLnBhcmVudE5vZGUgJiYgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLCB0aGlzLm5leHRTaWJsaW5nKSB9KSB9LCBlbXB0eTogZnVuY3Rpb24gKCkgeyBmb3IgKHZhciBlLCB0ID0gMDsgbnVsbCAhPSAoZSA9IHRoaXNbdF0pOyB0KyspMSA9PT0gZS5ub2RlVHlwZSAmJiAoay5jbGVhbkRhdGEodmUoZSwgITEpKSwgZS50ZXh0Q29udGVudCA9IFwiXCIpOyByZXR1cm4gdGhpcyB9LCBjbG9uZTogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIGUgPSBudWxsICE9IGUgJiYgZSwgdCA9IG51bGwgPT0gdCA/IGUgOiB0LCB0aGlzLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiBrLmNsb25lKHRoaXMsIGUsIHQpIH0pIH0sIGh0bWw6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfKHRoaXMsIGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gdGhpc1swXSB8fCB7fSwgbiA9IDAsIHIgPSB0aGlzLmxlbmd0aDsgaWYgKHZvaWQgMCA9PT0gZSAmJiAxID09PSB0Lm5vZGVUeXBlKSByZXR1cm4gdC5pbm5lckhUTUw7IGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlICYmICFxZS50ZXN0KGUpICYmICFnZVsoZGUuZXhlYyhlKSB8fCBbXCJcIiwgXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCldKSB7IGUgPSBrLmh0bWxQcmVmaWx0ZXIoZSk7IHRyeSB7IGZvciAoOyBuIDwgcjsgbisrKTEgPT09ICh0ID0gdGhpc1tuXSB8fCB7fSkubm9kZVR5cGUgJiYgKGsuY2xlYW5EYXRhKHZlKHQsICExKSksIHQuaW5uZXJIVE1MID0gZSk7IHQgPSAwIH0gY2F0Y2ggKGUpIHsgfSB9IHQgJiYgdGhpcy5lbXB0eSgpLmFwcGVuZChlKSB9LCBudWxsLCBlLCBhcmd1bWVudHMubGVuZ3RoKSB9LCByZXBsYWNlV2l0aDogZnVuY3Rpb24gKCkgeyB2YXIgbiA9IFtdOyByZXR1cm4gSWUodGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IHRoaXMucGFyZW50Tm9kZTsgay5pbkFycmF5KHRoaXMsIG4pIDwgMCAmJiAoay5jbGVhbkRhdGEodmUodGhpcykpLCB0ICYmIHQucmVwbGFjZUNoaWxkKGUsIHRoaXMpKSB9LCBuKSB9IH0pLCBrLmVhY2goeyBhcHBlbmRUbzogXCJhcHBlbmRcIiwgcHJlcGVuZFRvOiBcInByZXBlbmRcIiwgaW5zZXJ0QmVmb3JlOiBcImJlZm9yZVwiLCBpbnNlcnRBZnRlcjogXCJhZnRlclwiLCByZXBsYWNlQWxsOiBcInJlcGxhY2VXaXRoXCIgfSwgZnVuY3Rpb24gKGUsIGEpIHsgay5mbltlXSA9IGZ1bmN0aW9uIChlKSB7IGZvciAodmFyIHQsIG4gPSBbXSwgciA9IGsoZSksIGkgPSByLmxlbmd0aCAtIDEsIG8gPSAwOyBvIDw9IGk7IG8rKyl0ID0gbyA9PT0gaSA/IHRoaXMgOiB0aGlzLmNsb25lKCEwKSwgayhyW29dKVthXSh0KSwgdS5hcHBseShuLCB0LmdldCgpKTsgcmV0dXJuIHRoaXMucHVzaFN0YWNrKG4pIH0gfSk7IHZhciAkZSA9IG5ldyBSZWdFeHAoXCJeKFwiICsgdGUgKyBcIikoPyFweClbYS16JV0rJFwiLCBcImlcIiksIEZlID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7IHJldHVybiB0ICYmIHQub3BlbmVyIHx8ICh0ID0gQyksIHQuZ2V0Q29tcHV0ZWRTdHlsZShlKSB9LCBCZSA9IG5ldyBSZWdFeHAocmUuam9pbihcInxcIiksIFwiaVwiKTsgZnVuY3Rpb24gX2UoZSwgdCwgbikgeyB2YXIgciwgaSwgbywgYSwgcyA9IGUuc3R5bGU7IHJldHVybiAobiA9IG4gfHwgRmUoZSkpICYmIChcIlwiICE9PSAoYSA9IG4uZ2V0UHJvcGVydHlWYWx1ZSh0KSB8fCBuW3RdKSB8fCBvZShlKSB8fCAoYSA9IGsuc3R5bGUoZSwgdCkpLCAheS5waXhlbEJveFN0eWxlcygpICYmICRlLnRlc3QoYSkgJiYgQmUudGVzdCh0KSAmJiAociA9IHMud2lkdGgsIGkgPSBzLm1pbldpZHRoLCBvID0gcy5tYXhXaWR0aCwgcy5taW5XaWR0aCA9IHMubWF4V2lkdGggPSBzLndpZHRoID0gYSwgYSA9IG4ud2lkdGgsIHMud2lkdGggPSByLCBzLm1pbldpZHRoID0gaSwgcy5tYXhXaWR0aCA9IG8pKSwgdm9pZCAwICE9PSBhID8gYSArIFwiXCIgOiBhIH0gZnVuY3Rpb24gemUoZSwgdCkgeyByZXR1cm4geyBnZXQ6IGZ1bmN0aW9uICgpIHsgaWYgKCFlKCkpIHJldHVybiAodGhpcy5nZXQgPSB0KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyBkZWxldGUgdGhpcy5nZXQgfSB9IH0gIWZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZSgpIHsgaWYgKHUpIHsgcy5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMTExMXB4O3dpZHRoOjYwcHg7bWFyZ2luLXRvcDoxcHg7cGFkZGluZzowO2JvcmRlcjowXCIsIHUuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmJvcmRlci1ib3g7b3ZlcmZsb3c6c2Nyb2xsO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NjAlO3RvcDoxJVwiLCBpZS5hcHBlbmRDaGlsZChzKS5hcHBlbmRDaGlsZCh1KTsgdmFyIGUgPSBDLmdldENvbXB1dGVkU3R5bGUodSk7IG4gPSBcIjElXCIgIT09IGUudG9wLCBhID0gMTIgPT09IHQoZS5tYXJnaW5MZWZ0KSwgdS5zdHlsZS5yaWdodCA9IFwiNjAlXCIsIG8gPSAzNiA9PT0gdChlLnJpZ2h0KSwgciA9IDM2ID09PSB0KGUud2lkdGgpLCB1LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiLCBpID0gMTIgPT09IHQodS5vZmZzZXRXaWR0aCAvIDMpLCBpZS5yZW1vdmVDaGlsZChzKSwgdSA9IG51bGwgfSB9IGZ1bmN0aW9uIHQoZSkgeyByZXR1cm4gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGUpKSB9IHZhciBuLCByLCBpLCBvLCBhLCBzID0gRS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCB1ID0gRS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpOyB1LnN0eWxlICYmICh1LnN0eWxlLmJhY2tncm91bmRDbGlwID0gXCJjb250ZW50LWJveFwiLCB1LmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcIlwiLCB5LmNsZWFyQ2xvbmVTdHlsZSA9IFwiY29udGVudC1ib3hcIiA9PT0gdS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCwgay5leHRlbmQoeSwgeyBib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gZSgpLCByIH0sIHBpeGVsQm94U3R5bGVzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBlKCksIG8gfSwgcGl4ZWxQb3NpdGlvbjogZnVuY3Rpb24gKCkgeyByZXR1cm4gZSgpLCBuIH0sIHJlbGlhYmxlTWFyZ2luTGVmdDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZSgpLCBhIH0sIHNjcm9sbGJveFNpemU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGUoKSwgaSB9IH0pKSB9KCk7IHZhciBVZSA9IFtcIldlYmtpdFwiLCBcIk1velwiLCBcIm1zXCJdLCBYZSA9IEUuY3JlYXRlRWxlbWVudChcImRpdlwiKS5zdHlsZSwgVmUgPSB7fTsgZnVuY3Rpb24gR2UoZSkgeyB2YXIgdCA9IGsuY3NzUHJvcHNbZV0gfHwgVmVbZV07IHJldHVybiB0IHx8IChlIGluIFhlID8gZSA6IFZlW2VdID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBlWzBdLnRvVXBwZXJDYXNlKCkgKyBlLnNsaWNlKDEpLCBuID0gVWUubGVuZ3RoOyB3aGlsZSAobi0tKSBpZiAoKGUgPSBVZVtuXSArIHQpIGluIFhlKSByZXR1cm4gZSB9KGUpIHx8IGUpIH0gdmFyIFllID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLCBRZSA9IC9eLS0vLCBKZSA9IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiwgZGlzcGxheTogXCJibG9ja1wiIH0sIEtlID0geyBsZXR0ZXJTcGFjaW5nOiBcIjBcIiwgZm9udFdlaWdodDogXCI0MDBcIiB9OyBmdW5jdGlvbiBaZShlLCB0LCBuKSB7IHZhciByID0gbmUuZXhlYyh0KTsgcmV0dXJuIHIgPyBNYXRoLm1heCgwLCByWzJdIC0gKG4gfHwgMCkpICsgKHJbM10gfHwgXCJweFwiKSA6IHQgfSBmdW5jdGlvbiBldChlLCB0LCBuLCByLCBpLCBvKSB7IHZhciBhID0gXCJ3aWR0aFwiID09PSB0ID8gMSA6IDAsIHMgPSAwLCB1ID0gMDsgaWYgKG4gPT09IChyID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiKSkgcmV0dXJuIDA7IGZvciAoOyBhIDwgNDsgYSArPSAyKVwibWFyZ2luXCIgPT09IG4gJiYgKHUgKz0gay5jc3MoZSwgbiArIHJlW2FdLCAhMCwgaSkpLCByID8gKFwiY29udGVudFwiID09PSBuICYmICh1IC09IGsuY3NzKGUsIFwicGFkZGluZ1wiICsgcmVbYV0sICEwLCBpKSksIFwibWFyZ2luXCIgIT09IG4gJiYgKHUgLT0gay5jc3MoZSwgXCJib3JkZXJcIiArIHJlW2FdICsgXCJXaWR0aFwiLCAhMCwgaSkpKSA6ICh1ICs9IGsuY3NzKGUsIFwicGFkZGluZ1wiICsgcmVbYV0sICEwLCBpKSwgXCJwYWRkaW5nXCIgIT09IG4gPyB1ICs9IGsuY3NzKGUsIFwiYm9yZGVyXCIgKyByZVthXSArIFwiV2lkdGhcIiwgITAsIGkpIDogcyArPSBrLmNzcyhlLCBcImJvcmRlclwiICsgcmVbYV0gKyBcIldpZHRoXCIsICEwLCBpKSk7IHJldHVybiAhciAmJiAwIDw9IG8gJiYgKHUgKz0gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKGVbXCJvZmZzZXRcIiArIHRbMF0udG9VcHBlckNhc2UoKSArIHQuc2xpY2UoMSldIC0gbyAtIHUgLSBzIC0gLjUpKSB8fCAwKSwgdSB9IGZ1bmN0aW9uIHR0KGUsIHQsIG4pIHsgdmFyIHIgPSBGZShlKSwgaSA9ICgheS5ib3hTaXppbmdSZWxpYWJsZSgpIHx8IG4pICYmIFwiYm9yZGVyLWJveFwiID09PSBrLmNzcyhlLCBcImJveFNpemluZ1wiLCAhMSwgciksIG8gPSBpLCBhID0gX2UoZSwgdCwgciksIHMgPSBcIm9mZnNldFwiICsgdFswXS50b1VwcGVyQ2FzZSgpICsgdC5zbGljZSgxKTsgaWYgKCRlLnRlc3QoYSkpIHsgaWYgKCFuKSByZXR1cm4gYTsgYSA9IFwiYXV0b1wiIH0gcmV0dXJuICgheS5ib3hTaXppbmdSZWxpYWJsZSgpICYmIGkgfHwgXCJhdXRvXCIgPT09IGEgfHwgIXBhcnNlRmxvYXQoYSkgJiYgXCJpbmxpbmVcIiA9PT0gay5jc3MoZSwgXCJkaXNwbGF5XCIsICExLCByKSkgJiYgZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCAmJiAoaSA9IFwiYm9yZGVyLWJveFwiID09PSBrLmNzcyhlLCBcImJveFNpemluZ1wiLCAhMSwgciksIChvID0gcyBpbiBlKSAmJiAoYSA9IGVbc10pKSwgKGEgPSBwYXJzZUZsb2F0KGEpIHx8IDApICsgZXQoZSwgdCwgbiB8fCAoaSA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiksIG8sIHIsIGEpICsgXCJweFwiIH0gZnVuY3Rpb24gbnQoZSwgdCwgbiwgciwgaSkgeyByZXR1cm4gbmV3IG50LnByb3RvdHlwZS5pbml0KGUsIHQsIG4sIHIsIGkpIH0gay5leHRlbmQoeyBjc3NIb29rczogeyBvcGFjaXR5OiB7IGdldDogZnVuY3Rpb24gKGUsIHQpIHsgaWYgKHQpIHsgdmFyIG4gPSBfZShlLCBcIm9wYWNpdHlcIik7IHJldHVybiBcIlwiID09PSBuID8gXCIxXCIgOiBuIH0gfSB9IH0sIGNzc051bWJlcjogeyBhbmltYXRpb25JdGVyYXRpb25Db3VudDogITAsIGNvbHVtbkNvdW50OiAhMCwgZmlsbE9wYWNpdHk6ICEwLCBmbGV4R3JvdzogITAsIGZsZXhTaHJpbms6ICEwLCBmb250V2VpZ2h0OiAhMCwgZ3JpZEFyZWE6ICEwLCBncmlkQ29sdW1uOiAhMCwgZ3JpZENvbHVtbkVuZDogITAsIGdyaWRDb2x1bW5TdGFydDogITAsIGdyaWRSb3c6ICEwLCBncmlkUm93RW5kOiAhMCwgZ3JpZFJvd1N0YXJ0OiAhMCwgbGluZUhlaWdodDogITAsIG9wYWNpdHk6ICEwLCBvcmRlcjogITAsIG9ycGhhbnM6ICEwLCB3aWRvd3M6ICEwLCB6SW5kZXg6ICEwLCB6b29tOiAhMCB9LCBjc3NQcm9wczoge30sIHN0eWxlOiBmdW5jdGlvbiAoZSwgdCwgbiwgcikgeyBpZiAoZSAmJiAzICE9PSBlLm5vZGVUeXBlICYmIDggIT09IGUubm9kZVR5cGUgJiYgZS5zdHlsZSkgeyB2YXIgaSwgbywgYSwgcyA9IFYodCksIHUgPSBRZS50ZXN0KHQpLCBsID0gZS5zdHlsZTsgaWYgKHUgfHwgKHQgPSBHZShzKSksIGEgPSBrLmNzc0hvb2tzW3RdIHx8IGsuY3NzSG9va3Nbc10sIHZvaWQgMCA9PT0gbikgcmV0dXJuIGEgJiYgXCJnZXRcIiBpbiBhICYmIHZvaWQgMCAhPT0gKGkgPSBhLmdldChlLCAhMSwgcikpID8gaSA6IGxbdF07IFwic3RyaW5nXCIgPT09IChvID0gdHlwZW9mIG4pICYmIChpID0gbmUuZXhlYyhuKSkgJiYgaVsxXSAmJiAobiA9IGxlKGUsIHQsIGkpLCBvID0gXCJudW1iZXJcIiksIG51bGwgIT0gbiAmJiBuID09IG4gJiYgKFwibnVtYmVyXCIgIT09IG8gfHwgdSB8fCAobiArPSBpICYmIGlbM10gfHwgKGsuY3NzTnVtYmVyW3NdID8gXCJcIiA6IFwicHhcIikpLCB5LmNsZWFyQ2xvbmVTdHlsZSB8fCBcIlwiICE9PSBuIHx8IDAgIT09IHQuaW5kZXhPZihcImJhY2tncm91bmRcIikgfHwgKGxbdF0gPSBcImluaGVyaXRcIiksIGEgJiYgXCJzZXRcIiBpbiBhICYmIHZvaWQgMCA9PT0gKG4gPSBhLnNldChlLCBuLCByKSkgfHwgKHUgPyBsLnNldFByb3BlcnR5KHQsIG4pIDogbFt0XSA9IG4pKSB9IH0sIGNzczogZnVuY3Rpb24gKGUsIHQsIG4sIHIpIHsgdmFyIGksIG8sIGEsIHMgPSBWKHQpOyByZXR1cm4gUWUudGVzdCh0KSB8fCAodCA9IEdlKHMpKSwgKGEgPSBrLmNzc0hvb2tzW3RdIHx8IGsuY3NzSG9va3Nbc10pICYmIFwiZ2V0XCIgaW4gYSAmJiAoaSA9IGEuZ2V0KGUsICEwLCBuKSksIHZvaWQgMCA9PT0gaSAmJiAoaSA9IF9lKGUsIHQsIHIpKSwgXCJub3JtYWxcIiA9PT0gaSAmJiB0IGluIEtlICYmIChpID0gS2VbdF0pLCBcIlwiID09PSBuIHx8IG4gPyAobyA9IHBhcnNlRmxvYXQoaSksICEwID09PSBuIHx8IGlzRmluaXRlKG8pID8gbyB8fCAwIDogaSkgOiBpIH0gfSksIGsuZWFjaChbXCJoZWlnaHRcIiwgXCJ3aWR0aFwiXSwgZnVuY3Rpb24gKGUsIHUpIHsgay5jc3NIb29rc1t1XSA9IHsgZ2V0OiBmdW5jdGlvbiAoZSwgdCwgbikgeyBpZiAodCkgcmV0dXJuICFZZS50ZXN0KGsuY3NzKGUsIFwiZGlzcGxheVwiKSkgfHwgZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCAmJiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoID8gdHQoZSwgdSwgbikgOiB1ZShlLCBKZSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdHQoZSwgdSwgbikgfSkgfSwgc2V0OiBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciwgaSA9IEZlKGUpLCBvID0gIXkuc2Nyb2xsYm94U2l6ZSgpICYmIFwiYWJzb2x1dGVcIiA9PT0gaS5wb3NpdGlvbiwgYSA9IChvIHx8IG4pICYmIFwiYm9yZGVyLWJveFwiID09PSBrLmNzcyhlLCBcImJveFNpemluZ1wiLCAhMSwgaSksIHMgPSBuID8gZXQoZSwgdSwgbiwgYSwgaSkgOiAwOyByZXR1cm4gYSAmJiBvICYmIChzIC09IE1hdGguY2VpbChlW1wib2Zmc2V0XCIgKyB1WzBdLnRvVXBwZXJDYXNlKCkgKyB1LnNsaWNlKDEpXSAtIHBhcnNlRmxvYXQoaVt1XSkgLSBldChlLCB1LCBcImJvcmRlclwiLCAhMSwgaSkgLSAuNSkpLCBzICYmIChyID0gbmUuZXhlYyh0KSkgJiYgXCJweFwiICE9PSAoclszXSB8fCBcInB4XCIpICYmIChlLnN0eWxlW3VdID0gdCwgdCA9IGsuY3NzKGUsIHUpKSwgWmUoMCwgdCwgcykgfSB9IH0pLCBrLmNzc0hvb2tzLm1hcmdpbkxlZnQgPSB6ZSh5LnJlbGlhYmxlTWFyZ2luTGVmdCwgZnVuY3Rpb24gKGUsIHQpIHsgaWYgKHQpIHJldHVybiAocGFyc2VGbG9hdChfZShlLCBcIm1hcmdpbkxlZnRcIikpIHx8IGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIHVlKGUsIHsgbWFyZ2luTGVmdDogMCB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgfSkpICsgXCJweFwiIH0pLCBrLmVhY2goeyBtYXJnaW46IFwiXCIsIHBhZGRpbmc6IFwiXCIsIGJvcmRlcjogXCJXaWR0aFwiIH0sIGZ1bmN0aW9uIChpLCBvKSB7IGsuY3NzSG9va3NbaSArIG9dID0geyBleHBhbmQ6IGZ1bmN0aW9uIChlKSB7IGZvciAodmFyIHQgPSAwLCBuID0ge30sIHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gZS5zcGxpdChcIiBcIikgOiBbZV07IHQgPCA0OyB0KyspbltpICsgcmVbdF0gKyBvXSA9IHJbdF0gfHwgclt0IC0gMl0gfHwgclswXTsgcmV0dXJuIG4gfSB9LCBcIm1hcmdpblwiICE9PSBpICYmIChrLmNzc0hvb2tzW2kgKyBvXS5zZXQgPSBaZSkgfSksIGsuZm4uZXh0ZW5kKHsgY3NzOiBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gXyh0aGlzLCBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciwgaSwgbyA9IHt9LCBhID0gMDsgaWYgKEFycmF5LmlzQXJyYXkodCkpIHsgZm9yIChyID0gRmUoZSksIGkgPSB0Lmxlbmd0aDsgYSA8IGk7IGErKylvW3RbYV1dID0gay5jc3MoZSwgdFthXSwgITEsIHIpOyByZXR1cm4gbyB9IHJldHVybiB2b2lkIDAgIT09IG4gPyBrLnN0eWxlKGUsIHQsIG4pIDogay5jc3MoZSwgdCkgfSwgZSwgdCwgMSA8IGFyZ3VtZW50cy5sZW5ndGgpIH0gfSksICgoay5Ud2VlbiA9IG50KS5wcm90b3R5cGUgPSB7IGNvbnN0cnVjdG9yOiBudCwgaW5pdDogZnVuY3Rpb24gKGUsIHQsIG4sIHIsIGksIG8pIHsgdGhpcy5lbGVtID0gZSwgdGhpcy5wcm9wID0gbiwgdGhpcy5lYXNpbmcgPSBpIHx8IGsuZWFzaW5nLl9kZWZhdWx0LCB0aGlzLm9wdGlvbnMgPSB0LCB0aGlzLnN0YXJ0ID0gdGhpcy5ub3cgPSB0aGlzLmN1cigpLCB0aGlzLmVuZCA9IHIsIHRoaXMudW5pdCA9IG8gfHwgKGsuY3NzTnVtYmVyW25dID8gXCJcIiA6IFwicHhcIikgfSwgY3VyOiBmdW5jdGlvbiAoKSB7IHZhciBlID0gbnQucHJvcEhvb2tzW3RoaXMucHJvcF07IHJldHVybiBlICYmIGUuZ2V0ID8gZS5nZXQodGhpcykgOiBudC5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpIH0sIHJ1bjogZnVuY3Rpb24gKGUpIHsgdmFyIHQsIG4gPSBudC5wcm9wSG9va3NbdGhpcy5wcm9wXTsgcmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbiA/IHRoaXMucG9zID0gdCA9IGsuZWFzaW5nW3RoaXMuZWFzaW5nXShlLCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBlLCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb24pIDogdGhpcy5wb3MgPSB0ID0gZSwgdGhpcy5ub3cgPSAodGhpcy5lbmQgLSB0aGlzLnN0YXJ0KSAqIHQgKyB0aGlzLnN0YXJ0LCB0aGlzLm9wdGlvbnMuc3RlcCAmJiB0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSwgdGhpcy5ub3csIHRoaXMpLCBuICYmIG4uc2V0ID8gbi5zZXQodGhpcykgOiBudC5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLCB0aGlzIH0gfSkuaW5pdC5wcm90b3R5cGUgPSBudC5wcm90b3R5cGUsIChudC5wcm9wSG9va3MgPSB7IF9kZWZhdWx0OiB7IGdldDogZnVuY3Rpb24gKGUpIHsgdmFyIHQ7IHJldHVybiAxICE9PSBlLmVsZW0ubm9kZVR5cGUgfHwgbnVsbCAhPSBlLmVsZW1bZS5wcm9wXSAmJiBudWxsID09IGUuZWxlbS5zdHlsZVtlLnByb3BdID8gZS5lbGVtW2UucHJvcF0gOiAodCA9IGsuY3NzKGUuZWxlbSwgZS5wcm9wLCBcIlwiKSkgJiYgXCJhdXRvXCIgIT09IHQgPyB0IDogMCB9LCBzZXQ6IGZ1bmN0aW9uIChlKSB7IGsuZnguc3RlcFtlLnByb3BdID8gay5meC5zdGVwW2UucHJvcF0oZSkgOiAxICE9PSBlLmVsZW0ubm9kZVR5cGUgfHwgIWsuY3NzSG9va3NbZS5wcm9wXSAmJiBudWxsID09IGUuZWxlbS5zdHlsZVtHZShlLnByb3ApXSA/IGUuZWxlbVtlLnByb3BdID0gZS5ub3cgOiBrLnN0eWxlKGUuZWxlbSwgZS5wcm9wLCBlLm5vdyArIGUudW5pdCkgfSB9IH0pLnNjcm9sbFRvcCA9IG50LnByb3BIb29rcy5zY3JvbGxMZWZ0ID0geyBzZXQ6IGZ1bmN0aW9uIChlKSB7IGUuZWxlbS5ub2RlVHlwZSAmJiBlLmVsZW0ucGFyZW50Tm9kZSAmJiAoZS5lbGVtW2UucHJvcF0gPSBlLm5vdykgfSB9LCBrLmVhc2luZyA9IHsgbGluZWFyOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSB9LCBzd2luZzogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIC41IC0gTWF0aC5jb3MoZSAqIE1hdGguUEkpIC8gMiB9LCBfZGVmYXVsdDogXCJzd2luZ1wiIH0sIGsuZnggPSBudC5wcm90b3R5cGUuaW5pdCwgay5meC5zdGVwID0ge307IHZhciBydCwgaXQsIG90LCBhdCwgc3QgPSAvXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sIHV0ID0gL3F1ZXVlSG9va3MkLzsgZnVuY3Rpb24gbHQoKSB7IGl0ICYmICghMSA9PT0gRS5oaWRkZW4gJiYgQy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPyBDLnJlcXVlc3RBbmltYXRpb25GcmFtZShsdCkgOiBDLnNldFRpbWVvdXQobHQsIGsuZnguaW50ZXJ2YWwpLCBrLmZ4LnRpY2soKSkgfSBmdW5jdGlvbiBjdCgpIHsgcmV0dXJuIEMuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJ0ID0gdm9pZCAwIH0pLCBydCA9IERhdGUubm93KCkgfSBmdW5jdGlvbiBmdChlLCB0KSB7IHZhciBuLCByID0gMCwgaSA9IHsgaGVpZ2h0OiBlIH07IGZvciAodCA9IHQgPyAxIDogMDsgciA8IDQ7IHIgKz0gMiAtIHQpaVtcIm1hcmdpblwiICsgKG4gPSByZVtyXSldID0gaVtcInBhZGRpbmdcIiArIG5dID0gZTsgcmV0dXJuIHQgJiYgKGkub3BhY2l0eSA9IGkud2lkdGggPSBlKSwgaSB9IGZ1bmN0aW9uIHB0KGUsIHQsIG4pIHsgZm9yICh2YXIgciwgaSA9IChkdC50d2VlbmVyc1t0XSB8fCBbXSkuY29uY2F0KGR0LnR3ZWVuZXJzW1wiKlwiXSksIG8gPSAwLCBhID0gaS5sZW5ndGg7IG8gPCBhOyBvKyspaWYgKHIgPSBpW29dLmNhbGwobiwgdCwgZSkpIHJldHVybiByIH0gZnVuY3Rpb24gZHQobywgZSwgdCkgeyB2YXIgbiwgYSwgciA9IDAsIGkgPSBkdC5wcmVmaWx0ZXJzLmxlbmd0aCwgcyA9IGsuRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24gKCkgeyBkZWxldGUgdS5lbGVtIH0pLCB1ID0gZnVuY3Rpb24gKCkgeyBpZiAoYSkgcmV0dXJuICExOyBmb3IgKHZhciBlID0gcnQgfHwgY3QoKSwgdCA9IE1hdGgubWF4KDAsIGwuc3RhcnRUaW1lICsgbC5kdXJhdGlvbiAtIGUpLCBuID0gMSAtICh0IC8gbC5kdXJhdGlvbiB8fCAwKSwgciA9IDAsIGkgPSBsLnR3ZWVucy5sZW5ndGg7IHIgPCBpOyByKyspbC50d2VlbnNbcl0ucnVuKG4pOyByZXR1cm4gcy5ub3RpZnlXaXRoKG8sIFtsLCBuLCB0XSksIG4gPCAxICYmIGkgPyB0IDogKGkgfHwgcy5ub3RpZnlXaXRoKG8sIFtsLCAxLCAwXSksIHMucmVzb2x2ZVdpdGgobywgW2xdKSwgITEpIH0sIGwgPSBzLnByb21pc2UoeyBlbGVtOiBvLCBwcm9wczogay5leHRlbmQoe30sIGUpLCBvcHRzOiBrLmV4dGVuZCghMCwgeyBzcGVjaWFsRWFzaW5nOiB7fSwgZWFzaW5nOiBrLmVhc2luZy5fZGVmYXVsdCB9LCB0KSwgb3JpZ2luYWxQcm9wZXJ0aWVzOiBlLCBvcmlnaW5hbE9wdGlvbnM6IHQsIHN0YXJ0VGltZTogcnQgfHwgY3QoKSwgZHVyYXRpb246IHQuZHVyYXRpb24sIHR3ZWVuczogW10sIGNyZWF0ZVR3ZWVuOiBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IGsuVHdlZW4obywgbC5vcHRzLCBlLCB0LCBsLm9wdHMuc3BlY2lhbEVhc2luZ1tlXSB8fCBsLm9wdHMuZWFzaW5nKTsgcmV0dXJuIGwudHdlZW5zLnB1c2gobiksIG4gfSwgc3RvcDogZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSAwLCBuID0gZSA/IGwudHdlZW5zLmxlbmd0aCA6IDA7IGlmIChhKSByZXR1cm4gdGhpczsgZm9yIChhID0gITA7IHQgPCBuOyB0KyspbC50d2VlbnNbdF0ucnVuKDEpOyByZXR1cm4gZSA/IChzLm5vdGlmeVdpdGgobywgW2wsIDEsIDBdKSwgcy5yZXNvbHZlV2l0aChvLCBbbCwgZV0pKSA6IHMucmVqZWN0V2l0aChvLCBbbCwgZV0pLCB0aGlzIH0gfSksIGMgPSBsLnByb3BzOyBmb3IgKCFmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiwgciwgaSwgbywgYTsgZm9yIChuIGluIGUpIGlmIChpID0gdFtyID0gVihuKV0sIG8gPSBlW25dLCBBcnJheS5pc0FycmF5KG8pICYmIChpID0gb1sxXSwgbyA9IGVbbl0gPSBvWzBdKSwgbiAhPT0gciAmJiAoZVtyXSA9IG8sIGRlbGV0ZSBlW25dKSwgKGEgPSBrLmNzc0hvb2tzW3JdKSAmJiBcImV4cGFuZFwiIGluIGEpIGZvciAobiBpbiBvID0gYS5leHBhbmQobyksIGRlbGV0ZSBlW3JdLCBvKSBuIGluIGUgfHwgKGVbbl0gPSBvW25dLCB0W25dID0gaSk7IGVsc2UgdFtyXSA9IGkgfShjLCBsLm9wdHMuc3BlY2lhbEVhc2luZyk7IHIgPCBpOyByKyspaWYgKG4gPSBkdC5wcmVmaWx0ZXJzW3JdLmNhbGwobCwgbywgYywgbC5vcHRzKSkgcmV0dXJuIG0obi5zdG9wKSAmJiAoay5fcXVldWVIb29rcyhsLmVsZW0sIGwub3B0cy5xdWV1ZSkuc3RvcCA9IG4uc3RvcC5iaW5kKG4pKSwgbjsgcmV0dXJuIGsubWFwKGMsIHB0LCBsKSwgbShsLm9wdHMuc3RhcnQpICYmIGwub3B0cy5zdGFydC5jYWxsKG8sIGwpLCBsLnByb2dyZXNzKGwub3B0cy5wcm9ncmVzcykuZG9uZShsLm9wdHMuZG9uZSwgbC5vcHRzLmNvbXBsZXRlKS5mYWlsKGwub3B0cy5mYWlsKS5hbHdheXMobC5vcHRzLmFsd2F5cyksIGsuZngudGltZXIoay5leHRlbmQodSwgeyBlbGVtOiBvLCBhbmltOiBsLCBxdWV1ZTogbC5vcHRzLnF1ZXVlIH0pKSwgbCB9IGsuQW5pbWF0aW9uID0gay5leHRlbmQoZHQsIHsgdHdlZW5lcnM6IHsgXCIqXCI6IFtmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IHRoaXMuY3JlYXRlVHdlZW4oZSwgdCk7IHJldHVybiBsZShuLmVsZW0sIGUsIG5lLmV4ZWModCksIG4pLCBuIH1dIH0sIHR3ZWVuZXI6IGZ1bmN0aW9uIChlLCB0KSB7IG0oZSkgPyAodCA9IGUsIGUgPSBbXCIqXCJdKSA6IGUgPSBlLm1hdGNoKFIpOyBmb3IgKHZhciBuLCByID0gMCwgaSA9IGUubGVuZ3RoOyByIDwgaTsgcisrKW4gPSBlW3JdLCBkdC50d2VlbmVyc1tuXSA9IGR0LnR3ZWVuZXJzW25dIHx8IFtdLCBkdC50d2VlbmVyc1tuXS51bnNoaWZ0KHQpIH0sIHByZWZpbHRlcnM6IFtmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciwgaSwgbywgYSwgcywgdSwgbCwgYywgZiA9IFwid2lkdGhcIiBpbiB0IHx8IFwiaGVpZ2h0XCIgaW4gdCwgcCA9IHRoaXMsIGQgPSB7fSwgaCA9IGUuc3R5bGUsIGcgPSBlLm5vZGVUeXBlICYmIHNlKGUpLCB2ID0gUS5nZXQoZSwgXCJmeHNob3dcIik7IGZvciAociBpbiBuLnF1ZXVlIHx8IChudWxsID09IChhID0gay5fcXVldWVIb29rcyhlLCBcImZ4XCIpKS51bnF1ZXVlZCAmJiAoYS51bnF1ZXVlZCA9IDAsIHMgPSBhLmVtcHR5LmZpcmUsIGEuZW1wdHkuZmlyZSA9IGZ1bmN0aW9uICgpIHsgYS51bnF1ZXVlZCB8fCBzKCkgfSksIGEudW5xdWV1ZWQrKyAsIHAuYWx3YXlzKGZ1bmN0aW9uICgpIHsgcC5hbHdheXMoZnVuY3Rpb24gKCkgeyBhLnVucXVldWVkLS0gLCBrLnF1ZXVlKGUsIFwiZnhcIikubGVuZ3RoIHx8IGEuZW1wdHkuZmlyZSgpIH0pIH0pKSwgdCkgaWYgKGkgPSB0W3JdLCBzdC50ZXN0KGkpKSB7IGlmIChkZWxldGUgdFtyXSwgbyA9IG8gfHwgXCJ0b2dnbGVcIiA9PT0gaSwgaSA9PT0gKGcgPyBcImhpZGVcIiA6IFwic2hvd1wiKSkgeyBpZiAoXCJzaG93XCIgIT09IGkgfHwgIXYgfHwgdm9pZCAwID09PSB2W3JdKSBjb250aW51ZTsgZyA9ICEwIH0gZFtyXSA9IHYgJiYgdltyXSB8fCBrLnN0eWxlKGUsIHIpIH0gaWYgKCh1ID0gIWsuaXNFbXB0eU9iamVjdCh0KSkgfHwgIWsuaXNFbXB0eU9iamVjdChkKSkgZm9yIChyIGluIGYgJiYgMSA9PT0gZS5ub2RlVHlwZSAmJiAobi5vdmVyZmxvdyA9IFtoLm92ZXJmbG93LCBoLm92ZXJmbG93WCwgaC5vdmVyZmxvd1ldLCBudWxsID09IChsID0gdiAmJiB2LmRpc3BsYXkpICYmIChsID0gUS5nZXQoZSwgXCJkaXNwbGF5XCIpKSwgXCJub25lXCIgPT09IChjID0gay5jc3MoZSwgXCJkaXNwbGF5XCIpKSAmJiAobCA/IGMgPSBsIDogKGZlKFtlXSwgITApLCBsID0gZS5zdHlsZS5kaXNwbGF5IHx8IGwsIGMgPSBrLmNzcyhlLCBcImRpc3BsYXlcIiksIGZlKFtlXSkpKSwgKFwiaW5saW5lXCIgPT09IGMgfHwgXCJpbmxpbmUtYmxvY2tcIiA9PT0gYyAmJiBudWxsICE9IGwpICYmIFwibm9uZVwiID09PSBrLmNzcyhlLCBcImZsb2F0XCIpICYmICh1IHx8IChwLmRvbmUoZnVuY3Rpb24gKCkgeyBoLmRpc3BsYXkgPSBsIH0pLCBudWxsID09IGwgJiYgKGMgPSBoLmRpc3BsYXksIGwgPSBcIm5vbmVcIiA9PT0gYyA/IFwiXCIgOiBjKSksIGguZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCIpKSwgbi5vdmVyZmxvdyAmJiAoaC5vdmVyZmxvdyA9IFwiaGlkZGVuXCIsIHAuYWx3YXlzKGZ1bmN0aW9uICgpIHsgaC5vdmVyZmxvdyA9IG4ub3ZlcmZsb3dbMF0sIGgub3ZlcmZsb3dYID0gbi5vdmVyZmxvd1sxXSwgaC5vdmVyZmxvd1kgPSBuLm92ZXJmbG93WzJdIH0pKSwgdSA9ICExLCBkKSB1IHx8ICh2ID8gXCJoaWRkZW5cIiBpbiB2ICYmIChnID0gdi5oaWRkZW4pIDogdiA9IFEuYWNjZXNzKGUsIFwiZnhzaG93XCIsIHsgZGlzcGxheTogbCB9KSwgbyAmJiAodi5oaWRkZW4gPSAhZyksIGcgJiYgZmUoW2VdLCAhMCksIHAuZG9uZShmdW5jdGlvbiAoKSB7IGZvciAociBpbiBnIHx8IGZlKFtlXSksIFEucmVtb3ZlKGUsIFwiZnhzaG93XCIpLCBkKSBrLnN0eWxlKGUsIHIsIGRbcl0pIH0pKSwgdSA9IHB0KGcgPyB2W3JdIDogMCwgciwgcCksIHIgaW4gdiB8fCAodltyXSA9IHUuc3RhcnQsIGcgJiYgKHUuZW5kID0gdS5zdGFydCwgdS5zdGFydCA9IDApKSB9XSwgcHJlZmlsdGVyOiBmdW5jdGlvbiAoZSwgdCkgeyB0ID8gZHQucHJlZmlsdGVycy51bnNoaWZ0KGUpIDogZHQucHJlZmlsdGVycy5wdXNoKGUpIH0gfSksIGsuc3BlZWQgPSBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciA9IGUgJiYgXCJvYmplY3RcIiA9PSB0eXBlb2YgZSA/IGsuZXh0ZW5kKHt9LCBlKSA6IHsgY29tcGxldGU6IG4gfHwgIW4gJiYgdCB8fCBtKGUpICYmIGUsIGR1cmF0aW9uOiBlLCBlYXNpbmc6IG4gJiYgdCB8fCB0ICYmICFtKHQpICYmIHQgfTsgcmV0dXJuIGsuZngub2ZmID8gci5kdXJhdGlvbiA9IDAgOiBcIm51bWJlclwiICE9IHR5cGVvZiByLmR1cmF0aW9uICYmIChyLmR1cmF0aW9uIGluIGsuZnguc3BlZWRzID8gci5kdXJhdGlvbiA9IGsuZnguc3BlZWRzW3IuZHVyYXRpb25dIDogci5kdXJhdGlvbiA9IGsuZnguc3BlZWRzLl9kZWZhdWx0KSwgbnVsbCAhPSByLnF1ZXVlICYmICEwICE9PSByLnF1ZXVlIHx8IChyLnF1ZXVlID0gXCJmeFwiKSwgci5vbGQgPSByLmNvbXBsZXRlLCByLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgeyBtKHIub2xkKSAmJiByLm9sZC5jYWxsKHRoaXMpLCByLnF1ZXVlICYmIGsuZGVxdWV1ZSh0aGlzLCByLnF1ZXVlKSB9LCByIH0sIGsuZm4uZXh0ZW5kKHsgZmFkZVRvOiBmdW5jdGlvbiAoZSwgdCwgbiwgcikgeyByZXR1cm4gdGhpcy5maWx0ZXIoc2UpLmNzcyhcIm9wYWNpdHlcIiwgMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoeyBvcGFjaXR5OiB0IH0sIGUsIG4sIHIpIH0sIGFuaW1hdGU6IGZ1bmN0aW9uICh0LCBlLCBuLCByKSB7IHZhciBpID0gay5pc0VtcHR5T2JqZWN0KHQpLCBvID0gay5zcGVlZChlLCBuLCByKSwgYSA9IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSBkdCh0aGlzLCBrLmV4dGVuZCh7fSwgdCksIG8pOyAoaSB8fCBRLmdldCh0aGlzLCBcImZpbmlzaFwiKSkgJiYgZS5zdG9wKCEwKSB9OyByZXR1cm4gYS5maW5pc2ggPSBhLCBpIHx8ICExID09PSBvLnF1ZXVlID8gdGhpcy5lYWNoKGEpIDogdGhpcy5xdWV1ZShvLnF1ZXVlLCBhKSB9LCBzdG9wOiBmdW5jdGlvbiAoaSwgZSwgbykgeyB2YXIgYSA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gZS5zdG9wOyBkZWxldGUgZS5zdG9wLCB0KG8pIH07IHJldHVybiBcInN0cmluZ1wiICE9IHR5cGVvZiBpICYmIChvID0gZSwgZSA9IGksIGkgPSB2b2lkIDApLCBlICYmICExICE9PSBpICYmIHRoaXMucXVldWUoaSB8fCBcImZ4XCIsIFtdKSwgdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsgdmFyIGUgPSAhMCwgdCA9IG51bGwgIT0gaSAmJiBpICsgXCJxdWV1ZUhvb2tzXCIsIG4gPSBrLnRpbWVycywgciA9IFEuZ2V0KHRoaXMpOyBpZiAodCkgclt0XSAmJiByW3RdLnN0b3AgJiYgYShyW3RdKTsgZWxzZSBmb3IgKHQgaW4gcikgclt0XSAmJiByW3RdLnN0b3AgJiYgdXQudGVzdCh0KSAmJiBhKHJbdF0pOyBmb3IgKHQgPSBuLmxlbmd0aDsgdC0tOyluW3RdLmVsZW0gIT09IHRoaXMgfHwgbnVsbCAhPSBpICYmIG5bdF0ucXVldWUgIT09IGkgfHwgKG5bdF0uYW5pbS5zdG9wKG8pLCBlID0gITEsIG4uc3BsaWNlKHQsIDEpKTsgIWUgJiYgbyB8fCBrLmRlcXVldWUodGhpcywgaSkgfSkgfSwgZmluaXNoOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gITEgIT09IGEgJiYgKGEgPSBhIHx8IFwiZnhcIiksIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IHZhciBlLCB0ID0gUS5nZXQodGhpcyksIG4gPSB0W2EgKyBcInF1ZXVlXCJdLCByID0gdFthICsgXCJxdWV1ZUhvb2tzXCJdLCBpID0gay50aW1lcnMsIG8gPSBuID8gbi5sZW5ndGggOiAwOyBmb3IgKHQuZmluaXNoID0gITAsIGsucXVldWUodGhpcywgYSwgW10pLCByICYmIHIuc3RvcCAmJiByLnN0b3AuY2FsbCh0aGlzLCAhMCksIGUgPSBpLmxlbmd0aDsgZS0tOylpW2VdLmVsZW0gPT09IHRoaXMgJiYgaVtlXS5xdWV1ZSA9PT0gYSAmJiAoaVtlXS5hbmltLnN0b3AoITApLCBpLnNwbGljZShlLCAxKSk7IGZvciAoZSA9IDA7IGUgPCBvOyBlKyspbltlXSAmJiBuW2VdLmZpbmlzaCAmJiBuW2VdLmZpbmlzaC5jYWxsKHRoaXMpOyBkZWxldGUgdC5maW5pc2ggfSkgfSB9KSwgay5lYWNoKFtcInRvZ2dsZVwiLCBcInNob3dcIiwgXCJoaWRlXCJdLCBmdW5jdGlvbiAoZSwgcikgeyB2YXIgaSA9IGsuZm5bcl07IGsuZm5bcl0gPSBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gbnVsbCA9PSBlIHx8IFwiYm9vbGVhblwiID09IHR5cGVvZiBlID8gaS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogdGhpcy5hbmltYXRlKGZ0KHIsICEwKSwgZSwgdCwgbikgfSB9KSwgay5lYWNoKHsgc2xpZGVEb3duOiBmdChcInNob3dcIiksIHNsaWRlVXA6IGZ0KFwiaGlkZVwiKSwgc2xpZGVUb2dnbGU6IGZ0KFwidG9nZ2xlXCIpLCBmYWRlSW46IHsgb3BhY2l0eTogXCJzaG93XCIgfSwgZmFkZU91dDogeyBvcGFjaXR5OiBcImhpZGVcIiB9LCBmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfSB9LCBmdW5jdGlvbiAoZSwgcikgeyBrLmZuW2VdID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsgcmV0dXJuIHRoaXMuYW5pbWF0ZShyLCBlLCB0LCBuKSB9IH0pLCBrLnRpbWVycyA9IFtdLCBrLmZ4LnRpY2sgPSBmdW5jdGlvbiAoKSB7IHZhciBlLCB0ID0gMCwgbiA9IGsudGltZXJzOyBmb3IgKHJ0ID0gRGF0ZS5ub3coKTsgdCA8IG4ubGVuZ3RoOyB0KyspKGUgPSBuW3RdKSgpIHx8IG5bdF0gIT09IGUgfHwgbi5zcGxpY2UodC0tLCAxKTsgbi5sZW5ndGggfHwgay5meC5zdG9wKCksIHJ0ID0gdm9pZCAwIH0sIGsuZngudGltZXIgPSBmdW5jdGlvbiAoZSkgeyBrLnRpbWVycy5wdXNoKGUpLCBrLmZ4LnN0YXJ0KCkgfSwgay5meC5pbnRlcnZhbCA9IDEzLCBrLmZ4LnN0YXJ0ID0gZnVuY3Rpb24gKCkgeyBpdCB8fCAoaXQgPSAhMCwgbHQoKSkgfSwgay5meC5zdG9wID0gZnVuY3Rpb24gKCkgeyBpdCA9IG51bGwgfSwgay5meC5zcGVlZHMgPSB7IHNsb3c6IDYwMCwgZmFzdDogMjAwLCBfZGVmYXVsdDogNDAwIH0sIGsuZm4uZGVsYXkgPSBmdW5jdGlvbiAociwgZSkgeyByZXR1cm4gciA9IGsuZnggJiYgay5meC5zcGVlZHNbcl0gfHwgciwgZSA9IGUgfHwgXCJmeFwiLCB0aGlzLnF1ZXVlKGUsIGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gQy5zZXRUaW1lb3V0KGUsIHIpOyB0LnN0b3AgPSBmdW5jdGlvbiAoKSB7IEMuY2xlYXJUaW1lb3V0KG4pIH0gfSkgfSwgb3QgPSBFLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSwgYXQgPSBFLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIikuYXBwZW5kQ2hpbGQoRS5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKSwgb3QudHlwZSA9IFwiY2hlY2tib3hcIiwgeS5jaGVja09uID0gXCJcIiAhPT0gb3QudmFsdWUsIHkub3B0U2VsZWN0ZWQgPSBhdC5zZWxlY3RlZCwgKG90ID0gRS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIikpLnZhbHVlID0gXCJ0XCIsIG90LnR5cGUgPSBcInJhZGlvXCIsIHkucmFkaW9WYWx1ZSA9IFwidFwiID09PSBvdC52YWx1ZTsgdmFyIGh0LCBndCA9IGsuZXhwci5hdHRySGFuZGxlOyBrLmZuLmV4dGVuZCh7IGF0dHI6IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiBfKHRoaXMsIGsuYXR0ciwgZSwgdCwgMSA8IGFyZ3VtZW50cy5sZW5ndGgpIH0sIHJlbW92ZUF0dHI6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgeyBrLnJlbW92ZUF0dHIodGhpcywgZSkgfSkgfSB9KSwgay5leHRlbmQoeyBhdHRyOiBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciwgaSwgbyA9IGUubm9kZVR5cGU7IGlmICgzICE9PSBvICYmIDggIT09IG8gJiYgMiAhPT0gbykgcmV0dXJuIFwidW5kZWZpbmVkXCIgPT0gdHlwZW9mIGUuZ2V0QXR0cmlidXRlID8gay5wcm9wKGUsIHQsIG4pIDogKDEgPT09IG8gJiYgay5pc1hNTERvYyhlKSB8fCAoaSA9IGsuYXR0ckhvb2tzW3QudG9Mb3dlckNhc2UoKV0gfHwgKGsuZXhwci5tYXRjaC5ib29sLnRlc3QodCkgPyBodCA6IHZvaWQgMCkpLCB2b2lkIDAgIT09IG4gPyBudWxsID09PSBuID8gdm9pZCBrLnJlbW92ZUF0dHIoZSwgdCkgOiBpICYmIFwic2V0XCIgaW4gaSAmJiB2b2lkIDAgIT09IChyID0gaS5zZXQoZSwgbiwgdCkpID8gciA6IChlLnNldEF0dHJpYnV0ZSh0LCBuICsgXCJcIiksIG4pIDogaSAmJiBcImdldFwiIGluIGkgJiYgbnVsbCAhPT0gKHIgPSBpLmdldChlLCB0KSkgPyByIDogbnVsbCA9PSAociA9IGsuZmluZC5hdHRyKGUsIHQpKSA/IHZvaWQgMCA6IHIpIH0sIGF0dHJIb29rczogeyB0eXBlOiB7IHNldDogZnVuY3Rpb24gKGUsIHQpIHsgaWYgKCF5LnJhZGlvVmFsdWUgJiYgXCJyYWRpb1wiID09PSB0ICYmIEEoZSwgXCJpbnB1dFwiKSkgeyB2YXIgbiA9IGUudmFsdWU7IHJldHVybiBlLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgdCksIG4gJiYgKGUudmFsdWUgPSBuKSwgdCB9IH0gfSB9LCByZW1vdmVBdHRyOiBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiwgciA9IDAsIGkgPSB0ICYmIHQubWF0Y2goUik7IGlmIChpICYmIDEgPT09IGUubm9kZVR5cGUpIHdoaWxlIChuID0gaVtyKytdKSBlLnJlbW92ZUF0dHJpYnV0ZShuKSB9IH0pLCBodCA9IHsgc2V0OiBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gITEgPT09IHQgPyBrLnJlbW92ZUF0dHIoZSwgbikgOiBlLnNldEF0dHJpYnV0ZShuLCBuKSwgbiB9IH0sIGsuZWFjaChrLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1xcdysvZyksIGZ1bmN0aW9uIChlLCB0KSB7IHZhciBhID0gZ3RbdF0gfHwgay5maW5kLmF0dHI7IGd0W3RdID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsgdmFyIHIsIGksIG8gPSB0LnRvTG93ZXJDYXNlKCk7IHJldHVybiBuIHx8IChpID0gZ3Rbb10sIGd0W29dID0gciwgciA9IG51bGwgIT0gYShlLCB0LCBuKSA/IG8gOiBudWxsLCBndFtvXSA9IGkpLCByIH0gfSk7IHZhciB2dCA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksIHl0ID0gL14oPzphfGFyZWEpJC9pOyBmdW5jdGlvbiBtdChlKSB7IHJldHVybiAoZS5tYXRjaChSKSB8fCBbXSkuam9pbihcIiBcIikgfSBmdW5jdGlvbiB4dChlKSB7IHJldHVybiBlLmdldEF0dHJpYnV0ZSAmJiBlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpIHx8IFwiXCIgfSBmdW5jdGlvbiBidChlKSB7IHJldHVybiBBcnJheS5pc0FycmF5KGUpID8gZSA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgZS5tYXRjaChSKSB8fCBbXSB9IGsuZm4uZXh0ZW5kKHsgcHJvcDogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIF8odGhpcywgay5wcm9wLCBlLCB0LCAxIDwgYXJndW1lbnRzLmxlbmd0aCkgfSwgcmVtb3ZlUHJvcDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IGRlbGV0ZSB0aGlzW2sucHJvcEZpeFtlXSB8fCBlXSB9KSB9IH0pLCBrLmV4dGVuZCh7IHByb3A6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciByLCBpLCBvID0gZS5ub2RlVHlwZTsgaWYgKDMgIT09IG8gJiYgOCAhPT0gbyAmJiAyICE9PSBvKSByZXR1cm4gMSA9PT0gbyAmJiBrLmlzWE1MRG9jKGUpIHx8ICh0ID0gay5wcm9wRml4W3RdIHx8IHQsIGkgPSBrLnByb3BIb29rc1t0XSksIHZvaWQgMCAhPT0gbiA/IGkgJiYgXCJzZXRcIiBpbiBpICYmIHZvaWQgMCAhPT0gKHIgPSBpLnNldChlLCBuLCB0KSkgPyByIDogZVt0XSA9IG4gOiBpICYmIFwiZ2V0XCIgaW4gaSAmJiBudWxsICE9PSAociA9IGkuZ2V0KGUsIHQpKSA/IHIgOiBlW3RdIH0sIHByb3BIb29rczogeyB0YWJJbmRleDogeyBnZXQ6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gay5maW5kLmF0dHIoZSwgXCJ0YWJpbmRleFwiKTsgcmV0dXJuIHQgPyBwYXJzZUludCh0LCAxMCkgOiB2dC50ZXN0KGUubm9kZU5hbWUpIHx8IHl0LnRlc3QoZS5ub2RlTmFtZSkgJiYgZS5ocmVmID8gMCA6IC0xIH0gfSB9LCBwcm9wRml4OiB7IFwiZm9yXCI6IFwiaHRtbEZvclwiLCBcImNsYXNzXCI6IFwiY2xhc3NOYW1lXCIgfSB9KSwgeS5vcHRTZWxlY3RlZCB8fCAoay5wcm9wSG9va3Muc2VsZWN0ZWQgPSB7IGdldDogZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBlLnBhcmVudE5vZGU7IHJldHVybiB0ICYmIHQucGFyZW50Tm9kZSAmJiB0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCwgbnVsbCB9LCBzZXQ6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gZS5wYXJlbnROb2RlOyB0ICYmICh0LnNlbGVjdGVkSW5kZXgsIHQucGFyZW50Tm9kZSAmJiB0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCkgfSB9KSwgay5lYWNoKFtcInRhYkluZGV4XCIsIFwicmVhZE9ubHlcIiwgXCJtYXhMZW5ndGhcIiwgXCJjZWxsU3BhY2luZ1wiLCBcImNlbGxQYWRkaW5nXCIsIFwicm93U3BhblwiLCBcImNvbFNwYW5cIiwgXCJ1c2VNYXBcIiwgXCJmcmFtZUJvcmRlclwiLCBcImNvbnRlbnRFZGl0YWJsZVwiXSwgZnVuY3Rpb24gKCkgeyBrLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXSA9IHRoaXMgfSksIGsuZm4uZXh0ZW5kKHsgYWRkQ2xhc3M6IGZ1bmN0aW9uICh0KSB7IHZhciBlLCBuLCByLCBpLCBvLCBhLCBzLCB1ID0gMDsgaWYgKG0odCkpIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKGUpIHsgayh0aGlzKS5hZGRDbGFzcyh0LmNhbGwodGhpcywgZSwgeHQodGhpcykpKSB9KTsgaWYgKChlID0gYnQodCkpLmxlbmd0aCkgd2hpbGUgKG4gPSB0aGlzW3UrK10pIGlmIChpID0geHQobiksIHIgPSAxID09PSBuLm5vZGVUeXBlICYmIFwiIFwiICsgbXQoaSkgKyBcIiBcIikgeyBhID0gMDsgd2hpbGUgKG8gPSBlW2ErK10pIHIuaW5kZXhPZihcIiBcIiArIG8gKyBcIiBcIikgPCAwICYmIChyICs9IG8gKyBcIiBcIik7IGkgIT09IChzID0gbXQocikpICYmIG4uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgcykgfSByZXR1cm4gdGhpcyB9LCByZW1vdmVDbGFzczogZnVuY3Rpb24gKHQpIHsgdmFyIGUsIG4sIHIsIGksIG8sIGEsIHMsIHUgPSAwOyBpZiAobSh0KSkgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoZSkgeyBrKHRoaXMpLnJlbW92ZUNsYXNzKHQuY2FsbCh0aGlzLCBlLCB4dCh0aGlzKSkpIH0pOyBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aGlzLmF0dHIoXCJjbGFzc1wiLCBcIlwiKTsgaWYgKChlID0gYnQodCkpLmxlbmd0aCkgd2hpbGUgKG4gPSB0aGlzW3UrK10pIGlmIChpID0geHQobiksIHIgPSAxID09PSBuLm5vZGVUeXBlICYmIFwiIFwiICsgbXQoaSkgKyBcIiBcIikgeyBhID0gMDsgd2hpbGUgKG8gPSBlW2ErK10pIHdoaWxlICgtMSA8IHIuaW5kZXhPZihcIiBcIiArIG8gKyBcIiBcIikpIHIgPSByLnJlcGxhY2UoXCIgXCIgKyBvICsgXCIgXCIsIFwiIFwiKTsgaSAhPT0gKHMgPSBtdChyKSkgJiYgbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBzKSB9IHJldHVybiB0aGlzIH0sIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbiAoaSwgdCkgeyB2YXIgbyA9IHR5cGVvZiBpLCBhID0gXCJzdHJpbmdcIiA9PT0gbyB8fCBBcnJheS5pc0FycmF5KGkpOyByZXR1cm4gXCJib29sZWFuXCIgPT0gdHlwZW9mIHQgJiYgYSA/IHQgPyB0aGlzLmFkZENsYXNzKGkpIDogdGhpcy5yZW1vdmVDbGFzcyhpKSA6IG0oaSkgPyB0aGlzLmVhY2goZnVuY3Rpb24gKGUpIHsgayh0aGlzKS50b2dnbGVDbGFzcyhpLmNhbGwodGhpcywgZSwgeHQodGhpcyksIHQpLCB0KSB9KSA6IHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IHZhciBlLCB0LCBuLCByOyBpZiAoYSkgeyB0ID0gMCwgbiA9IGsodGhpcyksIHIgPSBidChpKTsgd2hpbGUgKGUgPSByW3QrK10pIG4uaGFzQ2xhc3MoZSkgPyBuLnJlbW92ZUNsYXNzKGUpIDogbi5hZGRDbGFzcyhlKSB9IGVsc2Ugdm9pZCAwICE9PSBpICYmIFwiYm9vbGVhblwiICE9PSBvIHx8ICgoZSA9IHh0KHRoaXMpKSAmJiBRLnNldCh0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgZSksIHRoaXMuc2V0QXR0cmlidXRlICYmIHRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgZSB8fCAhMSA9PT0gaSA/IFwiXCIgOiBRLmdldCh0aGlzLCBcIl9fY2xhc3NOYW1lX19cIikgfHwgXCJcIikpIH0pIH0sIGhhc0NsYXNzOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiwgciA9IDA7IHQgPSBcIiBcIiArIGUgKyBcIiBcIjsgd2hpbGUgKG4gPSB0aGlzW3IrK10pIGlmICgxID09PSBuLm5vZGVUeXBlICYmIC0xIDwgKFwiIFwiICsgbXQoeHQobikpICsgXCIgXCIpLmluZGV4T2YodCkpIHJldHVybiAhMDsgcmV0dXJuICExIH0gfSk7IHZhciB3dCA9IC9cXHIvZzsgay5mbi5leHRlbmQoeyB2YWw6IGZ1bmN0aW9uIChuKSB7IHZhciByLCBlLCBpLCB0ID0gdGhpc1swXTsgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoaSA9IG0obiksIHRoaXMuZWFjaChmdW5jdGlvbiAoZSkgeyB2YXIgdDsgMSA9PT0gdGhpcy5ub2RlVHlwZSAmJiAobnVsbCA9PSAodCA9IGkgPyBuLmNhbGwodGhpcywgZSwgayh0aGlzKS52YWwoKSkgOiBuKSA/IHQgPSBcIlwiIDogXCJudW1iZXJcIiA9PSB0eXBlb2YgdCA/IHQgKz0gXCJcIiA6IEFycmF5LmlzQXJyYXkodCkgJiYgKHQgPSBrLm1hcCh0LCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gbnVsbCA9PSBlID8gXCJcIiA6IGUgKyBcIlwiIH0pKSwgKHIgPSBrLnZhbEhvb2tzW3RoaXMudHlwZV0gfHwgay52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSAmJiBcInNldFwiIGluIHIgJiYgdm9pZCAwICE9PSByLnNldCh0aGlzLCB0LCBcInZhbHVlXCIpIHx8ICh0aGlzLnZhbHVlID0gdCkpIH0pKSA6IHQgPyAociA9IGsudmFsSG9va3NbdC50eXBlXSB8fCBrLnZhbEhvb2tzW3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pICYmIFwiZ2V0XCIgaW4gciAmJiB2b2lkIDAgIT09IChlID0gci5nZXQodCwgXCJ2YWx1ZVwiKSkgPyBlIDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgKGUgPSB0LnZhbHVlKSA/IGUucmVwbGFjZSh3dCwgXCJcIikgOiBudWxsID09IGUgPyBcIlwiIDogZSA6IHZvaWQgMCB9IH0pLCBrLmV4dGVuZCh7IHZhbEhvb2tzOiB7IG9wdGlvbjogeyBnZXQ6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gay5maW5kLmF0dHIoZSwgXCJ2YWx1ZVwiKTsgcmV0dXJuIG51bGwgIT0gdCA/IHQgOiBtdChrLnRleHQoZSkpIH0gfSwgc2VsZWN0OiB7IGdldDogZnVuY3Rpb24gKGUpIHsgdmFyIHQsIG4sIHIsIGkgPSBlLm9wdGlvbnMsIG8gPSBlLnNlbGVjdGVkSW5kZXgsIGEgPSBcInNlbGVjdC1vbmVcIiA9PT0gZS50eXBlLCBzID0gYSA/IG51bGwgOiBbXSwgdSA9IGEgPyBvICsgMSA6IGkubGVuZ3RoOyBmb3IgKHIgPSBvIDwgMCA/IHUgOiBhID8gbyA6IDA7IHIgPCB1OyByKyspaWYgKCgobiA9IGlbcl0pLnNlbGVjdGVkIHx8IHIgPT09IG8pICYmICFuLmRpc2FibGVkICYmICghbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8ICFBKG4ucGFyZW50Tm9kZSwgXCJvcHRncm91cFwiKSkpIHsgaWYgKHQgPSBrKG4pLnZhbCgpLCBhKSByZXR1cm4gdDsgcy5wdXNoKHQpIH0gcmV0dXJuIHMgfSwgc2V0OiBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiwgciwgaSA9IGUub3B0aW9ucywgbyA9IGsubWFrZUFycmF5KHQpLCBhID0gaS5sZW5ndGg7IHdoaWxlIChhLS0pICgociA9IGlbYV0pLnNlbGVjdGVkID0gLTEgPCBrLmluQXJyYXkoay52YWxIb29rcy5vcHRpb24uZ2V0KHIpLCBvKSkgJiYgKG4gPSAhMCk7IHJldHVybiBuIHx8IChlLnNlbGVjdGVkSW5kZXggPSAtMSksIG8gfSB9IH0gfSksIGsuZWFjaChbXCJyYWRpb1wiLCBcImNoZWNrYm94XCJdLCBmdW5jdGlvbiAoKSB7IGsudmFsSG9va3NbdGhpc10gPSB7IHNldDogZnVuY3Rpb24gKGUsIHQpIHsgaWYgKEFycmF5LmlzQXJyYXkodCkpIHJldHVybiBlLmNoZWNrZWQgPSAtMSA8IGsuaW5BcnJheShrKGUpLnZhbCgpLCB0KSB9IH0sIHkuY2hlY2tPbiB8fCAoay52YWxIb29rc1t0aGlzXS5nZXQgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gbnVsbCA9PT0gZS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSA/IFwib25cIiA6IGUudmFsdWUgfSkgfSksIHkuZm9jdXNpbiA9IFwib25mb2N1c2luXCIgaW4gQzsgdmFyIFR0ID0gL14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLCBDdCA9IGZ1bmN0aW9uIChlKSB7IGUuc3RvcFByb3BhZ2F0aW9uKCkgfTsgay5leHRlbmQoay5ldmVudCwgeyB0cmlnZ2VyOiBmdW5jdGlvbiAoZSwgdCwgbiwgcikgeyB2YXIgaSwgbywgYSwgcywgdSwgbCwgYywgZiwgcCA9IFtuIHx8IEVdLCBkID0gdi5jYWxsKGUsIFwidHlwZVwiKSA/IGUudHlwZSA6IGUsIGggPSB2LmNhbGwoZSwgXCJuYW1lc3BhY2VcIikgPyBlLm5hbWVzcGFjZS5zcGxpdChcIi5cIikgOiBbXTsgaWYgKG8gPSBmID0gYSA9IG4gPSBuIHx8IEUsIDMgIT09IG4ubm9kZVR5cGUgJiYgOCAhPT0gbi5ub2RlVHlwZSAmJiAhVHQudGVzdChkICsgay5ldmVudC50cmlnZ2VyZWQpICYmICgtMSA8IGQuaW5kZXhPZihcIi5cIikgJiYgKGQgPSAoaCA9IGQuc3BsaXQoXCIuXCIpKS5zaGlmdCgpLCBoLnNvcnQoKSksIHUgPSBkLmluZGV4T2YoXCI6XCIpIDwgMCAmJiBcIm9uXCIgKyBkLCAoZSA9IGVbay5leHBhbmRvXSA/IGUgOiBuZXcgay5FdmVudChkLCBcIm9iamVjdFwiID09IHR5cGVvZiBlICYmIGUpKS5pc1RyaWdnZXIgPSByID8gMiA6IDMsIGUubmFtZXNwYWNlID0gaC5qb2luKFwiLlwiKSwgZS5ybmFtZXNwYWNlID0gZS5uYW1lc3BhY2UgPyBuZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIgKyBoLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKSArIFwiKFxcXFwufCQpXCIpIDogbnVsbCwgZS5yZXN1bHQgPSB2b2lkIDAsIGUudGFyZ2V0IHx8IChlLnRhcmdldCA9IG4pLCB0ID0gbnVsbCA9PSB0ID8gW2VdIDogay5tYWtlQXJyYXkodCwgW2VdKSwgYyA9IGsuZXZlbnQuc3BlY2lhbFtkXSB8fCB7fSwgciB8fCAhYy50cmlnZ2VyIHx8ICExICE9PSBjLnRyaWdnZXIuYXBwbHkobiwgdCkpKSB7IGlmICghciAmJiAhYy5ub0J1YmJsZSAmJiAheChuKSkgeyBmb3IgKHMgPSBjLmRlbGVnYXRlVHlwZSB8fCBkLCBUdC50ZXN0KHMgKyBkKSB8fCAobyA9IG8ucGFyZW50Tm9kZSk7IG87IG8gPSBvLnBhcmVudE5vZGUpcC5wdXNoKG8pLCBhID0gbzsgYSA9PT0gKG4ub3duZXJEb2N1bWVudCB8fCBFKSAmJiBwLnB1c2goYS5kZWZhdWx0VmlldyB8fCBhLnBhcmVudFdpbmRvdyB8fCBDKSB9IGkgPSAwOyB3aGlsZSAoKG8gPSBwW2krK10pICYmICFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpIGYgPSBvLCBlLnR5cGUgPSAxIDwgaSA/IHMgOiBjLmJpbmRUeXBlIHx8IGQsIChsID0gKFEuZ2V0KG8sIFwiZXZlbnRzXCIpIHx8IHt9KVtlLnR5cGVdICYmIFEuZ2V0KG8sIFwiaGFuZGxlXCIpKSAmJiBsLmFwcGx5KG8sIHQpLCAobCA9IHUgJiYgb1t1XSkgJiYgbC5hcHBseSAmJiBHKG8pICYmIChlLnJlc3VsdCA9IGwuYXBwbHkobywgdCksICExID09PSBlLnJlc3VsdCAmJiBlLnByZXZlbnREZWZhdWx0KCkpOyByZXR1cm4gZS50eXBlID0gZCwgciB8fCBlLmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8IGMuX2RlZmF1bHQgJiYgITEgIT09IGMuX2RlZmF1bHQuYXBwbHkocC5wb3AoKSwgdCkgfHwgIUcobikgfHwgdSAmJiBtKG5bZF0pICYmICF4KG4pICYmICgoYSA9IG5bdV0pICYmIChuW3VdID0gbnVsbCksIGsuZXZlbnQudHJpZ2dlcmVkID0gZCwgZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICYmIGYuYWRkRXZlbnRMaXN0ZW5lcihkLCBDdCksIG5bZF0oKSwgZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICYmIGYucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLCBDdCksIGsuZXZlbnQudHJpZ2dlcmVkID0gdm9pZCAwLCBhICYmIChuW3VdID0gYSkpLCBlLnJlc3VsdCB9IH0sIHNpbXVsYXRlOiBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciA9IGsuZXh0ZW5kKG5ldyBrLkV2ZW50LCBuLCB7IHR5cGU6IGUsIGlzU2ltdWxhdGVkOiAhMCB9KTsgay5ldmVudC50cmlnZ2VyKHIsIG51bGwsIHQpIH0gfSksIGsuZm4uZXh0ZW5kKHsgdHJpZ2dlcjogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IGsuZXZlbnQudHJpZ2dlcihlLCB0LCB0aGlzKSB9KSB9LCB0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4gPSB0aGlzWzBdOyBpZiAobikgcmV0dXJuIGsuZXZlbnQudHJpZ2dlcihlLCB0LCBuLCAhMCkgfSB9KSwgeS5mb2N1c2luIHx8IGsuZWFjaCh7IGZvY3VzOiBcImZvY3VzaW5cIiwgYmx1cjogXCJmb2N1c291dFwiIH0sIGZ1bmN0aW9uIChuLCByKSB7IHZhciBpID0gZnVuY3Rpb24gKGUpIHsgay5ldmVudC5zaW11bGF0ZShyLCBlLnRhcmdldCwgay5ldmVudC5maXgoZSkpIH07IGsuZXZlbnQuc3BlY2lhbFtyXSA9IHsgc2V0dXA6IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcywgdCA9IFEuYWNjZXNzKGUsIHIpOyB0IHx8IGUuYWRkRXZlbnRMaXN0ZW5lcihuLCBpLCAhMCksIFEuYWNjZXNzKGUsIHIsICh0IHx8IDApICsgMSkgfSwgdGVhcmRvd246IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcywgdCA9IFEuYWNjZXNzKGUsIHIpIC0gMTsgdCA/IFEuYWNjZXNzKGUsIHIsIHQpIDogKGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihuLCBpLCAhMCksIFEucmVtb3ZlKGUsIHIpKSB9IH0gfSk7IHZhciBFdCA9IEMubG9jYXRpb24sIGt0ID0gRGF0ZS5ub3coKSwgU3QgPSAvXFw/Lzsgay5wYXJzZVhNTCA9IGZ1bmN0aW9uIChlKSB7IHZhciB0OyBpZiAoIWUgfHwgXCJzdHJpbmdcIiAhPSB0eXBlb2YgZSkgcmV0dXJuIG51bGw7IHRyeSB7IHQgPSAobmV3IEMuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoZSwgXCJ0ZXh0L3htbFwiKSB9IGNhdGNoIChlKSB7IHQgPSB2b2lkIDAgfSByZXR1cm4gdCAmJiAhdC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhcnNlcmVycm9yXCIpLmxlbmd0aCB8fCBrLmVycm9yKFwiSW52YWxpZCBYTUw6IFwiICsgZSksIHQgfTsgdmFyIE50ID0gL1xcW1xcXSQvLCBBdCA9IC9cXHI/XFxuL2csIER0ID0gL14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLCBqdCA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTsgZnVuY3Rpb24gcXQobiwgZSwgciwgaSkgeyB2YXIgdDsgaWYgKEFycmF5LmlzQXJyYXkoZSkpIGsuZWFjaChlLCBmdW5jdGlvbiAoZSwgdCkgeyByIHx8IE50LnRlc3QobikgPyBpKG4sIHQpIDogcXQobiArIFwiW1wiICsgKFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgJiYgbnVsbCAhPSB0ID8gZSA6IFwiXCIpICsgXCJdXCIsIHQsIHIsIGkpIH0pOyBlbHNlIGlmIChyIHx8IFwib2JqZWN0XCIgIT09IHcoZSkpIGkobiwgZSk7IGVsc2UgZm9yICh0IGluIGUpIHF0KG4gKyBcIltcIiArIHQgKyBcIl1cIiwgZVt0XSwgciwgaSkgfSBrLnBhcmFtID0gZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4sIHIgPSBbXSwgaSA9IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gbSh0KSA/IHQoKSA6IHQ7IHJbci5sZW5ndGhdID0gZW5jb2RlVVJJQ29tcG9uZW50KGUpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQobnVsbCA9PSBuID8gXCJcIiA6IG4pIH07IGlmIChudWxsID09IGUpIHJldHVybiBcIlwiOyBpZiAoQXJyYXkuaXNBcnJheShlKSB8fCBlLmpxdWVyeSAmJiAhay5pc1BsYWluT2JqZWN0KGUpKSBrLmVhY2goZSwgZnVuY3Rpb24gKCkgeyBpKHRoaXMubmFtZSwgdGhpcy52YWx1ZSkgfSk7IGVsc2UgZm9yIChuIGluIGUpIHF0KG4sIGVbbl0sIHQsIGkpOyByZXR1cm4gci5qb2luKFwiJlwiKSB9LCBrLmZuLmV4dGVuZCh7IHNlcmlhbGl6ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gay5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpIH0sIHNlcmlhbGl6ZUFycmF5OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoKSB7IHZhciBlID0gay5wcm9wKHRoaXMsIFwiZWxlbWVudHNcIik7IHJldHVybiBlID8gay5tYWtlQXJyYXkoZSkgOiB0aGlzIH0pLmZpbHRlcihmdW5jdGlvbiAoKSB7IHZhciBlID0gdGhpcy50eXBlOyByZXR1cm4gdGhpcy5uYW1lICYmICFrKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpICYmIGp0LnRlc3QodGhpcy5ub2RlTmFtZSkgJiYgIUR0LnRlc3QoZSkgJiYgKHRoaXMuY2hlY2tlZCB8fCAhcGUudGVzdChlKSkgfSkubWFwKGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gayh0aGlzKS52YWwoKTsgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiBBcnJheS5pc0FycmF5KG4pID8gay5tYXAobiwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHsgbmFtZTogdC5uYW1lLCB2YWx1ZTogZS5yZXBsYWNlKEF0LCBcIlxcclxcblwiKSB9IH0pIDogeyBuYW1lOiB0Lm5hbWUsIHZhbHVlOiBuLnJlcGxhY2UoQXQsIFwiXFxyXFxuXCIpIH0gfSkuZ2V0KCkgfSB9KTsgdmFyIEx0ID0gLyUyMC9nLCBIdCA9IC8jLiokLywgT3QgPSAvKFs/Jl0pXz1bXiZdKi8sIFB0ID0gL14oLio/KTpbIFxcdF0qKFteXFxyXFxuXSopJC9nbSwgUnQgPSAvXig/OkdFVHxIRUFEKSQvLCBNdCA9IC9eXFwvXFwvLywgSXQgPSB7fSwgV3QgPSB7fSwgJHQgPSBcIiovXCIuY29uY2F0KFwiKlwiKSwgRnQgPSBFLmNyZWF0ZUVsZW1lbnQoXCJhXCIpOyBmdW5jdGlvbiBCdChvKSB7IHJldHVybiBmdW5jdGlvbiAoZSwgdCkgeyBcInN0cmluZ1wiICE9IHR5cGVvZiBlICYmICh0ID0gZSwgZSA9IFwiKlwiKTsgdmFyIG4sIHIgPSAwLCBpID0gZS50b0xvd2VyQ2FzZSgpLm1hdGNoKFIpIHx8IFtdOyBpZiAobSh0KSkgd2hpbGUgKG4gPSBpW3IrK10pIFwiK1wiID09PSBuWzBdID8gKG4gPSBuLnNsaWNlKDEpIHx8IFwiKlwiLCAob1tuXSA9IG9bbl0gfHwgW10pLnVuc2hpZnQodCkpIDogKG9bbl0gPSBvW25dIHx8IFtdKS5wdXNoKHQpIH0gfSBmdW5jdGlvbiBfdCh0LCBpLCBvLCBhKSB7IHZhciBzID0ge30sIHUgPSB0ID09PSBXdDsgZnVuY3Rpb24gbChlKSB7IHZhciByOyByZXR1cm4gc1tlXSA9ICEwLCBrLmVhY2godFtlXSB8fCBbXSwgZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4gPSB0KGksIG8sIGEpOyByZXR1cm4gXCJzdHJpbmdcIiAhPSB0eXBlb2YgbiB8fCB1IHx8IHNbbl0gPyB1ID8gIShyID0gbikgOiB2b2lkIDAgOiAoaS5kYXRhVHlwZXMudW5zaGlmdChuKSwgbChuKSwgITEpIH0pLCByIH0gcmV0dXJuIGwoaS5kYXRhVHlwZXNbMF0pIHx8ICFzW1wiKlwiXSAmJiBsKFwiKlwiKSB9IGZ1bmN0aW9uIHp0KGUsIHQpIHsgdmFyIG4sIHIsIGkgPSBrLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9ucyB8fCB7fTsgZm9yIChuIGluIHQpIHZvaWQgMCAhPT0gdFtuXSAmJiAoKGlbbl0gPyBlIDogciB8fCAociA9IHt9KSlbbl0gPSB0W25dKTsgcmV0dXJuIHIgJiYgay5leHRlbmQoITAsIGUsIHIpLCBlIH0gRnQuaHJlZiA9IEV0LmhyZWYsIGsuZXh0ZW5kKHsgYWN0aXZlOiAwLCBsYXN0TW9kaWZpZWQ6IHt9LCBldGFnOiB7fSwgYWpheFNldHRpbmdzOiB7IHVybDogRXQuaHJlZiwgdHlwZTogXCJHRVRcIiwgaXNMb2NhbDogL14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8udGVzdChFdC5wcm90b2NvbCksIGdsb2JhbDogITAsIHByb2Nlc3NEYXRhOiAhMCwgYXN5bmM6ICEwLCBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIiwgYWNjZXB0czogeyBcIipcIjogJHQsIHRleHQ6IFwidGV4dC9wbGFpblwiLCBodG1sOiBcInRleHQvaHRtbFwiLCB4bWw6IFwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLCBqc29uOiBcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwiIH0sIGNvbnRlbnRzOiB7IHhtbDogL1xcYnhtbFxcYi8sIGh0bWw6IC9cXGJodG1sLywganNvbjogL1xcYmpzb25cXGIvIH0sIHJlc3BvbnNlRmllbGRzOiB7IHhtbDogXCJyZXNwb25zZVhNTFwiLCB0ZXh0OiBcInJlc3BvbnNlVGV4dFwiLCBqc29uOiBcInJlc3BvbnNlSlNPTlwiIH0sIGNvbnZlcnRlcnM6IHsgXCIqIHRleHRcIjogU3RyaW5nLCBcInRleHQgaHRtbFwiOiAhMCwgXCJ0ZXh0IGpzb25cIjogSlNPTi5wYXJzZSwgXCJ0ZXh0IHhtbFwiOiBrLnBhcnNlWE1MIH0sIGZsYXRPcHRpb25zOiB7IHVybDogITAsIGNvbnRleHQ6ICEwIH0gfSwgYWpheFNldHVwOiBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gdCA/IHp0KHp0KGUsIGsuYWpheFNldHRpbmdzKSwgdCkgOiB6dChrLmFqYXhTZXR0aW5ncywgZSkgfSwgYWpheFByZWZpbHRlcjogQnQoSXQpLCBhamF4VHJhbnNwb3J0OiBCdChXdCksIGFqYXg6IGZ1bmN0aW9uIChlLCB0KSB7IFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgJiYgKHQgPSBlLCBlID0gdm9pZCAwKSwgdCA9IHQgfHwge307IHZhciBjLCBmLCBwLCBuLCBkLCByLCBoLCBnLCBpLCBvLCB2ID0gay5hamF4U2V0dXAoe30sIHQpLCB5ID0gdi5jb250ZXh0IHx8IHYsIG0gPSB2LmNvbnRleHQgJiYgKHkubm9kZVR5cGUgfHwgeS5qcXVlcnkpID8gayh5KSA6IGsuZXZlbnQsIHggPSBrLkRlZmVycmVkKCksIGIgPSBrLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLCB3ID0gdi5zdGF0dXNDb2RlIHx8IHt9LCBhID0ge30sIHMgPSB7fSwgdSA9IFwiY2FuY2VsZWRcIiwgVCA9IHsgcmVhZHlTdGF0ZTogMCwgZ2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uIChlKSB7IHZhciB0OyBpZiAoaCkgeyBpZiAoIW4pIHsgbiA9IHt9OyB3aGlsZSAodCA9IFB0LmV4ZWMocCkpIG5bdFsxXS50b0xvd2VyQ2FzZSgpICsgXCIgXCJdID0gKG5bdFsxXS50b0xvd2VyQ2FzZSgpICsgXCIgXCJdIHx8IFtdKS5jb25jYXQodFsyXSkgfSB0ID0gbltlLnRvTG93ZXJDYXNlKCkgKyBcIiBcIl0gfSByZXR1cm4gbnVsbCA9PSB0ID8gbnVsbCA6IHQuam9pbihcIiwgXCIpIH0sIGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24gKCkgeyByZXR1cm4gaCA/IHAgOiBudWxsIH0sIHNldFJlcXVlc3RIZWFkZXI6IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiBudWxsID09IGggJiYgKGUgPSBzW2UudG9Mb3dlckNhc2UoKV0gPSBzW2UudG9Mb3dlckNhc2UoKV0gfHwgZSwgYVtlXSA9IHQpLCB0aGlzIH0sIG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBudWxsID09IGggJiYgKHYubWltZVR5cGUgPSBlKSwgdGhpcyB9LCBzdGF0dXNDb2RlOiBmdW5jdGlvbiAoZSkgeyB2YXIgdDsgaWYgKGUpIGlmIChoKSBULmFsd2F5cyhlW1Quc3RhdHVzXSk7IGVsc2UgZm9yICh0IGluIGUpIHdbdF0gPSBbd1t0XSwgZVt0XV07IHJldHVybiB0aGlzIH0sIGFib3J0OiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGUgfHwgdTsgcmV0dXJuIGMgJiYgYy5hYm9ydCh0KSwgbCgwLCB0KSwgdGhpcyB9IH07IGlmICh4LnByb21pc2UoVCksIHYudXJsID0gKChlIHx8IHYudXJsIHx8IEV0LmhyZWYpICsgXCJcIikucmVwbGFjZShNdCwgRXQucHJvdG9jb2wgKyBcIi8vXCIpLCB2LnR5cGUgPSB0Lm1ldGhvZCB8fCB0LnR5cGUgfHwgdi5tZXRob2QgfHwgdi50eXBlLCB2LmRhdGFUeXBlcyA9ICh2LmRhdGFUeXBlIHx8IFwiKlwiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKFIpIHx8IFtcIlwiXSwgbnVsbCA9PSB2LmNyb3NzRG9tYWluKSB7IHIgPSBFLmNyZWF0ZUVsZW1lbnQoXCJhXCIpOyB0cnkgeyByLmhyZWYgPSB2LnVybCwgci5ocmVmID0gci5ocmVmLCB2LmNyb3NzRG9tYWluID0gRnQucHJvdG9jb2wgKyBcIi8vXCIgKyBGdC5ob3N0ICE9IHIucHJvdG9jb2wgKyBcIi8vXCIgKyByLmhvc3QgfSBjYXRjaCAoZSkgeyB2LmNyb3NzRG9tYWluID0gITAgfSB9IGlmICh2LmRhdGEgJiYgdi5wcm9jZXNzRGF0YSAmJiBcInN0cmluZ1wiICE9IHR5cGVvZiB2LmRhdGEgJiYgKHYuZGF0YSA9IGsucGFyYW0odi5kYXRhLCB2LnRyYWRpdGlvbmFsKSksIF90KEl0LCB2LCB0LCBUKSwgaCkgcmV0dXJuIFQ7IGZvciAoaSBpbiAoZyA9IGsuZXZlbnQgJiYgdi5nbG9iYWwpICYmIDAgPT0gay5hY3RpdmUrKyAmJiBrLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIiksIHYudHlwZSA9IHYudHlwZS50b1VwcGVyQ2FzZSgpLCB2Lmhhc0NvbnRlbnQgPSAhUnQudGVzdCh2LnR5cGUpLCBmID0gdi51cmwucmVwbGFjZShIdCwgXCJcIiksIHYuaGFzQ29udGVudCA/IHYuZGF0YSAmJiB2LnByb2Nlc3NEYXRhICYmIDAgPT09ICh2LmNvbnRlbnRUeXBlIHx8IFwiXCIpLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikgJiYgKHYuZGF0YSA9IHYuZGF0YS5yZXBsYWNlKEx0LCBcIitcIikpIDogKG8gPSB2LnVybC5zbGljZShmLmxlbmd0aCksIHYuZGF0YSAmJiAodi5wcm9jZXNzRGF0YSB8fCBcInN0cmluZ1wiID09IHR5cGVvZiB2LmRhdGEpICYmIChmICs9IChTdC50ZXN0KGYpID8gXCImXCIgOiBcIj9cIikgKyB2LmRhdGEsIGRlbGV0ZSB2LmRhdGEpLCAhMSA9PT0gdi5jYWNoZSAmJiAoZiA9IGYucmVwbGFjZShPdCwgXCIkMVwiKSwgbyA9IChTdC50ZXN0KGYpID8gXCImXCIgOiBcIj9cIikgKyBcIl89XCIgKyBrdCsrICsgbyksIHYudXJsID0gZiArIG8pLCB2LmlmTW9kaWZpZWQgJiYgKGsubGFzdE1vZGlmaWVkW2ZdICYmIFQuc2V0UmVxdWVzdEhlYWRlcihcIklmLU1vZGlmaWVkLVNpbmNlXCIsIGsubGFzdE1vZGlmaWVkW2ZdKSwgay5ldGFnW2ZdICYmIFQuc2V0UmVxdWVzdEhlYWRlcihcIklmLU5vbmUtTWF0Y2hcIiwgay5ldGFnW2ZdKSksICh2LmRhdGEgJiYgdi5oYXNDb250ZW50ICYmICExICE9PSB2LmNvbnRlbnRUeXBlIHx8IHQuY29udGVudFR5cGUpICYmIFQuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCB2LmNvbnRlbnRUeXBlKSwgVC5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIHYuZGF0YVR5cGVzWzBdICYmIHYuYWNjZXB0c1t2LmRhdGFUeXBlc1swXV0gPyB2LmFjY2VwdHNbdi5kYXRhVHlwZXNbMF1dICsgKFwiKlwiICE9PSB2LmRhdGFUeXBlc1swXSA/IFwiLCBcIiArICR0ICsgXCI7IHE9MC4wMVwiIDogXCJcIikgOiB2LmFjY2VwdHNbXCIqXCJdKSwgdi5oZWFkZXJzKSBULnNldFJlcXVlc3RIZWFkZXIoaSwgdi5oZWFkZXJzW2ldKTsgaWYgKHYuYmVmb3JlU2VuZCAmJiAoITEgPT09IHYuYmVmb3JlU2VuZC5jYWxsKHksIFQsIHYpIHx8IGgpKSByZXR1cm4gVC5hYm9ydCgpOyBpZiAodSA9IFwiYWJvcnRcIiwgYi5hZGQodi5jb21wbGV0ZSksIFQuZG9uZSh2LnN1Y2Nlc3MpLCBULmZhaWwodi5lcnJvciksIGMgPSBfdChXdCwgdiwgdCwgVCkpIHsgaWYgKFQucmVhZHlTdGF0ZSA9IDEsIGcgJiYgbS50cmlnZ2VyKFwiYWpheFNlbmRcIiwgW1QsIHZdKSwgaCkgcmV0dXJuIFQ7IHYuYXN5bmMgJiYgMCA8IHYudGltZW91dCAmJiAoZCA9IEMuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IFQuYWJvcnQoXCJ0aW1lb3V0XCIpIH0sIHYudGltZW91dCkpOyB0cnkgeyBoID0gITEsIGMuc2VuZChhLCBsKSB9IGNhdGNoIChlKSB7IGlmIChoKSB0aHJvdyBlOyBsKC0xLCBlKSB9IH0gZWxzZSBsKC0xLCBcIk5vIFRyYW5zcG9ydFwiKTsgZnVuY3Rpb24gbChlLCB0LCBuLCByKSB7IHZhciBpLCBvLCBhLCBzLCB1LCBsID0gdDsgaCB8fCAoaCA9ICEwLCBkICYmIEMuY2xlYXJUaW1lb3V0KGQpLCBjID0gdm9pZCAwLCBwID0gciB8fCBcIlwiLCBULnJlYWR5U3RhdGUgPSAwIDwgZSA/IDQgOiAwLCBpID0gMjAwIDw9IGUgJiYgZSA8IDMwMCB8fCAzMDQgPT09IGUsIG4gJiYgKHMgPSBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciwgaSwgbywgYSwgcyA9IGUuY29udGVudHMsIHUgPSBlLmRhdGFUeXBlczsgd2hpbGUgKFwiKlwiID09PSB1WzBdKSB1LnNoaWZ0KCksIHZvaWQgMCA9PT0gciAmJiAociA9IGUubWltZVR5cGUgfHwgdC5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSk7IGlmIChyKSBmb3IgKGkgaW4gcykgaWYgKHNbaV0gJiYgc1tpXS50ZXN0KHIpKSB7IHUudW5zaGlmdChpKTsgYnJlYWsgfSBpZiAodVswXSBpbiBuKSBvID0gdVswXTsgZWxzZSB7IGZvciAoaSBpbiBuKSB7IGlmICghdVswXSB8fCBlLmNvbnZlcnRlcnNbaSArIFwiIFwiICsgdVswXV0pIHsgbyA9IGk7IGJyZWFrIH0gYSB8fCAoYSA9IGkpIH0gbyA9IG8gfHwgYSB9IGlmIChvKSByZXR1cm4gbyAhPT0gdVswXSAmJiB1LnVuc2hpZnQobyksIG5bb10gfSh2LCBULCBuKSksIHMgPSBmdW5jdGlvbiAoZSwgdCwgbiwgcikgeyB2YXIgaSwgbywgYSwgcywgdSwgbCA9IHt9LCBjID0gZS5kYXRhVHlwZXMuc2xpY2UoKTsgaWYgKGNbMV0pIGZvciAoYSBpbiBlLmNvbnZlcnRlcnMpIGxbYS50b0xvd2VyQ2FzZSgpXSA9IGUuY29udmVydGVyc1thXTsgbyA9IGMuc2hpZnQoKTsgd2hpbGUgKG8pIGlmIChlLnJlc3BvbnNlRmllbGRzW29dICYmIChuW2UucmVzcG9uc2VGaWVsZHNbb11dID0gdCksICF1ICYmIHIgJiYgZS5kYXRhRmlsdGVyICYmICh0ID0gZS5kYXRhRmlsdGVyKHQsIGUuZGF0YVR5cGUpKSwgdSA9IG8sIG8gPSBjLnNoaWZ0KCkpIGlmIChcIipcIiA9PT0gbykgbyA9IHU7IGVsc2UgaWYgKFwiKlwiICE9PSB1ICYmIHUgIT09IG8pIHsgaWYgKCEoYSA9IGxbdSArIFwiIFwiICsgb10gfHwgbFtcIiogXCIgKyBvXSkpIGZvciAoaSBpbiBsKSBpZiAoKHMgPSBpLnNwbGl0KFwiIFwiKSlbMV0gPT09IG8gJiYgKGEgPSBsW3UgKyBcIiBcIiArIHNbMF1dIHx8IGxbXCIqIFwiICsgc1swXV0pKSB7ICEwID09PSBhID8gYSA9IGxbaV0gOiAhMCAhPT0gbFtpXSAmJiAobyA9IHNbMF0sIGMudW5zaGlmdChzWzFdKSk7IGJyZWFrIH0gaWYgKCEwICE9PSBhKSBpZiAoYSAmJiBlW1widGhyb3dzXCJdKSB0ID0gYSh0KTsgZWxzZSB0cnkgeyB0ID0gYSh0KSB9IGNhdGNoIChlKSB7IHJldHVybiB7IHN0YXRlOiBcInBhcnNlcmVycm9yXCIsIGVycm9yOiBhID8gZSA6IFwiTm8gY29udmVyc2lvbiBmcm9tIFwiICsgdSArIFwiIHRvIFwiICsgbyB9IH0gfSByZXR1cm4geyBzdGF0ZTogXCJzdWNjZXNzXCIsIGRhdGE6IHQgfSB9KHYsIHMsIFQsIGkpLCBpID8gKHYuaWZNb2RpZmllZCAmJiAoKHUgPSBULmdldFJlc3BvbnNlSGVhZGVyKFwiTGFzdC1Nb2RpZmllZFwiKSkgJiYgKGsubGFzdE1vZGlmaWVkW2ZdID0gdSksICh1ID0gVC5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIikpICYmIChrLmV0YWdbZl0gPSB1KSksIDIwNCA9PT0gZSB8fCBcIkhFQURcIiA9PT0gdi50eXBlID8gbCA9IFwibm9jb250ZW50XCIgOiAzMDQgPT09IGUgPyBsID0gXCJub3Rtb2RpZmllZFwiIDogKGwgPSBzLnN0YXRlLCBvID0gcy5kYXRhLCBpID0gIShhID0gcy5lcnJvcikpKSA6IChhID0gbCwgIWUgJiYgbCB8fCAobCA9IFwiZXJyb3JcIiwgZSA8IDAgJiYgKGUgPSAwKSkpLCBULnN0YXR1cyA9IGUsIFQuc3RhdHVzVGV4dCA9ICh0IHx8IGwpICsgXCJcIiwgaSA/IHgucmVzb2x2ZVdpdGgoeSwgW28sIGwsIFRdKSA6IHgucmVqZWN0V2l0aCh5LCBbVCwgbCwgYV0pLCBULnN0YXR1c0NvZGUodyksIHcgPSB2b2lkIDAsIGcgJiYgbS50cmlnZ2VyKGkgPyBcImFqYXhTdWNjZXNzXCIgOiBcImFqYXhFcnJvclwiLCBbVCwgdiwgaSA/IG8gOiBhXSksIGIuZmlyZVdpdGgoeSwgW1QsIGxdKSwgZyAmJiAobS50cmlnZ2VyKFwiYWpheENvbXBsZXRlXCIsIFtULCB2XSksIC0tay5hY3RpdmUgfHwgay5ldmVudC50cmlnZ2VyKFwiYWpheFN0b3BcIikpKSB9IHJldHVybiBUIH0sIGdldEpTT046IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiBrLmdldChlLCB0LCBuLCBcImpzb25cIikgfSwgZ2V0U2NyaXB0OiBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gay5nZXQoZSwgdm9pZCAwLCB0LCBcInNjcmlwdFwiKSB9IH0pLCBrLmVhY2goW1wiZ2V0XCIsIFwicG9zdFwiXSwgZnVuY3Rpb24gKGUsIGkpIHsga1tpXSA9IGZ1bmN0aW9uIChlLCB0LCBuLCByKSB7IHJldHVybiBtKHQpICYmIChyID0gciB8fCBuLCBuID0gdCwgdCA9IHZvaWQgMCksIGsuYWpheChrLmV4dGVuZCh7IHVybDogZSwgdHlwZTogaSwgZGF0YVR5cGU6IHIsIGRhdGE6IHQsIHN1Y2Nlc3M6IG4gfSwgay5pc1BsYWluT2JqZWN0KGUpICYmIGUpKSB9IH0pLCBrLl9ldmFsVXJsID0gZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIGsuYWpheCh7IHVybDogZSwgdHlwZTogXCJHRVRcIiwgZGF0YVR5cGU6IFwic2NyaXB0XCIsIGNhY2hlOiAhMCwgYXN5bmM6ICExLCBnbG9iYWw6ICExLCBjb252ZXJ0ZXJzOiB7IFwidGV4dCBzY3JpcHRcIjogZnVuY3Rpb24gKCkgeyB9IH0sIGRhdGFGaWx0ZXI6IGZ1bmN0aW9uIChlKSB7IGsuZ2xvYmFsRXZhbChlLCB0KSB9IH0pIH0sIGsuZm4uZXh0ZW5kKHsgd3JhcEFsbDogZnVuY3Rpb24gKGUpIHsgdmFyIHQ7IHJldHVybiB0aGlzWzBdICYmIChtKGUpICYmIChlID0gZS5jYWxsKHRoaXNbMF0pKSwgdCA9IGsoZSwgdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCksIHRoaXNbMF0ucGFyZW50Tm9kZSAmJiB0Lmluc2VydEJlZm9yZSh0aGlzWzBdKSwgdC5tYXAoZnVuY3Rpb24gKCkgeyB2YXIgZSA9IHRoaXM7IHdoaWxlIChlLmZpcnN0RWxlbWVudENoaWxkKSBlID0gZS5maXJzdEVsZW1lbnRDaGlsZDsgcmV0dXJuIGUgfSkuYXBwZW5kKHRoaXMpKSwgdGhpcyB9LCB3cmFwSW5uZXI6IGZ1bmN0aW9uIChuKSB7IHJldHVybiBtKG4pID8gdGhpcy5lYWNoKGZ1bmN0aW9uIChlKSB7IGsodGhpcykud3JhcElubmVyKG4uY2FsbCh0aGlzLCBlKSkgfSkgOiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgeyB2YXIgZSA9IGsodGhpcyksIHQgPSBlLmNvbnRlbnRzKCk7IHQubGVuZ3RoID8gdC53cmFwQWxsKG4pIDogZS5hcHBlbmQobikgfSkgfSwgd3JhcDogZnVuY3Rpb24gKHQpIHsgdmFyIG4gPSBtKHQpOyByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uIChlKSB7IGsodGhpcykud3JhcEFsbChuID8gdC5jYWxsKHRoaXMsIGUpIDogdCkgfSkgfSwgdW53cmFwOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy5wYXJlbnQoZSkubm90KFwiYm9keVwiKS5lYWNoKGZ1bmN0aW9uICgpIHsgayh0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpIH0pLCB0aGlzIH0gfSksIGsuZXhwci5wc2V1ZG9zLmhpZGRlbiA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiAhay5leHByLnBzZXVkb3MudmlzaWJsZShlKSB9LCBrLmV4cHIucHNldWRvcy52aXNpYmxlID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuICEhKGUub2Zmc2V0V2lkdGggfHwgZS5vZmZzZXRIZWlnaHQgfHwgZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCkgfSwgay5hamF4U2V0dGluZ3MueGhyID0gZnVuY3Rpb24gKCkgeyB0cnkgeyByZXR1cm4gbmV3IEMuWE1MSHR0cFJlcXVlc3QgfSBjYXRjaCAoZSkgeyB9IH07IHZhciBVdCA9IHsgMDogMjAwLCAxMjIzOiAyMDQgfSwgWHQgPSBrLmFqYXhTZXR0aW5ncy54aHIoKTsgeS5jb3JzID0gISFYdCAmJiBcIndpdGhDcmVkZW50aWFsc1wiIGluIFh0LCB5LmFqYXggPSBYdCA9ICEhWHQsIGsuYWpheFRyYW5zcG9ydChmdW5jdGlvbiAoaSkgeyB2YXIgbywgYTsgaWYgKHkuY29ycyB8fCBYdCAmJiAhaS5jcm9zc0RvbWFpbikgcmV0dXJuIHsgc2VuZDogZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4sIHIgPSBpLnhocigpOyBpZiAoci5vcGVuKGkudHlwZSwgaS51cmwsIGkuYXN5bmMsIGkudXNlcm5hbWUsIGkucGFzc3dvcmQpLCBpLnhockZpZWxkcykgZm9yIChuIGluIGkueGhyRmllbGRzKSByW25dID0gaS54aHJGaWVsZHNbbl07IGZvciAobiBpbiBpLm1pbWVUeXBlICYmIHIub3ZlcnJpZGVNaW1lVHlwZSAmJiByLm92ZXJyaWRlTWltZVR5cGUoaS5taW1lVHlwZSksIGkuY3Jvc3NEb21haW4gfHwgZVtcIlgtUmVxdWVzdGVkLVdpdGhcIl0gfHwgKGVbXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiKSwgZSkgci5zZXRSZXF1ZXN0SGVhZGVyKG4sIGVbbl0pOyBvID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgbyAmJiAobyA9IGEgPSByLm9ubG9hZCA9IHIub25lcnJvciA9IHIub25hYm9ydCA9IHIub250aW1lb3V0ID0gci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsLCBcImFib3J0XCIgPT09IGUgPyByLmFib3J0KCkgOiBcImVycm9yXCIgPT09IGUgPyBcIm51bWJlclwiICE9IHR5cGVvZiByLnN0YXR1cyA/IHQoMCwgXCJlcnJvclwiKSA6IHQoci5zdGF0dXMsIHIuc3RhdHVzVGV4dCkgOiB0KFV0W3Iuc3RhdHVzXSB8fCByLnN0YXR1cywgci5zdGF0dXNUZXh0LCBcInRleHRcIiAhPT0gKHIucmVzcG9uc2VUeXBlIHx8IFwidGV4dFwiKSB8fCBcInN0cmluZ1wiICE9IHR5cGVvZiByLnJlc3BvbnNlVGV4dCA/IHsgYmluYXJ5OiByLnJlc3BvbnNlIH0gOiB7IHRleHQ6IHIucmVzcG9uc2VUZXh0IH0sIHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKSB9IH0sIHIub25sb2FkID0gbygpLCBhID0gci5vbmVycm9yID0gci5vbnRpbWVvdXQgPSBvKFwiZXJyb3JcIiksIHZvaWQgMCAhPT0gci5vbmFib3J0ID8gci5vbmFib3J0ID0gYSA6IHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgeyA0ID09PSByLnJlYWR5U3RhdGUgJiYgQy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgbyAmJiBhKCkgfSkgfSwgbyA9IG8oXCJhYm9ydFwiKTsgdHJ5IHsgci5zZW5kKGkuaGFzQ29udGVudCAmJiBpLmRhdGEgfHwgbnVsbCkgfSBjYXRjaCAoZSkgeyBpZiAobykgdGhyb3cgZSB9IH0sIGFib3J0OiBmdW5jdGlvbiAoKSB7IG8gJiYgbygpIH0gfSB9KSwgay5hamF4UHJlZmlsdGVyKGZ1bmN0aW9uIChlKSB7IGUuY3Jvc3NEb21haW4gJiYgKGUuY29udGVudHMuc2NyaXB0ID0gITEpIH0pLCBrLmFqYXhTZXR1cCh7IGFjY2VwdHM6IHsgc2NyaXB0OiBcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCIgfSwgY29udGVudHM6IHsgc2NyaXB0OiAvXFxiKD86amF2YXxlY21hKXNjcmlwdFxcYi8gfSwgY29udmVydGVyczogeyBcInRleHQgc2NyaXB0XCI6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBrLmdsb2JhbEV2YWwoZSksIGUgfSB9IH0pLCBrLmFqYXhQcmVmaWx0ZXIoXCJzY3JpcHRcIiwgZnVuY3Rpb24gKGUpIHsgdm9pZCAwID09PSBlLmNhY2hlICYmIChlLmNhY2hlID0gITEpLCBlLmNyb3NzRG9tYWluICYmIChlLnR5cGUgPSBcIkdFVFwiKSB9KSwgay5hamF4VHJhbnNwb3J0KFwic2NyaXB0XCIsIGZ1bmN0aW9uIChuKSB7IHZhciByLCBpOyBpZiAobi5jcm9zc0RvbWFpbiB8fCBuLnNjcmlwdEF0dHJzKSByZXR1cm4geyBzZW5kOiBmdW5jdGlvbiAoZSwgdCkgeyByID0gayhcIjxzY3JpcHQ+XCIpLmF0dHIobi5zY3JpcHRBdHRycyB8fCB7fSkucHJvcCh7IGNoYXJzZXQ6IG4uc2NyaXB0Q2hhcnNldCwgc3JjOiBuLnVybCB9KS5vbihcImxvYWQgZXJyb3JcIiwgaSA9IGZ1bmN0aW9uIChlKSB7IHIucmVtb3ZlKCksIGkgPSBudWxsLCBlICYmIHQoXCJlcnJvclwiID09PSBlLnR5cGUgPyA0MDQgOiAyMDAsIGUudHlwZSkgfSksIEUuaGVhZC5hcHBlbmRDaGlsZChyWzBdKSB9LCBhYm9ydDogZnVuY3Rpb24gKCkgeyBpICYmIGkoKSB9IH0gfSk7IHZhciBWdCwgR3QgPSBbXSwgWXQgPSAvKD0pXFw/KD89JnwkKXxcXD9cXD8vOyBrLmFqYXhTZXR1cCh7IGpzb25wOiBcImNhbGxiYWNrXCIsIGpzb25wQ2FsbGJhY2s6IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSBHdC5wb3AoKSB8fCBrLmV4cGFuZG8gKyBcIl9cIiArIGt0Kys7IHJldHVybiB0aGlzW2VdID0gITAsIGUgfSB9KSwgay5hamF4UHJlZmlsdGVyKFwianNvbiBqc29ucFwiLCBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciwgaSwgbywgYSA9ICExICE9PSBlLmpzb25wICYmIChZdC50ZXN0KGUudXJsKSA/IFwidXJsXCIgOiBcInN0cmluZ1wiID09IHR5cGVvZiBlLmRhdGEgJiYgMCA9PT0gKGUuY29udGVudFR5cGUgfHwgXCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSAmJiBZdC50ZXN0KGUuZGF0YSkgJiYgXCJkYXRhXCIpOyBpZiAoYSB8fCBcImpzb25wXCIgPT09IGUuZGF0YVR5cGVzWzBdKSByZXR1cm4gciA9IGUuanNvbnBDYWxsYmFjayA9IG0oZS5qc29ucENhbGxiYWNrKSA/IGUuanNvbnBDYWxsYmFjaygpIDogZS5qc29ucENhbGxiYWNrLCBhID8gZVthXSA9IGVbYV0ucmVwbGFjZShZdCwgXCIkMVwiICsgcikgOiAhMSAhPT0gZS5qc29ucCAmJiAoZS51cmwgKz0gKFN0LnRlc3QoZS51cmwpID8gXCImXCIgOiBcIj9cIikgKyBlLmpzb25wICsgXCI9XCIgKyByKSwgZS5jb252ZXJ0ZXJzW1wic2NyaXB0IGpzb25cIl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBvIHx8IGsuZXJyb3IociArIFwiIHdhcyBub3QgY2FsbGVkXCIpLCBvWzBdIH0sIGUuZGF0YVR5cGVzWzBdID0gXCJqc29uXCIsIGkgPSBDW3JdLCBDW3JdID0gZnVuY3Rpb24gKCkgeyBvID0gYXJndW1lbnRzIH0sIG4uYWx3YXlzKGZ1bmN0aW9uICgpIHsgdm9pZCAwID09PSBpID8gayhDKS5yZW1vdmVQcm9wKHIpIDogQ1tyXSA9IGksIGVbcl0gJiYgKGUuanNvbnBDYWxsYmFjayA9IHQuanNvbnBDYWxsYmFjaywgR3QucHVzaChyKSksIG8gJiYgbShpKSAmJiBpKG9bMF0pLCBvID0gaSA9IHZvaWQgMCB9KSwgXCJzY3JpcHRcIiB9KSwgeS5jcmVhdGVIVE1MRG9jdW1lbnQgPSAoKFZ0ID0gRS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoXCJcIikuYm9keSkuaW5uZXJIVE1MID0gXCI8Zm9ybT48L2Zvcm0+PGZvcm0+PC9mb3JtPlwiLCAyID09PSBWdC5jaGlsZE5vZGVzLmxlbmd0aCksIGsucGFyc2VIVE1MID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsgcmV0dXJuIFwic3RyaW5nXCIgIT0gdHlwZW9mIGUgPyBbXSA6IChcImJvb2xlYW5cIiA9PSB0eXBlb2YgdCAmJiAobiA9IHQsIHQgPSAhMSksIHQgfHwgKHkuY3JlYXRlSFRNTERvY3VtZW50ID8gKChyID0gKHQgPSBFLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKSkuY3JlYXRlRWxlbWVudChcImJhc2VcIikpLmhyZWYgPSBFLmxvY2F0aW9uLmhyZWYsIHQuaGVhZC5hcHBlbmRDaGlsZChyKSkgOiB0ID0gRSksIG8gPSAhbiAmJiBbXSwgKGkgPSBELmV4ZWMoZSkpID8gW3QuY3JlYXRlRWxlbWVudChpWzFdKV0gOiAoaSA9IHdlKFtlXSwgdCwgbyksIG8gJiYgby5sZW5ndGggJiYgayhvKS5yZW1vdmUoKSwgay5tZXJnZShbXSwgaS5jaGlsZE5vZGVzKSkpOyB2YXIgciwgaSwgbyB9LCBrLmZuLmxvYWQgPSBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciwgaSwgbywgYSA9IHRoaXMsIHMgPSBlLmluZGV4T2YoXCIgXCIpOyByZXR1cm4gLTEgPCBzICYmIChyID0gbXQoZS5zbGljZShzKSksIGUgPSBlLnNsaWNlKDAsIHMpKSwgbSh0KSA/IChuID0gdCwgdCA9IHZvaWQgMCkgOiB0ICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgJiYgKGkgPSBcIlBPU1RcIiksIDAgPCBhLmxlbmd0aCAmJiBrLmFqYXgoeyB1cmw6IGUsIHR5cGU6IGkgfHwgXCJHRVRcIiwgZGF0YVR5cGU6IFwiaHRtbFwiLCBkYXRhOiB0IH0pLmRvbmUoZnVuY3Rpb24gKGUpIHsgbyA9IGFyZ3VtZW50cywgYS5odG1sKHIgPyBrKFwiPGRpdj5cIikuYXBwZW5kKGsucGFyc2VIVE1MKGUpKS5maW5kKHIpIDogZSkgfSkuYWx3YXlzKG4gJiYgZnVuY3Rpb24gKGUsIHQpIHsgYS5lYWNoKGZ1bmN0aW9uICgpIHsgbi5hcHBseSh0aGlzLCBvIHx8IFtlLnJlc3BvbnNlVGV4dCwgdCwgZV0pIH0pIH0pLCB0aGlzIH0sIGsuZWFjaChbXCJhamF4U3RhcnRcIiwgXCJhamF4U3RvcFwiLCBcImFqYXhDb21wbGV0ZVwiLCBcImFqYXhFcnJvclwiLCBcImFqYXhTdWNjZXNzXCIsIFwiYWpheFNlbmRcIl0sIGZ1bmN0aW9uIChlLCB0KSB7IGsuZm5bdF0gPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy5vbih0LCBlKSB9IH0pLCBrLmV4cHIucHNldWRvcy5hbmltYXRlZCA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBrLmdyZXAoay50aW1lcnMsIGZ1bmN0aW9uIChlKSB7IHJldHVybiB0ID09PSBlLmVsZW0gfSkubGVuZ3RoIH0sIGsub2Zmc2V0ID0geyBzZXRPZmZzZXQ6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciByLCBpLCBvLCBhLCBzLCB1LCBsID0gay5jc3MoZSwgXCJwb3NpdGlvblwiKSwgYyA9IGsoZSksIGYgPSB7fTsgXCJzdGF0aWNcIiA9PT0gbCAmJiAoZS5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIiksIHMgPSBjLm9mZnNldCgpLCBvID0gay5jc3MoZSwgXCJ0b3BcIiksIHUgPSBrLmNzcyhlLCBcImxlZnRcIiksIChcImFic29sdXRlXCIgPT09IGwgfHwgXCJmaXhlZFwiID09PSBsKSAmJiAtMSA8IChvICsgdSkuaW5kZXhPZihcImF1dG9cIikgPyAoYSA9IChyID0gYy5wb3NpdGlvbigpKS50b3AsIGkgPSByLmxlZnQpIDogKGEgPSBwYXJzZUZsb2F0KG8pIHx8IDAsIGkgPSBwYXJzZUZsb2F0KHUpIHx8IDApLCBtKHQpICYmICh0ID0gdC5jYWxsKGUsIG4sIGsuZXh0ZW5kKHt9LCBzKSkpLCBudWxsICE9IHQudG9wICYmIChmLnRvcCA9IHQudG9wIC0gcy50b3AgKyBhKSwgbnVsbCAhPSB0LmxlZnQgJiYgKGYubGVmdCA9IHQubGVmdCAtIHMubGVmdCArIGkpLCBcInVzaW5nXCIgaW4gdCA/IHQudXNpbmcuY2FsbChlLCBmKSA6IGMuY3NzKGYpIH0gfSwgay5mbi5leHRlbmQoeyBvZmZzZXQ6IGZ1bmN0aW9uICh0KSB7IGlmIChhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdm9pZCAwID09PSB0ID8gdGhpcyA6IHRoaXMuZWFjaChmdW5jdGlvbiAoZSkgeyBrLm9mZnNldC5zZXRPZmZzZXQodGhpcywgdCwgZSkgfSk7IHZhciBlLCBuLCByID0gdGhpc1swXTsgcmV0dXJuIHIgPyByLmdldENsaWVudFJlY3RzKCkubGVuZ3RoID8gKGUgPSByLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBuID0gci5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LCB7IHRvcDogZS50b3AgKyBuLnBhZ2VZT2Zmc2V0LCBsZWZ0OiBlLmxlZnQgKyBuLnBhZ2VYT2Zmc2V0IH0pIDogeyB0b3A6IDAsIGxlZnQ6IDAgfSA6IHZvaWQgMCB9LCBwb3NpdGlvbjogZnVuY3Rpb24gKCkgeyBpZiAodGhpc1swXSkgeyB2YXIgZSwgdCwgbiwgciA9IHRoaXNbMF0sIGkgPSB7IHRvcDogMCwgbGVmdDogMCB9OyBpZiAoXCJmaXhlZFwiID09PSBrLmNzcyhyLCBcInBvc2l0aW9uXCIpKSB0ID0gci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgZWxzZSB7IHQgPSB0aGlzLm9mZnNldCgpLCBuID0gci5vd25lckRvY3VtZW50LCBlID0gci5vZmZzZXRQYXJlbnQgfHwgbi5kb2N1bWVudEVsZW1lbnQ7IHdoaWxlIChlICYmIChlID09PSBuLmJvZHkgfHwgZSA9PT0gbi5kb2N1bWVudEVsZW1lbnQpICYmIFwic3RhdGljXCIgPT09IGsuY3NzKGUsIFwicG9zaXRpb25cIikpIGUgPSBlLnBhcmVudE5vZGU7IGUgJiYgZSAhPT0gciAmJiAxID09PSBlLm5vZGVUeXBlICYmICgoaSA9IGsoZSkub2Zmc2V0KCkpLnRvcCArPSBrLmNzcyhlLCBcImJvcmRlclRvcFdpZHRoXCIsICEwKSwgaS5sZWZ0ICs9IGsuY3NzKGUsIFwiYm9yZGVyTGVmdFdpZHRoXCIsICEwKSkgfSByZXR1cm4geyB0b3A6IHQudG9wIC0gaS50b3AgLSBrLmNzcyhyLCBcIm1hcmdpblRvcFwiLCAhMCksIGxlZnQ6IHQubGVmdCAtIGkubGVmdCAtIGsuY3NzKHIsIFwibWFyZ2luTGVmdFwiLCAhMCkgfSB9IH0sIG9mZnNldFBhcmVudDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKCkgeyB2YXIgZSA9IHRoaXMub2Zmc2V0UGFyZW50OyB3aGlsZSAoZSAmJiBcInN0YXRpY1wiID09PSBrLmNzcyhlLCBcInBvc2l0aW9uXCIpKSBlID0gZS5vZmZzZXRQYXJlbnQ7IHJldHVybiBlIHx8IGllIH0pIH0gfSksIGsuZWFjaCh7IHNjcm9sbExlZnQ6IFwicGFnZVhPZmZzZXRcIiwgc2Nyb2xsVG9wOiBcInBhZ2VZT2Zmc2V0XCIgfSwgZnVuY3Rpb24gKHQsIGkpIHsgdmFyIG8gPSBcInBhZ2VZT2Zmc2V0XCIgPT09IGk7IGsuZm5bdF0gPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gXyh0aGlzLCBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgcjsgaWYgKHgoZSkgPyByID0gZSA6IDkgPT09IGUubm9kZVR5cGUgJiYgKHIgPSBlLmRlZmF1bHRWaWV3KSwgdm9pZCAwID09PSBuKSByZXR1cm4gciA/IHJbaV0gOiBlW3RdOyByID8gci5zY3JvbGxUbyhvID8gci5wYWdlWE9mZnNldCA6IG4sIG8gPyBuIDogci5wYWdlWU9mZnNldCkgOiBlW3RdID0gbiB9LCB0LCBlLCBhcmd1bWVudHMubGVuZ3RoKSB9IH0pLCBrLmVhY2goW1widG9wXCIsIFwibGVmdFwiXSwgZnVuY3Rpb24gKGUsIG4pIHsgay5jc3NIb29rc1tuXSA9IHplKHkucGl4ZWxQb3NpdGlvbiwgZnVuY3Rpb24gKGUsIHQpIHsgaWYgKHQpIHJldHVybiB0ID0gX2UoZSwgbiksICRlLnRlc3QodCkgPyBrKGUpLnBvc2l0aW9uKClbbl0gKyBcInB4XCIgOiB0IH0pIH0pLCBrLmVhY2goeyBIZWlnaHQ6IFwiaGVpZ2h0XCIsIFdpZHRoOiBcIndpZHRoXCIgfSwgZnVuY3Rpb24gKGEsIHMpIHsgay5lYWNoKHsgcGFkZGluZzogXCJpbm5lclwiICsgYSwgY29udGVudDogcywgXCJcIjogXCJvdXRlclwiICsgYSB9LCBmdW5jdGlvbiAociwgbykgeyBrLmZuW29dID0gZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoICYmIChyIHx8IFwiYm9vbGVhblwiICE9IHR5cGVvZiBlKSwgaSA9IHIgfHwgKCEwID09PSBlIHx8ICEwID09PSB0ID8gXCJtYXJnaW5cIiA6IFwiYm9yZGVyXCIpOyByZXR1cm4gXyh0aGlzLCBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgcjsgcmV0dXJuIHgoZSkgPyAwID09PSBvLmluZGV4T2YoXCJvdXRlclwiKSA/IGVbXCJpbm5lclwiICsgYV0gOiBlLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiICsgYV0gOiA5ID09PSBlLm5vZGVUeXBlID8gKHIgPSBlLmRvY3VtZW50RWxlbWVudCwgTWF0aC5tYXgoZS5ib2R5W1wic2Nyb2xsXCIgKyBhXSwgcltcInNjcm9sbFwiICsgYV0sIGUuYm9keVtcIm9mZnNldFwiICsgYV0sIHJbXCJvZmZzZXRcIiArIGFdLCByW1wiY2xpZW50XCIgKyBhXSkpIDogdm9pZCAwID09PSBuID8gay5jc3MoZSwgdCwgaSkgOiBrLnN0eWxlKGUsIHQsIG4sIGkpIH0sIHMsIG4gPyBlIDogdm9pZCAwLCBuKSB9IH0pIH0pLCBrLmVhY2goXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51XCIuc3BsaXQoXCIgXCIpLCBmdW5jdGlvbiAoZSwgbikgeyBrLmZuW25dID0gZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIDAgPCBhcmd1bWVudHMubGVuZ3RoID8gdGhpcy5vbihuLCBudWxsLCBlLCB0KSA6IHRoaXMudHJpZ2dlcihuKSB9IH0pLCBrLmZuLmV4dGVuZCh7IGhvdmVyOiBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gdGhpcy5tb3VzZWVudGVyKGUpLm1vdXNlbGVhdmUodCB8fCBlKSB9IH0pLCBrLmZuLmV4dGVuZCh7IGJpbmQ6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiB0aGlzLm9uKGUsIG51bGwsIHQsIG4pIH0sIHVuYmluZDogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIHRoaXMub2ZmKGUsIG51bGwsIHQpIH0sIGRlbGVnYXRlOiBmdW5jdGlvbiAoZSwgdCwgbiwgcikgeyByZXR1cm4gdGhpcy5vbih0LCBlLCBuLCByKSB9LCB1bmRlbGVnYXRlOiBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gMSA9PT0gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMub2ZmKGUsIFwiKipcIikgOiB0aGlzLm9mZih0LCBlIHx8IFwiKipcIiwgbikgfSB9KSwgay5wcm94eSA9IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuLCByLCBpOyBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCAmJiAobiA9IGVbdF0sIHQgPSBlLCBlID0gbiksIG0oZSkpIHJldHVybiByID0gcy5jYWxsKGFyZ3VtZW50cywgMiksIChpID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZS5hcHBseSh0IHx8IHRoaXMsIHIuY29uY2F0KHMuY2FsbChhcmd1bWVudHMpKSkgfSkuZ3VpZCA9IGUuZ3VpZCA9IGUuZ3VpZCB8fCBrLmd1aWQrKyAsIGkgfSwgay5ob2xkUmVhZHkgPSBmdW5jdGlvbiAoZSkgeyBlID8gay5yZWFkeVdhaXQrKyA6IGsucmVhZHkoITApIH0sIGsuaXNBcnJheSA9IEFycmF5LmlzQXJyYXksIGsucGFyc2VKU09OID0gSlNPTi5wYXJzZSwgay5ub2RlTmFtZSA9IEEsIGsuaXNGdW5jdGlvbiA9IG0sIGsuaXNXaW5kb3cgPSB4LCBrLmNhbWVsQ2FzZSA9IFYsIGsudHlwZSA9IHcsIGsubm93ID0gRGF0ZS5ub3csIGsuaXNOdW1lcmljID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBrLnR5cGUoZSk7IHJldHVybiAoXCJudW1iZXJcIiA9PT0gdCB8fCBcInN0cmluZ1wiID09PSB0KSAmJiAhaXNOYU4oZSAtIHBhcnNlRmxvYXQoZSkpIH0sIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgJiYgZGVmaW5lKFwianF1ZXJ5XCIsIFtdLCBmdW5jdGlvbiAoKSB7IHJldHVybiBrIH0pOyB2YXIgUXQgPSBDLmpRdWVyeSwgSnQgPSBDLiQ7IHJldHVybiBrLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gQy4kID09PSBrICYmIChDLiQgPSBKdCksIGUgJiYgQy5qUXVlcnkgPT09IGsgJiYgKEMualF1ZXJ5ID0gUXQpLCBrIH0sIGUgfHwgKEMualF1ZXJ5ID0gQy4kID0gayksIGsgfSk7IiwiLyohIGpRdWVyeSBWYWxpZGF0aW9uIFBsdWdpbiAtIHYxLjE3LjAgLSA3LzI5LzIwMTdcclxuICogaHR0cHM6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9cclxuICogQ29weXJpZ2h0IChjKSAyMDE3IErDtnJuIFphZWZmZXJlcjsgTGljZW5zZWQgTUlUICovXHJcbiFmdW5jdGlvbiAoYSkgeyBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFtcImpxdWVyeVwiXSwgYSkgOiBcIm9iamVjdFwiID09IHR5cGVvZiBtb2R1bGUgJiYgbW9kdWxlLmV4cG9ydHMgPyBtb2R1bGUuZXhwb3J0cyA9IGEocmVxdWlyZShcImpxdWVyeVwiKSkgOiBhKGpRdWVyeSkgfShmdW5jdGlvbiAoYSkgeyBhLmV4dGVuZChhLmZuLCB7IHZhbGlkYXRlOiBmdW5jdGlvbiAoYikgeyBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm4gdm9pZCAoYiAmJiBiLmRlYnVnICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUud2FybihcIk5vdGhpbmcgc2VsZWN0ZWQsIGNhbid0IHZhbGlkYXRlLCByZXR1cm5pbmcgbm90aGluZy5cIikpOyB2YXIgYyA9IGEuZGF0YSh0aGlzWzBdLCBcInZhbGlkYXRvclwiKTsgcmV0dXJuIGMgPyBjIDogKHRoaXMuYXR0cihcIm5vdmFsaWRhdGVcIiwgXCJub3ZhbGlkYXRlXCIpLCBjID0gbmV3IGEudmFsaWRhdG9yKGIsIHRoaXNbMF0pLCBhLmRhdGEodGhpc1swXSwgXCJ2YWxpZGF0b3JcIiwgYyksIGMuc2V0dGluZ3Mub25zdWJtaXQgJiYgKHRoaXMub24oXCJjbGljay52YWxpZGF0ZVwiLCBcIjpzdWJtaXRcIiwgZnVuY3Rpb24gKGIpIHsgYy5zdWJtaXRCdXR0b24gPSBiLmN1cnJlbnRUYXJnZXQsIGEodGhpcykuaGFzQ2xhc3MoXCJjYW5jZWxcIikgJiYgKGMuY2FuY2VsU3VibWl0ID0gITApLCB2b2lkIDAgIT09IGEodGhpcykuYXR0cihcImZvcm1ub3ZhbGlkYXRlXCIpICYmIChjLmNhbmNlbFN1Ym1pdCA9ICEwKSB9KSwgdGhpcy5vbihcInN1Ym1pdC52YWxpZGF0ZVwiLCBmdW5jdGlvbiAoYikgeyBmdW5jdGlvbiBkKCkgeyB2YXIgZCwgZTsgcmV0dXJuIGMuc3VibWl0QnV0dG9uICYmIChjLnNldHRpbmdzLnN1Ym1pdEhhbmRsZXIgfHwgYy5mb3JtU3VibWl0dGVkKSAmJiAoZCA9IGEoXCI8aW5wdXQgdHlwZT0naGlkZGVuJy8+XCIpLmF0dHIoXCJuYW1lXCIsIGMuc3VibWl0QnV0dG9uLm5hbWUpLnZhbChhKGMuc3VibWl0QnV0dG9uKS52YWwoKSkuYXBwZW5kVG8oYy5jdXJyZW50Rm9ybSkpLCAhYy5zZXR0aW5ncy5zdWJtaXRIYW5kbGVyIHx8IChlID0gYy5zZXR0aW5ncy5zdWJtaXRIYW5kbGVyLmNhbGwoYywgYy5jdXJyZW50Rm9ybSwgYiksIGQgJiYgZC5yZW1vdmUoKSwgdm9pZCAwICE9PSBlICYmIGUpIH0gcmV0dXJuIGMuc2V0dGluZ3MuZGVidWcgJiYgYi5wcmV2ZW50RGVmYXVsdCgpLCBjLmNhbmNlbFN1Ym1pdCA/IChjLmNhbmNlbFN1Ym1pdCA9ICExLCBkKCkpIDogYy5mb3JtKCkgPyBjLnBlbmRpbmdSZXF1ZXN0ID8gKGMuZm9ybVN1Ym1pdHRlZCA9ICEwLCAhMSkgOiBkKCkgOiAoYy5mb2N1c0ludmFsaWQoKSwgITEpIH0pKSwgYykgfSwgdmFsaWQ6IGZ1bmN0aW9uICgpIHsgdmFyIGIsIGMsIGQ7IHJldHVybiBhKHRoaXNbMF0pLmlzKFwiZm9ybVwiKSA/IGIgPSB0aGlzLnZhbGlkYXRlKCkuZm9ybSgpIDogKGQgPSBbXSwgYiA9ICEwLCBjID0gYSh0aGlzWzBdLmZvcm0pLnZhbGlkYXRlKCksIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IGIgPSBjLmVsZW1lbnQodGhpcykgJiYgYiwgYiB8fCAoZCA9IGQuY29uY2F0KGMuZXJyb3JMaXN0KSkgfSksIGMuZXJyb3JMaXN0ID0gZCksIGIgfSwgcnVsZXM6IGZ1bmN0aW9uIChiLCBjKSB7IHZhciBkLCBlLCBmLCBnLCBoLCBpLCBqID0gdGhpc1swXTsgaWYgKG51bGwgIT0gaiAmJiAoIWouZm9ybSAmJiBqLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSAmJiAoai5mb3JtID0gdGhpcy5jbG9zZXN0KFwiZm9ybVwiKVswXSwgai5uYW1lID0gdGhpcy5hdHRyKFwibmFtZVwiKSksIG51bGwgIT0gai5mb3JtKSkgeyBpZiAoYikgc3dpdGNoIChkID0gYS5kYXRhKGouZm9ybSwgXCJ2YWxpZGF0b3JcIikuc2V0dGluZ3MsIGUgPSBkLnJ1bGVzLCBmID0gYS52YWxpZGF0b3Iuc3RhdGljUnVsZXMoaiksIGIpIHsgY2FzZSBcImFkZFwiOiBhLmV4dGVuZChmLCBhLnZhbGlkYXRvci5ub3JtYWxpemVSdWxlKGMpKSwgZGVsZXRlIGYubWVzc2FnZXMsIGVbai5uYW1lXSA9IGYsIGMubWVzc2FnZXMgJiYgKGQubWVzc2FnZXNbai5uYW1lXSA9IGEuZXh0ZW5kKGQubWVzc2FnZXNbai5uYW1lXSwgYy5tZXNzYWdlcykpOyBicmVhazsgY2FzZSBcInJlbW92ZVwiOiByZXR1cm4gYyA/IChpID0ge30sIGEuZWFjaChjLnNwbGl0KC9cXHMvKSwgZnVuY3Rpb24gKGEsIGIpIHsgaVtiXSA9IGZbYl0sIGRlbGV0ZSBmW2JdIH0pLCBpKSA6IChkZWxldGUgZVtqLm5hbWVdLCBmKSB9cmV0dXJuIGcgPSBhLnZhbGlkYXRvci5ub3JtYWxpemVSdWxlcyhhLmV4dGVuZCh7fSwgYS52YWxpZGF0b3IuY2xhc3NSdWxlcyhqKSwgYS52YWxpZGF0b3IuYXR0cmlidXRlUnVsZXMoaiksIGEudmFsaWRhdG9yLmRhdGFSdWxlcyhqKSwgYS52YWxpZGF0b3Iuc3RhdGljUnVsZXMoaikpLCBqKSwgZy5yZXF1aXJlZCAmJiAoaCA9IGcucmVxdWlyZWQsIGRlbGV0ZSBnLnJlcXVpcmVkLCBnID0gYS5leHRlbmQoeyByZXF1aXJlZDogaCB9LCBnKSksIGcucmVtb3RlICYmIChoID0gZy5yZW1vdGUsIGRlbGV0ZSBnLnJlbW90ZSwgZyA9IGEuZXh0ZW5kKGcsIHsgcmVtb3RlOiBoIH0pKSwgZyB9IH0gfSksIGEuZXh0ZW5kKGEuZXhwci5wc2V1ZG9zIHx8IGEuZXhwcltcIjpcIl0sIHsgYmxhbms6IGZ1bmN0aW9uIChiKSB7IHJldHVybiAhYS50cmltKFwiXCIgKyBhKGIpLnZhbCgpKSB9LCBmaWxsZWQ6IGZ1bmN0aW9uIChiKSB7IHZhciBjID0gYShiKS52YWwoKTsgcmV0dXJuIG51bGwgIT09IGMgJiYgISFhLnRyaW0oXCJcIiArIGMpIH0sIHVuY2hlY2tlZDogZnVuY3Rpb24gKGIpIHsgcmV0dXJuICFhKGIpLnByb3AoXCJjaGVja2VkXCIpIH0gfSksIGEudmFsaWRhdG9yID0gZnVuY3Rpb24gKGIsIGMpIHsgdGhpcy5zZXR0aW5ncyA9IGEuZXh0ZW5kKCEwLCB7fSwgYS52YWxpZGF0b3IuZGVmYXVsdHMsIGIpLCB0aGlzLmN1cnJlbnRGb3JtID0gYywgdGhpcy5pbml0KCkgfSwgYS52YWxpZGF0b3IuZm9ybWF0ID0gZnVuY3Rpb24gKGIsIGMpIHsgcmV0dXJuIDEgPT09IGFyZ3VtZW50cy5sZW5ndGggPyBmdW5jdGlvbiAoKSB7IHZhciBjID0gYS5tYWtlQXJyYXkoYXJndW1lbnRzKTsgcmV0dXJuIGMudW5zaGlmdChiKSwgYS52YWxpZGF0b3IuZm9ybWF0LmFwcGx5KHRoaXMsIGMpIH0gOiB2b2lkIDAgPT09IGMgPyBiIDogKGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGMuY29uc3RydWN0b3IgIT09IEFycmF5ICYmIChjID0gYS5tYWtlQXJyYXkoYXJndW1lbnRzKS5zbGljZSgxKSksIGMuY29uc3RydWN0b3IgIT09IEFycmF5ICYmIChjID0gW2NdKSwgYS5lYWNoKGMsIGZ1bmN0aW9uIChhLCBjKSB7IGIgPSBiLnJlcGxhY2UobmV3IFJlZ0V4cChcIlxcXFx7XCIgKyBhICsgXCJcXFxcfVwiLCBcImdcIiksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGMgfSkgfSksIGIpIH0sIGEuZXh0ZW5kKGEudmFsaWRhdG9yLCB7IGRlZmF1bHRzOiB7IG1lc3NhZ2VzOiB7fSwgZ3JvdXBzOiB7fSwgcnVsZXM6IHt9LCBlcnJvckNsYXNzOiBcImVycm9yXCIsIHBlbmRpbmdDbGFzczogXCJwZW5kaW5nXCIsIHZhbGlkQ2xhc3M6IFwidmFsaWRcIiwgZXJyb3JFbGVtZW50OiBcImxhYmVsXCIsIGZvY3VzQ2xlYW51cDogITEsIGZvY3VzSW52YWxpZDogITAsIGVycm9yQ29udGFpbmVyOiBhKFtdKSwgZXJyb3JMYWJlbENvbnRhaW5lcjogYShbXSksIG9uc3VibWl0OiAhMCwgaWdub3JlOiBcIjpoaWRkZW5cIiwgaWdub3JlVGl0bGU6ICExLCBvbmZvY3VzaW46IGZ1bmN0aW9uIChhKSB7IHRoaXMubGFzdEFjdGl2ZSA9IGEsIHRoaXMuc2V0dGluZ3MuZm9jdXNDbGVhbnVwICYmICh0aGlzLnNldHRpbmdzLnVuaGlnaGxpZ2h0ICYmIHRoaXMuc2V0dGluZ3MudW5oaWdobGlnaHQuY2FsbCh0aGlzLCBhLCB0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MsIHRoaXMuc2V0dGluZ3MudmFsaWRDbGFzcyksIHRoaXMuaGlkZVRoZXNlKHRoaXMuZXJyb3JzRm9yKGEpKSkgfSwgb25mb2N1c291dDogZnVuY3Rpb24gKGEpIHsgdGhpcy5jaGVja2FibGUoYSkgfHwgIShhLm5hbWUgaW4gdGhpcy5zdWJtaXR0ZWQpICYmIHRoaXMub3B0aW9uYWwoYSkgfHwgdGhpcy5lbGVtZW50KGEpIH0sIG9ua2V5dXA6IGZ1bmN0aW9uIChiLCBjKSB7IHZhciBkID0gWzE2LCAxNywgMTgsIDIwLCAzNSwgMzYsIDM3LCAzOCwgMzksIDQwLCA0NSwgMTQ0LCAyMjVdOyA5ID09PSBjLndoaWNoICYmIFwiXCIgPT09IHRoaXMuZWxlbWVudFZhbHVlKGIpIHx8IGEuaW5BcnJheShjLmtleUNvZGUsIGQpICE9PSAtMSB8fCAoYi5uYW1lIGluIHRoaXMuc3VibWl0dGVkIHx8IGIubmFtZSBpbiB0aGlzLmludmFsaWQpICYmIHRoaXMuZWxlbWVudChiKSB9LCBvbmNsaWNrOiBmdW5jdGlvbiAoYSkgeyBhLm5hbWUgaW4gdGhpcy5zdWJtaXR0ZWQgPyB0aGlzLmVsZW1lbnQoYSkgOiBhLnBhcmVudE5vZGUubmFtZSBpbiB0aGlzLnN1Ym1pdHRlZCAmJiB0aGlzLmVsZW1lbnQoYS5wYXJlbnROb2RlKSB9LCBoaWdobGlnaHQ6IGZ1bmN0aW9uIChiLCBjLCBkKSB7IFwicmFkaW9cIiA9PT0gYi50eXBlID8gdGhpcy5maW5kQnlOYW1lKGIubmFtZSkuYWRkQ2xhc3MoYykucmVtb3ZlQ2xhc3MoZCkgOiBhKGIpLmFkZENsYXNzKGMpLnJlbW92ZUNsYXNzKGQpIH0sIHVuaGlnaGxpZ2h0OiBmdW5jdGlvbiAoYiwgYywgZCkgeyBcInJhZGlvXCIgPT09IGIudHlwZSA/IHRoaXMuZmluZEJ5TmFtZShiLm5hbWUpLnJlbW92ZUNsYXNzKGMpLmFkZENsYXNzKGQpIDogYShiKS5yZW1vdmVDbGFzcyhjKS5hZGRDbGFzcyhkKSB9IH0sIHNldERlZmF1bHRzOiBmdW5jdGlvbiAoYikgeyBhLmV4dGVuZChhLnZhbGlkYXRvci5kZWZhdWx0cywgYikgfSwgbWVzc2FnZXM6IHsgcmVxdWlyZWQ6IFwiVGhpcyBmaWVsZCBpcyByZXF1aXJlZC5cIiwgcmVtb3RlOiBcIlBsZWFzZSBmaXggdGhpcyBmaWVsZC5cIiwgZW1haWw6IFwiUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwgYWRkcmVzcy5cIiwgdXJsOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIFVSTC5cIiwgZGF0ZTogXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBkYXRlLlwiLCBkYXRlSVNPOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGRhdGUgKElTTykuXCIsIG51bWJlcjogXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBudW1iZXIuXCIsIGRpZ2l0czogXCJQbGVhc2UgZW50ZXIgb25seSBkaWdpdHMuXCIsIGVxdWFsVG86IFwiUGxlYXNlIGVudGVyIHRoZSBzYW1lIHZhbHVlIGFnYWluLlwiLCBtYXhsZW5ndGg6IGEudmFsaWRhdG9yLmZvcm1hdChcIlBsZWFzZSBlbnRlciBubyBtb3JlIHRoYW4gezB9IGNoYXJhY3RlcnMuXCIpLCBtaW5sZW5ndGg6IGEudmFsaWRhdG9yLmZvcm1hdChcIlBsZWFzZSBlbnRlciBhdCBsZWFzdCB7MH0gY2hhcmFjdGVycy5cIiksIHJhbmdlbGVuZ3RoOiBhLnZhbGlkYXRvci5mb3JtYXQoXCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBiZXR3ZWVuIHswfSBhbmQgezF9IGNoYXJhY3RlcnMgbG9uZy5cIiksIHJhbmdlOiBhLnZhbGlkYXRvci5mb3JtYXQoXCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBiZXR3ZWVuIHswfSBhbmQgezF9LlwiKSwgbWF4OiBhLnZhbGlkYXRvci5mb3JtYXQoXCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gezB9LlwiKSwgbWluOiBhLnZhbGlkYXRvci5mb3JtYXQoXCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gezB9LlwiKSwgc3RlcDogYS52YWxpZGF0b3IuZm9ybWF0KFwiUGxlYXNlIGVudGVyIGEgbXVsdGlwbGUgb2YgezB9LlwiKSB9LCBhdXRvQ3JlYXRlUmFuZ2VzOiAhMSwgcHJvdG90eXBlOiB7IGluaXQ6IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gYihiKSB7ICF0aGlzLmZvcm0gJiYgdGhpcy5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikgJiYgKHRoaXMuZm9ybSA9IGEodGhpcykuY2xvc2VzdChcImZvcm1cIilbMF0sIHRoaXMubmFtZSA9IGEodGhpcykuYXR0cihcIm5hbWVcIikpOyB2YXIgYyA9IGEuZGF0YSh0aGlzLmZvcm0sIFwidmFsaWRhdG9yXCIpLCBkID0gXCJvblwiICsgYi50eXBlLnJlcGxhY2UoL152YWxpZGF0ZS8sIFwiXCIpLCBlID0gYy5zZXR0aW5nczsgZVtkXSAmJiAhYSh0aGlzKS5pcyhlLmlnbm9yZSkgJiYgZVtkXS5jYWxsKGMsIHRoaXMsIGIpIH0gdGhpcy5sYWJlbENvbnRhaW5lciA9IGEodGhpcy5zZXR0aW5ncy5lcnJvckxhYmVsQ29udGFpbmVyKSwgdGhpcy5lcnJvckNvbnRleHQgPSB0aGlzLmxhYmVsQ29udGFpbmVyLmxlbmd0aCAmJiB0aGlzLmxhYmVsQ29udGFpbmVyIHx8IGEodGhpcy5jdXJyZW50Rm9ybSksIHRoaXMuY29udGFpbmVycyA9IGEodGhpcy5zZXR0aW5ncy5lcnJvckNvbnRhaW5lcikuYWRkKHRoaXMuc2V0dGluZ3MuZXJyb3JMYWJlbENvbnRhaW5lciksIHRoaXMuc3VibWl0dGVkID0ge30sIHRoaXMudmFsdWVDYWNoZSA9IHt9LCB0aGlzLnBlbmRpbmdSZXF1ZXN0ID0gMCwgdGhpcy5wZW5kaW5nID0ge30sIHRoaXMuaW52YWxpZCA9IHt9LCB0aGlzLnJlc2V0KCk7IHZhciBjLCBkID0gdGhpcy5ncm91cHMgPSB7fTsgYS5lYWNoKHRoaXMuc2V0dGluZ3MuZ3JvdXBzLCBmdW5jdGlvbiAoYiwgYykgeyBcInN0cmluZ1wiID09IHR5cGVvZiBjICYmIChjID0gYy5zcGxpdCgvXFxzLykpLCBhLmVhY2goYywgZnVuY3Rpb24gKGEsIGMpIHsgZFtjXSA9IGIgfSkgfSksIGMgPSB0aGlzLnNldHRpbmdzLnJ1bGVzLCBhLmVhY2goYywgZnVuY3Rpb24gKGIsIGQpIHsgY1tiXSA9IGEudmFsaWRhdG9yLm5vcm1hbGl6ZVJ1bGUoZCkgfSksIGEodGhpcy5jdXJyZW50Rm9ybSkub24oXCJmb2N1c2luLnZhbGlkYXRlIGZvY3Vzb3V0LnZhbGlkYXRlIGtleXVwLnZhbGlkYXRlXCIsIFwiOnRleHQsIFt0eXBlPSdwYXNzd29yZCddLCBbdHlwZT0nZmlsZSddLCBzZWxlY3QsIHRleHRhcmVhLCBbdHlwZT0nbnVtYmVyJ10sIFt0eXBlPSdzZWFyY2gnXSwgW3R5cGU9J3RlbCddLCBbdHlwZT0ndXJsJ10sIFt0eXBlPSdlbWFpbCddLCBbdHlwZT0nZGF0ZXRpbWUnXSwgW3R5cGU9J2RhdGUnXSwgW3R5cGU9J21vbnRoJ10sIFt0eXBlPSd3ZWVrJ10sIFt0eXBlPSd0aW1lJ10sIFt0eXBlPSdkYXRldGltZS1sb2NhbCddLCBbdHlwZT0ncmFuZ2UnXSwgW3R5cGU9J2NvbG9yJ10sIFt0eXBlPSdyYWRpbyddLCBbdHlwZT0nY2hlY2tib3gnXSwgW2NvbnRlbnRlZGl0YWJsZV0sIFt0eXBlPSdidXR0b24nXVwiLCBiKS5vbihcImNsaWNrLnZhbGlkYXRlXCIsIFwic2VsZWN0LCBvcHRpb24sIFt0eXBlPSdyYWRpbyddLCBbdHlwZT0nY2hlY2tib3gnXVwiLCBiKSwgdGhpcy5zZXR0aW5ncy5pbnZhbGlkSGFuZGxlciAmJiBhKHRoaXMuY3VycmVudEZvcm0pLm9uKFwiaW52YWxpZC1mb3JtLnZhbGlkYXRlXCIsIHRoaXMuc2V0dGluZ3MuaW52YWxpZEhhbmRsZXIpIH0sIGZvcm06IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuY2hlY2tGb3JtKCksIGEuZXh0ZW5kKHRoaXMuc3VibWl0dGVkLCB0aGlzLmVycm9yTWFwKSwgdGhpcy5pbnZhbGlkID0gYS5leHRlbmQoe30sIHRoaXMuZXJyb3JNYXApLCB0aGlzLnZhbGlkKCkgfHwgYSh0aGlzLmN1cnJlbnRGb3JtKS50cmlnZ2VySGFuZGxlcihcImludmFsaWQtZm9ybVwiLCBbdGhpc10pLCB0aGlzLnNob3dFcnJvcnMoKSwgdGhpcy52YWxpZCgpIH0sIGNoZWNrRm9ybTogZnVuY3Rpb24gKCkgeyB0aGlzLnByZXBhcmVGb3JtKCk7IGZvciAodmFyIGEgPSAwLCBiID0gdGhpcy5jdXJyZW50RWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzKCk7IGJbYV07IGErKyl0aGlzLmNoZWNrKGJbYV0pOyByZXR1cm4gdGhpcy52YWxpZCgpIH0sIGVsZW1lbnQ6IGZ1bmN0aW9uIChiKSB7IHZhciBjLCBkLCBlID0gdGhpcy5jbGVhbihiKSwgZiA9IHRoaXMudmFsaWRhdGlvblRhcmdldEZvcihlKSwgZyA9IHRoaXMsIGggPSAhMDsgcmV0dXJuIHZvaWQgMCA9PT0gZiA/IGRlbGV0ZSB0aGlzLmludmFsaWRbZS5uYW1lXSA6ICh0aGlzLnByZXBhcmVFbGVtZW50KGYpLCB0aGlzLmN1cnJlbnRFbGVtZW50cyA9IGEoZiksIGQgPSB0aGlzLmdyb3Vwc1tmLm5hbWVdLCBkICYmIGEuZWFjaCh0aGlzLmdyb3VwcywgZnVuY3Rpb24gKGEsIGIpIHsgYiA9PT0gZCAmJiBhICE9PSBmLm5hbWUgJiYgKGUgPSBnLnZhbGlkYXRpb25UYXJnZXRGb3IoZy5jbGVhbihnLmZpbmRCeU5hbWUoYSkpKSwgZSAmJiBlLm5hbWUgaW4gZy5pbnZhbGlkICYmIChnLmN1cnJlbnRFbGVtZW50cy5wdXNoKGUpLCBoID0gZy5jaGVjayhlKSAmJiBoKSkgfSksIGMgPSB0aGlzLmNoZWNrKGYpICE9PSAhMSwgaCA9IGggJiYgYywgYyA/IHRoaXMuaW52YWxpZFtmLm5hbWVdID0gITEgOiB0aGlzLmludmFsaWRbZi5uYW1lXSA9ICEwLCB0aGlzLm51bWJlck9mSW52YWxpZHMoKSB8fCAodGhpcy50b0hpZGUgPSB0aGlzLnRvSGlkZS5hZGQodGhpcy5jb250YWluZXJzKSksIHRoaXMuc2hvd0Vycm9ycygpLCBhKGIpLmF0dHIoXCJhcmlhLWludmFsaWRcIiwgIWMpKSwgaCB9LCBzaG93RXJyb3JzOiBmdW5jdGlvbiAoYikgeyBpZiAoYikgeyB2YXIgYyA9IHRoaXM7IGEuZXh0ZW5kKHRoaXMuZXJyb3JNYXAsIGIpLCB0aGlzLmVycm9yTGlzdCA9IGEubWFwKHRoaXMuZXJyb3JNYXAsIGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiB7IG1lc3NhZ2U6IGEsIGVsZW1lbnQ6IGMuZmluZEJ5TmFtZShiKVswXSB9IH0pLCB0aGlzLnN1Y2Nlc3NMaXN0ID0gYS5ncmVwKHRoaXMuc3VjY2Vzc0xpc3QsIGZ1bmN0aW9uIChhKSB7IHJldHVybiAhKGEubmFtZSBpbiBiKSB9KSB9IHRoaXMuc2V0dGluZ3Muc2hvd0Vycm9ycyA/IHRoaXMuc2V0dGluZ3Muc2hvd0Vycm9ycy5jYWxsKHRoaXMsIHRoaXMuZXJyb3JNYXAsIHRoaXMuZXJyb3JMaXN0KSA6IHRoaXMuZGVmYXVsdFNob3dFcnJvcnMoKSB9LCByZXNldEZvcm06IGZ1bmN0aW9uICgpIHsgYS5mbi5yZXNldEZvcm0gJiYgYSh0aGlzLmN1cnJlbnRGb3JtKS5yZXNldEZvcm0oKSwgdGhpcy5pbnZhbGlkID0ge30sIHRoaXMuc3VibWl0dGVkID0ge30sIHRoaXMucHJlcGFyZUZvcm0oKSwgdGhpcy5oaWRlRXJyb3JzKCk7IHZhciBiID0gdGhpcy5lbGVtZW50cygpLnJlbW92ZURhdGEoXCJwcmV2aW91c1ZhbHVlXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWludmFsaWRcIik7IHRoaXMucmVzZXRFbGVtZW50cyhiKSB9LCByZXNldEVsZW1lbnRzOiBmdW5jdGlvbiAoYSkgeyB2YXIgYjsgaWYgKHRoaXMuc2V0dGluZ3MudW5oaWdobGlnaHQpIGZvciAoYiA9IDA7IGFbYl07IGIrKyl0aGlzLnNldHRpbmdzLnVuaGlnaGxpZ2h0LmNhbGwodGhpcywgYVtiXSwgdGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzLCBcIlwiKSwgdGhpcy5maW5kQnlOYW1lKGFbYl0ubmFtZSkucmVtb3ZlQ2xhc3ModGhpcy5zZXR0aW5ncy52YWxpZENsYXNzKTsgZWxzZSBhLnJlbW92ZUNsYXNzKHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcykucmVtb3ZlQ2xhc3ModGhpcy5zZXR0aW5ncy52YWxpZENsYXNzKSB9LCBudW1iZXJPZkludmFsaWRzOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLm9iamVjdExlbmd0aCh0aGlzLmludmFsaWQpIH0sIG9iamVjdExlbmd0aDogZnVuY3Rpb24gKGEpIHsgdmFyIGIsIGMgPSAwOyBmb3IgKGIgaW4gYSkgdm9pZCAwICE9PSBhW2JdICYmIG51bGwgIT09IGFbYl0gJiYgYVtiXSAhPT0gITEgJiYgYysrOyByZXR1cm4gYyB9LCBoaWRlRXJyb3JzOiBmdW5jdGlvbiAoKSB7IHRoaXMuaGlkZVRoZXNlKHRoaXMudG9IaWRlKSB9LCBoaWRlVGhlc2U6IGZ1bmN0aW9uIChhKSB7IGEubm90KHRoaXMuY29udGFpbmVycykudGV4dChcIlwiKSwgdGhpcy5hZGRXcmFwcGVyKGEpLmhpZGUoKSB9LCB2YWxpZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gMCA9PT0gdGhpcy5zaXplKCkgfSwgc2l6ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5lcnJvckxpc3QubGVuZ3RoIH0sIGZvY3VzSW52YWxpZDogZnVuY3Rpb24gKCkgeyBpZiAodGhpcy5zZXR0aW5ncy5mb2N1c0ludmFsaWQpIHRyeSB7IGEodGhpcy5maW5kTGFzdEFjdGl2ZSgpIHx8IHRoaXMuZXJyb3JMaXN0Lmxlbmd0aCAmJiB0aGlzLmVycm9yTGlzdFswXS5lbGVtZW50IHx8IFtdKS5maWx0ZXIoXCI6dmlzaWJsZVwiKS5mb2N1cygpLnRyaWdnZXIoXCJmb2N1c2luXCIpIH0gY2F0Y2ggKGIpIHsgfSB9LCBmaW5kTGFzdEFjdGl2ZTogZnVuY3Rpb24gKCkgeyB2YXIgYiA9IHRoaXMubGFzdEFjdGl2ZTsgcmV0dXJuIGIgJiYgMSA9PT0gYS5ncmVwKHRoaXMuZXJyb3JMaXN0LCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS5lbGVtZW50Lm5hbWUgPT09IGIubmFtZSB9KS5sZW5ndGggJiYgYiB9LCBlbGVtZW50czogZnVuY3Rpb24gKCkgeyB2YXIgYiA9IHRoaXMsIGMgPSB7fTsgcmV0dXJuIGEodGhpcy5jdXJyZW50Rm9ybSkuZmluZChcImlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBbY29udGVudGVkaXRhYmxlXVwiKS5ub3QoXCI6c3VibWl0LCA6cmVzZXQsIDppbWFnZSwgOmRpc2FibGVkXCIpLm5vdCh0aGlzLnNldHRpbmdzLmlnbm9yZSkuZmlsdGVyKGZ1bmN0aW9uICgpIHsgdmFyIGQgPSB0aGlzLm5hbWUgfHwgYSh0aGlzKS5hdHRyKFwibmFtZVwiKTsgcmV0dXJuICFkICYmIGIuc2V0dGluZ3MuZGVidWcgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS5lcnJvcihcIiVvIGhhcyBubyBuYW1lIGFzc2lnbmVkXCIsIHRoaXMpLCB0aGlzLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSAmJiAodGhpcy5mb3JtID0gYSh0aGlzKS5jbG9zZXN0KFwiZm9ybVwiKVswXSwgdGhpcy5uYW1lID0gZCksICEoZCBpbiBjIHx8ICFiLm9iamVjdExlbmd0aChhKHRoaXMpLnJ1bGVzKCkpKSAmJiAoY1tkXSA9ICEwLCAhMCkgfSkgfSwgY2xlYW46IGZ1bmN0aW9uIChiKSB7IHJldHVybiBhKGIpWzBdIH0sIGVycm9yczogZnVuY3Rpb24gKCkgeyB2YXIgYiA9IHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcy5zcGxpdChcIiBcIikuam9pbihcIi5cIik7IHJldHVybiBhKHRoaXMuc2V0dGluZ3MuZXJyb3JFbGVtZW50ICsgXCIuXCIgKyBiLCB0aGlzLmVycm9yQ29udGV4dCkgfSwgcmVzZXRJbnRlcm5hbHM6IGZ1bmN0aW9uICgpIHsgdGhpcy5zdWNjZXNzTGlzdCA9IFtdLCB0aGlzLmVycm9yTGlzdCA9IFtdLCB0aGlzLmVycm9yTWFwID0ge30sIHRoaXMudG9TaG93ID0gYShbXSksIHRoaXMudG9IaWRlID0gYShbXSkgfSwgcmVzZXQ6IGZ1bmN0aW9uICgpIHsgdGhpcy5yZXNldEludGVybmFscygpLCB0aGlzLmN1cnJlbnRFbGVtZW50cyA9IGEoW10pIH0sIHByZXBhcmVGb3JtOiBmdW5jdGlvbiAoKSB7IHRoaXMucmVzZXQoKSwgdGhpcy50b0hpZGUgPSB0aGlzLmVycm9ycygpLmFkZCh0aGlzLmNvbnRhaW5lcnMpIH0sIHByZXBhcmVFbGVtZW50OiBmdW5jdGlvbiAoYSkgeyB0aGlzLnJlc2V0KCksIHRoaXMudG9IaWRlID0gdGhpcy5lcnJvcnNGb3IoYSkgfSwgZWxlbWVudFZhbHVlOiBmdW5jdGlvbiAoYikgeyB2YXIgYywgZCwgZSA9IGEoYiksIGYgPSBiLnR5cGU7IHJldHVybiBcInJhZGlvXCIgPT09IGYgfHwgXCJjaGVja2JveFwiID09PSBmID8gdGhpcy5maW5kQnlOYW1lKGIubmFtZSkuZmlsdGVyKFwiOmNoZWNrZWRcIikudmFsKCkgOiBcIm51bWJlclwiID09PSBmICYmIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGIudmFsaWRpdHkgPyBiLnZhbGlkaXR5LmJhZElucHV0ID8gXCJOYU5cIiA6IGUudmFsKCkgOiAoYyA9IGIuaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpID8gZS50ZXh0KCkgOiBlLnZhbCgpLCBcImZpbGVcIiA9PT0gZiA/IFwiQzpcXFxcZmFrZXBhdGhcXFxcXCIgPT09IGMuc3Vic3RyKDAsIDEyKSA/IGMuc3Vic3RyKDEyKSA6IChkID0gYy5sYXN0SW5kZXhPZihcIi9cIiksIGQgPj0gMCA/IGMuc3Vic3RyKGQgKyAxKSA6IChkID0gYy5sYXN0SW5kZXhPZihcIlxcXFxcIiksIGQgPj0gMCA/IGMuc3Vic3RyKGQgKyAxKSA6IGMpKSA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIGMgPyBjLnJlcGxhY2UoL1xcci9nLCBcIlwiKSA6IGMpIH0sIGNoZWNrOiBmdW5jdGlvbiAoYikgeyBiID0gdGhpcy52YWxpZGF0aW9uVGFyZ2V0Rm9yKHRoaXMuY2xlYW4oYikpOyB2YXIgYywgZCwgZSwgZiwgZyA9IGEoYikucnVsZXMoKSwgaCA9IGEubWFwKGcsIGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBiIH0pLmxlbmd0aCwgaSA9ICExLCBqID0gdGhpcy5lbGVtZW50VmFsdWUoYik7IGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGcubm9ybWFsaXplciA/IGYgPSBnLm5vcm1hbGl6ZXIgOiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHRoaXMuc2V0dGluZ3Mubm9ybWFsaXplciAmJiAoZiA9IHRoaXMuc2V0dGluZ3Mubm9ybWFsaXplciksIGYpIHsgaWYgKGogPSBmLmNhbGwoYiwgaiksIFwic3RyaW5nXCIgIT0gdHlwZW9mIGopIHRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgbm9ybWFsaXplciBzaG91bGQgcmV0dXJuIGEgc3RyaW5nIHZhbHVlLlwiKTsgZGVsZXRlIGcubm9ybWFsaXplciB9IGZvciAoZCBpbiBnKSB7IGUgPSB7IG1ldGhvZDogZCwgcGFyYW1ldGVyczogZ1tkXSB9OyB0cnkgeyBpZiAoYyA9IGEudmFsaWRhdG9yLm1ldGhvZHNbZF0uY2FsbCh0aGlzLCBqLCBiLCBlLnBhcmFtZXRlcnMpLCBcImRlcGVuZGVuY3ktbWlzbWF0Y2hcIiA9PT0gYyAmJiAxID09PSBoKSB7IGkgPSAhMDsgY29udGludWUgfSBpZiAoaSA9ICExLCBcInBlbmRpbmdcIiA9PT0gYykgcmV0dXJuIHZvaWQgKHRoaXMudG9IaWRlID0gdGhpcy50b0hpZGUubm90KHRoaXMuZXJyb3JzRm9yKGIpKSk7IGlmICghYykgcmV0dXJuIHRoaXMuZm9ybWF0QW5kQWRkKGIsIGUpLCAhMSB9IGNhdGNoIChrKSB7IHRocm93IHRoaXMuc2V0dGluZ3MuZGVidWcgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS5sb2coXCJFeGNlcHRpb24gb2NjdXJyZWQgd2hlbiBjaGVja2luZyBlbGVtZW50IFwiICsgYi5pZCArIFwiLCBjaGVjayB0aGUgJ1wiICsgZS5tZXRob2QgKyBcIicgbWV0aG9kLlwiLCBrKSwgayBpbnN0YW5jZW9mIFR5cGVFcnJvciAmJiAoay5tZXNzYWdlICs9IFwiLiAgRXhjZXB0aW9uIG9jY3VycmVkIHdoZW4gY2hlY2tpbmcgZWxlbWVudCBcIiArIGIuaWQgKyBcIiwgY2hlY2sgdGhlICdcIiArIGUubWV0aG9kICsgXCInIG1ldGhvZC5cIiksIGsgfSB9IGlmICghaSkgcmV0dXJuIHRoaXMub2JqZWN0TGVuZ3RoKGcpICYmIHRoaXMuc3VjY2Vzc0xpc3QucHVzaChiKSwgITAgfSwgY3VzdG9tRGF0YU1lc3NhZ2U6IGZ1bmN0aW9uIChiLCBjKSB7IHJldHVybiBhKGIpLmRhdGEoXCJtc2dcIiArIGMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjLnN1YnN0cmluZygxKS50b0xvd2VyQ2FzZSgpKSB8fCBhKGIpLmRhdGEoXCJtc2dcIikgfSwgY3VzdG9tTWVzc2FnZTogZnVuY3Rpb24gKGEsIGIpIHsgdmFyIGMgPSB0aGlzLnNldHRpbmdzLm1lc3NhZ2VzW2FdOyByZXR1cm4gYyAmJiAoYy5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nID8gYyA6IGNbYl0pIH0sIGZpbmREZWZpbmVkOiBmdW5jdGlvbiAoKSB7IGZvciAodmFyIGEgPSAwOyBhIDwgYXJndW1lbnRzLmxlbmd0aDsgYSsrKWlmICh2b2lkIDAgIT09IGFyZ3VtZW50c1thXSkgcmV0dXJuIGFyZ3VtZW50c1thXSB9LCBkZWZhdWx0TWVzc2FnZTogZnVuY3Rpb24gKGIsIGMpIHsgXCJzdHJpbmdcIiA9PSB0eXBlb2YgYyAmJiAoYyA9IHsgbWV0aG9kOiBjIH0pOyB2YXIgZCA9IHRoaXMuZmluZERlZmluZWQodGhpcy5jdXN0b21NZXNzYWdlKGIubmFtZSwgYy5tZXRob2QpLCB0aGlzLmN1c3RvbURhdGFNZXNzYWdlKGIsIGMubWV0aG9kKSwgIXRoaXMuc2V0dGluZ3MuaWdub3JlVGl0bGUgJiYgYi50aXRsZSB8fCB2b2lkIDAsIGEudmFsaWRhdG9yLm1lc3NhZ2VzW2MubWV0aG9kXSwgXCI8c3Ryb25nPldhcm5pbmc6IE5vIG1lc3NhZ2UgZGVmaW5lZCBmb3IgXCIgKyBiLm5hbWUgKyBcIjwvc3Ryb25nPlwiKSwgZSA9IC9cXCQ/XFx7KFxcZCspXFx9L2c7IHJldHVybiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGQgPyBkID0gZC5jYWxsKHRoaXMsIGMucGFyYW1ldGVycywgYikgOiBlLnRlc3QoZCkgJiYgKGQgPSBhLnZhbGlkYXRvci5mb3JtYXQoZC5yZXBsYWNlKGUsIFwieyQxfVwiKSwgYy5wYXJhbWV0ZXJzKSksIGQgfSwgZm9ybWF0QW5kQWRkOiBmdW5jdGlvbiAoYSwgYikgeyB2YXIgYyA9IHRoaXMuZGVmYXVsdE1lc3NhZ2UoYSwgYik7IHRoaXMuZXJyb3JMaXN0LnB1c2goeyBtZXNzYWdlOiBjLCBlbGVtZW50OiBhLCBtZXRob2Q6IGIubWV0aG9kIH0pLCB0aGlzLmVycm9yTWFwW2EubmFtZV0gPSBjLCB0aGlzLnN1Ym1pdHRlZFthLm5hbWVdID0gYyB9LCBhZGRXcmFwcGVyOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gdGhpcy5zZXR0aW5ncy53cmFwcGVyICYmIChhID0gYS5hZGQoYS5wYXJlbnQodGhpcy5zZXR0aW5ncy53cmFwcGVyKSkpLCBhIH0sIGRlZmF1bHRTaG93RXJyb3JzOiBmdW5jdGlvbiAoKSB7IHZhciBhLCBiLCBjOyBmb3IgKGEgPSAwOyB0aGlzLmVycm9yTGlzdFthXTsgYSsrKWMgPSB0aGlzLmVycm9yTGlzdFthXSwgdGhpcy5zZXR0aW5ncy5oaWdobGlnaHQgJiYgdGhpcy5zZXR0aW5ncy5oaWdobGlnaHQuY2FsbCh0aGlzLCBjLmVsZW1lbnQsIHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcywgdGhpcy5zZXR0aW5ncy52YWxpZENsYXNzKSwgdGhpcy5zaG93TGFiZWwoYy5lbGVtZW50LCBjLm1lc3NhZ2UpOyBpZiAodGhpcy5lcnJvckxpc3QubGVuZ3RoICYmICh0aGlzLnRvU2hvdyA9IHRoaXMudG9TaG93LmFkZCh0aGlzLmNvbnRhaW5lcnMpKSwgdGhpcy5zZXR0aW5ncy5zdWNjZXNzKSBmb3IgKGEgPSAwOyB0aGlzLnN1Y2Nlc3NMaXN0W2FdOyBhKyspdGhpcy5zaG93TGFiZWwodGhpcy5zdWNjZXNzTGlzdFthXSk7IGlmICh0aGlzLnNldHRpbmdzLnVuaGlnaGxpZ2h0KSBmb3IgKGEgPSAwLCBiID0gdGhpcy52YWxpZEVsZW1lbnRzKCk7IGJbYV07IGErKyl0aGlzLnNldHRpbmdzLnVuaGlnaGxpZ2h0LmNhbGwodGhpcywgYlthXSwgdGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzLCB0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MpOyB0aGlzLnRvSGlkZSA9IHRoaXMudG9IaWRlLm5vdCh0aGlzLnRvU2hvdyksIHRoaXMuaGlkZUVycm9ycygpLCB0aGlzLmFkZFdyYXBwZXIodGhpcy50b1Nob3cpLnNob3coKSB9LCB2YWxpZEVsZW1lbnRzOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmN1cnJlbnRFbGVtZW50cy5ub3QodGhpcy5pbnZhbGlkRWxlbWVudHMoKSkgfSwgaW52YWxpZEVsZW1lbnRzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBhKHRoaXMuZXJyb3JMaXN0KS5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5lbGVtZW50IH0pIH0sIHNob3dMYWJlbDogZnVuY3Rpb24gKGIsIGMpIHsgdmFyIGQsIGUsIGYsIGcsIGggPSB0aGlzLmVycm9yc0ZvcihiKSwgaSA9IHRoaXMuaWRPck5hbWUoYiksIGogPSBhKGIpLmF0dHIoXCJhcmlhLWRlc2NyaWJlZGJ5XCIpOyBoLmxlbmd0aCA/IChoLnJlbW92ZUNsYXNzKHRoaXMuc2V0dGluZ3MudmFsaWRDbGFzcykuYWRkQ2xhc3ModGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzKSwgaC5odG1sKGMpKSA6IChoID0gYShcIjxcIiArIHRoaXMuc2V0dGluZ3MuZXJyb3JFbGVtZW50ICsgXCI+XCIpLmF0dHIoXCJpZFwiLCBpICsgXCItZXJyb3JcIikuYWRkQ2xhc3ModGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzKS5odG1sKGMgfHwgXCJcIiksIGQgPSBoLCB0aGlzLnNldHRpbmdzLndyYXBwZXIgJiYgKGQgPSBoLmhpZGUoKS5zaG93KCkud3JhcChcIjxcIiArIHRoaXMuc2V0dGluZ3Mud3JhcHBlciArIFwiLz5cIikucGFyZW50KCkpLCB0aGlzLmxhYmVsQ29udGFpbmVyLmxlbmd0aCA/IHRoaXMubGFiZWxDb250YWluZXIuYXBwZW5kKGQpIDogdGhpcy5zZXR0aW5ncy5lcnJvclBsYWNlbWVudCA/IHRoaXMuc2V0dGluZ3MuZXJyb3JQbGFjZW1lbnQuY2FsbCh0aGlzLCBkLCBhKGIpKSA6IGQuaW5zZXJ0QWZ0ZXIoYiksIGguaXMoXCJsYWJlbFwiKSA/IGguYXR0cihcImZvclwiLCBpKSA6IDAgPT09IGgucGFyZW50cyhcImxhYmVsW2Zvcj0nXCIgKyB0aGlzLmVzY2FwZUNzc01ldGEoaSkgKyBcIiddXCIpLmxlbmd0aCAmJiAoZiA9IGguYXR0cihcImlkXCIpLCBqID8gai5tYXRjaChuZXcgUmVnRXhwKFwiXFxcXGJcIiArIHRoaXMuZXNjYXBlQ3NzTWV0YShmKSArIFwiXFxcXGJcIikpIHx8IChqICs9IFwiIFwiICsgZikgOiBqID0gZiwgYShiKS5hdHRyKFwiYXJpYS1kZXNjcmliZWRieVwiLCBqKSwgZSA9IHRoaXMuZ3JvdXBzW2IubmFtZV0sIGUgJiYgKGcgPSB0aGlzLCBhLmVhY2goZy5ncm91cHMsIGZ1bmN0aW9uIChiLCBjKSB7IGMgPT09IGUgJiYgYShcIltuYW1lPSdcIiArIGcuZXNjYXBlQ3NzTWV0YShiKSArIFwiJ11cIiwgZy5jdXJyZW50Rm9ybSkuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIiwgaC5hdHRyKFwiaWRcIikpIH0pKSkpLCAhYyAmJiB0aGlzLnNldHRpbmdzLnN1Y2Nlc3MgJiYgKGgudGV4dChcIlwiKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdGhpcy5zZXR0aW5ncy5zdWNjZXNzID8gaC5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLnN1Y2Nlc3MpIDogdGhpcy5zZXR0aW5ncy5zdWNjZXNzKGgsIGIpKSwgdGhpcy50b1Nob3cgPSB0aGlzLnRvU2hvdy5hZGQoaCkgfSwgZXJyb3JzRm9yOiBmdW5jdGlvbiAoYikgeyB2YXIgYyA9IHRoaXMuZXNjYXBlQ3NzTWV0YSh0aGlzLmlkT3JOYW1lKGIpKSwgZCA9IGEoYikuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIiksIGUgPSBcImxhYmVsW2Zvcj0nXCIgKyBjICsgXCInXSwgbGFiZWxbZm9yPSdcIiArIGMgKyBcIiddICpcIjsgcmV0dXJuIGQgJiYgKGUgPSBlICsgXCIsICNcIiArIHRoaXMuZXNjYXBlQ3NzTWV0YShkKS5yZXBsYWNlKC9cXHMrL2csIFwiLCAjXCIpKSwgdGhpcy5lcnJvcnMoKS5maWx0ZXIoZSkgfSwgZXNjYXBlQ3NzTWV0YTogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEucmVwbGFjZSgvKFtcXFxcIVwiIyQlJicoKSorLC5cXC86Ozw9Pj9AXFxbXFxdXmB7fH1+XSkvZywgXCJcXFxcJDFcIikgfSwgaWRPck5hbWU6IGZ1bmN0aW9uIChhKSB7IHJldHVybiB0aGlzLmdyb3Vwc1thLm5hbWVdIHx8ICh0aGlzLmNoZWNrYWJsZShhKSA/IGEubmFtZSA6IGEuaWQgfHwgYS5uYW1lKSB9LCB2YWxpZGF0aW9uVGFyZ2V0Rm9yOiBmdW5jdGlvbiAoYikgeyByZXR1cm4gdGhpcy5jaGVja2FibGUoYikgJiYgKGIgPSB0aGlzLmZpbmRCeU5hbWUoYi5uYW1lKSksIGEoYikubm90KHRoaXMuc2V0dGluZ3MuaWdub3JlKVswXSB9LCBjaGVja2FibGU6IGZ1bmN0aW9uIChhKSB7IHJldHVybiAvcmFkaW98Y2hlY2tib3gvaS50ZXN0KGEudHlwZSkgfSwgZmluZEJ5TmFtZTogZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGEodGhpcy5jdXJyZW50Rm9ybSkuZmluZChcIltuYW1lPSdcIiArIHRoaXMuZXNjYXBlQ3NzTWV0YShiKSArIFwiJ11cIikgfSwgZ2V0TGVuZ3RoOiBmdW5jdGlvbiAoYiwgYykgeyBzd2l0Y2ggKGMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkgeyBjYXNlIFwic2VsZWN0XCI6IHJldHVybiBhKFwib3B0aW9uOnNlbGVjdGVkXCIsIGMpLmxlbmd0aDsgY2FzZSBcImlucHV0XCI6IGlmICh0aGlzLmNoZWNrYWJsZShjKSkgcmV0dXJuIHRoaXMuZmluZEJ5TmFtZShjLm5hbWUpLmZpbHRlcihcIjpjaGVja2VkXCIpLmxlbmd0aCB9cmV0dXJuIGIubGVuZ3RoIH0sIGRlcGVuZDogZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuICF0aGlzLmRlcGVuZFR5cGVzW3R5cGVvZiBhXSB8fCB0aGlzLmRlcGVuZFR5cGVzW3R5cGVvZiBhXShhLCBiKSB9LCBkZXBlbmRUeXBlczogeyBcImJvb2xlYW5cIjogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEgfSwgc3RyaW5nOiBmdW5jdGlvbiAoYiwgYykgeyByZXR1cm4gISFhKGIsIGMuZm9ybSkubGVuZ3RoIH0sIFwiZnVuY3Rpb25cIjogZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEoYikgfSB9LCBvcHRpb25hbDogZnVuY3Rpb24gKGIpIHsgdmFyIGMgPSB0aGlzLmVsZW1lbnRWYWx1ZShiKTsgcmV0dXJuICFhLnZhbGlkYXRvci5tZXRob2RzLnJlcXVpcmVkLmNhbGwodGhpcywgYywgYikgJiYgXCJkZXBlbmRlbmN5LW1pc21hdGNoXCIgfSwgc3RhcnRSZXF1ZXN0OiBmdW5jdGlvbiAoYikgeyB0aGlzLnBlbmRpbmdbYi5uYW1lXSB8fCAodGhpcy5wZW5kaW5nUmVxdWVzdCsrICwgYShiKS5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLnBlbmRpbmdDbGFzcyksIHRoaXMucGVuZGluZ1tiLm5hbWVdID0gITApIH0sIHN0b3BSZXF1ZXN0OiBmdW5jdGlvbiAoYiwgYykgeyB0aGlzLnBlbmRpbmdSZXF1ZXN0LS0gLCB0aGlzLnBlbmRpbmdSZXF1ZXN0IDwgMCAmJiAodGhpcy5wZW5kaW5nUmVxdWVzdCA9IDApLCBkZWxldGUgdGhpcy5wZW5kaW5nW2IubmFtZV0sIGEoYikucmVtb3ZlQ2xhc3ModGhpcy5zZXR0aW5ncy5wZW5kaW5nQ2xhc3MpLCBjICYmIDAgPT09IHRoaXMucGVuZGluZ1JlcXVlc3QgJiYgdGhpcy5mb3JtU3VibWl0dGVkICYmIHRoaXMuZm9ybSgpID8gKGEodGhpcy5jdXJyZW50Rm9ybSkuc3VibWl0KCksIHRoaXMuc3VibWl0QnV0dG9uICYmIGEoXCJpbnB1dDpoaWRkZW5bbmFtZT0nXCIgKyB0aGlzLnN1Ym1pdEJ1dHRvbi5uYW1lICsgXCInXVwiLCB0aGlzLmN1cnJlbnRGb3JtKS5yZW1vdmUoKSwgdGhpcy5mb3JtU3VibWl0dGVkID0gITEpIDogIWMgJiYgMCA9PT0gdGhpcy5wZW5kaW5nUmVxdWVzdCAmJiB0aGlzLmZvcm1TdWJtaXR0ZWQgJiYgKGEodGhpcy5jdXJyZW50Rm9ybSkudHJpZ2dlckhhbmRsZXIoXCJpbnZhbGlkLWZvcm1cIiwgW3RoaXNdKSwgdGhpcy5mb3JtU3VibWl0dGVkID0gITEpIH0sIHByZXZpb3VzVmFsdWU6IGZ1bmN0aW9uIChiLCBjKSB7IHJldHVybiBjID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgYyAmJiBjIHx8IFwicmVtb3RlXCIsIGEuZGF0YShiLCBcInByZXZpb3VzVmFsdWVcIikgfHwgYS5kYXRhKGIsIFwicHJldmlvdXNWYWx1ZVwiLCB7IG9sZDogbnVsbCwgdmFsaWQ6ICEwLCBtZXNzYWdlOiB0aGlzLmRlZmF1bHRNZXNzYWdlKGIsIHsgbWV0aG9kOiBjIH0pIH0pIH0sIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHsgdGhpcy5yZXNldEZvcm0oKSwgYSh0aGlzLmN1cnJlbnRGb3JtKS5vZmYoXCIudmFsaWRhdGVcIikucmVtb3ZlRGF0YShcInZhbGlkYXRvclwiKS5maW5kKFwiLnZhbGlkYXRlLWVxdWFsVG8tYmx1clwiKS5vZmYoXCIudmFsaWRhdGUtZXF1YWxUb1wiKS5yZW1vdmVDbGFzcyhcInZhbGlkYXRlLWVxdWFsVG8tYmx1clwiKSB9IH0sIGNsYXNzUnVsZVNldHRpbmdzOiB7IHJlcXVpcmVkOiB7IHJlcXVpcmVkOiAhMCB9LCBlbWFpbDogeyBlbWFpbDogITAgfSwgdXJsOiB7IHVybDogITAgfSwgZGF0ZTogeyBkYXRlOiAhMCB9LCBkYXRlSVNPOiB7IGRhdGVJU086ICEwIH0sIG51bWJlcjogeyBudW1iZXI6ICEwIH0sIGRpZ2l0czogeyBkaWdpdHM6ICEwIH0sIGNyZWRpdGNhcmQ6IHsgY3JlZGl0Y2FyZDogITAgfSB9LCBhZGRDbGFzc1J1bGVzOiBmdW5jdGlvbiAoYiwgYykgeyBiLmNvbnN0cnVjdG9yID09PSBTdHJpbmcgPyB0aGlzLmNsYXNzUnVsZVNldHRpbmdzW2JdID0gYyA6IGEuZXh0ZW5kKHRoaXMuY2xhc3NSdWxlU2V0dGluZ3MsIGIpIH0sIGNsYXNzUnVsZXM6IGZ1bmN0aW9uIChiKSB7IHZhciBjID0ge30sIGQgPSBhKGIpLmF0dHIoXCJjbGFzc1wiKTsgcmV0dXJuIGQgJiYgYS5lYWNoKGQuc3BsaXQoXCIgXCIpLCBmdW5jdGlvbiAoKSB7IHRoaXMgaW4gYS52YWxpZGF0b3IuY2xhc3NSdWxlU2V0dGluZ3MgJiYgYS5leHRlbmQoYywgYS52YWxpZGF0b3IuY2xhc3NSdWxlU2V0dGluZ3NbdGhpc10pIH0pLCBjIH0sIG5vcm1hbGl6ZUF0dHJpYnV0ZVJ1bGU6IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7IC9taW58bWF4fHN0ZXAvLnRlc3QoYykgJiYgKG51bGwgPT09IGIgfHwgL251bWJlcnxyYW5nZXx0ZXh0Ly50ZXN0KGIpKSAmJiAoZCA9IE51bWJlcihkKSwgaXNOYU4oZCkgJiYgKGQgPSB2b2lkIDApKSwgZCB8fCAwID09PSBkID8gYVtjXSA9IGQgOiBiID09PSBjICYmIFwicmFuZ2VcIiAhPT0gYiAmJiAoYVtjXSA9ICEwKSB9LCBhdHRyaWJ1dGVSdWxlczogZnVuY3Rpb24gKGIpIHsgdmFyIGMsIGQsIGUgPSB7fSwgZiA9IGEoYiksIGcgPSBiLmdldEF0dHJpYnV0ZShcInR5cGVcIik7IGZvciAoYyBpbiBhLnZhbGlkYXRvci5tZXRob2RzKSBcInJlcXVpcmVkXCIgPT09IGMgPyAoZCA9IGIuZ2V0QXR0cmlidXRlKGMpLCBcIlwiID09PSBkICYmIChkID0gITApLCBkID0gISFkKSA6IGQgPSBmLmF0dHIoYyksIHRoaXMubm9ybWFsaXplQXR0cmlidXRlUnVsZShlLCBnLCBjLCBkKTsgcmV0dXJuIGUubWF4bGVuZ3RoICYmIC8tMXwyMTQ3NDgzNjQ3fDUyNDI4OC8udGVzdChlLm1heGxlbmd0aCkgJiYgZGVsZXRlIGUubWF4bGVuZ3RoLCBlIH0sIGRhdGFSdWxlczogZnVuY3Rpb24gKGIpIHsgdmFyIGMsIGQsIGUgPSB7fSwgZiA9IGEoYiksIGcgPSBiLmdldEF0dHJpYnV0ZShcInR5cGVcIik7IGZvciAoYyBpbiBhLnZhbGlkYXRvci5tZXRob2RzKSBkID0gZi5kYXRhKFwicnVsZVwiICsgYy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGMuc3Vic3RyaW5nKDEpLnRvTG93ZXJDYXNlKCkpLCB0aGlzLm5vcm1hbGl6ZUF0dHJpYnV0ZVJ1bGUoZSwgZywgYywgZCk7IHJldHVybiBlIH0sIHN0YXRpY1J1bGVzOiBmdW5jdGlvbiAoYikgeyB2YXIgYyA9IHt9LCBkID0gYS5kYXRhKGIuZm9ybSwgXCJ2YWxpZGF0b3JcIik7IHJldHVybiBkLnNldHRpbmdzLnJ1bGVzICYmIChjID0gYS52YWxpZGF0b3Iubm9ybWFsaXplUnVsZShkLnNldHRpbmdzLnJ1bGVzW2IubmFtZV0pIHx8IHt9KSwgYyB9LCBub3JtYWxpemVSdWxlczogZnVuY3Rpb24gKGIsIGMpIHsgcmV0dXJuIGEuZWFjaChiLCBmdW5jdGlvbiAoZCwgZSkgeyBpZiAoZSA9PT0gITEpIHJldHVybiB2b2lkIGRlbGV0ZSBiW2RdOyBpZiAoZS5wYXJhbSB8fCBlLmRlcGVuZHMpIHsgdmFyIGYgPSAhMDsgc3dpdGNoICh0eXBlb2YgZS5kZXBlbmRzKSB7IGNhc2UgXCJzdHJpbmdcIjogZiA9ICEhYShlLmRlcGVuZHMsIGMuZm9ybSkubGVuZ3RoOyBicmVhazsgY2FzZSBcImZ1bmN0aW9uXCI6IGYgPSBlLmRlcGVuZHMuY2FsbChjLCBjKSB9ZiA/IGJbZF0gPSB2b2lkIDAgPT09IGUucGFyYW0gfHwgZS5wYXJhbSA6IChhLmRhdGEoYy5mb3JtLCBcInZhbGlkYXRvclwiKS5yZXNldEVsZW1lbnRzKGEoYykpLCBkZWxldGUgYltkXSkgfSB9KSwgYS5lYWNoKGIsIGZ1bmN0aW9uIChkLCBlKSB7IGJbZF0gPSBhLmlzRnVuY3Rpb24oZSkgJiYgXCJub3JtYWxpemVyXCIgIT09IGQgPyBlKGMpIDogZSB9KSwgYS5lYWNoKFtcIm1pbmxlbmd0aFwiLCBcIm1heGxlbmd0aFwiXSwgZnVuY3Rpb24gKCkgeyBiW3RoaXNdICYmIChiW3RoaXNdID0gTnVtYmVyKGJbdGhpc10pKSB9KSwgYS5lYWNoKFtcInJhbmdlbGVuZ3RoXCIsIFwicmFuZ2VcIl0sIGZ1bmN0aW9uICgpIHsgdmFyIGM7IGJbdGhpc10gJiYgKGEuaXNBcnJheShiW3RoaXNdKSA/IGJbdGhpc10gPSBbTnVtYmVyKGJbdGhpc11bMF0pLCBOdW1iZXIoYlt0aGlzXVsxXSldIDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgYlt0aGlzXSAmJiAoYyA9IGJbdGhpc10ucmVwbGFjZSgvW1xcW1xcXV0vZywgXCJcIikuc3BsaXQoL1tcXHMsXSsvKSwgYlt0aGlzXSA9IFtOdW1iZXIoY1swXSksIE51bWJlcihjWzFdKV0pKSB9KSwgYS52YWxpZGF0b3IuYXV0b0NyZWF0ZVJhbmdlcyAmJiAobnVsbCAhPSBiLm1pbiAmJiBudWxsICE9IGIubWF4ICYmIChiLnJhbmdlID0gW2IubWluLCBiLm1heF0sIGRlbGV0ZSBiLm1pbiwgZGVsZXRlIGIubWF4KSwgbnVsbCAhPSBiLm1pbmxlbmd0aCAmJiBudWxsICE9IGIubWF4bGVuZ3RoICYmIChiLnJhbmdlbGVuZ3RoID0gW2IubWlubGVuZ3RoLCBiLm1heGxlbmd0aF0sIGRlbGV0ZSBiLm1pbmxlbmd0aCwgZGVsZXRlIGIubWF4bGVuZ3RoKSksIGIgfSwgbm9ybWFsaXplUnVsZTogZnVuY3Rpb24gKGIpIHsgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGIpIHsgdmFyIGMgPSB7fTsgYS5lYWNoKGIuc3BsaXQoL1xccy8pLCBmdW5jdGlvbiAoKSB7IGNbdGhpc10gPSAhMCB9KSwgYiA9IGMgfSByZXR1cm4gYiB9LCBhZGRNZXRob2Q6IGZ1bmN0aW9uIChiLCBjLCBkKSB7IGEudmFsaWRhdG9yLm1ldGhvZHNbYl0gPSBjLCBhLnZhbGlkYXRvci5tZXNzYWdlc1tiXSA9IHZvaWQgMCAhPT0gZCA/IGQgOiBhLnZhbGlkYXRvci5tZXNzYWdlc1tiXSwgYy5sZW5ndGggPCAzICYmIGEudmFsaWRhdG9yLmFkZENsYXNzUnVsZXMoYiwgYS52YWxpZGF0b3Iubm9ybWFsaXplUnVsZShiKSkgfSwgbWV0aG9kczogeyByZXF1aXJlZDogZnVuY3Rpb24gKGIsIGMsIGQpIHsgaWYgKCF0aGlzLmRlcGVuZChkLCBjKSkgcmV0dXJuIFwiZGVwZW5kZW5jeS1taXNtYXRjaFwiOyBpZiAoXCJzZWxlY3RcIiA9PT0gYy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSB7IHZhciBlID0gYShjKS52YWwoKTsgcmV0dXJuIGUgJiYgZS5sZW5ndGggPiAwIH0gcmV0dXJuIHRoaXMuY2hlY2thYmxlKGMpID8gdGhpcy5nZXRMZW5ndGgoYiwgYykgPiAwIDogYi5sZW5ndGggPiAwIH0sIGVtYWlsOiBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gdGhpcy5vcHRpb25hbChiKSB8fCAvXlthLXpBLVowLTkuISMkJSYnKitcXC89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLy50ZXN0KGEpIH0sIHVybDogZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIHRoaXMub3B0aW9uYWwoYikgfHwgL14oPzooPzooPzpodHRwcz98ZnRwKTopP1xcL1xcLykoPzpcXFMrKD86OlxcUyopP0ApPyg/Oig/ISg/OjEwfDEyNykoPzpcXC5cXGR7MSwzfSl7M30pKD8hKD86MTY5XFwuMjU0fDE5MlxcLjE2OCkoPzpcXC5cXGR7MSwzfSl7Mn0pKD8hMTcyXFwuKD86MVs2LTldfDJcXGR8M1swLTFdKSg/OlxcLlxcZHsxLDN9KXsyfSkoPzpbMS05XVxcZD98MVxcZFxcZHwyWzAxXVxcZHwyMlswLTNdKSg/OlxcLig/OjE/XFxkezEsMn18MlswLTRdXFxkfDI1WzAtNV0pKXsyfSg/OlxcLig/OlsxLTldXFxkP3wxXFxkXFxkfDJbMC00XVxcZHwyNVswLTRdKSl8KD86KD86W2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0tKikqW2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0rKSg/OlxcLig/OlthLXpcXHUwMGExLVxcdWZmZmYwLTldLSopKlthLXpcXHUwMGExLVxcdWZmZmYwLTldKykqKD86XFwuKD86W2EtelxcdTAwYTEtXFx1ZmZmZl17Mix9KSkuPykoPzo6XFxkezIsNX0pPyg/OltcXC8/I11cXFMqKT8kL2kudGVzdChhKSB9LCBkYXRlOiBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gdGhpcy5vcHRpb25hbChiKSB8fCAhL0ludmFsaWR8TmFOLy50ZXN0KG5ldyBEYXRlKGEpLnRvU3RyaW5nKCkpIH0sIGRhdGVJU086IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiB0aGlzLm9wdGlvbmFsKGIpIHx8IC9eXFxkezR9W1xcL1xcLV0oMD9bMS05XXwxWzAxMl0pW1xcL1xcLV0oMD9bMS05XXxbMTJdWzAtOV18M1swMV0pJC8udGVzdChhKSB9LCBudW1iZXI6IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiB0aGlzLm9wdGlvbmFsKGIpIHx8IC9eKD86LT9cXGQrfC0/XFxkezEsM30oPzosXFxkezN9KSspPyg/OlxcLlxcZCspPyQvLnRlc3QoYSkgfSwgZGlnaXRzOiBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gdGhpcy5vcHRpb25hbChiKSB8fCAvXlxcZCskLy50ZXN0KGEpIH0sIG1pbmxlbmd0aDogZnVuY3Rpb24gKGIsIGMsIGQpIHsgdmFyIGUgPSBhLmlzQXJyYXkoYikgPyBiLmxlbmd0aCA6IHRoaXMuZ2V0TGVuZ3RoKGIsIGMpOyByZXR1cm4gdGhpcy5vcHRpb25hbChjKSB8fCBlID49IGQgfSwgbWF4bGVuZ3RoOiBmdW5jdGlvbiAoYiwgYywgZCkgeyB2YXIgZSA9IGEuaXNBcnJheShiKSA/IGIubGVuZ3RoIDogdGhpcy5nZXRMZW5ndGgoYiwgYyk7IHJldHVybiB0aGlzLm9wdGlvbmFsKGMpIHx8IGUgPD0gZCB9LCByYW5nZWxlbmd0aDogZnVuY3Rpb24gKGIsIGMsIGQpIHsgdmFyIGUgPSBhLmlzQXJyYXkoYikgPyBiLmxlbmd0aCA6IHRoaXMuZ2V0TGVuZ3RoKGIsIGMpOyByZXR1cm4gdGhpcy5vcHRpb25hbChjKSB8fCBlID49IGRbMF0gJiYgZSA8PSBkWzFdIH0sIG1pbjogZnVuY3Rpb24gKGEsIGIsIGMpIHsgcmV0dXJuIHRoaXMub3B0aW9uYWwoYikgfHwgYSA+PSBjIH0sIG1heDogZnVuY3Rpb24gKGEsIGIsIGMpIHsgcmV0dXJuIHRoaXMub3B0aW9uYWwoYikgfHwgYSA8PSBjIH0sIHJhbmdlOiBmdW5jdGlvbiAoYSwgYiwgYykgeyByZXR1cm4gdGhpcy5vcHRpb25hbChiKSB8fCBhID49IGNbMF0gJiYgYSA8PSBjWzFdIH0sIHN0ZXA6IGZ1bmN0aW9uIChiLCBjLCBkKSB7IHZhciBlLCBmID0gYShjKS5hdHRyKFwidHlwZVwiKSwgZyA9IFwiU3RlcCBhdHRyaWJ1dGUgb24gaW5wdXQgdHlwZSBcIiArIGYgKyBcIiBpcyBub3Qgc3VwcG9ydGVkLlwiLCBoID0gW1widGV4dFwiLCBcIm51bWJlclwiLCBcInJhbmdlXCJdLCBpID0gbmV3IFJlZ0V4cChcIlxcXFxiXCIgKyBmICsgXCJcXFxcYlwiKSwgaiA9IGYgJiYgIWkudGVzdChoLmpvaW4oKSksIGsgPSBmdW5jdGlvbiAoYSkgeyB2YXIgYiA9IChcIlwiICsgYSkubWF0Y2goLyg/OlxcLihcXGQrKSk/JC8pOyByZXR1cm4gYiAmJiBiWzFdID8gYlsxXS5sZW5ndGggOiAwIH0sIGwgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gTWF0aC5yb3VuZChhICogTWF0aC5wb3coMTAsIGUpKSB9LCBtID0gITA7IGlmIChqKSB0aHJvdyBuZXcgRXJyb3IoZyk7IHJldHVybiBlID0gayhkKSwgKGsoYikgPiBlIHx8IGwoYikgJSBsKGQpICE9PSAwKSAmJiAobSA9ICExKSwgdGhpcy5vcHRpb25hbChjKSB8fCBtIH0sIGVxdWFsVG86IGZ1bmN0aW9uIChiLCBjLCBkKSB7IHZhciBlID0gYShkKTsgcmV0dXJuIHRoaXMuc2V0dGluZ3Mub25mb2N1c291dCAmJiBlLm5vdChcIi52YWxpZGF0ZS1lcXVhbFRvLWJsdXJcIikubGVuZ3RoICYmIGUuYWRkQ2xhc3MoXCJ2YWxpZGF0ZS1lcXVhbFRvLWJsdXJcIikub24oXCJibHVyLnZhbGlkYXRlLWVxdWFsVG9cIiwgZnVuY3Rpb24gKCkgeyBhKGMpLnZhbGlkKCkgfSksIGIgPT09IGUudmFsKCkgfSwgcmVtb3RlOiBmdW5jdGlvbiAoYiwgYywgZCwgZSkgeyBpZiAodGhpcy5vcHRpb25hbChjKSkgcmV0dXJuIFwiZGVwZW5kZW5jeS1taXNtYXRjaFwiOyBlID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiBlIHx8IFwicmVtb3RlXCI7IHZhciBmLCBnLCBoLCBpID0gdGhpcy5wcmV2aW91c1ZhbHVlKGMsIGUpOyByZXR1cm4gdGhpcy5zZXR0aW5ncy5tZXNzYWdlc1tjLm5hbWVdIHx8ICh0aGlzLnNldHRpbmdzLm1lc3NhZ2VzW2MubmFtZV0gPSB7fSksIGkub3JpZ2luYWxNZXNzYWdlID0gaS5vcmlnaW5hbE1lc3NhZ2UgfHwgdGhpcy5zZXR0aW5ncy5tZXNzYWdlc1tjLm5hbWVdW2VdLCB0aGlzLnNldHRpbmdzLm1lc3NhZ2VzW2MubmFtZV1bZV0gPSBpLm1lc3NhZ2UsIGQgPSBcInN0cmluZ1wiID09IHR5cGVvZiBkICYmIHsgdXJsOiBkIH0gfHwgZCwgaCA9IGEucGFyYW0oYS5leHRlbmQoeyBkYXRhOiBiIH0sIGQuZGF0YSkpLCBpLm9sZCA9PT0gaCA/IGkudmFsaWQgOiAoaS5vbGQgPSBoLCBmID0gdGhpcywgdGhpcy5zdGFydFJlcXVlc3QoYyksIGcgPSB7fSwgZ1tjLm5hbWVdID0gYiwgYS5hamF4KGEuZXh0ZW5kKCEwLCB7IG1vZGU6IFwiYWJvcnRcIiwgcG9ydDogXCJ2YWxpZGF0ZVwiICsgYy5uYW1lLCBkYXRhVHlwZTogXCJqc29uXCIsIGRhdGE6IGcsIGNvbnRleHQ6IGYuY3VycmVudEZvcm0sIHN1Y2Nlc3M6IGZ1bmN0aW9uIChhKSB7IHZhciBkLCBnLCBoLCBqID0gYSA9PT0gITAgfHwgXCJ0cnVlXCIgPT09IGE7IGYuc2V0dGluZ3MubWVzc2FnZXNbYy5uYW1lXVtlXSA9IGkub3JpZ2luYWxNZXNzYWdlLCBqID8gKGggPSBmLmZvcm1TdWJtaXR0ZWQsIGYucmVzZXRJbnRlcm5hbHMoKSwgZi50b0hpZGUgPSBmLmVycm9yc0ZvcihjKSwgZi5mb3JtU3VibWl0dGVkID0gaCwgZi5zdWNjZXNzTGlzdC5wdXNoKGMpLCBmLmludmFsaWRbYy5uYW1lXSA9ICExLCBmLnNob3dFcnJvcnMoKSkgOiAoZCA9IHt9LCBnID0gYSB8fCBmLmRlZmF1bHRNZXNzYWdlKGMsIHsgbWV0aG9kOiBlLCBwYXJhbWV0ZXJzOiBiIH0pLCBkW2MubmFtZV0gPSBpLm1lc3NhZ2UgPSBnLCBmLmludmFsaWRbYy5uYW1lXSA9ICEwLCBmLnNob3dFcnJvcnMoZCkpLCBpLnZhbGlkID0gaiwgZi5zdG9wUmVxdWVzdChjLCBqKSB9IH0sIGQpKSwgXCJwZW5kaW5nXCIpIH0gfSB9KTsgdmFyIGIsIGMgPSB7fTsgcmV0dXJuIGEuYWpheFByZWZpbHRlciA/IGEuYWpheFByZWZpbHRlcihmdW5jdGlvbiAoYSwgYiwgZCkgeyB2YXIgZSA9IGEucG9ydDsgXCJhYm9ydFwiID09PSBhLm1vZGUgJiYgKGNbZV0gJiYgY1tlXS5hYm9ydCgpLCBjW2VdID0gZCkgfSkgOiAoYiA9IGEuYWpheCwgYS5hamF4ID0gZnVuY3Rpb24gKGQpIHsgdmFyIGUgPSAoXCJtb2RlXCIgaW4gZCA/IGQgOiBhLmFqYXhTZXR0aW5ncykubW9kZSwgZiA9IChcInBvcnRcIiBpbiBkID8gZCA6IGEuYWpheFNldHRpbmdzKS5wb3J0OyByZXR1cm4gXCJhYm9ydFwiID09PSBlID8gKGNbZl0gJiYgY1tmXS5hYm9ydCgpLCBjW2ZdID0gYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBjW2ZdKSA6IGIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB9KSwgYSB9KTsiLCIvKiEgalF1ZXJ5ICYgWmVwdG8gTGF6eSB2MS43LjYgLSBodHRwOi8vanF1ZXJ5LmVpc2JlaHIuZGUvbGF6eSAtIE1JVCZHUEwtMi4wIGxpY2Vuc2UgLSBDb3B5cmlnaHQgMjAxMi0yMDE3IERhbmllbCAnRWlzYmVocicgS2VybiAqL1xyXG4hZnVuY3Rpb24gKHQsIGUpIHsgXCJ1c2Ugc3RyaWN0XCI7IGZ1bmN0aW9uIHIociwgYSwgaSwgdSwgbCkgeyBmdW5jdGlvbiBmKCkgeyBMID0gdC5kZXZpY2VQaXhlbFJhdGlvID4gMSwgaSA9IGMoaSksIGEuZGVsYXkgPj0gMCAmJiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcyghMCkgfSwgYS5kZWxheSksIChhLmRlbGF5IDwgMCB8fCBhLmNvbWJpbmVkKSAmJiAodS5lID0gdihhLnRocm90dGxlLCBmdW5jdGlvbiAodCkgeyBcInJlc2l6ZVwiID09PSB0LnR5cGUgJiYgKHcgPSBCID0gLTEpLCBzKHQuYWxsKSB9KSwgdS5hID0gZnVuY3Rpb24gKHQpIHsgdCA9IGModCksIGkucHVzaC5hcHBseShpLCB0KSB9LCB1LmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBpID0gbihpKS5maWx0ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gIW4odGhpcykuZGF0YShhLmxvYWRlZE5hbWUpIH0pIH0sIHUuZiA9IGZ1bmN0aW9uICh0KSB7IGZvciAodmFyIGUgPSAwOyBlIDwgdC5sZW5ndGg7IGUrKykgeyB2YXIgciA9IGkuZmlsdGVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMgPT09IHRbZV0gfSk7IHIubGVuZ3RoICYmIHMoITEsIHIpIH0gfSwgcygpLCBuKGEuYXBwZW5kU2Nyb2xsKS5vbihcInNjcm9sbC5cIiArIGwgKyBcIiByZXNpemUuXCIgKyBsLCB1LmUpKSB9IGZ1bmN0aW9uIGModCkgeyB2YXIgaSA9IGEuZGVmYXVsdEltYWdlLCBvID0gYS5wbGFjZWhvbGRlciwgdSA9IGEuaW1hZ2VCYXNlLCBsID0gYS5zcmNzZXRBdHRyaWJ1dGUsIGYgPSBhLmxvYWRlckF0dHJpYnV0ZSwgYyA9IGEuX2YgfHwge307IHQgPSBuKHQpLmZpbHRlcihmdW5jdGlvbiAoKSB7IHZhciB0ID0gbih0aGlzKSwgciA9IG0odGhpcyk7IHJldHVybiAhdC5kYXRhKGEuaGFuZGxlZE5hbWUpICYmICh0LmF0dHIoYS5hdHRyaWJ1dGUpIHx8IHQuYXR0cihsKSB8fCB0LmF0dHIoZikgfHwgY1tyXSAhPT0gZSkgfSkuZGF0YShcInBsdWdpbl9cIiArIGEubmFtZSwgcik7IGZvciAodmFyIHMgPSAwLCBkID0gdC5sZW5ndGg7IHMgPCBkOyBzKyspIHsgdmFyIEEgPSBuKHRbc10pLCBnID0gbSh0W3NdKSwgaCA9IEEuYXR0cihhLmltYWdlQmFzZUF0dHJpYnV0ZSkgfHwgdTsgZyA9PT0gTiAmJiBoICYmIEEuYXR0cihsKSAmJiBBLmF0dHIobCwgYihBLmF0dHIobCksIGgpKSwgY1tnXSA9PT0gZSB8fCBBLmF0dHIoZikgfHwgQS5hdHRyKGYsIGNbZ10pLCBnID09PSBOICYmIGkgJiYgIUEuYXR0cihFKSA/IEEuYXR0cihFLCBpKSA6IGcgPT09IE4gfHwgIW8gfHwgQS5jc3MoTykgJiYgXCJub25lXCIgIT09IEEuY3NzKE8pIHx8IEEuY3NzKE8sIFwidXJsKCdcIiArIG8gKyBcIicpXCIpIH0gcmV0dXJuIHQgfSBmdW5jdGlvbiBzKHQsIGUpIHsgaWYgKCFpLmxlbmd0aCkgcmV0dXJuIHZvaWQgKGEuYXV0b0Rlc3Ryb3kgJiYgci5kZXN0cm95KCkpOyBmb3IgKHZhciBvID0gZSB8fCBpLCB1ID0gITEsIGwgPSBhLmltYWdlQmFzZSB8fCBcIlwiLCBmID0gYS5zcmNzZXRBdHRyaWJ1dGUsIGMgPSBhLmhhbmRsZWROYW1lLCBzID0gMDsgcyA8IG8ubGVuZ3RoOyBzKyspaWYgKHQgfHwgZSB8fCBBKG9bc10pKSB7IHZhciBnID0gbihvW3NdKSwgaCA9IG0ob1tzXSksIGIgPSBnLmF0dHIoYS5hdHRyaWJ1dGUpLCB2ID0gZy5hdHRyKGEuaW1hZ2VCYXNlQXR0cmlidXRlKSB8fCBsLCBwID0gZy5hdHRyKGEubG9hZGVyQXR0cmlidXRlKTsgZy5kYXRhKGMpIHx8IGEudmlzaWJsZU9ubHkgJiYgIWcuaXMoXCI6dmlzaWJsZVwiKSB8fCAhKChiIHx8IGcuYXR0cihmKSkgJiYgKGggPT09IE4gJiYgKHYgKyBiICE9PSBnLmF0dHIoRSkgfHwgZy5hdHRyKGYpICE9PSBnLmF0dHIoRikpIHx8IGggIT09IE4gJiYgdiArIGIgIT09IGcuY3NzKE8pKSB8fCBwKSB8fCAodSA9ICEwLCBnLmRhdGEoYywgITApLCBkKGcsIGgsIHYsIHApKSB9IHUgJiYgKGkgPSBuKGkpLmZpbHRlcihmdW5jdGlvbiAoKSB7IHJldHVybiAhbih0aGlzKS5kYXRhKGMpIH0pKSB9IGZ1bmN0aW9uIGQodCwgZSwgciwgaSkgeyArK3o7IHZhciBvID0gZnVuY3Rpb24gKCkgeyB5KFwib25FcnJvclwiLCB0KSwgcCgpLCBvID0gbi5ub29wIH07IHkoXCJiZWZvcmVMb2FkXCIsIHQpOyB2YXIgdSA9IGEuYXR0cmlidXRlLCBsID0gYS5zcmNzZXRBdHRyaWJ1dGUsIGYgPSBhLnNpemVzQXR0cmlidXRlLCBjID0gYS5yZXRpbmFBdHRyaWJ1dGUsIHMgPSBhLnJlbW92ZUF0dHJpYnV0ZSwgZCA9IGEubG9hZGVkTmFtZSwgQSA9IHQuYXR0cihjKTsgaWYgKGkpIHsgdmFyIGcgPSBmdW5jdGlvbiAoKSB7IHMgJiYgdC5yZW1vdmVBdHRyKGEubG9hZGVyQXR0cmlidXRlKSwgdC5kYXRhKGQsICEwKSwgeShULCB0KSwgc2V0VGltZW91dChwLCAxKSwgZyA9IG4ubm9vcCB9OyB0Lm9mZihJKS5vbmUoSSwgbykub25lKEQsIGcpLCB5KGksIHQsIGZ1bmN0aW9uIChlKSB7IGUgPyAodC5vZmYoRCksIGcoKSkgOiAodC5vZmYoSSksIG8oKSkgfSkgfHwgdC50cmlnZ2VyKEkpIH0gZWxzZSB7IHZhciBoID0gbihuZXcgSW1hZ2UpOyBoLm9uZShJLCBvKS5vbmUoRCwgZnVuY3Rpb24gKCkgeyB0LmhpZGUoKSwgZSA9PT0gTiA/IHQuYXR0cihDLCBoLmF0dHIoQykpLmF0dHIoRiwgaC5hdHRyKEYpKS5hdHRyKEUsIGguYXR0cihFKSkgOiB0LmNzcyhPLCBcInVybCgnXCIgKyBoLmF0dHIoRSkgKyBcIicpXCIpLCB0W2EuZWZmZWN0XShhLmVmZmVjdFRpbWUpLCBzICYmICh0LnJlbW92ZUF0dHIodSArIFwiIFwiICsgbCArIFwiIFwiICsgYyArIFwiIFwiICsgYS5pbWFnZUJhc2VBdHRyaWJ1dGUpLCBmICE9PSBDICYmIHQucmVtb3ZlQXR0cihmKSksIHQuZGF0YShkLCAhMCksIHkoVCwgdCksIGgucmVtb3ZlKCksIHAoKSB9KTsgdmFyIG0gPSAoTCAmJiBBID8gQSA6IHQuYXR0cih1KSkgfHwgXCJcIjsgaC5hdHRyKEMsIHQuYXR0cihmKSkuYXR0cihGLCB0LmF0dHIobCkpLmF0dHIoRSwgbSA/IHIgKyBtIDogbnVsbCksIGguY29tcGxldGUgJiYgaC50cmlnZ2VyKEQpIH0gfSBmdW5jdGlvbiBBKHQpIHsgdmFyIGUgPSB0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCByID0gYS5zY3JvbGxEaXJlY3Rpb24sIG4gPSBhLnRocmVzaG9sZCwgaSA9IGgoKSArIG4gPiBlLnRvcCAmJiAtbiA8IGUuYm90dG9tLCBvID0gZygpICsgbiA+IGUubGVmdCAmJiAtbiA8IGUucmlnaHQ7IHJldHVybiBcInZlcnRpY2FsXCIgPT09IHIgPyBpIDogXCJob3Jpem9udGFsXCIgPT09IHIgPyBvIDogaSAmJiBvIH0gZnVuY3Rpb24gZygpIHsgcmV0dXJuIHcgPj0gMCA/IHcgOiB3ID0gbih0KS53aWR0aCgpIH0gZnVuY3Rpb24gaCgpIHsgcmV0dXJuIEIgPj0gMCA/IEIgOiBCID0gbih0KS5oZWlnaHQoKSB9IGZ1bmN0aW9uIG0odCkgeyByZXR1cm4gdC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgfSBmdW5jdGlvbiBiKHQsIGUpIHsgaWYgKGUpIHsgdmFyIHIgPSB0LnNwbGl0KFwiLFwiKTsgdCA9IFwiXCI7IGZvciAodmFyIGEgPSAwLCBuID0gci5sZW5ndGg7IGEgPCBuOyBhKyspdCArPSBlICsgclthXS50cmltKCkgKyAoYSAhPT0gbiAtIDEgPyBcIixcIiA6IFwiXCIpIH0gcmV0dXJuIHQgfSBmdW5jdGlvbiB2KHQsIGUpIHsgdmFyIG4sIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKG8sIHUpIHsgZnVuY3Rpb24gbCgpIHsgaSA9ICtuZXcgRGF0ZSwgZS5jYWxsKHIsIG8pIH0gdmFyIGYgPSArbmV3IERhdGUgLSBpOyBuICYmIGNsZWFyVGltZW91dChuKSwgZiA+IHQgfHwgIWEuZW5hYmxlVGhyb3R0bGUgfHwgdSA/IGwoKSA6IG4gPSBzZXRUaW1lb3V0KGwsIHQgLSBmKSB9IH0gZnVuY3Rpb24gcCgpIHsgLS16LCBpLmxlbmd0aCB8fCB6IHx8IHkoXCJvbkZpbmlzaGVkQWxsXCIpIH0gZnVuY3Rpb24geSh0LCBlLCBuKSB7IHJldHVybiAhISh0ID0gYVt0XSkgJiYgKHQuYXBwbHkociwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKSwgITApIH0gdmFyIHogPSAwLCB3ID0gLTEsIEIgPSAtMSwgTCA9ICExLCBUID0gXCJhZnRlckxvYWRcIiwgRCA9IFwibG9hZFwiLCBJID0gXCJlcnJvclwiLCBOID0gXCJpbWdcIiwgRSA9IFwic3JjXCIsIEYgPSBcInNyY3NldFwiLCBDID0gXCJzaXplc1wiLCBPID0gXCJiYWNrZ3JvdW5kLWltYWdlXCI7IFwiZXZlbnRcIiA9PT0gYS5iaW5kIHx8IG8gPyBmKCkgOiBuKHQpLm9uKEQgKyBcIi5cIiArIGwsIGYpIH0gZnVuY3Rpb24gYShhLCBvKSB7IHZhciB1ID0gdGhpcywgbCA9IG4uZXh0ZW5kKHt9LCB1LmNvbmZpZywgbyksIGYgPSB7fSwgYyA9IGwubmFtZSArIFwiLVwiICsgKytpOyByZXR1cm4gdS5jb25maWcgPSBmdW5jdGlvbiAodCwgcikgeyByZXR1cm4gciA9PT0gZSA/IGxbdF0gOiAobFt0XSA9IHIsIHUpIH0sIHUuYWRkSXRlbXMgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gZi5hICYmIGYuYShcInN0cmluZ1wiID09PSBuLnR5cGUodCkgPyBuKHQpIDogdCksIHUgfSwgdS5nZXRJdGVtcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGYuZyA/IGYuZygpIDoge30gfSwgdS51cGRhdGUgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gZi5lICYmIGYuZSh7fSwgIXQpLCB1IH0sIHUuZm9yY2UgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gZi5mICYmIGYuZihcInN0cmluZ1wiID09PSBuLnR5cGUodCkgPyBuKHQpIDogdCksIHUgfSwgdS5sb2FkQWxsID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZi5lICYmIGYuZSh7IGFsbDogITAgfSwgITApLCB1IH0sIHUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG4obC5hcHBlbmRTY3JvbGwpLm9mZihcIi5cIiArIGMsIGYuZSksIG4odCkub2ZmKFwiLlwiICsgYyksIGYgPSB7fSwgZSB9LCByKHUsIGwsIGEsIGYsIGMpLCBsLmNoYWluYWJsZSA/IGEgOiB1IH0gdmFyIG4gPSB0LmpRdWVyeSB8fCB0LlplcHRvLCBpID0gMCwgbyA9ICExOyBuLmZuLkxhenkgPSBuLmZuLmxhenkgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gbmV3IGEodGhpcywgdCkgfSwgbi5MYXp5ID0gbi5sYXp5ID0gZnVuY3Rpb24gKHQsIHIsIGkpIHsgaWYgKG4uaXNGdW5jdGlvbihyKSAmJiAoaSA9IHIsIHIgPSBbXSksIG4uaXNGdW5jdGlvbihpKSkgeyB0ID0gbi5pc0FycmF5KHQpID8gdCA6IFt0XSwgciA9IG4uaXNBcnJheShyKSA/IHIgOiBbcl07IGZvciAodmFyIG8gPSBhLnByb3RvdHlwZS5jb25maWcsIHUgPSBvLl9mIHx8IChvLl9mID0ge30pLCBsID0gMCwgZiA9IHQubGVuZ3RoOyBsIDwgZjsgbCsrKShvW3RbbF1dID09PSBlIHx8IG4uaXNGdW5jdGlvbihvW3RbbF1dKSkgJiYgKG9bdFtsXV0gPSBpKTsgZm9yICh2YXIgYyA9IDAsIHMgPSByLmxlbmd0aDsgYyA8IHM7IGMrKyl1W3JbY11dID0gdFswXSB9IH0sIGEucHJvdG90eXBlLmNvbmZpZyA9IHsgbmFtZTogXCJsYXp5XCIsIGNoYWluYWJsZTogITAsIGF1dG9EZXN0cm95OiAhMCwgYmluZDogXCJsb2FkXCIsIHRocmVzaG9sZDogNTAwLCB2aXNpYmxlT25seTogITEsIGFwcGVuZFNjcm9sbDogdCwgc2Nyb2xsRGlyZWN0aW9uOiBcImJvdGhcIiwgaW1hZ2VCYXNlOiBudWxsLCBkZWZhdWx0SW1hZ2U6IFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBUC8vL3dBQUFDSDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUNSQUVBT3c9PVwiLCBwbGFjZWhvbGRlcjogbnVsbCwgZGVsYXk6IC0xLCBjb21iaW5lZDogITEsIGF0dHJpYnV0ZTogXCJkYXRhLXNyY1wiLCBzcmNzZXRBdHRyaWJ1dGU6IFwiZGF0YS1zcmNzZXRcIiwgc2l6ZXNBdHRyaWJ1dGU6IFwiZGF0YS1zaXplc1wiLCByZXRpbmFBdHRyaWJ1dGU6IFwiZGF0YS1yZXRpbmFcIiwgbG9hZGVyQXR0cmlidXRlOiBcImRhdGEtbG9hZGVyXCIsIGltYWdlQmFzZUF0dHJpYnV0ZTogXCJkYXRhLWltYWdlYmFzZVwiLCByZW1vdmVBdHRyaWJ1dGU6ICEwLCBoYW5kbGVkTmFtZTogXCJoYW5kbGVkXCIsIGxvYWRlZE5hbWU6IFwibG9hZGVkXCIsIGVmZmVjdDogXCJzaG93XCIsIGVmZmVjdFRpbWU6IDAsIGVuYWJsZVRocm90dGxlOiAhMCwgdGhyb3R0bGU6IDI1MCwgYmVmb3JlTG9hZDogZSwgYWZ0ZXJMb2FkOiBlLCBvbkVycm9yOiBlLCBvbkZpbmlzaGVkQWxsOiBlIH0sIG4odCkub24oXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHsgbyA9ICEwIH0pIH0od2luZG93KTsiLCIvKiEgdG9vbHRpcHN0ZXIgdjQuMi41ICovIWZ1bmN0aW9uIChhLCBiKSB7IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoW1wianF1ZXJ5XCJdLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gYihhKSB9KSA6IFwib2JqZWN0XCIgPT0gdHlwZW9mIGV4cG9ydHMgPyBtb2R1bGUuZXhwb3J0cyA9IGIocmVxdWlyZShcImpxdWVyeVwiKSkgOiBiKGpRdWVyeSkgfSh0aGlzLCBmdW5jdGlvbiAoYSkge1xyXG4gICAgZnVuY3Rpb24gYihhKSB7IHRoaXMuJGNvbnRhaW5lciwgdGhpcy5jb25zdHJhaW50cyA9IG51bGwsIHRoaXMuX18kdG9vbHRpcCwgdGhpcy5fX2luaXQoYSkgfSBmdW5jdGlvbiBjKGIsIGMpIHsgdmFyIGQgPSAhMDsgcmV0dXJuIGEuZWFjaChiLCBmdW5jdGlvbiAoYSwgZSkgeyByZXR1cm4gdm9pZCAwID09PSBjW2FdIHx8IGJbYV0gIT09IGNbYV0gPyAoZCA9ICExLCAhMSkgOiB2b2lkIDAgfSksIGQgfSBmdW5jdGlvbiBkKGIpIHsgdmFyIGMgPSBiLmF0dHIoXCJpZFwiKSwgZCA9IGMgPyBoLndpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjKSA6IG51bGw7IHJldHVybiBkID8gZCA9PT0gYlswXSA6IGEuY29udGFpbnMoaC53aW5kb3cuZG9jdW1lbnQuYm9keSwgYlswXSkgfSBmdW5jdGlvbiBlKCkgeyBpZiAoIWcpIHJldHVybiAhMTsgdmFyIGEgPSBnLmRvY3VtZW50LmJvZHkgfHwgZy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGIgPSBhLnN0eWxlLCBjID0gXCJ0cmFuc2l0aW9uXCIsIGQgPSBbXCJNb3pcIiwgXCJXZWJraXRcIiwgXCJLaHRtbFwiLCBcIk9cIiwgXCJtc1wiXTsgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGJbY10pIHJldHVybiAhMDsgYyA9IGMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjLnN1YnN0cigxKTsgZm9yICh2YXIgZSA9IDA7IGUgPCBkLmxlbmd0aDsgZSsrKWlmIChcInN0cmluZ1wiID09IHR5cGVvZiBiW2RbZV0gKyBjXSkgcmV0dXJuICEwOyByZXR1cm4gITEgfSB2YXIgZiA9IHsgYW5pbWF0aW9uOiBcImZhZGVcIiwgYW5pbWF0aW9uRHVyYXRpb246IDM1MCwgY29udGVudDogbnVsbCwgY29udGVudEFzSFRNTDogITEsIGNvbnRlbnRDbG9uaW5nOiAhMSwgZGVidWc6ICEwLCBkZWxheTogMzAwLCBkZWxheVRvdWNoOiBbMzAwLCA1MDBdLCBmdW5jdGlvbkluaXQ6IG51bGwsIGZ1bmN0aW9uQmVmb3JlOiBudWxsLCBmdW5jdGlvblJlYWR5OiBudWxsLCBmdW5jdGlvbkFmdGVyOiBudWxsLCBmdW5jdGlvbkZvcm1hdDogbnVsbCwgSUVtaW46IDYsIGludGVyYWN0aXZlOiAhMSwgbXVsdGlwbGU6ICExLCBwYXJlbnQ6IG51bGwsIHBsdWdpbnM6IFtcInNpZGVUaXBcIl0sIHJlcG9zaXRpb25PblNjcm9sbDogITEsIHJlc3RvcmF0aW9uOiBcIm5vbmVcIiwgc2VsZkRlc3RydWN0aW9uOiAhMCwgdGhlbWU6IFtdLCB0aW1lcjogMCwgdHJhY2tlckludGVydmFsOiA1MDAsIHRyYWNrT3JpZ2luOiAhMSwgdHJhY2tUb29sdGlwOiAhMSwgdHJpZ2dlcjogXCJob3ZlclwiLCB0cmlnZ2VyQ2xvc2U6IHsgY2xpY2s6ICExLCBtb3VzZWxlYXZlOiAhMSwgb3JpZ2luQ2xpY2s6ICExLCBzY3JvbGw6ICExLCB0YXA6ICExLCB0b3VjaGxlYXZlOiAhMSB9LCB0cmlnZ2VyT3BlbjogeyBjbGljazogITEsIG1vdXNlZW50ZXI6ICExLCB0YXA6ICExLCB0b3VjaHN0YXJ0OiAhMSB9LCB1cGRhdGVBbmltYXRpb246IFwicm90YXRlXCIsIHpJbmRleDogOTk5OTk5OSB9LCBnID0gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDogbnVsbCwgaCA9IHsgaGFzVG91Y2hDYXBhYmlsaXR5OiAhKCFnIHx8ICEoXCJvbnRvdWNoc3RhcnRcIiBpbiBnIHx8IGcuRG9jdW1lbnRUb3VjaCAmJiBnLmRvY3VtZW50IGluc3RhbmNlb2YgZy5Eb2N1bWVudFRvdWNoIHx8IGcubmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzKSksIGhhc1RyYW5zaXRpb25zOiBlKCksIElFOiAhMSwgc2VtVmVyOiBcIjQuMi41XCIsIHdpbmRvdzogZyB9LCBpID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9fJGVtaXR0ZXJQcml2YXRlID0gYSh7fSksIHRoaXMuX18kZW1pdHRlclB1YmxpYyA9IGEoe30pLCB0aGlzLl9faW5zdGFuY2VzTGF0ZXN0QXJyID0gW10sIHRoaXMuX19wbHVnaW5zID0ge30sIHRoaXMuX2VudiA9IGggfTsgaS5wcm90b3R5cGUgPSB7IF9fYnJpZGdlOiBmdW5jdGlvbiAoYiwgYywgZCkgeyBpZiAoIWNbZF0pIHsgdmFyIGUgPSBmdW5jdGlvbiAoKSB7IH07IGUucHJvdG90eXBlID0gYjsgdmFyIGcgPSBuZXcgZTsgZy5fX2luaXQgJiYgZy5fX2luaXQoYyksIGEuZWFjaChiLCBmdW5jdGlvbiAoYSwgYikgeyAwICE9IGEuaW5kZXhPZihcIl9fXCIpICYmIChjW2FdID8gZi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhcIlRoZSBcIiArIGEgKyBcIiBtZXRob2Qgb2YgdGhlIFwiICsgZCArIFwiIHBsdWdpbiBjb25mbGljdHMgd2l0aCBhbm90aGVyIHBsdWdpbiBvciBuYXRpdmUgbWV0aG9kc1wiKSA6IChjW2FdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZ1thXS5hcHBseShnLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSkgfSwgY1thXS5icmlkZ2VkID0gZykpIH0pLCBjW2RdID0gZyB9IHJldHVybiB0aGlzIH0sIF9fc2V0V2luZG93OiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gaC53aW5kb3cgPSBhLCB0aGlzIH0sIF9nZXRSdWxlcjogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIG5ldyBiKGEpIH0sIF9vZmY6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX18kZW1pdHRlclByaXZhdGUub2ZmLmFwcGx5KHRoaXMuX18kZW1pdHRlclByaXZhdGUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKSwgdGhpcyB9LCBfb246IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX18kZW1pdHRlclByaXZhdGUub24uYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0sIF9vbmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX18kZW1pdHRlclByaXZhdGUub25lLmFwcGx5KHRoaXMuX18kZW1pdHRlclByaXZhdGUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKSwgdGhpcyB9LCBfcGx1Z2luOiBmdW5jdGlvbiAoYikgeyB2YXIgYyA9IHRoaXM7IGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBiKSB7IHZhciBkID0gYiwgZSA9IG51bGw7IHJldHVybiBkLmluZGV4T2YoXCIuXCIpID4gMCA/IGUgPSBjLl9fcGx1Z2luc1tkXSA6IGEuZWFjaChjLl9fcGx1Z2lucywgZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGIubmFtZS5zdWJzdHJpbmcoYi5uYW1lLmxlbmd0aCAtIGQubGVuZ3RoIC0gMSkgPT0gXCIuXCIgKyBkID8gKGUgPSBiLCAhMSkgOiB2b2lkIDAgfSksIGUgfSBpZiAoYi5uYW1lLmluZGV4T2YoXCIuXCIpIDwgMCkgdGhyb3cgbmV3IEVycm9yKFwiUGx1Z2lucyBtdXN0IGJlIG5hbWVzcGFjZWRcIik7IHJldHVybiBjLl9fcGx1Z2luc1tiLm5hbWVdID0gYiwgYi5jb3JlICYmIGMuX19icmlkZ2UoYi5jb3JlLCBjLCBiLm5hbWUpLCB0aGlzIH0sIF90cmlnZ2VyOiBmdW5jdGlvbiAoKSB7IHZhciBhID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7IHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBhWzBdICYmIChhWzBdID0geyB0eXBlOiBhWzBdIH0pLCB0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLnRyaWdnZXIuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgYSksIHRoaXMuX18kZW1pdHRlclB1YmxpYy50cmlnZ2VyLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgYSksIHRoaXMgfSwgaW5zdGFuY2VzOiBmdW5jdGlvbiAoYikgeyB2YXIgYyA9IFtdLCBkID0gYiB8fCBcIi50b29sdGlwc3RlcmVkXCI7IHJldHVybiBhKGQpLmVhY2goZnVuY3Rpb24gKCkgeyB2YXIgYiA9IGEodGhpcyksIGQgPSBiLmRhdGEoXCJ0b29sdGlwc3Rlci1uc1wiKTsgZCAmJiBhLmVhY2goZCwgZnVuY3Rpb24gKGEsIGQpIHsgYy5wdXNoKGIuZGF0YShkKSkgfSkgfSksIGMgfSwgaW5zdGFuY2VzTGF0ZXN0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9faW5zdGFuY2VzTGF0ZXN0QXJyIH0sIG9mZjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fXyRlbWl0dGVyUHVibGljLm9mZi5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKSwgdGhpcyB9LCBvbjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fXyRlbWl0dGVyUHVibGljLm9uLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0sIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fXyRlbWl0dGVyUHVibGljLm9uZS5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKSwgdGhpcyB9LCBvcmlnaW5zOiBmdW5jdGlvbiAoYikgeyB2YXIgYyA9IGIgPyBiICsgXCIgXCIgOiBcIlwiOyByZXR1cm4gYShjICsgXCIudG9vbHRpcHN0ZXJlZFwiKS50b0FycmF5KCkgfSwgc2V0RGVmYXVsdHM6IGZ1bmN0aW9uIChiKSB7IHJldHVybiBhLmV4dGVuZChmLCBiKSwgdGhpcyB9LCB0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fXyRlbWl0dGVyUHVibGljLnRyaWdnZXJIYW5kbGVyLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0gfSwgYS50b29sdGlwc3RlciA9IG5ldyBpLCBhLlRvb2x0aXBzdGVyID0gZnVuY3Rpb24gKGIsIGMpIHsgdGhpcy5fX2NhbGxiYWNrcyA9IHsgY2xvc2U6IFtdLCBvcGVuOiBbXSB9LCB0aGlzLl9fY2xvc2luZ1RpbWUsIHRoaXMuX19Db250ZW50LCB0aGlzLl9fY29udGVudEJjciwgdGhpcy5fX2Rlc3Ryb3llZCA9ICExLCB0aGlzLl9fJGVtaXR0ZXJQcml2YXRlID0gYSh7fSksIHRoaXMuX18kZW1pdHRlclB1YmxpYyA9IGEoe30pLCB0aGlzLl9fZW5hYmxlZCA9ICEwLCB0aGlzLl9fZ2FyYmFnZUNvbGxlY3RvciwgdGhpcy5fX0dlb21ldHJ5LCB0aGlzLl9fbGFzdFBvc2l0aW9uLCB0aGlzLl9fbmFtZXNwYWNlID0gXCJ0b29sdGlwc3Rlci1cIiArIE1hdGgucm91bmQoMWU2ICogTWF0aC5yYW5kb20oKSksIHRoaXMuX19vcHRpb25zLCB0aGlzLl9fJG9yaWdpblBhcmVudHMsIHRoaXMuX19wb2ludGVySXNPdmVyT3JpZ2luID0gITEsIHRoaXMuX19wcmV2aW91c1RoZW1lcyA9IFtdLCB0aGlzLl9fc3RhdGUgPSBcImNsb3NlZFwiLCB0aGlzLl9fdGltZW91dHMgPSB7IGNsb3NlOiBbXSwgb3BlbjogbnVsbCB9LCB0aGlzLl9fdG91Y2hFdmVudHMgPSBbXSwgdGhpcy5fX3RyYWNrZXIgPSBudWxsLCB0aGlzLl8kb3JpZ2luLCB0aGlzLl8kdG9vbHRpcCwgdGhpcy5fX2luaXQoYiwgYykgfSwgYS5Ub29sdGlwc3Rlci5wcm90b3R5cGUgPSB7IF9faW5pdDogZnVuY3Rpb24gKGIsIGMpIHsgdmFyIGQgPSB0aGlzOyBpZiAoZC5fJG9yaWdpbiA9IGEoYiksIGQuX19vcHRpb25zID0gYS5leHRlbmQoITAsIHt9LCBmLCBjKSwgZC5fX29wdGlvbnNGb3JtYXQoKSwgIWguSUUgfHwgaC5JRSA+PSBkLl9fb3B0aW9ucy5JRW1pbikgeyB2YXIgZSA9IG51bGw7IGlmICh2b2lkIDAgPT09IGQuXyRvcmlnaW4uZGF0YShcInRvb2x0aXBzdGVyLWluaXRpYWxUaXRsZVwiKSAmJiAoZSA9IGQuXyRvcmlnaW4uYXR0cihcInRpdGxlXCIpLCB2b2lkIDAgPT09IGUgJiYgKGUgPSBudWxsKSwgZC5fJG9yaWdpbi5kYXRhKFwidG9vbHRpcHN0ZXItaW5pdGlhbFRpdGxlXCIsIGUpKSwgbnVsbCAhPT0gZC5fX29wdGlvbnMuY29udGVudCkgZC5fX2NvbnRlbnRTZXQoZC5fX29wdGlvbnMuY29udGVudCk7IGVsc2UgeyB2YXIgZywgaSA9IGQuXyRvcmlnaW4uYXR0cihcImRhdGEtdG9vbHRpcC1jb250ZW50XCIpOyBpICYmIChnID0gYShpKSksIGcgJiYgZ1swXSA/IGQuX19jb250ZW50U2V0KGcuZmlyc3QoKSkgOiBkLl9fY29udGVudFNldChlKSB9IGQuXyRvcmlnaW4ucmVtb3ZlQXR0cihcInRpdGxlXCIpLmFkZENsYXNzKFwidG9vbHRpcHN0ZXJlZFwiKSwgZC5fX3ByZXBhcmVPcmlnaW4oKSwgZC5fX3ByZXBhcmVHQygpLCBhLmVhY2goZC5fX29wdGlvbnMucGx1Z2lucywgZnVuY3Rpb24gKGEsIGIpIHsgZC5fcGx1ZyhiKSB9KSwgaC5oYXNUb3VjaENhcGFiaWxpdHkgJiYgYShoLndpbmRvdy5kb2N1bWVudC5ib2R5KS5vbihcInRvdWNobW92ZS5cIiArIGQuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyT3BlblwiLCBmdW5jdGlvbiAoYSkgeyBkLl90b3VjaFJlY29yZEV2ZW50KGEpIH0pLCBkLl9vbihcImNyZWF0ZWRcIiwgZnVuY3Rpb24gKCkgeyBkLl9fcHJlcGFyZVRvb2x0aXAoKSB9KS5fb24oXCJyZXBvc2l0aW9uZWRcIiwgZnVuY3Rpb24gKGEpIHsgZC5fX2xhc3RQb3NpdGlvbiA9IGEucG9zaXRpb24gfSkgfSBlbHNlIGQuX19vcHRpb25zLmRpc2FibGVkID0gITAgfSwgX19jb250ZW50SW5zZXJ0OiBmdW5jdGlvbiAoKSB7IHZhciBhID0gdGhpcywgYiA9IGEuXyR0b29sdGlwLmZpbmQoXCIudG9vbHRpcHN0ZXItY29udGVudFwiKSwgYyA9IGEuX19Db250ZW50LCBkID0gZnVuY3Rpb24gKGEpIHsgYyA9IGEgfTsgcmV0dXJuIGEuX3RyaWdnZXIoeyB0eXBlOiBcImZvcm1hdFwiLCBjb250ZW50OiBhLl9fQ29udGVudCwgZm9ybWF0OiBkIH0pLCBhLl9fb3B0aW9ucy5mdW5jdGlvbkZvcm1hdCAmJiAoYyA9IGEuX19vcHRpb25zLmZ1bmN0aW9uRm9ybWF0LmNhbGwoYSwgYSwgeyBvcmlnaW46IGEuXyRvcmlnaW5bMF0gfSwgYS5fX0NvbnRlbnQpKSwgXCJzdHJpbmdcIiAhPSB0eXBlb2YgYyB8fCBhLl9fb3B0aW9ucy5jb250ZW50QXNIVE1MID8gYi5lbXB0eSgpLmFwcGVuZChjKSA6IGIudGV4dChjKSwgYSB9LCBfX2NvbnRlbnRTZXQ6IGZ1bmN0aW9uIChiKSB7IHJldHVybiBiIGluc3RhbmNlb2YgYSAmJiB0aGlzLl9fb3B0aW9ucy5jb250ZW50Q2xvbmluZyAmJiAoYiA9IGIuY2xvbmUoITApKSwgdGhpcy5fX0NvbnRlbnQgPSBiLCB0aGlzLl90cmlnZ2VyKHsgdHlwZTogXCJ1cGRhdGVkXCIsIGNvbnRlbnQ6IGIgfSksIHRoaXMgfSwgX19kZXN0cm95RXJyb3I6IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyB0b29sdGlwIGhhcyBiZWVuIGRlc3Ryb3llZCBhbmQgY2Fubm90IGV4ZWN1dGUgeW91ciBtZXRob2QgY2FsbC5cIikgfSwgX19nZW9tZXRyeTogZnVuY3Rpb24gKCkgeyB2YXIgYiA9IHRoaXMsIGMgPSBiLl8kb3JpZ2luLCBkID0gYi5fJG9yaWdpbi5pcyhcImFyZWFcIik7IGlmIChkKSB7IHZhciBlID0gYi5fJG9yaWdpbi5wYXJlbnQoKS5hdHRyKFwibmFtZVwiKTsgYyA9IGEoJ2ltZ1t1c2VtYXA9XCIjJyArIGUgKyAnXCJdJykgfSB2YXIgZiA9IGNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGcgPSBhKGgud2luZG93LmRvY3VtZW50KSwgaSA9IGEoaC53aW5kb3cpLCBqID0gYywgayA9IHsgYXZhaWxhYmxlOiB7IGRvY3VtZW50OiBudWxsLCB3aW5kb3c6IG51bGwgfSwgZG9jdW1lbnQ6IHsgc2l6ZTogeyBoZWlnaHQ6IGcuaGVpZ2h0KCksIHdpZHRoOiBnLndpZHRoKCkgfSB9LCB3aW5kb3c6IHsgc2Nyb2xsOiB7IGxlZnQ6IGgud2luZG93LnNjcm9sbFggfHwgaC53aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQsIHRvcDogaC53aW5kb3cuc2Nyb2xsWSB8fCBoLndpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIH0sIHNpemU6IHsgaGVpZ2h0OiBpLmhlaWdodCgpLCB3aWR0aDogaS53aWR0aCgpIH0gfSwgb3JpZ2luOiB7IGZpeGVkTGluZWFnZTogITEsIG9mZnNldDoge30sIHNpemU6IHsgaGVpZ2h0OiBmLmJvdHRvbSAtIGYudG9wLCB3aWR0aDogZi5yaWdodCAtIGYubGVmdCB9LCB1c2VtYXBJbWFnZTogZCA/IGNbMF0gOiBudWxsLCB3aW5kb3dPZmZzZXQ6IHsgYm90dG9tOiBmLmJvdHRvbSwgbGVmdDogZi5sZWZ0LCByaWdodDogZi5yaWdodCwgdG9wOiBmLnRvcCB9IH0gfTsgaWYgKGQpIHsgdmFyIGwgPSBiLl8kb3JpZ2luLmF0dHIoXCJzaGFwZVwiKSwgbSA9IGIuXyRvcmlnaW4uYXR0cihcImNvb3Jkc1wiKTsgaWYgKG0gJiYgKG0gPSBtLnNwbGl0KFwiLFwiKSwgYS5tYXAobSwgZnVuY3Rpb24gKGEsIGIpIHsgbVtiXSA9IHBhcnNlSW50KGEpIH0pKSwgXCJkZWZhdWx0XCIgIT0gbCkgc3dpdGNoIChsKSB7IGNhc2UgXCJjaXJjbGVcIjogdmFyIG4gPSBtWzBdLCBvID0gbVsxXSwgcCA9IG1bMl0sIHEgPSBvIC0gcCwgciA9IG4gLSBwOyBrLm9yaWdpbi5zaXplLmhlaWdodCA9IDIgKiBwLCBrLm9yaWdpbi5zaXplLndpZHRoID0gay5vcmlnaW4uc2l6ZS5oZWlnaHQsIGsub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICs9IHIsIGsub3JpZ2luLndpbmRvd09mZnNldC50b3AgKz0gcTsgYnJlYWs7IGNhc2UgXCJyZWN0XCI6IHZhciBzID0gbVswXSwgdCA9IG1bMV0sIHUgPSBtWzJdLCB2ID0gbVszXTsgay5vcmlnaW4uc2l6ZS5oZWlnaHQgPSB2IC0gdCwgay5vcmlnaW4uc2l6ZS53aWR0aCA9IHUgLSBzLCBrLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArPSBzLCBrLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICs9IHQ7IGJyZWFrOyBjYXNlIFwicG9seVwiOiBmb3IgKHZhciB3ID0gMCwgeCA9IDAsIHkgPSAwLCB6ID0gMCwgQSA9IFwiZXZlblwiLCBCID0gMDsgQiA8IG0ubGVuZ3RoOyBCKyspIHsgdmFyIEMgPSBtW0JdOyBcImV2ZW5cIiA9PSBBID8gKEMgPiB5ICYmICh5ID0gQywgMCA9PT0gQiAmJiAodyA9IHkpKSwgdyA+IEMgJiYgKHcgPSBDKSwgQSA9IFwib2RkXCIpIDogKEMgPiB6ICYmICh6ID0gQywgMSA9PSBCICYmICh4ID0geikpLCB4ID4gQyAmJiAoeCA9IEMpLCBBID0gXCJldmVuXCIpIH0gay5vcmlnaW4uc2l6ZS5oZWlnaHQgPSB6IC0geCwgay5vcmlnaW4uc2l6ZS53aWR0aCA9IHkgLSB3LCBrLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArPSB3LCBrLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICs9IHggfSB9IHZhciBEID0gZnVuY3Rpb24gKGEpIHsgay5vcmlnaW4uc2l6ZS5oZWlnaHQgPSBhLmhlaWdodCwgay5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgPSBhLmxlZnQsIGsub3JpZ2luLndpbmRvd09mZnNldC50b3AgPSBhLnRvcCwgay5vcmlnaW4uc2l6ZS53aWR0aCA9IGEud2lkdGggfTsgZm9yIChiLl90cmlnZ2VyKHsgdHlwZTogXCJnZW9tZXRyeVwiLCBlZGl0OiBELCBnZW9tZXRyeTogeyBoZWlnaHQ6IGsub3JpZ2luLnNpemUuaGVpZ2h0LCBsZWZ0OiBrLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCwgdG9wOiBrLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wLCB3aWR0aDogay5vcmlnaW4uc2l6ZS53aWR0aCB9IH0pLCBrLm9yaWdpbi53aW5kb3dPZmZzZXQucmlnaHQgPSBrLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArIGsub3JpZ2luLnNpemUud2lkdGgsIGsub3JpZ2luLndpbmRvd09mZnNldC5ib3R0b20gPSBrLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICsgay5vcmlnaW4uc2l6ZS5oZWlnaHQsIGsub3JpZ2luLm9mZnNldC5sZWZ0ID0gay5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKyBrLndpbmRvdy5zY3JvbGwubGVmdCwgay5vcmlnaW4ub2Zmc2V0LnRvcCA9IGsub3JpZ2luLndpbmRvd09mZnNldC50b3AgKyBrLndpbmRvdy5zY3JvbGwudG9wLCBrLm9yaWdpbi5vZmZzZXQuYm90dG9tID0gay5vcmlnaW4ub2Zmc2V0LnRvcCArIGsub3JpZ2luLnNpemUuaGVpZ2h0LCBrLm9yaWdpbi5vZmZzZXQucmlnaHQgPSBrLm9yaWdpbi5vZmZzZXQubGVmdCArIGsub3JpZ2luLnNpemUud2lkdGgsIGsuYXZhaWxhYmxlLmRvY3VtZW50ID0geyBib3R0b206IHsgaGVpZ2h0OiBrLmRvY3VtZW50LnNpemUuaGVpZ2h0IC0gay5vcmlnaW4ub2Zmc2V0LmJvdHRvbSwgd2lkdGg6IGsuZG9jdW1lbnQuc2l6ZS53aWR0aCB9LCBsZWZ0OiB7IGhlaWdodDogay5kb2N1bWVudC5zaXplLmhlaWdodCwgd2lkdGg6IGsub3JpZ2luLm9mZnNldC5sZWZ0IH0sIHJpZ2h0OiB7IGhlaWdodDogay5kb2N1bWVudC5zaXplLmhlaWdodCwgd2lkdGg6IGsuZG9jdW1lbnQuc2l6ZS53aWR0aCAtIGsub3JpZ2luLm9mZnNldC5yaWdodCB9LCB0b3A6IHsgaGVpZ2h0OiBrLm9yaWdpbi5vZmZzZXQudG9wLCB3aWR0aDogay5kb2N1bWVudC5zaXplLndpZHRoIH0gfSwgay5hdmFpbGFibGUud2luZG93ID0geyBib3R0b206IHsgaGVpZ2h0OiBNYXRoLm1heChrLndpbmRvdy5zaXplLmhlaWdodCAtIE1hdGgubWF4KGsub3JpZ2luLndpbmRvd09mZnNldC5ib3R0b20sIDApLCAwKSwgd2lkdGg6IGsud2luZG93LnNpemUud2lkdGggfSwgbGVmdDogeyBoZWlnaHQ6IGsud2luZG93LnNpemUuaGVpZ2h0LCB3aWR0aDogTWF0aC5tYXgoay5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQsIDApIH0sIHJpZ2h0OiB7IGhlaWdodDogay53aW5kb3cuc2l6ZS5oZWlnaHQsIHdpZHRoOiBNYXRoLm1heChrLndpbmRvdy5zaXplLndpZHRoIC0gTWF0aC5tYXgoay5vcmlnaW4ud2luZG93T2Zmc2V0LnJpZ2h0LCAwKSwgMCkgfSwgdG9wOiB7IGhlaWdodDogTWF0aC5tYXgoay5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCwgMCksIHdpZHRoOiBrLndpbmRvdy5zaXplLndpZHRoIH0gfTsgXCJodG1sXCIgIT0galswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7KSB7IGlmIChcImZpeGVkXCIgPT0gai5jc3MoXCJwb3NpdGlvblwiKSkgeyBrLm9yaWdpbi5maXhlZExpbmVhZ2UgPSAhMDsgYnJlYWsgfSBqID0gai5wYXJlbnQoKSB9IHJldHVybiBrIH0sIF9fb3B0aW9uc0Zvcm1hdDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgdGhpcy5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24gJiYgKHRoaXMuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uID0gW3RoaXMuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uLCB0aGlzLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbl0pLCBcIm51bWJlclwiID09IHR5cGVvZiB0aGlzLl9fb3B0aW9ucy5kZWxheSAmJiAodGhpcy5fX29wdGlvbnMuZGVsYXkgPSBbdGhpcy5fX29wdGlvbnMuZGVsYXksIHRoaXMuX19vcHRpb25zLmRlbGF5XSksIFwibnVtYmVyXCIgPT0gdHlwZW9mIHRoaXMuX19vcHRpb25zLmRlbGF5VG91Y2ggJiYgKHRoaXMuX19vcHRpb25zLmRlbGF5VG91Y2ggPSBbdGhpcy5fX29wdGlvbnMuZGVsYXlUb3VjaCwgdGhpcy5fX29wdGlvbnMuZGVsYXlUb3VjaF0pLCBcInN0cmluZ1wiID09IHR5cGVvZiB0aGlzLl9fb3B0aW9ucy50aGVtZSAmJiAodGhpcy5fX29wdGlvbnMudGhlbWUgPSBbdGhpcy5fX29wdGlvbnMudGhlbWVdKSwgbnVsbCA9PT0gdGhpcy5fX29wdGlvbnMucGFyZW50ID8gdGhpcy5fX29wdGlvbnMucGFyZW50ID0gYShoLndpbmRvdy5kb2N1bWVudC5ib2R5KSA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIHRoaXMuX19vcHRpb25zLnBhcmVudCAmJiAodGhpcy5fX29wdGlvbnMucGFyZW50ID0gYSh0aGlzLl9fb3B0aW9ucy5wYXJlbnQpKSwgXCJob3ZlclwiID09IHRoaXMuX19vcHRpb25zLnRyaWdnZXIgPyAodGhpcy5fX29wdGlvbnMudHJpZ2dlck9wZW4gPSB7IG1vdXNlZW50ZXI6ICEwLCB0b3VjaHN0YXJ0OiAhMCB9LCB0aGlzLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UgPSB7IG1vdXNlbGVhdmU6ICEwLCBvcmlnaW5DbGljazogITAsIHRvdWNobGVhdmU6ICEwIH0pIDogXCJjbGlja1wiID09IHRoaXMuX19vcHRpb25zLnRyaWdnZXIgJiYgKHRoaXMuX19vcHRpb25zLnRyaWdnZXJPcGVuID0geyBjbGljazogITAsIHRhcDogITAgfSwgdGhpcy5fX29wdGlvbnMudHJpZ2dlckNsb3NlID0geyBjbGljazogITAsIHRhcDogITAgfSksIHRoaXMuX3RyaWdnZXIoXCJvcHRpb25zXCIpLCB0aGlzIH0sIF9fcHJlcGFyZUdDOiBmdW5jdGlvbiAoKSB7IHZhciBiID0gdGhpczsgcmV0dXJuIGIuX19vcHRpb25zLnNlbGZEZXN0cnVjdGlvbiA/IGIuX19nYXJiYWdlQ29sbGVjdG9yID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyB2YXIgYyA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpOyBiLl9fdG91Y2hFdmVudHMgPSBhLmdyZXAoYi5fX3RvdWNoRXZlbnRzLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYyAtIGEudGltZSA+IDZlNCB9KSwgZChiLl8kb3JpZ2luKSB8fCBiLmNsb3NlKGZ1bmN0aW9uICgpIHsgYi5kZXN0cm95KCkgfSkgfSwgMmU0KSA6IGNsZWFySW50ZXJ2YWwoYi5fX2dhcmJhZ2VDb2xsZWN0b3IpLCBiIH0sIF9fcHJlcGFyZU9yaWdpbjogZnVuY3Rpb24gKCkgeyB2YXIgYSA9IHRoaXM7IGlmIChhLl8kb3JpZ2luLm9mZihcIi5cIiArIGEuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyT3BlblwiKSwgaC5oYXNUb3VjaENhcGFiaWxpdHkgJiYgYS5fJG9yaWdpbi5vbihcInRvdWNoc3RhcnQuXCIgKyBhLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlck9wZW4gdG91Y2hlbmQuXCIgKyBhLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlck9wZW4gdG91Y2hjYW5jZWwuXCIgKyBhLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlck9wZW5cIiwgZnVuY3Rpb24gKGIpIHsgYS5fdG91Y2hSZWNvcmRFdmVudChiKSB9KSwgYS5fX29wdGlvbnMudHJpZ2dlck9wZW4uY2xpY2sgfHwgYS5fX29wdGlvbnMudHJpZ2dlck9wZW4udGFwICYmIGguaGFzVG91Y2hDYXBhYmlsaXR5KSB7IHZhciBiID0gXCJcIjsgYS5fX29wdGlvbnMudHJpZ2dlck9wZW4uY2xpY2sgJiYgKGIgKz0gXCJjbGljay5cIiArIGEuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyT3BlbiBcIiksIGEuX19vcHRpb25zLnRyaWdnZXJPcGVuLnRhcCAmJiBoLmhhc1RvdWNoQ2FwYWJpbGl0eSAmJiAoYiArPSBcInRvdWNoZW5kLlwiICsgYS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJPcGVuXCIpLCBhLl8kb3JpZ2luLm9uKGIsIGZ1bmN0aW9uIChiKSB7IGEuX3RvdWNoSXNNZWFuaW5nZnVsRXZlbnQoYikgJiYgYS5fb3BlbihiKSB9KSB9IGlmIChhLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi5tb3VzZWVudGVyIHx8IGEuX19vcHRpb25zLnRyaWdnZXJPcGVuLnRvdWNoc3RhcnQgJiYgaC5oYXNUb3VjaENhcGFiaWxpdHkpIHsgdmFyIGIgPSBcIlwiOyBhLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi5tb3VzZWVudGVyICYmIChiICs9IFwibW91c2VlbnRlci5cIiArIGEuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyT3BlbiBcIiksIGEuX19vcHRpb25zLnRyaWdnZXJPcGVuLnRvdWNoc3RhcnQgJiYgaC5oYXNUb3VjaENhcGFiaWxpdHkgJiYgKGIgKz0gXCJ0b3VjaHN0YXJ0LlwiICsgYS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJPcGVuXCIpLCBhLl8kb3JpZ2luLm9uKGIsIGZ1bmN0aW9uIChiKSB7ICFhLl90b3VjaElzVG91Y2hFdmVudChiKSAmJiBhLl90b3VjaElzRW11bGF0ZWRFdmVudChiKSB8fCAoYS5fX3BvaW50ZXJJc092ZXJPcmlnaW4gPSAhMCwgYS5fb3BlblNob3J0bHkoYikpIH0pIH0gaWYgKGEuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5tb3VzZWxlYXZlIHx8IGEuX19vcHRpb25zLnRyaWdnZXJDbG9zZS50b3VjaGxlYXZlICYmIGguaGFzVG91Y2hDYXBhYmlsaXR5KSB7IHZhciBiID0gXCJcIjsgYS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLm1vdXNlbGVhdmUgJiYgKGIgKz0gXCJtb3VzZWxlYXZlLlwiICsgYS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJPcGVuIFwiKSwgYS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRvdWNobGVhdmUgJiYgaC5oYXNUb3VjaENhcGFiaWxpdHkgJiYgKGIgKz0gXCJ0b3VjaGVuZC5cIiArIGEuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyT3BlbiB0b3VjaGNhbmNlbC5cIiArIGEuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyT3BlblwiKSwgYS5fJG9yaWdpbi5vbihiLCBmdW5jdGlvbiAoYikgeyBhLl90b3VjaElzTWVhbmluZ2Z1bEV2ZW50KGIpICYmIChhLl9fcG9pbnRlcklzT3Zlck9yaWdpbiA9ICExKSB9KSB9IHJldHVybiBhIH0sIF9fcHJlcGFyZVRvb2x0aXA6IGZ1bmN0aW9uICgpIHsgdmFyIGIgPSB0aGlzLCBjID0gYi5fX29wdGlvbnMuaW50ZXJhY3RpdmUgPyBcImF1dG9cIiA6IFwiXCI7IHJldHVybiBiLl8kdG9vbHRpcC5hdHRyKFwiaWRcIiwgYi5fX25hbWVzcGFjZSkuY3NzKHsgXCJwb2ludGVyLWV2ZW50c1wiOiBjLCB6SW5kZXg6IGIuX19vcHRpb25zLnpJbmRleCB9KSwgYS5lYWNoKGIuX19wcmV2aW91c1RoZW1lcywgZnVuY3Rpb24gKGEsIGMpIHsgYi5fJHRvb2x0aXAucmVtb3ZlQ2xhc3MoYykgfSksIGEuZWFjaChiLl9fb3B0aW9ucy50aGVtZSwgZnVuY3Rpb24gKGEsIGMpIHsgYi5fJHRvb2x0aXAuYWRkQ2xhc3MoYykgfSksIGIuX19wcmV2aW91c1RoZW1lcyA9IGEubWVyZ2UoW10sIGIuX19vcHRpb25zLnRoZW1lKSwgYiB9LCBfX3Njcm9sbEhhbmRsZXI6IGZ1bmN0aW9uIChiKSB7IHZhciBjID0gdGhpczsgaWYgKGMuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5zY3JvbGwpIGMuX2Nsb3NlKGIpOyBlbHNlIGlmIChkKGMuXyRvcmlnaW4pICYmIGQoYy5fJHRvb2x0aXApKSB7IHZhciBlID0gbnVsbDsgaWYgKGIudGFyZ2V0ID09PSBoLndpbmRvdy5kb2N1bWVudCkgYy5fX0dlb21ldHJ5Lm9yaWdpbi5maXhlZExpbmVhZ2UgfHwgYy5fX29wdGlvbnMucmVwb3NpdGlvbk9uU2Nyb2xsICYmIGMucmVwb3NpdGlvbihiKTsgZWxzZSB7IGUgPSBjLl9fZ2VvbWV0cnkoKTsgdmFyIGYgPSAhMTsgaWYgKFwiZml4ZWRcIiAhPSBjLl8kb3JpZ2luLmNzcyhcInBvc2l0aW9uXCIpICYmIGMuX18kb3JpZ2luUGFyZW50cy5lYWNoKGZ1bmN0aW9uIChiLCBjKSB7IHZhciBkID0gYShjKSwgZyA9IGQuY3NzKFwib3ZlcmZsb3cteFwiKSwgaCA9IGQuY3NzKFwib3ZlcmZsb3cteVwiKTsgaWYgKFwidmlzaWJsZVwiICE9IGcgfHwgXCJ2aXNpYmxlXCIgIT0gaCkgeyB2YXIgaSA9IGMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IGlmIChcInZpc2libGVcIiAhPSBnICYmIChlLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCA8IGkubGVmdCB8fCBlLm9yaWdpbi53aW5kb3dPZmZzZXQucmlnaHQgPiBpLnJpZ2h0KSkgcmV0dXJuIGYgPSAhMCwgITE7IGlmIChcInZpc2libGVcIiAhPSBoICYmIChlLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wIDwgaS50b3AgfHwgZS5vcmlnaW4ud2luZG93T2Zmc2V0LmJvdHRvbSA+IGkuYm90dG9tKSkgcmV0dXJuIGYgPSAhMCwgITEgfSByZXR1cm4gXCJmaXhlZFwiID09IGQuY3NzKFwicG9zaXRpb25cIikgPyAhMSA6IHZvaWQgMCB9KSwgZikgYy5fJHRvb2x0aXAuY3NzKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTsgZWxzZSBpZiAoYy5fJHRvb2x0aXAuY3NzKFwidmlzaWJpbGl0eVwiLCBcInZpc2libGVcIiksIGMuX19vcHRpb25zLnJlcG9zaXRpb25PblNjcm9sbCkgYy5yZXBvc2l0aW9uKGIpOyBlbHNlIHsgdmFyIGcgPSBlLm9yaWdpbi5vZmZzZXQubGVmdCAtIGMuX19HZW9tZXRyeS5vcmlnaW4ub2Zmc2V0LmxlZnQsIGkgPSBlLm9yaWdpbi5vZmZzZXQudG9wIC0gYy5fX0dlb21ldHJ5Lm9yaWdpbi5vZmZzZXQudG9wOyBjLl8kdG9vbHRpcC5jc3MoeyBsZWZ0OiBjLl9fbGFzdFBvc2l0aW9uLmNvb3JkLmxlZnQgKyBnLCB0b3A6IGMuX19sYXN0UG9zaXRpb24uY29vcmQudG9wICsgaSB9KSB9IH0gYy5fdHJpZ2dlcih7IHR5cGU6IFwic2Nyb2xsXCIsIGV2ZW50OiBiLCBnZW86IGUgfSkgfSByZXR1cm4gYyB9LCBfX3N0YXRlU2V0OiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gdGhpcy5fX3N0YXRlID0gYSwgdGhpcy5fdHJpZ2dlcih7IHR5cGU6IFwic3RhdGVcIiwgc3RhdGU6IGEgfSksIHRoaXMgfSwgX190aW1lb3V0c0NsZWFyOiBmdW5jdGlvbiAoKSB7IHJldHVybiBjbGVhclRpbWVvdXQodGhpcy5fX3RpbWVvdXRzLm9wZW4pLCB0aGlzLl9fdGltZW91dHMub3BlbiA9IG51bGwsIGEuZWFjaCh0aGlzLl9fdGltZW91dHMuY2xvc2UsIGZ1bmN0aW9uIChhLCBiKSB7IGNsZWFyVGltZW91dChiKSB9KSwgdGhpcy5fX3RpbWVvdXRzLmNsb3NlID0gW10sIHRoaXMgfSwgX190cmFja2VyU3RhcnQ6IGZ1bmN0aW9uICgpIHsgdmFyIGEgPSB0aGlzLCBiID0gYS5fJHRvb2x0aXAuZmluZChcIi50b29sdGlwc3Rlci1jb250ZW50XCIpOyByZXR1cm4gYS5fX29wdGlvbnMudHJhY2tUb29sdGlwICYmIChhLl9fY29udGVudEJjciA9IGJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLCBhLl9fdHJhY2tlciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgaWYgKGQoYS5fJG9yaWdpbikgJiYgZChhLl8kdG9vbHRpcCkpIHsgaWYgKGEuX19vcHRpb25zLnRyYWNrT3JpZ2luKSB7IHZhciBlID0gYS5fX2dlb21ldHJ5KCksIGYgPSAhMTsgYyhlLm9yaWdpbi5zaXplLCBhLl9fR2VvbWV0cnkub3JpZ2luLnNpemUpICYmIChhLl9fR2VvbWV0cnkub3JpZ2luLmZpeGVkTGluZWFnZSA/IGMoZS5vcmlnaW4ud2luZG93T2Zmc2V0LCBhLl9fR2VvbWV0cnkub3JpZ2luLndpbmRvd09mZnNldCkgJiYgKGYgPSAhMCkgOiBjKGUub3JpZ2luLm9mZnNldCwgYS5fX0dlb21ldHJ5Lm9yaWdpbi5vZmZzZXQpICYmIChmID0gITApKSwgZiB8fCAoYS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLm1vdXNlbGVhdmUgPyBhLl9jbG9zZSgpIDogYS5yZXBvc2l0aW9uKCkpIH0gaWYgKGEuX19vcHRpb25zLnRyYWNrVG9vbHRpcCkgeyB2YXIgZyA9IGJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IGcuaGVpZ2h0ID09PSBhLl9fY29udGVudEJjci5oZWlnaHQgJiYgZy53aWR0aCA9PT0gYS5fX2NvbnRlbnRCY3Iud2lkdGggfHwgKGEucmVwb3NpdGlvbigpLCBhLl9fY29udGVudEJjciA9IGcpIH0gfSBlbHNlIGEuX2Nsb3NlKCkgfSwgYS5fX29wdGlvbnMudHJhY2tlckludGVydmFsKSwgYSB9LCBfY2xvc2U6IGZ1bmN0aW9uIChiLCBjLCBkKSB7IHZhciBlID0gdGhpcywgZiA9ICEwOyBpZiAoZS5fdHJpZ2dlcih7IHR5cGU6IFwiY2xvc2VcIiwgZXZlbnQ6IGIsIHN0b3A6IGZ1bmN0aW9uICgpIHsgZiA9ICExIH0gfSksIGYgfHwgZCkgeyBjICYmIGUuX19jYWxsYmFja3MuY2xvc2UucHVzaChjKSwgZS5fX2NhbGxiYWNrcy5vcGVuID0gW10sIGUuX190aW1lb3V0c0NsZWFyKCk7IHZhciBnID0gZnVuY3Rpb24gKCkgeyBhLmVhY2goZS5fX2NhbGxiYWNrcy5jbG9zZSwgZnVuY3Rpb24gKGEsIGMpIHsgYy5jYWxsKGUsIGUsIHsgZXZlbnQ6IGIsIG9yaWdpbjogZS5fJG9yaWdpblswXSB9KSB9KSwgZS5fX2NhbGxiYWNrcy5jbG9zZSA9IFtdIH07IGlmIChcImNsb3NlZFwiICE9IGUuX19zdGF0ZSkgeyB2YXIgaSA9ICEwLCBqID0gbmV3IERhdGUsIGsgPSBqLmdldFRpbWUoKSwgbCA9IGsgKyBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXTsgaWYgKFwiZGlzYXBwZWFyaW5nXCIgPT0gZS5fX3N0YXRlICYmIGwgPiBlLl9fY2xvc2luZ1RpbWUgJiYgZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gPiAwICYmIChpID0gITEpLCBpKSB7IGUuX19jbG9zaW5nVGltZSA9IGwsIFwiZGlzYXBwZWFyaW5nXCIgIT0gZS5fX3N0YXRlICYmIGUuX19zdGF0ZVNldChcImRpc2FwcGVhcmluZ1wiKTsgdmFyIG0gPSBmdW5jdGlvbiAoKSB7IGNsZWFySW50ZXJ2YWwoZS5fX3RyYWNrZXIpLCBlLl90cmlnZ2VyKHsgdHlwZTogXCJjbG9zaW5nXCIsIGV2ZW50OiBiIH0pLCBlLl8kdG9vbHRpcC5vZmYoXCIuXCIgKyBlLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlckNsb3NlXCIpLnJlbW92ZUNsYXNzKFwidG9vbHRpcHN0ZXItZHlpbmdcIiksIGEoaC53aW5kb3cpLm9mZihcIi5cIiArIGUuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyQ2xvc2VcIiksIGUuX18kb3JpZ2luUGFyZW50cy5lYWNoKGZ1bmN0aW9uIChiLCBjKSB7IGEoYykub2ZmKFwic2Nyb2xsLlwiICsgZS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJDbG9zZVwiKSB9KSwgZS5fXyRvcmlnaW5QYXJlbnRzID0gbnVsbCwgYShoLndpbmRvdy5kb2N1bWVudC5ib2R5KS5vZmYoXCIuXCIgKyBlLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlckNsb3NlXCIpLCBlLl8kb3JpZ2luLm9mZihcIi5cIiArIGUuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyQ2xvc2VcIiksIGUuX29mZihcImRpc21pc3NhYmxlXCIpLCBlLl9fc3RhdGVTZXQoXCJjbG9zZWRcIiksIGUuX3RyaWdnZXIoeyB0eXBlOiBcImFmdGVyXCIsIGV2ZW50OiBiIH0pLCBlLl9fb3B0aW9ucy5mdW5jdGlvbkFmdGVyICYmIGUuX19vcHRpb25zLmZ1bmN0aW9uQWZ0ZXIuY2FsbChlLCBlLCB7IGV2ZW50OiBiLCBvcmlnaW46IGUuXyRvcmlnaW5bMF0gfSksIGcoKSB9OyBoLmhhc1RyYW5zaXRpb25zID8gKGUuXyR0b29sdGlwLmNzcyh7IFwiLW1vei1hbmltYXRpb24tZHVyYXRpb25cIjogZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gKyBcIm1zXCIsIFwiLW1zLWFuaW1hdGlvbi1kdXJhdGlvblwiOiBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSArIFwibXNcIiwgXCItby1hbmltYXRpb24tZHVyYXRpb25cIjogZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gKyBcIm1zXCIsIFwiLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb25cIjogZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gKyBcIm1zXCIsIFwiYW5pbWF0aW9uLWR1cmF0aW9uXCI6IGUuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdICsgXCJtc1wiLCBcInRyYW5zaXRpb24tZHVyYXRpb25cIjogZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gKyBcIm1zXCIgfSksIGUuXyR0b29sdGlwLmNsZWFyUXVldWUoKS5yZW1vdmVDbGFzcyhcInRvb2x0aXBzdGVyLXNob3dcIikuYWRkQ2xhc3MoXCJ0b29sdGlwc3Rlci1keWluZ1wiKSwgZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gPiAwICYmIGUuXyR0b29sdGlwLmRlbGF5KGUuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdKSwgZS5fJHRvb2x0aXAucXVldWUobSkpIDogZS5fJHRvb2x0aXAuc3RvcCgpLmZhZGVPdXQoZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0sIG0pIH0gfSBlbHNlIGcoKSB9IHJldHVybiBlIH0sIF9vZmY6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX18kZW1pdHRlclByaXZhdGUub2ZmLmFwcGx5KHRoaXMuX18kZW1pdHRlclByaXZhdGUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKSwgdGhpcyB9LCBfb246IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX18kZW1pdHRlclByaXZhdGUub24uYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0sIF9vbmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX18kZW1pdHRlclByaXZhdGUub25lLmFwcGx5KHRoaXMuX18kZW1pdHRlclByaXZhdGUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKSwgdGhpcyB9LCBfb3BlbjogZnVuY3Rpb24gKGIsIGMpIHsgdmFyIGUgPSB0aGlzOyBpZiAoIWUuX19kZXN0cm95aW5nICYmIGQoZS5fJG9yaWdpbikgJiYgZS5fX2VuYWJsZWQpIHsgdmFyIGYgPSAhMDsgaWYgKFwiY2xvc2VkXCIgPT0gZS5fX3N0YXRlICYmIChlLl90cmlnZ2VyKHsgdHlwZTogXCJiZWZvcmVcIiwgZXZlbnQ6IGIsIHN0b3A6IGZ1bmN0aW9uICgpIHsgZiA9ICExIH0gfSksIGYgJiYgZS5fX29wdGlvbnMuZnVuY3Rpb25CZWZvcmUgJiYgKGYgPSBlLl9fb3B0aW9ucy5mdW5jdGlvbkJlZm9yZS5jYWxsKGUsIGUsIHsgZXZlbnQ6IGIsIG9yaWdpbjogZS5fJG9yaWdpblswXSB9KSkpLCBmICE9PSAhMSAmJiBudWxsICE9PSBlLl9fQ29udGVudCkgeyBjICYmIGUuX19jYWxsYmFja3Mub3Blbi5wdXNoKGMpLCBlLl9fY2FsbGJhY2tzLmNsb3NlID0gW10sIGUuX190aW1lb3V0c0NsZWFyKCk7IHZhciBnLCBpID0gZnVuY3Rpb24gKCkgeyBcInN0YWJsZVwiICE9IGUuX19zdGF0ZSAmJiBlLl9fc3RhdGVTZXQoXCJzdGFibGVcIiksIGEuZWFjaChlLl9fY2FsbGJhY2tzLm9wZW4sIGZ1bmN0aW9uIChhLCBiKSB7IGIuY2FsbChlLCBlLCB7IG9yaWdpbjogZS5fJG9yaWdpblswXSwgdG9vbHRpcDogZS5fJHRvb2x0aXBbMF0gfSkgfSksIGUuX19jYWxsYmFja3Mub3BlbiA9IFtdIH07IGlmIChcImNsb3NlZFwiICE9PSBlLl9fc3RhdGUpIGcgPSAwLCBcImRpc2FwcGVhcmluZ1wiID09PSBlLl9fc3RhdGUgPyAoZS5fX3N0YXRlU2V0KFwiYXBwZWFyaW5nXCIpLCBoLmhhc1RyYW5zaXRpb25zID8gKGUuXyR0b29sdGlwLmNsZWFyUXVldWUoKS5yZW1vdmVDbGFzcyhcInRvb2x0aXBzdGVyLWR5aW5nXCIpLmFkZENsYXNzKFwidG9vbHRpcHN0ZXItc2hvd1wiKSwgZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gPiAwICYmIGUuXyR0b29sdGlwLmRlbGF5KGUuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdKSwgZS5fJHRvb2x0aXAucXVldWUoaSkpIDogZS5fJHRvb2x0aXAuc3RvcCgpLmZhZGVJbihpKSkgOiBcInN0YWJsZVwiID09IGUuX19zdGF0ZSAmJiBpKCk7IGVsc2UgeyBpZiAoZS5fX3N0YXRlU2V0KFwiYXBwZWFyaW5nXCIpLCBnID0gZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0sIGUuX19jb250ZW50SW5zZXJ0KCksIGUucmVwb3NpdGlvbihiLCAhMCksIGguaGFzVHJhbnNpdGlvbnMgPyAoZS5fJHRvb2x0aXAuYWRkQ2xhc3MoXCJ0b29sdGlwc3Rlci1cIiArIGUuX19vcHRpb25zLmFuaW1hdGlvbikuYWRkQ2xhc3MoXCJ0b29sdGlwc3Rlci1pbml0aWFsXCIpLmNzcyh7IFwiLW1vei1hbmltYXRpb24tZHVyYXRpb25cIjogZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gKyBcIm1zXCIsIFwiLW1zLWFuaW1hdGlvbi1kdXJhdGlvblwiOiBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSArIFwibXNcIiwgXCItby1hbmltYXRpb24tZHVyYXRpb25cIjogZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gKyBcIm1zXCIsIFwiLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb25cIjogZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gKyBcIm1zXCIsIFwiYW5pbWF0aW9uLWR1cmF0aW9uXCI6IGUuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdICsgXCJtc1wiLCBcInRyYW5zaXRpb24tZHVyYXRpb25cIjogZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gKyBcIm1zXCIgfSksIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBcImNsb3NlZFwiICE9IGUuX19zdGF0ZSAmJiAoZS5fJHRvb2x0aXAuYWRkQ2xhc3MoXCJ0b29sdGlwc3Rlci1zaG93XCIpLnJlbW92ZUNsYXNzKFwidG9vbHRpcHN0ZXItaW5pdGlhbFwiKSwgZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gPiAwICYmIGUuXyR0b29sdGlwLmRlbGF5KGUuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdKSwgZS5fJHRvb2x0aXAucXVldWUoaSkpIH0sIDApKSA6IGUuXyR0b29sdGlwLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpLmZhZGVJbihlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSwgaSksIGUuX190cmFja2VyU3RhcnQoKSwgYShoLndpbmRvdykub24oXCJyZXNpemUuXCIgKyBlLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlckNsb3NlXCIsIGZ1bmN0aW9uIChiKSB7IHZhciBjID0gYShkb2N1bWVudC5hY3RpdmVFbGVtZW50KTsgKGMuaXMoXCJpbnB1dFwiKSB8fCBjLmlzKFwidGV4dGFyZWFcIikpICYmIGEuY29udGFpbnMoZS5fJHRvb2x0aXBbMF0sIGNbMF0pIHx8IGUucmVwb3NpdGlvbihiKSB9KS5vbihcInNjcm9sbC5cIiArIGUuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyQ2xvc2VcIiwgZnVuY3Rpb24gKGEpIHsgZS5fX3Njcm9sbEhhbmRsZXIoYSkgfSksIGUuX18kb3JpZ2luUGFyZW50cyA9IGUuXyRvcmlnaW4ucGFyZW50cygpLCBlLl9fJG9yaWdpblBhcmVudHMuZWFjaChmdW5jdGlvbiAoYiwgYykgeyBhKGMpLm9uKFwic2Nyb2xsLlwiICsgZS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJDbG9zZVwiLCBmdW5jdGlvbiAoYSkgeyBlLl9fc2Nyb2xsSGFuZGxlcihhKSB9KSB9KSwgZS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLm1vdXNlbGVhdmUgfHwgZS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRvdWNobGVhdmUgJiYgaC5oYXNUb3VjaENhcGFiaWxpdHkpIHsgZS5fb24oXCJkaXNtaXNzYWJsZVwiLCBmdW5jdGlvbiAoYSkgeyBhLmRpc21pc3NhYmxlID8gYS5kZWxheSA/IChtID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGUuX2Nsb3NlKGEuZXZlbnQpIH0sIGEuZGVsYXkpLCBlLl9fdGltZW91dHMuY2xvc2UucHVzaChtKSkgOiBlLl9jbG9zZShhKSA6IGNsZWFyVGltZW91dChtKSB9KTsgdmFyIGogPSBlLl8kb3JpZ2luLCBrID0gXCJcIiwgbCA9IFwiXCIsIG0gPSBudWxsOyBlLl9fb3B0aW9ucy5pbnRlcmFjdGl2ZSAmJiAoaiA9IGouYWRkKGUuXyR0b29sdGlwKSksIGUuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5tb3VzZWxlYXZlICYmIChrICs9IFwibW91c2VlbnRlci5cIiArIGUuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyQ2xvc2UgXCIsIGwgKz0gXCJtb3VzZWxlYXZlLlwiICsgZS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJDbG9zZSBcIiksIGUuX19vcHRpb25zLnRyaWdnZXJDbG9zZS50b3VjaGxlYXZlICYmIGguaGFzVG91Y2hDYXBhYmlsaXR5ICYmIChrICs9IFwidG91Y2hzdGFydC5cIiArIGUuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyQ2xvc2VcIiwgbCArPSBcInRvdWNoZW5kLlwiICsgZS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJDbG9zZSB0b3VjaGNhbmNlbC5cIiArIGUuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyQ2xvc2VcIiksIGoub24obCwgZnVuY3Rpb24gKGEpIHsgaWYgKGUuX3RvdWNoSXNUb3VjaEV2ZW50KGEpIHx8ICFlLl90b3VjaElzRW11bGF0ZWRFdmVudChhKSkgeyB2YXIgYiA9IFwibW91c2VsZWF2ZVwiID09IGEudHlwZSA/IGUuX19vcHRpb25zLmRlbGF5IDogZS5fX29wdGlvbnMuZGVsYXlUb3VjaDsgZS5fdHJpZ2dlcih7IGRlbGF5OiBiWzFdLCBkaXNtaXNzYWJsZTogITAsIGV2ZW50OiBhLCB0eXBlOiBcImRpc21pc3NhYmxlXCIgfSkgfSB9KS5vbihrLCBmdW5jdGlvbiAoYSkgeyAhZS5fdG91Y2hJc1RvdWNoRXZlbnQoYSkgJiYgZS5fdG91Y2hJc0VtdWxhdGVkRXZlbnQoYSkgfHwgZS5fdHJpZ2dlcih7IGRpc21pc3NhYmxlOiAhMSwgZXZlbnQ6IGEsIHR5cGU6IFwiZGlzbWlzc2FibGVcIiB9KSB9KSB9IGUuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5vcmlnaW5DbGljayAmJiBlLl8kb3JpZ2luLm9uKFwiY2xpY2suXCIgKyBlLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlckNsb3NlXCIsIGZ1bmN0aW9uIChhKSB7IGUuX3RvdWNoSXNUb3VjaEV2ZW50KGEpIHx8IGUuX3RvdWNoSXNFbXVsYXRlZEV2ZW50KGEpIHx8IGUuX2Nsb3NlKGEpIH0pLCAoZS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLmNsaWNrIHx8IGUuX19vcHRpb25zLnRyaWdnZXJDbG9zZS50YXAgJiYgaC5oYXNUb3VjaENhcGFiaWxpdHkpICYmIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBpZiAoXCJjbG9zZWRcIiAhPSBlLl9fc3RhdGUpIHsgdmFyIGIgPSBcIlwiLCBjID0gYShoLndpbmRvdy5kb2N1bWVudC5ib2R5KTsgZS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLmNsaWNrICYmIChiICs9IFwiY2xpY2suXCIgKyBlLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlckNsb3NlIFwiKSwgZS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRhcCAmJiBoLmhhc1RvdWNoQ2FwYWJpbGl0eSAmJiAoYiArPSBcInRvdWNoZW5kLlwiICsgZS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJDbG9zZVwiKSwgYy5vbihiLCBmdW5jdGlvbiAoYikgeyBlLl90b3VjaElzTWVhbmluZ2Z1bEV2ZW50KGIpICYmIChlLl90b3VjaFJlY29yZEV2ZW50KGIpLCBlLl9fb3B0aW9ucy5pbnRlcmFjdGl2ZSAmJiBhLmNvbnRhaW5zKGUuXyR0b29sdGlwWzBdLCBiLnRhcmdldCkgfHwgZS5fY2xvc2UoYikpIH0pLCBlLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UudGFwICYmIGguaGFzVG91Y2hDYXBhYmlsaXR5ICYmIGMub24oXCJ0b3VjaHN0YXJ0LlwiICsgZS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJDbG9zZVwiLCBmdW5jdGlvbiAoYSkgeyBlLl90b3VjaFJlY29yZEV2ZW50KGEpIH0pIH0gfSwgMCksIGUuX3RyaWdnZXIoXCJyZWFkeVwiKSwgZS5fX29wdGlvbnMuZnVuY3Rpb25SZWFkeSAmJiBlLl9fb3B0aW9ucy5mdW5jdGlvblJlYWR5LmNhbGwoZSwgZSwgeyBvcmlnaW46IGUuXyRvcmlnaW5bMF0sIHRvb2x0aXA6IGUuXyR0b29sdGlwWzBdIH0pIH0gaWYgKGUuX19vcHRpb25zLnRpbWVyID4gMCkgeyB2YXIgbSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBlLl9jbG9zZSgpIH0sIGUuX19vcHRpb25zLnRpbWVyICsgZyk7IGUuX190aW1lb3V0cy5jbG9zZS5wdXNoKG0pIH0gfSB9IHJldHVybiBlIH0sIF9vcGVuU2hvcnRseTogZnVuY3Rpb24gKGEpIHsgdmFyIGIgPSB0aGlzLCBjID0gITA7IGlmIChcInN0YWJsZVwiICE9IGIuX19zdGF0ZSAmJiBcImFwcGVhcmluZ1wiICE9IGIuX19zdGF0ZSAmJiAhYi5fX3RpbWVvdXRzLm9wZW4gJiYgKGIuX3RyaWdnZXIoeyB0eXBlOiBcInN0YXJ0XCIsIGV2ZW50OiBhLCBzdG9wOiBmdW5jdGlvbiAoKSB7IGMgPSAhMSB9IH0pLCBjKSkgeyB2YXIgZCA9IDAgPT0gYS50eXBlLmluZGV4T2YoXCJ0b3VjaFwiKSA/IGIuX19vcHRpb25zLmRlbGF5VG91Y2ggOiBiLl9fb3B0aW9ucy5kZWxheTsgZFswXSA/IGIuX190aW1lb3V0cy5vcGVuID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGIuX190aW1lb3V0cy5vcGVuID0gbnVsbCwgYi5fX3BvaW50ZXJJc092ZXJPcmlnaW4gJiYgYi5fdG91Y2hJc01lYW5pbmdmdWxFdmVudChhKSA/IChiLl90cmlnZ2VyKFwic3RhcnRlbmRcIiksIGIuX29wZW4oYSkpIDogYi5fdHJpZ2dlcihcInN0YXJ0Y2FuY2VsXCIpIH0sIGRbMF0pIDogKGIuX3RyaWdnZXIoXCJzdGFydGVuZFwiKSwgYi5fb3BlbihhKSkgfSByZXR1cm4gYiB9LCBfb3B0aW9uc0V4dHJhY3Q6IGZ1bmN0aW9uIChiLCBjKSB7IHZhciBkID0gdGhpcywgZSA9IGEuZXh0ZW5kKCEwLCB7fSwgYyksIGYgPSBkLl9fb3B0aW9uc1tiXTsgcmV0dXJuIGYgfHwgKGYgPSB7fSwgYS5lYWNoKGMsIGZ1bmN0aW9uIChhLCBiKSB7IHZhciBjID0gZC5fX29wdGlvbnNbYV07IHZvaWQgMCAhPT0gYyAmJiAoZlthXSA9IGMpIH0pKSwgYS5lYWNoKGUsIGZ1bmN0aW9uIChiLCBjKSB7IHZvaWQgMCAhPT0gZltiXSAmJiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgYyB8fCBjIGluc3RhbmNlb2YgQXJyYXkgfHwgbnVsbCA9PSBjIHx8IFwib2JqZWN0XCIgIT0gdHlwZW9mIGZbYl0gfHwgZltiXSBpbnN0YW5jZW9mIEFycmF5IHx8IG51bGwgPT0gZltiXSA/IGVbYl0gPSBmW2JdIDogYS5leHRlbmQoZVtiXSwgZltiXSkpIH0pLCBlIH0sIF9wbHVnOiBmdW5jdGlvbiAoYikgeyB2YXIgYyA9IGEudG9vbHRpcHN0ZXIuX3BsdWdpbihiKTsgaWYgKCFjKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBcIicgKyBiICsgJ1wiIHBsdWdpbiBpcyBub3QgZGVmaW5lZCcpOyByZXR1cm4gYy5pbnN0YW5jZSAmJiBhLnRvb2x0aXBzdGVyLl9fYnJpZGdlKGMuaW5zdGFuY2UsIHRoaXMsIGMubmFtZSksIHRoaXMgfSwgX3RvdWNoSXNFbXVsYXRlZEV2ZW50OiBmdW5jdGlvbiAoYSkgeyBmb3IgKHZhciBiID0gITEsIGMgPSAobmV3IERhdGUpLmdldFRpbWUoKSwgZCA9IHRoaXMuX190b3VjaEV2ZW50cy5sZW5ndGggLSAxOyBkID49IDA7IGQtLSkgeyB2YXIgZSA9IHRoaXMuX190b3VjaEV2ZW50c1tkXTsgaWYgKCEoYyAtIGUudGltZSA8IDUwMCkpIGJyZWFrOyBlLnRhcmdldCA9PT0gYS50YXJnZXQgJiYgKGIgPSAhMCkgfSByZXR1cm4gYiB9LCBfdG91Y2hJc01lYW5pbmdmdWxFdmVudDogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHRoaXMuX3RvdWNoSXNUb3VjaEV2ZW50KGEpICYmICF0aGlzLl90b3VjaFN3aXBlZChhLnRhcmdldCkgfHwgIXRoaXMuX3RvdWNoSXNUb3VjaEV2ZW50KGEpICYmICF0aGlzLl90b3VjaElzRW11bGF0ZWRFdmVudChhKSB9LCBfdG91Y2hJc1RvdWNoRXZlbnQ6IGZ1bmN0aW9uIChhKSB7IHJldHVybiAwID09IGEudHlwZS5pbmRleE9mKFwidG91Y2hcIikgfSwgX3RvdWNoUmVjb3JkRXZlbnQ6IGZ1bmN0aW9uIChhKSB7IHJldHVybiB0aGlzLl90b3VjaElzVG91Y2hFdmVudChhKSAmJiAoYS50aW1lID0gKG5ldyBEYXRlKS5nZXRUaW1lKCksIHRoaXMuX190b3VjaEV2ZW50cy5wdXNoKGEpKSwgdGhpcyB9LCBfdG91Y2hTd2lwZWQ6IGZ1bmN0aW9uIChhKSB7IGZvciAodmFyIGIgPSAhMSwgYyA9IHRoaXMuX190b3VjaEV2ZW50cy5sZW5ndGggLSAxOyBjID49IDA7IGMtLSkgeyB2YXIgZCA9IHRoaXMuX190b3VjaEV2ZW50c1tjXTsgaWYgKFwidG91Y2htb3ZlXCIgPT0gZC50eXBlKSB7IGIgPSAhMDsgYnJlYWsgfSBpZiAoXCJ0b3VjaHN0YXJ0XCIgPT0gZC50eXBlICYmIGEgPT09IGQudGFyZ2V0KSBicmVhayB9IHJldHVybiBiIH0sIF90cmlnZ2VyOiBmdW5jdGlvbiAoKSB7IHZhciBiID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7IHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBiWzBdICYmIChiWzBdID0geyB0eXBlOiBiWzBdIH0pLCBiWzBdLmluc3RhbmNlID0gdGhpcywgYlswXS5vcmlnaW4gPSB0aGlzLl8kb3JpZ2luID8gdGhpcy5fJG9yaWdpblswXSA6IG51bGwsIGJbMF0udG9vbHRpcCA9IHRoaXMuXyR0b29sdGlwID8gdGhpcy5fJHRvb2x0aXBbMF0gOiBudWxsLCB0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLnRyaWdnZXIuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgYiksIGEudG9vbHRpcHN0ZXIuX3RyaWdnZXIuYXBwbHkoYS50b29sdGlwc3RlciwgYiksIHRoaXMuX18kZW1pdHRlclB1YmxpYy50cmlnZ2VyLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgYiksIHRoaXMgfSwgX3VucGx1ZzogZnVuY3Rpb24gKGIpIHsgdmFyIGMgPSB0aGlzOyBpZiAoY1tiXSkgeyB2YXIgZCA9IGEudG9vbHRpcHN0ZXIuX3BsdWdpbihiKTsgZC5pbnN0YW5jZSAmJiBhLmVhY2goZC5pbnN0YW5jZSwgZnVuY3Rpb24gKGEsIGQpIHsgY1thXSAmJiBjW2FdLmJyaWRnZWQgPT09IGNbYl0gJiYgZGVsZXRlIGNbYV0gfSksIGNbYl0uX19kZXN0cm95ICYmIGNbYl0uX19kZXN0cm95KCksIGRlbGV0ZSBjW2JdIH0gcmV0dXJuIGMgfSwgY2xvc2U6IGZ1bmN0aW9uIChhKSB7IHJldHVybiB0aGlzLl9fZGVzdHJveWVkID8gdGhpcy5fX2Rlc3Ryb3lFcnJvcigpIDogdGhpcy5fY2xvc2UobnVsbCwgYSksIHRoaXMgfSwgY29udGVudDogZnVuY3Rpb24gKGEpIHsgdmFyIGIgPSB0aGlzOyBpZiAodm9pZCAwID09PSBhKSByZXR1cm4gYi5fX0NvbnRlbnQ7IGlmIChiLl9fZGVzdHJveWVkKSBiLl9fZGVzdHJveUVycm9yKCk7IGVsc2UgaWYgKGIuX19jb250ZW50U2V0KGEpLCBudWxsICE9PSBiLl9fQ29udGVudCkgeyBpZiAoXCJjbG9zZWRcIiAhPT0gYi5fX3N0YXRlICYmIChiLl9fY29udGVudEluc2VydCgpLCBiLnJlcG9zaXRpb24oKSwgYi5fX29wdGlvbnMudXBkYXRlQW5pbWF0aW9uKSkgaWYgKGguaGFzVHJhbnNpdGlvbnMpIHsgdmFyIGMgPSBiLl9fb3B0aW9ucy51cGRhdGVBbmltYXRpb247IGIuXyR0b29sdGlwLmFkZENsYXNzKFwidG9vbHRpcHN0ZXItdXBkYXRlLVwiICsgYyksIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBcImNsb3NlZFwiICE9IGIuX19zdGF0ZSAmJiBiLl8kdG9vbHRpcC5yZW1vdmVDbGFzcyhcInRvb2x0aXBzdGVyLXVwZGF0ZS1cIiArIGMpIH0sIDFlMykgfSBlbHNlIGIuXyR0b29sdGlwLmZhZGVUbygyMDAsIC41LCBmdW5jdGlvbiAoKSB7IFwiY2xvc2VkXCIgIT0gYi5fX3N0YXRlICYmIGIuXyR0b29sdGlwLmZhZGVUbygyMDAsIDEpIH0pIH0gZWxzZSBiLl9jbG9zZSgpOyByZXR1cm4gYiB9LCBkZXN0cm95OiBmdW5jdGlvbiAoKSB7IHZhciBiID0gdGhpczsgaWYgKGIuX19kZXN0cm95ZWQpIGIuX19kZXN0cm95RXJyb3IoKTsgZWxzZSB7IFwiY2xvc2VkXCIgIT0gYi5fX3N0YXRlID8gYi5vcHRpb24oXCJhbmltYXRpb25EdXJhdGlvblwiLCAwKS5fY2xvc2UobnVsbCwgbnVsbCwgITApIDogYi5fX3RpbWVvdXRzQ2xlYXIoKSwgYi5fdHJpZ2dlcihcImRlc3Ryb3lcIiksIGIuX19kZXN0cm95ZWQgPSAhMCwgYi5fJG9yaWdpbi5yZW1vdmVEYXRhKGIuX19uYW1lc3BhY2UpLm9mZihcIi5cIiArIGIuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyT3BlblwiKSwgYShoLndpbmRvdy5kb2N1bWVudC5ib2R5KS5vZmYoXCIuXCIgKyBiLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlck9wZW5cIik7IHZhciBjID0gYi5fJG9yaWdpbi5kYXRhKFwidG9vbHRpcHN0ZXItbnNcIik7IGlmIChjKSBpZiAoMSA9PT0gYy5sZW5ndGgpIHsgdmFyIGQgPSBudWxsOyBcInByZXZpb3VzXCIgPT0gYi5fX29wdGlvbnMucmVzdG9yYXRpb24gPyBkID0gYi5fJG9yaWdpbi5kYXRhKFwidG9vbHRpcHN0ZXItaW5pdGlhbFRpdGxlXCIpIDogXCJjdXJyZW50XCIgPT0gYi5fX29wdGlvbnMucmVzdG9yYXRpb24gJiYgKGQgPSBcInN0cmluZ1wiID09IHR5cGVvZiBiLl9fQ29udGVudCA/IGIuX19Db250ZW50IDogYShcIjxkaXY+PC9kaXY+XCIpLmFwcGVuZChiLl9fQ29udGVudCkuaHRtbCgpKSwgZCAmJiBiLl8kb3JpZ2luLmF0dHIoXCJ0aXRsZVwiLCBkKSwgYi5fJG9yaWdpbi5yZW1vdmVDbGFzcyhcInRvb2x0aXBzdGVyZWRcIiksIGIuXyRvcmlnaW4ucmVtb3ZlRGF0YShcInRvb2x0aXBzdGVyLW5zXCIpLnJlbW92ZURhdGEoXCJ0b29sdGlwc3Rlci1pbml0aWFsVGl0bGVcIikgfSBlbHNlIGMgPSBhLmdyZXAoYywgZnVuY3Rpb24gKGEsIGMpIHsgcmV0dXJuIGEgIT09IGIuX19uYW1lc3BhY2UgfSksIGIuXyRvcmlnaW4uZGF0YShcInRvb2x0aXBzdGVyLW5zXCIsIGMpOyBiLl90cmlnZ2VyKFwiZGVzdHJveWVkXCIpLCBiLl9vZmYoKSwgYi5vZmYoKSwgYi5fX0NvbnRlbnQgPSBudWxsLCBiLl9fJGVtaXR0ZXJQcml2YXRlID0gbnVsbCwgYi5fXyRlbWl0dGVyUHVibGljID0gbnVsbCwgYi5fX29wdGlvbnMucGFyZW50ID0gbnVsbCwgYi5fJG9yaWdpbiA9IG51bGwsIGIuXyR0b29sdGlwID0gbnVsbCwgYS50b29sdGlwc3Rlci5fX2luc3RhbmNlc0xhdGVzdEFyciA9IGEuZ3JlcChhLnRvb2x0aXBzdGVyLl9faW5zdGFuY2VzTGF0ZXN0QXJyLCBmdW5jdGlvbiAoYSwgYykgeyByZXR1cm4gYiAhPT0gYSB9KSwgY2xlYXJJbnRlcnZhbChiLl9fZ2FyYmFnZUNvbGxlY3RvcikgfSByZXR1cm4gYiB9LCBkaXNhYmxlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9fZGVzdHJveWVkID8gKHRoaXMuX19kZXN0cm95RXJyb3IoKSwgdGhpcykgOiAodGhpcy5fY2xvc2UoKSwgdGhpcy5fX2VuYWJsZWQgPSAhMSwgdGhpcykgfSwgZWxlbWVudE9yaWdpbjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fX2Rlc3Ryb3llZCA/IHZvaWQgdGhpcy5fX2Rlc3Ryb3lFcnJvcigpIDogdGhpcy5fJG9yaWdpblswXSB9LCBlbGVtZW50VG9vbHRpcDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fJHRvb2x0aXAgPyB0aGlzLl8kdG9vbHRpcFswXSA6IG51bGwgfSwgZW5hYmxlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9fZW5hYmxlZCA9ICEwLCB0aGlzIH0sIGhpZGU6IGZ1bmN0aW9uIChhKSB7IHJldHVybiB0aGlzLmNsb3NlKGEpIH0sIGluc3RhbmNlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzIH0sIG9mZjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fX2Rlc3Ryb3llZCB8fCB0aGlzLl9fJGVtaXR0ZXJQdWJsaWMub2ZmLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0sIG9uOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9fZGVzdHJveWVkID8gdGhpcy5fX2Rlc3Ryb3lFcnJvcigpIDogdGhpcy5fXyRlbWl0dGVyUHVibGljLm9uLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0sIG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fX2Rlc3Ryb3llZCA/IHRoaXMuX19kZXN0cm95RXJyb3IoKSA6IHRoaXMuX18kZW1pdHRlclB1YmxpYy5vbmUuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSksIHRoaXMgfSwgb3BlbjogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHRoaXMuX19kZXN0cm95ZWQgPyB0aGlzLl9fZGVzdHJveUVycm9yKCkgOiB0aGlzLl9vcGVuKG51bGwsIGEpLCB0aGlzIH0sIG9wdGlvbjogZnVuY3Rpb24gKGIsIGMpIHsgcmV0dXJuIHZvaWQgMCA9PT0gYyA/IHRoaXMuX19vcHRpb25zW2JdIDogKHRoaXMuX19kZXN0cm95ZWQgPyB0aGlzLl9fZGVzdHJveUVycm9yKCkgOiAodGhpcy5fX29wdGlvbnNbYl0gPSBjLCB0aGlzLl9fb3B0aW9uc0Zvcm1hdCgpLCBhLmluQXJyYXkoYiwgW1widHJpZ2dlclwiLCBcInRyaWdnZXJDbG9zZVwiLCBcInRyaWdnZXJPcGVuXCJdKSA+PSAwICYmIHRoaXMuX19wcmVwYXJlT3JpZ2luKCksIFwic2VsZkRlc3RydWN0aW9uXCIgPT09IGIgJiYgdGhpcy5fX3ByZXBhcmVHQygpKSwgdGhpcykgfSwgcmVwb3NpdGlvbjogZnVuY3Rpb24gKGEsIGIpIHsgdmFyIGMgPSB0aGlzOyByZXR1cm4gYy5fX2Rlc3Ryb3llZCA/IGMuX19kZXN0cm95RXJyb3IoKSA6IFwiY2xvc2VkXCIgIT0gYy5fX3N0YXRlICYmIGQoYy5fJG9yaWdpbikgJiYgKGIgfHwgZChjLl8kdG9vbHRpcCkpICYmIChiIHx8IGMuXyR0b29sdGlwLmRldGFjaCgpLCBjLl9fR2VvbWV0cnkgPSBjLl9fZ2VvbWV0cnkoKSwgYy5fdHJpZ2dlcih7IHR5cGU6IFwicmVwb3NpdGlvblwiLCBldmVudDogYSwgaGVscGVyOiB7IGdlbzogYy5fX0dlb21ldHJ5IH0gfSkpLCBjIH0sIHNob3c6IGZ1bmN0aW9uIChhKSB7IHJldHVybiB0aGlzLm9wZW4oYSkgfSwgc3RhdHVzOiBmdW5jdGlvbiAoKSB7IHJldHVybiB7IGRlc3Ryb3llZDogdGhpcy5fX2Rlc3Ryb3llZCwgZW5hYmxlZDogdGhpcy5fX2VuYWJsZWQsIG9wZW46IFwiY2xvc2VkXCIgIT09IHRoaXMuX19zdGF0ZSwgc3RhdGU6IHRoaXMuX19zdGF0ZSB9IH0sIHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9fZGVzdHJveWVkID8gdGhpcy5fX2Rlc3Ryb3lFcnJvcigpIDogdGhpcy5fXyRlbWl0dGVyUHVibGljLnRyaWdnZXJIYW5kbGVyLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0gfSwgYS5mbi50b29sdGlwc3RlciA9IGZ1bmN0aW9uICgpIHsgdmFyIGIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSwgYyA9IFwiWW91IGFyZSB1c2luZyBhIHNpbmdsZSBIVE1MIGVsZW1lbnQgYXMgY29udGVudCBmb3Igc2V2ZXJhbCB0b29sdGlwcy4gWW91IHByb2JhYmx5IHdhbnQgdG8gc2V0IHRoZSBjb250ZW50Q2xvbmluZyBvcHRpb24gdG8gVFJVRS5cIjsgaWYgKDAgPT09IHRoaXMubGVuZ3RoKSByZXR1cm4gdGhpczsgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGJbMF0pIHsgdmFyIGQgPSBcIiMqJH4mXCI7IHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgeyB2YXIgZSA9IGEodGhpcykuZGF0YShcInRvb2x0aXBzdGVyLW5zXCIpLCBmID0gZSA/IGEodGhpcykuZGF0YShlWzBdKSA6IG51bGw7IGlmICghZikgdGhyb3cgbmV3IEVycm9yKFwiWW91IGNhbGxlZCBUb29sdGlwc3RlcidzIFxcXCJcIiArIGJbMF0gKyAnXCIgbWV0aG9kIG9uIGFuIHVuaW5pdGlhbGl6ZWQgZWxlbWVudCcpOyBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBmW2JbMF1dKSB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gbWV0aG9kIFwiJyArIGJbMF0gKyAnXCInKTsgdGhpcy5sZW5ndGggPiAxICYmIFwiY29udGVudFwiID09IGJbMF0gJiYgKGJbMV0gaW5zdGFuY2VvZiBhIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIGJbMV0gJiYgbnVsbCAhPSBiWzFdICYmIGJbMV0udGFnTmFtZSkgJiYgIWYuX19vcHRpb25zLmNvbnRlbnRDbG9uaW5nICYmIGYuX19vcHRpb25zLmRlYnVnICYmIGNvbnNvbGUubG9nKGMpOyB2YXIgZyA9IGZbYlswXV0oYlsxXSwgYlsyXSk7IHJldHVybiBnICE9PSBmIHx8IFwiaW5zdGFuY2VcIiA9PT0gYlswXSA/IChkID0gZywgITEpIDogdm9pZCAwIH0pLCBcIiMqJH4mXCIgIT09IGQgPyBkIDogdGhpcyB9IGEudG9vbHRpcHN0ZXIuX19pbnN0YW5jZXNMYXRlc3RBcnIgPSBbXTsgdmFyIGUgPSBiWzBdICYmIHZvaWQgMCAhPT0gYlswXS5tdWx0aXBsZSwgZyA9IGUgJiYgYlswXS5tdWx0aXBsZSB8fCAhZSAmJiBmLm11bHRpcGxlLCBoID0gYlswXSAmJiB2b2lkIDAgIT09IGJbMF0uY29udGVudCwgaSA9IGggJiYgYlswXS5jb250ZW50IHx8ICFoICYmIGYuY29udGVudCwgaiA9IGJbMF0gJiYgdm9pZCAwICE9PSBiWzBdLmNvbnRlbnRDbG9uaW5nLCBrID0gaiAmJiBiWzBdLmNvbnRlbnRDbG9uaW5nIHx8ICFqICYmIGYuY29udGVudENsb25pbmcsIGwgPSBiWzBdICYmIHZvaWQgMCAhPT0gYlswXS5kZWJ1ZywgbSA9IGwgJiYgYlswXS5kZWJ1ZyB8fCAhbCAmJiBmLmRlYnVnOyByZXR1cm4gdGhpcy5sZW5ndGggPiAxICYmIChpIGluc3RhbmNlb2YgYSB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBpICYmIG51bGwgIT0gaSAmJiBpLnRhZ05hbWUpICYmICFrICYmIG0gJiYgY29uc29sZS5sb2coYyksIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IHZhciBjID0gITEsIGQgPSBhKHRoaXMpLCBlID0gZC5kYXRhKFwidG9vbHRpcHN0ZXItbnNcIiksIGYgPSBudWxsOyBlID8gZyA/IGMgPSAhMCA6IG0gJiYgKGNvbnNvbGUubG9nKFwiVG9vbHRpcHN0ZXI6IG9uZSBvciBtb3JlIHRvb2x0aXBzIGFyZSBhbHJlYWR5IGF0dGFjaGVkIHRvIHRoZSBlbGVtZW50IGJlbG93LiBJZ25vcmluZy5cIiksIGNvbnNvbGUubG9nKHRoaXMpKSA6IGMgPSAhMCwgYyAmJiAoZiA9IG5ldyBhLlRvb2x0aXBzdGVyKHRoaXMsIGJbMF0pLCBlIHx8IChlID0gW10pLCBlLnB1c2goZi5fX25hbWVzcGFjZSksIGQuZGF0YShcInRvb2x0aXBzdGVyLW5zXCIsIGUpLCBkLmRhdGEoZi5fX25hbWVzcGFjZSwgZiksIGYuX19vcHRpb25zLmZ1bmN0aW9uSW5pdCAmJiBmLl9fb3B0aW9ucy5mdW5jdGlvbkluaXQuY2FsbChmLCBmLCB7IG9yaWdpbjogdGhpcyB9KSwgZi5fdHJpZ2dlcihcImluaXRcIikpLCBhLnRvb2x0aXBzdGVyLl9faW5zdGFuY2VzTGF0ZXN0QXJyLnB1c2goZikgfSksIHRoaXMgfSwgYi5wcm90b3R5cGUgPSB7IF9faW5pdDogZnVuY3Rpb24gKGIpIHsgdGhpcy5fXyR0b29sdGlwID0gYiwgdGhpcy5fXyR0b29sdGlwLmNzcyh7IGxlZnQ6IDAsIG92ZXJmbG93OiBcImhpZGRlblwiLCBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLCB0b3A6IDAgfSkuZmluZChcIi50b29sdGlwc3Rlci1jb250ZW50XCIpLmNzcyhcIm92ZXJmbG93XCIsIFwiYXV0b1wiKSwgdGhpcy4kY29udGFpbmVyID0gYSgnPGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLXJ1bGVyXCI+PC9kaXY+JykuYXBwZW5kKHRoaXMuX18kdG9vbHRpcCkuYXBwZW5kVG8oaC53aW5kb3cuZG9jdW1lbnQuYm9keSkgfSwgX19mb3JjZVJlZHJhdzogZnVuY3Rpb24gKCkgeyB2YXIgYSA9IHRoaXMuX18kdG9vbHRpcC5wYXJlbnQoKTsgdGhpcy5fXyR0b29sdGlwLmRldGFjaCgpLCB0aGlzLl9fJHRvb2x0aXAuYXBwZW5kVG8oYSkgfSwgY29uc3RyYWluOiBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gdGhpcy5jb25zdHJhaW50cyA9IHsgd2lkdGg6IGEsIGhlaWdodDogYiB9LCB0aGlzLl9fJHRvb2x0aXAuY3NzKHsgZGlzcGxheTogXCJibG9ja1wiLCBoZWlnaHQ6IFwiXCIsIG92ZXJmbG93OiBcImF1dG9cIiwgd2lkdGg6IGEgfSksIHRoaXMgfSwgZGVzdHJveTogZnVuY3Rpb24gKCkgeyB0aGlzLl9fJHRvb2x0aXAuZGV0YWNoKCkuZmluZChcIi50b29sdGlwc3Rlci1jb250ZW50XCIpLmNzcyh7IGRpc3BsYXk6IFwiXCIsIG92ZXJmbG93OiBcIlwiIH0pLCB0aGlzLiRjb250YWluZXIucmVtb3ZlKCkgfSwgZnJlZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5jb25zdHJhaW50cyA9IG51bGwsIHRoaXMuX18kdG9vbHRpcC5jc3MoeyBkaXNwbGF5OiBcIlwiLCBoZWlnaHQ6IFwiXCIsIG92ZXJmbG93OiBcInZpc2libGVcIiwgd2lkdGg6IFwiXCIgfSksIHRoaXMgfSwgbWVhc3VyZTogZnVuY3Rpb24gKCkgeyB0aGlzLl9fZm9yY2VSZWRyYXcoKTsgdmFyIGEgPSB0aGlzLl9fJHRvb2x0aXBbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGIgPSB7IHNpemU6IHsgaGVpZ2h0OiBhLmhlaWdodCB8fCBhLmJvdHRvbSAtIGEudG9wLCB3aWR0aDogYS53aWR0aCB8fCBhLnJpZ2h0IC0gYS5sZWZ0IH0gfTsgaWYgKHRoaXMuY29uc3RyYWludHMpIHsgdmFyIGMgPSB0aGlzLl9fJHRvb2x0aXAuZmluZChcIi50b29sdGlwc3Rlci1jb250ZW50XCIpLCBkID0gdGhpcy5fXyR0b29sdGlwLm91dGVySGVpZ2h0KCksIGUgPSBjWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBmID0geyBoZWlnaHQ6IGQgPD0gdGhpcy5jb25zdHJhaW50cy5oZWlnaHQsIHdpZHRoOiBhLndpZHRoIDw9IHRoaXMuY29uc3RyYWludHMud2lkdGggJiYgZS53aWR0aCA+PSBjWzBdLnNjcm9sbFdpZHRoIC0gMSB9OyBiLmZpdHMgPSBmLmhlaWdodCAmJiBmLndpZHRoIH0gcmV0dXJuIGguSUUgJiYgaC5JRSA8PSAxMSAmJiBiLnNpemUud2lkdGggIT09IGgud2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCAmJiAoYi5zaXplLndpZHRoID0gTWF0aC5jZWlsKGIuc2l6ZS53aWR0aCkgKyAxKSwgYiB9IH07IHZhciBqID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpOyAtMSAhPSBqLmluZGV4T2YoXCJtc2llXCIpID8gaC5JRSA9IHBhcnNlSW50KGouc3BsaXQoXCJtc2llXCIpWzFdKSA6IC0xICE9PSBqLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcInRyaWRlbnRcIikgJiYgLTEgIT09IGouaW5kZXhPZihcIiBydjoxMVwiKSA/IGguSUUgPSAxMSA6IC0xICE9IGoudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiZWRnZS9cIikgJiYgKGguSUUgPSBwYXJzZUludChqLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCJlZGdlL1wiKVsxXSkpOyB2YXIgayA9IFwidG9vbHRpcHN0ZXIuc2lkZVRpcFwiOyByZXR1cm4gYS50b29sdGlwc3Rlci5fcGx1Z2luKHtcclxuICAgICAgICBuYW1lOiBrLCBpbnN0YW5jZToge1xyXG4gICAgICAgICAgICBfX2RlZmF1bHRzOiBmdW5jdGlvbiAoKSB7IHJldHVybiB7IGFycm93OiAhMCwgZGlzdGFuY2U6IDYsIGZ1bmN0aW9uUG9zaXRpb246IG51bGwsIG1heFdpZHRoOiBudWxsLCBtaW5JbnRlcnNlY3Rpb246IDE2LCBtaW5XaWR0aDogMCwgcG9zaXRpb246IG51bGwsIHNpZGU6IFwidG9wXCIsIHZpZXdwb3J0QXdhcmU6ICEwIH0gfSwgX19pbml0OiBmdW5jdGlvbiAoYSkgeyB2YXIgYiA9IHRoaXM7IGIuX19pbnN0YW5jZSA9IGEsIGIuX19uYW1lc3BhY2UgPSBcInRvb2x0aXBzdGVyLXNpZGVUaXAtXCIgKyBNYXRoLnJvdW5kKDFlNiAqIE1hdGgucmFuZG9tKCkpLCBiLl9fcHJldmlvdXNTdGF0ZSA9IFwiY2xvc2VkXCIsIGIuX19vcHRpb25zLCBiLl9fb3B0aW9uc0Zvcm1hdCgpLCBiLl9faW5zdGFuY2UuX29uKFwic3RhdGUuXCIgKyBiLl9fbmFtZXNwYWNlLCBmdW5jdGlvbiAoYSkgeyBcImNsb3NlZFwiID09IGEuc3RhdGUgPyBiLl9fY2xvc2UoKSA6IFwiYXBwZWFyaW5nXCIgPT0gYS5zdGF0ZSAmJiBcImNsb3NlZFwiID09IGIuX19wcmV2aW91c1N0YXRlICYmIGIuX19jcmVhdGUoKSwgYi5fX3ByZXZpb3VzU3RhdGUgPSBhLnN0YXRlIH0pLCBiLl9faW5zdGFuY2UuX29uKFwib3B0aW9ucy5cIiArIGIuX19uYW1lc3BhY2UsIGZ1bmN0aW9uICgpIHsgYi5fX29wdGlvbnNGb3JtYXQoKSB9KSwgYi5fX2luc3RhbmNlLl9vbihcInJlcG9zaXRpb24uXCIgKyBiLl9fbmFtZXNwYWNlLCBmdW5jdGlvbiAoYSkgeyBiLl9fcmVwb3NpdGlvbihhLmV2ZW50LCBhLmhlbHBlcikgfSkgfSwgX19jbG9zZTogZnVuY3Rpb24gKCkgeyB0aGlzLl9faW5zdGFuY2UuY29udGVudCgpIGluc3RhbmNlb2YgYSAmJiB0aGlzLl9faW5zdGFuY2UuY29udGVudCgpLmRldGFjaCgpLCB0aGlzLl9faW5zdGFuY2UuXyR0b29sdGlwLnJlbW92ZSgpLCB0aGlzLl9faW5zdGFuY2UuXyR0b29sdGlwID0gbnVsbCB9LCBfX2NyZWF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBhKCc8ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItYmFzZSB0b29sdGlwc3Rlci1zaWRldGlwXCI+PGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWJveFwiPjxkaXYgY2xhc3M9XCJ0b29sdGlwc3Rlci1jb250ZW50XCI+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWFycm93XCI+PGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWFycm93LXVuY3JvcHBlZFwiPjxkaXYgY2xhc3M9XCJ0b29sdGlwc3Rlci1hcnJvdy1ib3JkZXJcIj48L2Rpdj48ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItYXJyb3ctYmFja2dyb3VuZFwiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicpOyB0aGlzLl9fb3B0aW9ucy5hcnJvdyB8fCBiLmZpbmQoXCIudG9vbHRpcHN0ZXItYm94XCIpLmNzcyhcIm1hcmdpblwiLCAwKS5lbmQoKS5maW5kKFwiLnRvb2x0aXBzdGVyLWFycm93XCIpLmhpZGUoKSwgdGhpcy5fX29wdGlvbnMubWluV2lkdGggJiYgYi5jc3MoXCJtaW4td2lkdGhcIiwgdGhpcy5fX29wdGlvbnMubWluV2lkdGggKyBcInB4XCIpLCB0aGlzLl9fb3B0aW9ucy5tYXhXaWR0aCAmJiBiLmNzcyhcIm1heC13aWR0aFwiLCB0aGlzLl9fb3B0aW9ucy5tYXhXaWR0aCArIFwicHhcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2luc3RhbmNlLl8kdG9vbHRpcCA9IGIsIHRoaXMuX19pbnN0YW5jZS5fdHJpZ2dlcihcImNyZWF0ZWRcIilcclxuICAgICAgICAgICAgfSwgX19kZXN0cm95OiBmdW5jdGlvbiAoKSB7IHRoaXMuX19pbnN0YW5jZS5fb2ZmKFwiLlwiICsgc2VsZi5fX25hbWVzcGFjZSkgfSwgX19vcHRpb25zRm9ybWF0OiBmdW5jdGlvbiAoKSB7IHZhciBiID0gdGhpczsgaWYgKGIuX19vcHRpb25zID0gYi5fX2luc3RhbmNlLl9vcHRpb25zRXh0cmFjdChrLCBiLl9fZGVmYXVsdHMoKSksIGIuX19vcHRpb25zLnBvc2l0aW9uICYmIChiLl9fb3B0aW9ucy5zaWRlID0gYi5fX29wdGlvbnMucG9zaXRpb24pLCBcIm9iamVjdFwiICE9IHR5cGVvZiBiLl9fb3B0aW9ucy5kaXN0YW5jZSAmJiAoYi5fX29wdGlvbnMuZGlzdGFuY2UgPSBbYi5fX29wdGlvbnMuZGlzdGFuY2VdKSwgYi5fX29wdGlvbnMuZGlzdGFuY2UubGVuZ3RoIDwgNCAmJiAodm9pZCAwID09PSBiLl9fb3B0aW9ucy5kaXN0YW5jZVsxXSAmJiAoYi5fX29wdGlvbnMuZGlzdGFuY2VbMV0gPSBiLl9fb3B0aW9ucy5kaXN0YW5jZVswXSksIHZvaWQgMCA9PT0gYi5fX29wdGlvbnMuZGlzdGFuY2VbMl0gJiYgKGIuX19vcHRpb25zLmRpc3RhbmNlWzJdID0gYi5fX29wdGlvbnMuZGlzdGFuY2VbMF0pLCB2b2lkIDAgPT09IGIuX19vcHRpb25zLmRpc3RhbmNlWzNdICYmIChiLl9fb3B0aW9ucy5kaXN0YW5jZVszXSA9IGIuX19vcHRpb25zLmRpc3RhbmNlWzFdKSwgYi5fX29wdGlvbnMuZGlzdGFuY2UgPSB7IHRvcDogYi5fX29wdGlvbnMuZGlzdGFuY2VbMF0sIHJpZ2h0OiBiLl9fb3B0aW9ucy5kaXN0YW5jZVsxXSwgYm90dG9tOiBiLl9fb3B0aW9ucy5kaXN0YW5jZVsyXSwgbGVmdDogYi5fX29wdGlvbnMuZGlzdGFuY2VbM10gfSksIFwic3RyaW5nXCIgPT0gdHlwZW9mIGIuX19vcHRpb25zLnNpZGUpIHsgdmFyIGMgPSB7IHRvcDogXCJib3R0b21cIiwgcmlnaHQ6IFwibGVmdFwiLCBib3R0b206IFwidG9wXCIsIGxlZnQ6IFwicmlnaHRcIiB9OyBiLl9fb3B0aW9ucy5zaWRlID0gW2IuX19vcHRpb25zLnNpZGUsIGNbYi5fX29wdGlvbnMuc2lkZV1dLCBcImxlZnRcIiA9PSBiLl9fb3B0aW9ucy5zaWRlWzBdIHx8IFwicmlnaHRcIiA9PSBiLl9fb3B0aW9ucy5zaWRlWzBdID8gYi5fX29wdGlvbnMuc2lkZS5wdXNoKFwidG9wXCIsIFwiYm90dG9tXCIpIDogYi5fX29wdGlvbnMuc2lkZS5wdXNoKFwicmlnaHRcIiwgXCJsZWZ0XCIpIH0gNiA9PT0gYS50b29sdGlwc3Rlci5fZW52LklFICYmIGIuX19vcHRpb25zLmFycm93ICE9PSAhMCAmJiAoYi5fX29wdGlvbnMuYXJyb3cgPSAhMSkgfSwgX19yZXBvc2l0aW9uOiBmdW5jdGlvbiAoYiwgYykgeyB2YXIgZCwgZSA9IHRoaXMsIGYgPSBlLl9fdGFyZ2V0RmluZChjKSwgZyA9IFtdOyBlLl9faW5zdGFuY2UuXyR0b29sdGlwLmRldGFjaCgpOyB2YXIgaCA9IGUuX19pbnN0YW5jZS5fJHRvb2x0aXAuY2xvbmUoKSwgaSA9IGEudG9vbHRpcHN0ZXIuX2dldFJ1bGVyKGgpLCBqID0gITEsIGsgPSBlLl9faW5zdGFuY2Uub3B0aW9uKFwiYW5pbWF0aW9uXCIpOyBzd2l0Y2ggKGsgJiYgaC5yZW1vdmVDbGFzcyhcInRvb2x0aXBzdGVyLVwiICsgayksIGEuZWFjaChbXCJ3aW5kb3dcIiwgXCJkb2N1bWVudFwiXSwgZnVuY3Rpb24gKGQsIGspIHsgdmFyIGwgPSBudWxsOyBpZiAoZS5fX2luc3RhbmNlLl90cmlnZ2VyKHsgY29udGFpbmVyOiBrLCBoZWxwZXI6IGMsIHNhdGlzZmllZDogaiwgdGFrZVRlc3Q6IGZ1bmN0aW9uIChhKSB7IGwgPSBhIH0sIHJlc3VsdHM6IGcsIHR5cGU6IFwicG9zaXRpb25UZXN0XCIgfSksIDEgPT0gbCB8fCAwICE9IGwgJiYgMCA9PSBqICYmIChcIndpbmRvd1wiICE9IGsgfHwgZS5fX29wdGlvbnMudmlld3BvcnRBd2FyZSkpIGZvciAodmFyIGQgPSAwOyBkIDwgZS5fX29wdGlvbnMuc2lkZS5sZW5ndGg7IGQrKykgeyB2YXIgbSA9IHsgaG9yaXpvbnRhbDogMCwgdmVydGljYWw6IDAgfSwgbiA9IGUuX19vcHRpb25zLnNpZGVbZF07IFwidG9wXCIgPT0gbiB8fCBcImJvdHRvbVwiID09IG4gPyBtLnZlcnRpY2FsID0gZS5fX29wdGlvbnMuZGlzdGFuY2Vbbl0gOiBtLmhvcml6b250YWwgPSBlLl9fb3B0aW9ucy5kaXN0YW5jZVtuXSwgZS5fX3NpZGVDaGFuZ2UoaCwgbiksIGEuZWFjaChbXCJuYXR1cmFsXCIsIFwiY29uc3RyYWluZWRcIl0sIGZ1bmN0aW9uIChhLCBkKSB7IGlmIChsID0gbnVsbCwgZS5fX2luc3RhbmNlLl90cmlnZ2VyKHsgY29udGFpbmVyOiBrLCBldmVudDogYiwgaGVscGVyOiBjLCBtb2RlOiBkLCByZXN1bHRzOiBnLCBzYXRpc2ZpZWQ6IGosIHNpZGU6IG4sIHRha2VUZXN0OiBmdW5jdGlvbiAoYSkgeyBsID0gYSB9LCB0eXBlOiBcInBvc2l0aW9uVGVzdFwiIH0pLCAxID09IGwgfHwgMCAhPSBsICYmIDAgPT0gaikgeyB2YXIgaCA9IHsgY29udGFpbmVyOiBrLCBkaXN0YW5jZTogbSwgZml0czogbnVsbCwgbW9kZTogZCwgb3V0ZXJTaXplOiBudWxsLCBzaWRlOiBuLCBzaXplOiBudWxsLCB0YXJnZXQ6IGZbbl0sIHdob2xlOiBudWxsIH0sIG8gPSBcIm5hdHVyYWxcIiA9PSBkID8gaS5mcmVlKCkgOiBpLmNvbnN0cmFpbihjLmdlby5hdmFpbGFibGVba11bbl0ud2lkdGggLSBtLmhvcml6b250YWwsIGMuZ2VvLmF2YWlsYWJsZVtrXVtuXS5oZWlnaHQgLSBtLnZlcnRpY2FsKSwgcCA9IG8ubWVhc3VyZSgpOyBpZiAoaC5zaXplID0gcC5zaXplLCBoLm91dGVyU2l6ZSA9IHsgaGVpZ2h0OiBwLnNpemUuaGVpZ2h0ICsgbS52ZXJ0aWNhbCwgd2lkdGg6IHAuc2l6ZS53aWR0aCArIG0uaG9yaXpvbnRhbCB9LCBcIm5hdHVyYWxcIiA9PSBkID8gYy5nZW8uYXZhaWxhYmxlW2tdW25dLndpZHRoID49IGgub3V0ZXJTaXplLndpZHRoICYmIGMuZ2VvLmF2YWlsYWJsZVtrXVtuXS5oZWlnaHQgPj0gaC5vdXRlclNpemUuaGVpZ2h0ID8gaC5maXRzID0gITAgOiBoLmZpdHMgPSAhMSA6IGguZml0cyA9IHAuZml0cywgXCJ3aW5kb3dcIiA9PSBrICYmIChoLmZpdHMgPyBcInRvcFwiID09IG4gfHwgXCJib3R0b21cIiA9PSBuID8gaC53aG9sZSA9IGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQucmlnaHQgPj0gZS5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uICYmIGMuZ2VvLndpbmRvdy5zaXplLndpZHRoIC0gYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ID49IGUuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiA6IGgud2hvbGUgPSBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmJvdHRvbSA+PSBlLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gJiYgYy5nZW8ud2luZG93LnNpemUuaGVpZ2h0IC0gYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgPj0gZS5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uIDogaC53aG9sZSA9ICExKSwgZy5wdXNoKGgpLCBoLndob2xlKSBqID0gITA7IGVsc2UgaWYgKFwibmF0dXJhbFwiID09IGgubW9kZSAmJiAoaC5maXRzIHx8IGguc2l6ZS53aWR0aCA8PSBjLmdlby5hdmFpbGFibGVba11bbl0ud2lkdGgpKSByZXR1cm4gITEgfSB9KSB9IH0pLCBlLl9faW5zdGFuY2UuX3RyaWdnZXIoeyBlZGl0OiBmdW5jdGlvbiAoYSkgeyBnID0gYSB9LCBldmVudDogYiwgaGVscGVyOiBjLCByZXN1bHRzOiBnLCB0eXBlOiBcInBvc2l0aW9uVGVzdGVkXCIgfSksIGcuc29ydChmdW5jdGlvbiAoYSwgYikgeyBpZiAoYS53aG9sZSAmJiAhYi53aG9sZSkgcmV0dXJuIC0xOyBpZiAoIWEud2hvbGUgJiYgYi53aG9sZSkgcmV0dXJuIDE7IGlmIChhLndob2xlICYmIGIud2hvbGUpIHsgdmFyIGMgPSBlLl9fb3B0aW9ucy5zaWRlLmluZGV4T2YoYS5zaWRlKSwgZCA9IGUuX19vcHRpb25zLnNpZGUuaW5kZXhPZihiLnNpZGUpOyByZXR1cm4gZCA+IGMgPyAtMSA6IGMgPiBkID8gMSA6IFwibmF0dXJhbFwiID09IGEubW9kZSA/IC0xIDogMSB9IGlmIChhLmZpdHMgJiYgIWIuZml0cykgcmV0dXJuIC0xOyBpZiAoIWEuZml0cyAmJiBiLmZpdHMpIHJldHVybiAxOyBpZiAoYS5maXRzICYmIGIuZml0cykgeyB2YXIgYyA9IGUuX19vcHRpb25zLnNpZGUuaW5kZXhPZihhLnNpZGUpLCBkID0gZS5fX29wdGlvbnMuc2lkZS5pbmRleE9mKGIuc2lkZSk7IHJldHVybiBkID4gYyA/IC0xIDogYyA+IGQgPyAxIDogXCJuYXR1cmFsXCIgPT0gYS5tb2RlID8gLTEgOiAxIH0gcmV0dXJuIFwiZG9jdW1lbnRcIiA9PSBhLmNvbnRhaW5lciAmJiBcImJvdHRvbVwiID09IGEuc2lkZSAmJiBcIm5hdHVyYWxcIiA9PSBhLm1vZGUgPyAtMSA6IDEgfSksIGQgPSBnWzBdLCBkLmNvb3JkID0ge30sIGQuc2lkZSkgeyBjYXNlIFwibGVmdFwiOiBjYXNlIFwicmlnaHRcIjogZC5jb29yZC50b3AgPSBNYXRoLmZsb29yKGQudGFyZ2V0IC0gZC5zaXplLmhlaWdodCAvIDIpOyBicmVhazsgY2FzZSBcImJvdHRvbVwiOiBjYXNlIFwidG9wXCI6IGQuY29vcmQubGVmdCA9IE1hdGguZmxvb3IoZC50YXJnZXQgLSBkLnNpemUud2lkdGggLyAyKSB9c3dpdGNoIChkLnNpZGUpIHsgY2FzZSBcImxlZnRcIjogZC5jb29yZC5sZWZ0ID0gYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0IC0gZC5vdXRlclNpemUud2lkdGg7IGJyZWFrOyBjYXNlIFwicmlnaHRcIjogZC5jb29yZC5sZWZ0ID0gYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5yaWdodCArIGQuZGlzdGFuY2UuaG9yaXpvbnRhbDsgYnJlYWs7IGNhc2UgXCJ0b3BcIjogZC5jb29yZC50b3AgPSBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCAtIGQub3V0ZXJTaXplLmhlaWdodDsgYnJlYWs7IGNhc2UgXCJib3R0b21cIjogZC5jb29yZC50b3AgPSBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmJvdHRvbSArIGQuZGlzdGFuY2UudmVydGljYWwgfVwid2luZG93XCIgPT0gZC5jb250YWluZXIgPyBcInRvcFwiID09IGQuc2lkZSB8fCBcImJvdHRvbVwiID09IGQuc2lkZSA/IGQuY29vcmQubGVmdCA8IDAgPyBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnJpZ2h0IC0gdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uID49IDAgPyBkLmNvb3JkLmxlZnQgPSAwIDogZC5jb29yZC5sZWZ0ID0gYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5yaWdodCAtIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiAtIDEgOiBkLmNvb3JkLmxlZnQgPiBjLmdlby53aW5kb3cuc2l6ZS53aWR0aCAtIGQuc2l6ZS53aWR0aCAmJiAoYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICsgdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uIDw9IGMuZ2VvLndpbmRvdy5zaXplLndpZHRoID8gZC5jb29yZC5sZWZ0ID0gYy5nZW8ud2luZG93LnNpemUud2lkdGggLSBkLnNpemUud2lkdGggOiBkLmNvb3JkLmxlZnQgPSBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKyB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gKyAxIC0gZC5zaXplLndpZHRoKSA6IGQuY29vcmQudG9wIDwgMCA/IGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQuYm90dG9tIC0gdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uID49IDAgPyBkLmNvb3JkLnRvcCA9IDAgOiBkLmNvb3JkLnRvcCA9IGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQuYm90dG9tIC0gdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uIC0gMSA6IGQuY29vcmQudG9wID4gYy5nZW8ud2luZG93LnNpemUuaGVpZ2h0IC0gZC5zaXplLmhlaWdodCAmJiAoYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgKyB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gPD0gYy5nZW8ud2luZG93LnNpemUuaGVpZ2h0ID8gZC5jb29yZC50b3AgPSBjLmdlby53aW5kb3cuc2l6ZS5oZWlnaHQgLSBkLnNpemUuaGVpZ2h0IDogZC5jb29yZC50b3AgPSBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiArIDEgLSBkLnNpemUuaGVpZ2h0KSA6IChkLmNvb3JkLmxlZnQgPiBjLmdlby53aW5kb3cuc2l6ZS53aWR0aCAtIGQuc2l6ZS53aWR0aCAmJiAoZC5jb29yZC5sZWZ0ID0gYy5nZW8ud2luZG93LnNpemUud2lkdGggLSBkLnNpemUud2lkdGgpLCBkLmNvb3JkLmxlZnQgPCAwICYmIChkLmNvb3JkLmxlZnQgPSAwKSksIGUuX19zaWRlQ2hhbmdlKGgsIGQuc2lkZSksIGMudG9vbHRpcENsb25lID0gaFswXSwgYy50b29sdGlwUGFyZW50ID0gZS5fX2luc3RhbmNlLm9wdGlvbihcInBhcmVudFwiKS5wYXJlbnRbMF0sIGMubW9kZSA9IGQubW9kZSwgYy53aG9sZSA9IGQud2hvbGUsIGMub3JpZ2luID0gZS5fX2luc3RhbmNlLl8kb3JpZ2luWzBdLCBjLnRvb2x0aXAgPSBlLl9faW5zdGFuY2UuXyR0b29sdGlwWzBdLCBkZWxldGUgZC5jb250YWluZXIsIGRlbGV0ZSBkLmZpdHMsIGRlbGV0ZSBkLm1vZGUsIGRlbGV0ZSBkLm91dGVyU2l6ZSwgZGVsZXRlIGQud2hvbGUsIGQuZGlzdGFuY2UgPSBkLmRpc3RhbmNlLmhvcml6b250YWwgfHwgZC5kaXN0YW5jZS52ZXJ0aWNhbDsgdmFyIGwgPSBhLmV4dGVuZCghMCwge30sIGQpOyBpZiAoZS5fX2luc3RhbmNlLl90cmlnZ2VyKHsgZWRpdDogZnVuY3Rpb24gKGEpIHsgZCA9IGEgfSwgZXZlbnQ6IGIsIGhlbHBlcjogYywgcG9zaXRpb246IGwsIHR5cGU6IFwicG9zaXRpb25cIiB9KSwgZS5fX29wdGlvbnMuZnVuY3Rpb25Qb3NpdGlvbikgeyB2YXIgbSA9IGUuX19vcHRpb25zLmZ1bmN0aW9uUG9zaXRpb24uY2FsbChlLCBlLl9faW5zdGFuY2UsIGMsIGwpOyBtICYmIChkID0gbSkgfSBpLmRlc3Ryb3koKTsgdmFyIG4sIG87IFwidG9wXCIgPT0gZC5zaWRlIHx8IFwiYm90dG9tXCIgPT0gZC5zaWRlID8gKG4gPSB7IHByb3A6IFwibGVmdFwiLCB2YWw6IGQudGFyZ2V0IC0gZC5jb29yZC5sZWZ0IH0sIG8gPSBkLnNpemUud2lkdGggLSB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24pIDogKG4gPSB7IHByb3A6IFwidG9wXCIsIHZhbDogZC50YXJnZXQgLSBkLmNvb3JkLnRvcCB9LCBvID0gZC5zaXplLmhlaWdodCAtIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiksIG4udmFsIDwgdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uID8gbi52YWwgPSB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gOiBuLnZhbCA+IG8gJiYgKG4udmFsID0gbyk7IHZhciBwOyBwID0gYy5nZW8ub3JpZ2luLmZpeGVkTGluZWFnZSA/IGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQgOiB7IGxlZnQ6IGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArIGMuZ2VvLndpbmRvdy5zY3JvbGwubGVmdCwgdG9wOiBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArIGMuZ2VvLndpbmRvdy5zY3JvbGwudG9wIH0sIGQuY29vcmQgPSB7IGxlZnQ6IHAubGVmdCArIChkLmNvb3JkLmxlZnQgLSBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQpLCB0b3A6IHAudG9wICsgKGQuY29vcmQudG9wIC0gYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3ApIH0sIGUuX19zaWRlQ2hhbmdlKGUuX19pbnN0YW5jZS5fJHRvb2x0aXAsIGQuc2lkZSksIGMuZ2VvLm9yaWdpbi5maXhlZExpbmVhZ2UgPyBlLl9faW5zdGFuY2UuXyR0b29sdGlwLmNzcyhcInBvc2l0aW9uXCIsIFwiZml4ZWRcIikgOiBlLl9faW5zdGFuY2UuXyR0b29sdGlwLmNzcyhcInBvc2l0aW9uXCIsIFwiXCIpLCBlLl9faW5zdGFuY2UuXyR0b29sdGlwLmNzcyh7IGxlZnQ6IGQuY29vcmQubGVmdCwgdG9wOiBkLmNvb3JkLnRvcCwgaGVpZ2h0OiBkLnNpemUuaGVpZ2h0LCB3aWR0aDogZC5zaXplLndpZHRoIH0pLmZpbmQoXCIudG9vbHRpcHN0ZXItYXJyb3dcIikuY3NzKHsgbGVmdDogXCJcIiwgdG9wOiBcIlwiIH0pLmNzcyhuLnByb3AsIG4udmFsKSwgZS5fX2luc3RhbmNlLl8kdG9vbHRpcC5hcHBlbmRUbyhlLl9faW5zdGFuY2Uub3B0aW9uKFwicGFyZW50XCIpKSwgZS5fX2luc3RhbmNlLl90cmlnZ2VyKHsgdHlwZTogXCJyZXBvc2l0aW9uZWRcIiwgZXZlbnQ6IGIsIHBvc2l0aW9uOiBkIH0pIH0sIF9fc2lkZUNoYW5nZTogZnVuY3Rpb24gKGEsIGIpIHsgYS5yZW1vdmVDbGFzcyhcInRvb2x0aXBzdGVyLWJvdHRvbVwiKS5yZW1vdmVDbGFzcyhcInRvb2x0aXBzdGVyLWxlZnRcIikucmVtb3ZlQ2xhc3MoXCJ0b29sdGlwc3Rlci1yaWdodFwiKS5yZW1vdmVDbGFzcyhcInRvb2x0aXBzdGVyLXRvcFwiKS5hZGRDbGFzcyhcInRvb2x0aXBzdGVyLVwiICsgYikgfSwgX190YXJnZXRGaW5kOiBmdW5jdGlvbiAoYSkgeyB2YXIgYiA9IHt9LCBjID0gdGhpcy5fX2luc3RhbmNlLl8kb3JpZ2luWzBdLmdldENsaWVudFJlY3RzKCk7IGlmIChjLmxlbmd0aCA+IDEpIHsgdmFyIGQgPSB0aGlzLl9faW5zdGFuY2UuXyRvcmlnaW4uY3NzKFwib3BhY2l0eVwiKTsgMSA9PSBkICYmICh0aGlzLl9faW5zdGFuY2UuXyRvcmlnaW4uY3NzKFwib3BhY2l0eVwiLCAuOTkpLCBjID0gdGhpcy5fX2luc3RhbmNlLl8kb3JpZ2luWzBdLmdldENsaWVudFJlY3RzKCksIHRoaXMuX19pbnN0YW5jZS5fJG9yaWdpbi5jc3MoXCJvcGFjaXR5XCIsIDEpKSB9IGlmIChjLmxlbmd0aCA8IDIpIGIudG9wID0gTWF0aC5mbG9vcihhLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKyBhLmdlby5vcmlnaW4uc2l6ZS53aWR0aCAvIDIpLCBiLmJvdHRvbSA9IGIudG9wLCBiLmxlZnQgPSBNYXRoLmZsb29yKGEuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICsgYS5nZW8ub3JpZ2luLnNpemUuaGVpZ2h0IC8gMiksIGIucmlnaHQgPSBiLmxlZnQ7IGVsc2UgeyB2YXIgZSA9IGNbMF07IGIudG9wID0gTWF0aC5mbG9vcihlLmxlZnQgKyAoZS5yaWdodCAtIGUubGVmdCkgLyAyKSwgZSA9IGMubGVuZ3RoID4gMiA/IGNbTWF0aC5jZWlsKGMubGVuZ3RoIC8gMikgLSAxXSA6IGNbMF0sIGIucmlnaHQgPSBNYXRoLmZsb29yKGUudG9wICsgKGUuYm90dG9tIC0gZS50b3ApIC8gMiksIGUgPSBjW2MubGVuZ3RoIC0gMV0sIGIuYm90dG9tID0gTWF0aC5mbG9vcihlLmxlZnQgKyAoZS5yaWdodCAtIGUubGVmdCkgLyAyKSwgZSA9IGMubGVuZ3RoID4gMiA/IGNbTWF0aC5jZWlsKChjLmxlbmd0aCArIDEpIC8gMikgLSAxXSA6IGNbYy5sZW5ndGggLSAxXSwgYi5sZWZ0ID0gTWF0aC5mbG9vcihlLnRvcCArIChlLmJvdHRvbSAtIGUudG9wKSAvIDIpIH0gcmV0dXJuIGIgfVxyXG4gICAgICAgIH1cclxuICAgIH0pLCBhXHJcbn0pOyIsIi8qIVxyXG4gKiBqUXVlcnkgdGhyb3R0bGUgLyBkZWJvdW5jZSAtIHYxLjEgLSAzLzcvMjAxMFxyXG4gKiBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS1wbHVnaW4vXHJcbiAqIFxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTAgXCJDb3dib3lcIiBCZW4gQWxtYW5cclxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXHJcbiAqIGh0dHA6Ly9iZW5hbG1hbi5jb20vYWJvdXQvbGljZW5zZS9cclxuICovXHJcblxyXG4vLyBTY3JpcHQ6IGpRdWVyeSB0aHJvdHRsZSAvIGRlYm91bmNlOiBTb21ldGltZXMsIGxlc3MgaXMgbW9yZSFcclxuLy9cclxuLy8gKlZlcnNpb246IDEuMSwgTGFzdCB1cGRhdGVkOiAzLzcvMjAxMCpcclxuLy8gXHJcbi8vIFByb2plY3QgSG9tZSAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vcHJvamVjdHMvanF1ZXJ5LXRocm90dGxlLWRlYm91bmNlLXBsdWdpbi9cclxuLy8gR2l0SHViICAgICAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS9cclxuLy8gU291cmNlICAgICAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS9yYXcvbWFzdGVyL2pxdWVyeS5iYS10aHJvdHRsZS1kZWJvdW5jZS5qc1xyXG4vLyAoTWluaWZpZWQpICAgLSBodHRwOi8vZ2l0aHViLmNvbS9jb3dib3kvanF1ZXJ5LXRocm90dGxlLWRlYm91bmNlL3Jhdy9tYXN0ZXIvanF1ZXJ5LmJhLXRocm90dGxlLWRlYm91bmNlLm1pbi5qcyAoMC43a2IpXHJcbi8vIFxyXG4vLyBBYm91dDogTGljZW5zZVxyXG4vLyBcclxuLy8gQ29weXJpZ2h0IChjKSAyMDEwIFwiQ293Ym95XCIgQmVuIEFsbWFuLFxyXG4vLyBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cclxuLy8gaHR0cDovL2JlbmFsbWFuLmNvbS9hYm91dC9saWNlbnNlL1xyXG4vLyBcclxuLy8gQWJvdXQ6IEV4YW1wbGVzXHJcbi8vIFxyXG4vLyBUaGVzZSB3b3JraW5nIGV4YW1wbGVzLCBjb21wbGV0ZSB3aXRoIGZ1bGx5IGNvbW1lbnRlZCBjb2RlLCBpbGx1c3RyYXRlIGEgZmV3XHJcbi8vIHdheXMgaW4gd2hpY2ggdGhpcyBwbHVnaW4gY2FuIGJlIHVzZWQuXHJcbi8vIFxyXG4vLyBUaHJvdHRsZSAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktdGhyb3R0bGUtZGVib3VuY2UvZXhhbXBsZXMvdGhyb3R0bGUvXHJcbi8vIERlYm91bmNlIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS9leGFtcGxlcy9kZWJvdW5jZS9cclxuLy8gXHJcbi8vIEFib3V0OiBTdXBwb3J0IGFuZCBUZXN0aW5nXHJcbi8vIFxyXG4vLyBJbmZvcm1hdGlvbiBhYm91dCB3aGF0IHZlcnNpb24gb3IgdmVyc2lvbnMgb2YgalF1ZXJ5IHRoaXMgcGx1Z2luIGhhcyBiZWVuXHJcbi8vIHRlc3RlZCB3aXRoLCB3aGF0IGJyb3dzZXJzIGl0IGhhcyBiZWVuIHRlc3RlZCBpbiwgYW5kIHdoZXJlIHRoZSB1bml0IHRlc3RzXHJcbi8vIHJlc2lkZSAoc28geW91IGNhbiB0ZXN0IGl0IHlvdXJzZWxmKS5cclxuLy8gXHJcbi8vIGpRdWVyeSBWZXJzaW9ucyAtIG5vbmUsIDEuMy4yLCAxLjQuMlxyXG4vLyBCcm93c2VycyBUZXN0ZWQgLSBJbnRlcm5ldCBFeHBsb3JlciA2LTgsIEZpcmVmb3ggMi0zLjYsIFNhZmFyaSAzLTQsIENocm9tZSA0LTUsIE9wZXJhIDkuNi0xMC4xLlxyXG4vLyBVbml0IFRlc3RzICAgICAgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LXRocm90dGxlLWRlYm91bmNlL3VuaXQvXHJcbi8vIFxyXG4vLyBBYm91dDogUmVsZWFzZSBIaXN0b3J5XHJcbi8vIFxyXG4vLyAxLjEgLSAoMy83LzIwMTApIEZpeGVkIGEgYnVnIGluIDxqUXVlcnkudGhyb3R0bGU+IHdoZXJlIHRyYWlsaW5nIGNhbGxiYWNrc1xyXG4vLyAgICAgICBleGVjdXRlZCBsYXRlciB0aGFuIHRoZXkgc2hvdWxkLiBSZXdvcmtlZCBhIGZhaXIgYW1vdW50IG9mIGludGVybmFsXHJcbi8vICAgICAgIGxvZ2ljIGFzIHdlbGwuXHJcbi8vIDEuMCAtICgzLzYvMjAxMCkgSW5pdGlhbCByZWxlYXNlIGFzIGEgc3RhbmQtYWxvbmUgcHJvamVjdC4gTWlncmF0ZWQgb3ZlclxyXG4vLyAgICAgICBmcm9tIGpxdWVyeS1taXNjIHJlcG8gdjAuNCB0byBqcXVlcnktdGhyb3R0bGUgcmVwbyB2MS4wLCBhZGRlZCB0aGVcclxuLy8gICAgICAgbm9fdHJhaWxpbmcgdGhyb3R0bGUgcGFyYW1ldGVyIGFuZCBkZWJvdW5jZSBmdW5jdGlvbmFsaXR5LlxyXG4vLyBcclxuLy8gVG9waWM6IE5vdGUgZm9yIG5vbi1qUXVlcnkgdXNlcnNcclxuLy8gXHJcbi8vIGpRdWVyeSBpc24ndCBhY3R1YWxseSByZXF1aXJlZCBmb3IgdGhpcyBwbHVnaW4sIGJlY2F1c2Ugbm90aGluZyBpbnRlcm5hbFxyXG4vLyB1c2VzIGFueSBqUXVlcnkgbWV0aG9kcyBvciBwcm9wZXJ0aWVzLiBqUXVlcnkgaXMganVzdCB1c2VkIGFzIGEgbmFtZXNwYWNlXHJcbi8vIHVuZGVyIHdoaWNoIHRoZXNlIG1ldGhvZHMgY2FuIGV4aXN0LlxyXG4vLyBcclxuLy8gU2luY2UgalF1ZXJ5IGlzbid0IGFjdHVhbGx5IHJlcXVpcmVkIGZvciB0aGlzIHBsdWdpbiwgaWYgalF1ZXJ5IGRvZXNuJ3QgZXhpc3RcclxuLy8gd2hlbiB0aGlzIHBsdWdpbiBpcyBsb2FkZWQsIHRoZSBtZXRob2QgZGVzY3JpYmVkIGJlbG93IHdpbGwgYmUgY3JlYXRlZCBpblxyXG4vLyB0aGUgYENvd2JveWAgbmFtZXNwYWNlLiBVc2FnZSB3aWxsIGJlIGV4YWN0bHkgdGhlIHNhbWUsIGJ1dCBpbnN0ZWFkIG9mXHJcbi8vICQubWV0aG9kKCkgb3IgalF1ZXJ5Lm1ldGhvZCgpLCB5b3UnbGwgbmVlZCB0byB1c2UgQ293Ym95Lm1ldGhvZCgpLlxyXG5cclxuKGZ1bmN0aW9uICh3aW5kb3csIHVuZGVmaW5lZCkge1xyXG4gICAgJyQ6bm9tdW5nZSc7IC8vIFVzZWQgYnkgWVVJIGNvbXByZXNzb3IuXHJcblxyXG4gICAgLy8gU2luY2UgalF1ZXJ5IHJlYWxseSBpc24ndCByZXF1aXJlZCBmb3IgdGhpcyBwbHVnaW4sIHVzZSBgalF1ZXJ5YCBhcyB0aGVcclxuICAgIC8vIG5hbWVzcGFjZSBvbmx5IGlmIGl0IGFscmVhZHkgZXhpc3RzLCBvdGhlcndpc2UgdXNlIHRoZSBgQ293Ym95YCBuYW1lc3BhY2UsXHJcbiAgICAvLyBjcmVhdGluZyBpdCBpZiBuZWNlc3NhcnkuXHJcbiAgICB2YXIgJCA9IHdpbmRvdy5qUXVlcnkgfHwgd2luZG93LkNvd2JveSB8fCAod2luZG93LkNvd2JveSA9IHt9KSxcclxuXHJcbiAgICAgICAgLy8gSW50ZXJuYWwgbWV0aG9kIHJlZmVyZW5jZS5cclxuICAgICAgICBqcV90aHJvdHRsZTtcclxuXHJcbiAgICAvLyBNZXRob2Q6IGpRdWVyeS50aHJvdHRsZVxyXG4gICAgLy8gXHJcbiAgICAvLyBUaHJvdHRsZSBleGVjdXRpb24gb2YgYSBmdW5jdGlvbi4gRXNwZWNpYWxseSB1c2VmdWwgZm9yIHJhdGUgbGltaXRpbmdcclxuICAgIC8vIGV4ZWN1dGlvbiBvZiBoYW5kbGVycyBvbiBldmVudHMgbGlrZSByZXNpemUgYW5kIHNjcm9sbC4gSWYgeW91IHdhbnQgdG9cclxuICAgIC8vIHJhdGUtbGltaXQgZXhlY3V0aW9uIG9mIGEgZnVuY3Rpb24gdG8gYSBzaW5nbGUgdGltZSwgc2VlIHRoZVxyXG4gICAgLy8gPGpRdWVyeS5kZWJvdW5jZT4gbWV0aG9kLlxyXG4gICAgLy8gXHJcbiAgICAvLyBJbiB0aGlzIHZpc3VhbGl6YXRpb24sIHwgaXMgYSB0aHJvdHRsZWQtZnVuY3Rpb24gY2FsbCBhbmQgWCBpcyB0aGUgYWN0dWFsXHJcbiAgICAvLyBjYWxsYmFjayBleGVjdXRpb246XHJcbiAgICAvLyBcclxuICAgIC8vID4gVGhyb3R0bGVkIHdpdGggYG5vX3RyYWlsaW5nYCBzcGVjaWZpZWQgYXMgZmFsc2Ugb3IgdW5zcGVjaWZpZWQ6XHJcbiAgICAvLyA+IHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHwgKHBhdXNlKSB8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8XHJcbiAgICAvLyA+IFggICAgWCAgICBYICAgIFggICAgWCAgICBYICAgICAgICBYICAgIFggICAgWCAgICBYICAgIFggICAgWFxyXG4gICAgLy8gPiBcclxuICAgIC8vID4gVGhyb3R0bGVkIHdpdGggYG5vX3RyYWlsaW5nYCBzcGVjaWZpZWQgYXMgdHJ1ZTpcclxuICAgIC8vID4gfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fCAocGF1c2UpIHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHxcclxuICAgIC8vID4gWCAgICBYICAgIFggICAgWCAgICBYICAgICAgICAgICAgIFggICAgWCAgICBYICAgIFggICAgWFxyXG4gICAgLy8gXHJcbiAgICAvLyBVc2FnZTpcclxuICAgIC8vIFxyXG4gICAgLy8gPiB2YXIgdGhyb3R0bGVkID0galF1ZXJ5LnRocm90dGxlKCBkZWxheSwgWyBub190cmFpbGluZywgXSBjYWxsYmFjayApO1xyXG4gICAgLy8gPiBcclxuICAgIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLmJpbmQoICdzb21lZXZlbnQnLCB0aHJvdHRsZWQgKTtcclxuICAgIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLnVuYmluZCggJ3NvbWVldmVudCcsIHRocm90dGxlZCApO1xyXG4gICAgLy8gXHJcbiAgICAvLyBUaGlzIGFsc28gd29ya3MgaW4galF1ZXJ5IDEuNCs6XHJcbiAgICAvLyBcclxuICAgIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLmJpbmQoICdzb21lZXZlbnQnLCBqUXVlcnkudGhyb3R0bGUoIGRlbGF5LCBbIG5vX3RyYWlsaW5nLCBdIGNhbGxiYWNrICkgKTtcclxuICAgIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLnVuYmluZCggJ3NvbWVldmVudCcsIGNhbGxiYWNrICk7XHJcbiAgICAvLyBcclxuICAgIC8vIEFyZ3VtZW50czpcclxuICAgIC8vIFxyXG4gICAgLy8gIGRlbGF5IC0gKE51bWJlcikgQSB6ZXJvLW9yLWdyZWF0ZXIgZGVsYXkgaW4gbWlsbGlzZWNvbmRzLiBGb3IgZXZlbnRcclxuICAgIC8vICAgIGNhbGxiYWNrcywgdmFsdWVzIGFyb3VuZCAxMDAgb3IgMjUwIChvciBldmVuIGhpZ2hlcikgYXJlIG1vc3QgdXNlZnVsLlxyXG4gICAgLy8gIG5vX3RyYWlsaW5nIC0gKEJvb2xlYW4pIE9wdGlvbmFsLCBkZWZhdWx0cyB0byBmYWxzZS4gSWYgbm9fdHJhaWxpbmcgaXNcclxuICAgIC8vICAgIHRydWUsIGNhbGxiYWNrIHdpbGwgb25seSBleGVjdXRlIGV2ZXJ5IGBkZWxheWAgbWlsbGlzZWNvbmRzIHdoaWxlIHRoZVxyXG4gICAgLy8gICAgdGhyb3R0bGVkLWZ1bmN0aW9uIGlzIGJlaW5nIGNhbGxlZC4gSWYgbm9fdHJhaWxpbmcgaXMgZmFsc2Ugb3JcclxuICAgIC8vICAgIHVuc3BlY2lmaWVkLCBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIG9uZSBmaW5hbCB0aW1lIGFmdGVyIHRoZSBsYXN0XHJcbiAgICAvLyAgICB0aHJvdHRsZWQtZnVuY3Rpb24gY2FsbC4gKEFmdGVyIHRoZSB0aHJvdHRsZWQtZnVuY3Rpb24gaGFzIG5vdCBiZWVuXHJcbiAgICAvLyAgICBjYWxsZWQgZm9yIGBkZWxheWAgbWlsbGlzZWNvbmRzLCB0aGUgaW50ZXJuYWwgY291bnRlciBpcyByZXNldClcclxuICAgIC8vICBjYWxsYmFjayAtIChGdW5jdGlvbikgQSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBhZnRlciBkZWxheSBtaWxsaXNlY29uZHMuXHJcbiAgICAvLyAgICBUaGUgYHRoaXNgIGNvbnRleHQgYW5kIGFsbCBhcmd1bWVudHMgYXJlIHBhc3NlZCB0aHJvdWdoLCBhcy1pcywgdG9cclxuICAgIC8vICAgIGBjYWxsYmFja2Agd2hlbiB0aGUgdGhyb3R0bGVkLWZ1bmN0aW9uIGlzIGV4ZWN1dGVkLlxyXG4gICAgLy8gXHJcbiAgICAvLyBSZXR1cm5zOlxyXG4gICAgLy8gXHJcbiAgICAvLyAgKEZ1bmN0aW9uKSBBIG5ldywgdGhyb3R0bGVkLCBmdW5jdGlvbi5cclxuXHJcbiAgICAkLnRocm90dGxlID0ganFfdGhyb3R0bGUgPSBmdW5jdGlvbiAoZGVsYXksIG5vX3RyYWlsaW5nLCBjYWxsYmFjaywgZGVib3VuY2VfbW9kZSkge1xyXG4gICAgICAgIC8vIEFmdGVyIHdyYXBwZXIgaGFzIHN0b3BwZWQgYmVpbmcgY2FsbGVkLCB0aGlzIHRpbWVvdXQgZW5zdXJlcyB0aGF0XHJcbiAgICAgICAgLy8gYGNhbGxiYWNrYCBpcyBleGVjdXRlZCBhdCB0aGUgcHJvcGVyIHRpbWVzIGluIGB0aHJvdHRsZWAgYW5kIGBlbmRgXHJcbiAgICAgICAgLy8gZGVib3VuY2UgbW9kZXMuXHJcbiAgICAgICAgdmFyIHRpbWVvdXRfaWQsXHJcblxyXG4gICAgICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBsYXN0IHRpbWUgYGNhbGxiYWNrYCB3YXMgZXhlY3V0ZWQuXHJcbiAgICAgICAgICAgIGxhc3RfZXhlYyA9IDA7XHJcblxyXG4gICAgICAgIC8vIGBub190cmFpbGluZ2AgZGVmYXVsdHMgdG8gZmFsc3kuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBub190cmFpbGluZyAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgIGRlYm91bmNlX21vZGUgPSBjYWxsYmFjaztcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBub190cmFpbGluZztcclxuICAgICAgICAgICAgbm9fdHJhaWxpbmcgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUaGUgYHdyYXBwZXJgIGZ1bmN0aW9uIGVuY2Fwc3VsYXRlcyBhbGwgb2YgdGhlIHRocm90dGxpbmcgLyBkZWJvdW5jaW5nXHJcbiAgICAgICAgLy8gZnVuY3Rpb25hbGl0eSBhbmQgd2hlbiBleGVjdXRlZCB3aWxsIGxpbWl0IHRoZSByYXRlIGF0IHdoaWNoIGBjYWxsYmFja2BcclxuICAgICAgICAvLyBpcyBleGVjdXRlZC5cclxuICAgICAgICBmdW5jdGlvbiB3cmFwcGVyKCkge1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBlbGFwc2VkID0gK25ldyBEYXRlKCkgLSBsYXN0X2V4ZWMsXHJcbiAgICAgICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xyXG5cclxuICAgICAgICAgICAgLy8gRXhlY3V0ZSBgY2FsbGJhY2tgIGFuZCB1cGRhdGUgdGhlIGBsYXN0X2V4ZWNgIHRpbWVzdGFtcC5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZXhlYygpIHtcclxuICAgICAgICAgICAgICAgIGxhc3RfZXhlYyA9ICtuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodGhhdCwgYXJncyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyBJZiBgZGVib3VuY2VfbW9kZWAgaXMgdHJ1ZSAoYXRfYmVnaW4pIHRoaXMgaXMgdXNlZCB0byBjbGVhciB0aGUgZmxhZ1xyXG4gICAgICAgICAgICAvLyB0byBhbGxvdyBmdXR1cmUgYGNhbGxiYWNrYCBleGVjdXRpb25zLlxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhcigpIHtcclxuICAgICAgICAgICAgICAgIHRpbWVvdXRfaWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoZGVib3VuY2VfbW9kZSAmJiAhdGltZW91dF9pZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2luY2UgYHdyYXBwZXJgIGlzIGJlaW5nIGNhbGxlZCBmb3IgdGhlIGZpcnN0IHRpbWUgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBgZGVib3VuY2VfbW9kZWAgaXMgdHJ1ZSAoYXRfYmVnaW4pLCBleGVjdXRlIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICAgICAgICBleGVjKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENsZWFyIGFueSBleGlzdGluZyB0aW1lb3V0LlxyXG4gICAgICAgICAgICB0aW1lb3V0X2lkICYmIGNsZWFyVGltZW91dCh0aW1lb3V0X2lkKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZWJvdW5jZV9tb2RlID09PSB1bmRlZmluZWQgJiYgZWxhcHNlZCA+IGRlbGF5KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbiB0aHJvdHRsZSBtb2RlLCBpZiBgZGVsYXlgIHRpbWUgaGFzIGJlZW4gZXhjZWVkZWQsIGV4ZWN1dGVcclxuICAgICAgICAgICAgICAgIC8vIGBjYWxsYmFja2AuXHJcbiAgICAgICAgICAgICAgICBleGVjKCk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vX3RyYWlsaW5nICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbiB0cmFpbGluZyB0aHJvdHRsZSBtb2RlLCBzaW5jZSBgZGVsYXlgIHRpbWUgaGFzIG5vdCBiZWVuXHJcbiAgICAgICAgICAgICAgICAvLyBleGNlZWRlZCwgc2NoZWR1bGUgYGNhbGxiYWNrYCB0byBleGVjdXRlIGBkZWxheWAgbXMgYWZ0ZXIgbW9zdFxyXG4gICAgICAgICAgICAgICAgLy8gcmVjZW50IGV4ZWN1dGlvbi5cclxuICAgICAgICAgICAgICAgIC8vIFxyXG4gICAgICAgICAgICAgICAgLy8gSWYgYGRlYm91bmNlX21vZGVgIGlzIHRydWUgKGF0X2JlZ2luKSwgc2NoZWR1bGUgYGNsZWFyYCB0byBleGVjdXRlXHJcbiAgICAgICAgICAgICAgICAvLyBhZnRlciBgZGVsYXlgIG1zLlxyXG4gICAgICAgICAgICAgICAgLy8gXHJcbiAgICAgICAgICAgICAgICAvLyBJZiBgZGVib3VuY2VfbW9kZWAgaXMgZmFsc2UgKGF0IGVuZCksIHNjaGVkdWxlIGBjYWxsYmFja2AgdG9cclxuICAgICAgICAgICAgICAgIC8vIGV4ZWN1dGUgYWZ0ZXIgYGRlbGF5YCBtcy5cclxuICAgICAgICAgICAgICAgIHRpbWVvdXRfaWQgPSBzZXRUaW1lb3V0KGRlYm91bmNlX21vZGUgPyBjbGVhciA6IGV4ZWMsIGRlYm91bmNlX21vZGUgPT09IHVuZGVmaW5lZCA/IGRlbGF5IC0gZWxhcHNlZCA6IGRlbGF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFNldCB0aGUgZ3VpZCBvZiBgd3JhcHBlcmAgZnVuY3Rpb24gdG8gdGhlIHNhbWUgb2Ygb3JpZ2luYWwgY2FsbGJhY2ssIHNvXHJcbiAgICAgICAgLy8gaXQgY2FuIGJlIHJlbW92ZWQgaW4galF1ZXJ5IDEuNCsgLnVuYmluZCBvciAuZGllIGJ5IHVzaW5nIHRoZSBvcmlnaW5hbFxyXG4gICAgICAgIC8vIGNhbGxiYWNrIGFzIGEgcmVmZXJlbmNlLlxyXG4gICAgICAgIGlmICgkLmd1aWQpIHtcclxuICAgICAgICAgICAgd3JhcHBlci5ndWlkID0gY2FsbGJhY2suZ3VpZCA9IGNhbGxiYWNrLmd1aWQgfHwgJC5ndWlkKys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZXR1cm4gdGhlIHdyYXBwZXIgZnVuY3Rpb24uXHJcbiAgICAgICAgcmV0dXJuIHdyYXBwZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIE1ldGhvZDogalF1ZXJ5LmRlYm91bmNlXHJcbiAgICAvLyBcclxuICAgIC8vIERlYm91bmNlIGV4ZWN1dGlvbiBvZiBhIGZ1bmN0aW9uLiBEZWJvdW5jaW5nLCB1bmxpa2UgdGhyb3R0bGluZyxcclxuICAgIC8vIGd1YXJhbnRlZXMgdGhhdCBhIGZ1bmN0aW9uIGlzIG9ubHkgZXhlY3V0ZWQgYSBzaW5nbGUgdGltZSwgZWl0aGVyIGF0IHRoZVxyXG4gICAgLy8gdmVyeSBiZWdpbm5pbmcgb2YgYSBzZXJpZXMgb2YgY2FsbHMsIG9yIGF0IHRoZSB2ZXJ5IGVuZC4gSWYgeW91IHdhbnQgdG9cclxuICAgIC8vIHNpbXBseSByYXRlLWxpbWl0IGV4ZWN1dGlvbiBvZiBhIGZ1bmN0aW9uLCBzZWUgdGhlIDxqUXVlcnkudGhyb3R0bGU+XHJcbiAgICAvLyBtZXRob2QuXHJcbiAgICAvLyBcclxuICAgIC8vIEluIHRoaXMgdmlzdWFsaXphdGlvbiwgfCBpcyBhIGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsIGFuZCBYIGlzIHRoZSBhY3R1YWxcclxuICAgIC8vIGNhbGxiYWNrIGV4ZWN1dGlvbjpcclxuICAgIC8vIFxyXG4gICAgLy8gPiBEZWJvdW5jZWQgd2l0aCBgYXRfYmVnaW5gIHNwZWNpZmllZCBhcyBmYWxzZSBvciB1bnNwZWNpZmllZDpcclxuICAgIC8vID4gfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fCAocGF1c2UpIHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHxcclxuICAgIC8vID4gICAgICAgICAgICAgICAgICAgICAgICAgIFggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYXHJcbiAgICAvLyA+IFxyXG4gICAgLy8gPiBEZWJvdW5jZWQgd2l0aCBgYXRfYmVnaW5gIHNwZWNpZmllZCBhcyB0cnVlOlxyXG4gICAgLy8gPiB8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8IChwYXVzZSkgfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fFxyXG4gICAgLy8gPiBYICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWFxyXG4gICAgLy8gXHJcbiAgICAvLyBVc2FnZTpcclxuICAgIC8vIFxyXG4gICAgLy8gPiB2YXIgZGVib3VuY2VkID0galF1ZXJ5LmRlYm91bmNlKCBkZWxheSwgWyBhdF9iZWdpbiwgXSBjYWxsYmFjayApO1xyXG4gICAgLy8gPiBcclxuICAgIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLmJpbmQoICdzb21lZXZlbnQnLCBkZWJvdW5jZWQgKTtcclxuICAgIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLnVuYmluZCggJ3NvbWVldmVudCcsIGRlYm91bmNlZCApO1xyXG4gICAgLy8gXHJcbiAgICAvLyBUaGlzIGFsc28gd29ya3MgaW4galF1ZXJ5IDEuNCs6XHJcbiAgICAvLyBcclxuICAgIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLmJpbmQoICdzb21lZXZlbnQnLCBqUXVlcnkuZGVib3VuY2UoIGRlbGF5LCBbIGF0X2JlZ2luLCBdIGNhbGxiYWNrICkgKTtcclxuICAgIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLnVuYmluZCggJ3NvbWVldmVudCcsIGNhbGxiYWNrICk7XHJcbiAgICAvLyBcclxuICAgIC8vIEFyZ3VtZW50czpcclxuICAgIC8vIFxyXG4gICAgLy8gIGRlbGF5IC0gKE51bWJlcikgQSB6ZXJvLW9yLWdyZWF0ZXIgZGVsYXkgaW4gbWlsbGlzZWNvbmRzLiBGb3IgZXZlbnRcclxuICAgIC8vICAgIGNhbGxiYWNrcywgdmFsdWVzIGFyb3VuZCAxMDAgb3IgMjUwIChvciBldmVuIGhpZ2hlcikgYXJlIG1vc3QgdXNlZnVsLlxyXG4gICAgLy8gIGF0X2JlZ2luIC0gKEJvb2xlYW4pIE9wdGlvbmFsLCBkZWZhdWx0cyB0byBmYWxzZS4gSWYgYXRfYmVnaW4gaXMgZmFsc2Ugb3JcclxuICAgIC8vICAgIHVuc3BlY2lmaWVkLCBjYWxsYmFjayB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgYGRlbGF5YCBtaWxsaXNlY29uZHMgYWZ0ZXJcclxuICAgIC8vICAgIHRoZSBsYXN0IGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsLiBJZiBhdF9iZWdpbiBpcyB0cnVlLCBjYWxsYmFjayB3aWxsIGJlXHJcbiAgICAvLyAgICBleGVjdXRlZCBvbmx5IGF0IHRoZSBmaXJzdCBkZWJvdW5jZWQtZnVuY3Rpb24gY2FsbC4gKEFmdGVyIHRoZVxyXG4gICAgLy8gICAgdGhyb3R0bGVkLWZ1bmN0aW9uIGhhcyBub3QgYmVlbiBjYWxsZWQgZm9yIGBkZWxheWAgbWlsbGlzZWNvbmRzLCB0aGVcclxuICAgIC8vICAgIGludGVybmFsIGNvdW50ZXIgaXMgcmVzZXQpXHJcbiAgICAvLyAgY2FsbGJhY2sgLSAoRnVuY3Rpb24pIEEgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZGVsYXkgbWlsbGlzZWNvbmRzLlxyXG4gICAgLy8gICAgVGhlIGB0aGlzYCBjb250ZXh0IGFuZCBhbGwgYXJndW1lbnRzIGFyZSBwYXNzZWQgdGhyb3VnaCwgYXMtaXMsIHRvXHJcbiAgICAvLyAgICBgY2FsbGJhY2tgIHdoZW4gdGhlIGRlYm91bmNlZC1mdW5jdGlvbiBpcyBleGVjdXRlZC5cclxuICAgIC8vIFxyXG4gICAgLy8gUmV0dXJuczpcclxuICAgIC8vIFxyXG4gICAgLy8gIChGdW5jdGlvbikgQSBuZXcsIGRlYm91bmNlZCwgZnVuY3Rpb24uXHJcblxyXG4gICAgJC5kZWJvdW5jZSA9IGZ1bmN0aW9uIChkZWxheSwgYXRfYmVnaW4sIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrID09PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgPyBqcV90aHJvdHRsZShkZWxheSwgYXRfYmVnaW4sIGZhbHNlKVxyXG4gICAgICAgICAgICA6IGpxX3Rocm90dGxlKGRlbGF5LCBjYWxsYmFjaywgYXRfYmVnaW4gIT09IGZhbHNlKTtcclxuICAgIH07XHJcblxyXG59KSh3aW5kb3cpOyIsIihmdW5jdGlvbiAoJCkge1xyXG5cclxuICAgICQuZm4uc2h1ZmZsZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyIGFsbEVsZW1zID0gdGhpcy5nZXQoKSxcclxuICAgICAgICAgICAgZ2V0UmFuZG9tID0gZnVuY3Rpb24gKG1heCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNodWZmbGVkID0gJC5tYXAoYWxsRWxlbXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciByYW5kb20gPSBnZXRSYW5kb20oYWxsRWxlbXMubGVuZ3RoKSxcclxuICAgICAgICAgICAgICAgICAgICByYW5kRWwgPSAkKGFsbEVsZW1zW3JhbmRvbV0pLmNsb25lKHRydWUpWzBdO1xyXG4gICAgICAgICAgICAgICAgYWxsRWxlbXMuc3BsaWNlKHJhbmRvbSwgMSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZEVsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucmVwbGFjZVdpdGgoJChzaHVmZmxlZFtpXSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gJChzaHVmZmxlZCk7XHJcblxyXG4gICAgfTtcclxuXHJcbn0pKGpRdWVyeSk7IiwiLyohXHJcbiAqIEJvd3NlciAtIGEgYnJvd3NlciBkZXRlY3RvclxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGVkL2Jvd3NlclxyXG4gKiBNSVQgTGljZW5zZSB8IChjKSBEdXN0aW4gRGlheiAyMDE1XHJcbiAqL1xyXG4gIFxyXG4hZnVuY3Rpb24gKHJvb3QsIG5hbWUsIGRlZmluaXRpb24pIHtcclxuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSBtb2R1bGUuZXhwb3J0cyA9IGRlZmluaXRpb24oKVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIGRlZmluZShuYW1lLCBkZWZpbml0aW9uKVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgd2luZG93W25hbWVdID0gZGVmaW5pdGlvbigpXHJcbiAgICB9XHJcbn0odGhpcywgJ2Jvd3NlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICAqIFNlZSB1c2VyYWdlbnRzLmpzIGZvciBleGFtcGxlcyBvZiBuYXZpZ2F0b3IudXNlckFnZW50XHJcbiAgICAgICovXHJcblxyXG4gICAgdmFyIHQgPSB0cnVlXHJcblxyXG4gICAgZnVuY3Rpb24gZGV0ZWN0KHVhKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEZpcnN0TWF0Y2gocmVnZXgpIHtcclxuICAgICAgICAgICAgdmFyIG1hdGNoID0gdWEubWF0Y2gocmVnZXgpO1xyXG4gICAgICAgICAgICByZXR1cm4gKG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+IDEgJiYgbWF0Y2hbMV0pIHx8ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0U2Vjb25kTWF0Y2gocmVnZXgpIHtcclxuICAgICAgICAgICAgdmFyIG1hdGNoID0gdWEubWF0Y2gocmVnZXgpO1xyXG4gICAgICAgICAgICByZXR1cm4gKG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+IDEgJiYgbWF0Y2hbMl0pIHx8ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGlvc2RldmljZSA9IGdldEZpcnN0TWF0Y2goLyhpcG9kfGlwaG9uZXxpcGFkKS9pKS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICwgbGlrZUFuZHJvaWQgPSAvbGlrZSBhbmRyb2lkL2kudGVzdCh1YSlcclxuICAgICAgICAgICAgLCBhbmRyb2lkID0gIWxpa2VBbmRyb2lkICYmIC9hbmRyb2lkL2kudGVzdCh1YSlcclxuICAgICAgICAgICAgLCBuZXh1c01vYmlsZSA9IC9uZXh1c1xccypbMC02XVxccyovaS50ZXN0KHVhKVxyXG4gICAgICAgICAgICAsIG5leHVzVGFibGV0ID0gIW5leHVzTW9iaWxlICYmIC9uZXh1c1xccypbMC05XSsvaS50ZXN0KHVhKVxyXG4gICAgICAgICAgICAsIGNocm9tZW9zID0gL0NyT1MvLnRlc3QodWEpXHJcbiAgICAgICAgICAgICwgc2lsayA9IC9zaWxrL2kudGVzdCh1YSlcclxuICAgICAgICAgICAgLCBzYWlsZmlzaCA9IC9zYWlsZmlzaC9pLnRlc3QodWEpXHJcbiAgICAgICAgICAgICwgdGl6ZW4gPSAvdGl6ZW4vaS50ZXN0KHVhKVxyXG4gICAgICAgICAgICAsIHdlYm9zID0gLyh3ZWJ8aHB3KShvfDApcy9pLnRlc3QodWEpXHJcbiAgICAgICAgICAgICwgd2luZG93c3Bob25lID0gL3dpbmRvd3MgcGhvbmUvaS50ZXN0KHVhKVxyXG4gICAgICAgICAgICAsIHNhbXN1bmdCcm93c2VyID0gL1NhbXN1bmdCcm93c2VyL2kudGVzdCh1YSlcclxuICAgICAgICAgICAgLCB3aW5kb3dzID0gIXdpbmRvd3NwaG9uZSAmJiAvd2luZG93cy9pLnRlc3QodWEpXHJcbiAgICAgICAgICAgICwgbWFjID0gIWlvc2RldmljZSAmJiAhc2lsayAmJiAvbWFjaW50b3NoL2kudGVzdCh1YSlcclxuICAgICAgICAgICAgLCBsaW51eCA9ICFhbmRyb2lkICYmICFzYWlsZmlzaCAmJiAhdGl6ZW4gJiYgIXdlYm9zICYmIC9saW51eC9pLnRlc3QodWEpXHJcbiAgICAgICAgICAgICwgZWRnZVZlcnNpb24gPSBnZXRTZWNvbmRNYXRjaCgvZWRnKFtlYV18aW9zKVxcLyhcXGQrKFxcLlxcZCspPykvaSlcclxuICAgICAgICAgICAgLCB2ZXJzaW9uSWRlbnRpZmllciA9IGdldEZpcnN0TWF0Y2goL3ZlcnNpb25cXC8oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgICwgdGFibGV0ID0gL3RhYmxldC9pLnRlc3QodWEpICYmICEvdGFibGV0IHBjL2kudGVzdCh1YSlcclxuICAgICAgICAgICAgLCBtb2JpbGUgPSAhdGFibGV0ICYmIC9bXi1dbW9iaS9pLnRlc3QodWEpXHJcbiAgICAgICAgICAgICwgeGJveCA9IC94Ym94L2kudGVzdCh1YSlcclxuICAgICAgICAgICAgLCByZXN1bHRcclxuXHJcbiAgICAgICAgaWYgKC9vcGVyYS9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIC8vICBhbiBvbGQgT3BlcmFcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ09wZXJhJ1xyXG4gICAgICAgICAgICAgICAgLCBvcGVyYTogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiB2ZXJzaW9uSWRlbnRpZmllciB8fCBnZXRGaXJzdE1hdGNoKC8oPzpvcGVyYXxvcHJ8b3Bpb3MpW1xcc1xcL10oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKC9vcHJcXC98b3Bpb3MvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICAvLyBhIG5ldyBPcGVyYVxyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnT3BlcmEnXHJcbiAgICAgICAgICAgICAgICAsIG9wZXJhOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/Om9wcnxvcGlvcylbXFxzXFwvXShcXGQrKFxcLlxcZCspPykvaSkgfHwgdmVyc2lvbklkZW50aWZpZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvU2Ftc3VuZ0Jyb3dzZXIvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnU2Ftc3VuZyBJbnRlcm5ldCBmb3IgQW5kcm9pZCdcclxuICAgICAgICAgICAgICAgICwgc2Ftc3VuZ0Jyb3dzZXI6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogdmVyc2lvbklkZW50aWZpZXIgfHwgZ2V0Rmlyc3RNYXRjaCgvKD86U2Ftc3VuZ0Jyb3dzZXIpW1xcc1xcL10oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL1doYWxlL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ05BVkVSIFdoYWxlIGJyb3dzZXInXHJcbiAgICAgICAgICAgICAgICAsIHdoYWxlOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OndoYWxlKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL01aQnJvd3Nlci9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdNWiBCcm93c2VyJ1xyXG4gICAgICAgICAgICAgICAgLCBtemJyb3dzZXI6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86TVpCcm93c2VyKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL2NvYXN0L2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ09wZXJhIENvYXN0J1xyXG4gICAgICAgICAgICAgICAgLCBjb2FzdDogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiB2ZXJzaW9uSWRlbnRpZmllciB8fCBnZXRGaXJzdE1hdGNoKC8oPzpjb2FzdClbXFxzXFwvXShcXGQrKFxcLlxcZCspPykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvZm9jdXMvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnRm9jdXMnXHJcbiAgICAgICAgICAgICAgICAsIGZvY3VzOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OmZvY3VzKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL3lhYnJvd3Nlci9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdZYW5kZXggQnJvd3NlcidcclxuICAgICAgICAgICAgICAgICwgeWFuZGV4YnJvd3NlcjogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiB2ZXJzaW9uSWRlbnRpZmllciB8fCBnZXRGaXJzdE1hdGNoKC8oPzp5YWJyb3dzZXIpW1xcc1xcL10oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL3VjYnJvd3Nlci9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdVQyBCcm93c2VyJ1xyXG4gICAgICAgICAgICAgICAgLCB1Y2Jyb3dzZXI6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86dWNicm93c2VyKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL214aW9zL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ01heHRob24nXHJcbiAgICAgICAgICAgICAgICAsIG1heHRob246IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86bXhpb3MpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvZXBpcGhhbnkvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnRXBpcGhhbnknXHJcbiAgICAgICAgICAgICAgICAsIGVwaXBoYW55OiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OmVwaXBoYW55KVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL3B1ZmZpbi9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdQdWZmaW4nXHJcbiAgICAgICAgICAgICAgICAsIHB1ZmZpbjogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzpwdWZmaW4pW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspPykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvc2xlaXBuaXIvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnU2xlaXBuaXInXHJcbiAgICAgICAgICAgICAgICAsIHNsZWlwbmlyOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OnNsZWlwbmlyKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL2stbWVsZW9uL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ0stTWVsZW9uJ1xyXG4gICAgICAgICAgICAgICAgLCBrTWVsZW9uOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OmstbWVsZW9uKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAod2luZG93c3Bob25lKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdXaW5kb3dzIFBob25lJ1xyXG4gICAgICAgICAgICAgICAgLCBvc25hbWU6ICdXaW5kb3dzIFBob25lJ1xyXG4gICAgICAgICAgICAgICAgLCB3aW5kb3dzcGhvbmU6IHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZWRnZVZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5tc2VkZ2UgPSB0XHJcbiAgICAgICAgICAgICAgICByZXN1bHQudmVyc2lvbiA9IGVkZ2VWZXJzaW9uXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQubXNpZSA9IHRcclxuICAgICAgICAgICAgICAgIHJlc3VsdC52ZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvaWVtb2JpbGVcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL21zaWV8dHJpZGVudC9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdJbnRlcm5ldCBFeHBsb3JlcidcclxuICAgICAgICAgICAgICAgICwgbXNpZTogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzptc2llIHxydjopKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChjaHJvbWVvcykge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnQ2hyb21lJ1xyXG4gICAgICAgICAgICAgICAgLCBvc25hbWU6ICdDaHJvbWUgT1MnXHJcbiAgICAgICAgICAgICAgICAsIGNocm9tZW9zOiB0XHJcbiAgICAgICAgICAgICAgICAsIGNocm9tZUJvb2s6IHRcclxuICAgICAgICAgICAgICAgICwgY2hyb21lOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OmNocm9tZXxjcmlvc3xjcm1vKVxcLyhcXGQrKFxcLlxcZCspPykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoL2VkZyhbZWFdfGlvcykvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnTWljcm9zb2Z0IEVkZ2UnXHJcbiAgICAgICAgICAgICAgICAsIG1zZWRnZTogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBlZGdlVmVyc2lvblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC92aXZhbGRpL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1ZpdmFsZGknXHJcbiAgICAgICAgICAgICAgICAsIHZpdmFsZGk6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvdml2YWxkaVxcLyhcXGQrKFxcLlxcZCspPykvaSkgfHwgdmVyc2lvbklkZW50aWZpZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzYWlsZmlzaCkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnU2FpbGZpc2gnXHJcbiAgICAgICAgICAgICAgICAsIG9zbmFtZTogJ1NhaWxmaXNoIE9TJ1xyXG4gICAgICAgICAgICAgICAgLCBzYWlsZmlzaDogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC9zYWlsZmlzaFxccz9icm93c2VyXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC9zZWFtb25rZXlcXC8vaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnU2VhTW9ua2V5J1xyXG4gICAgICAgICAgICAgICAgLCBzZWFtb25rZXk6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvc2VhbW9ua2V5XFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC9maXJlZm94fGljZXdlYXNlbHxmeGlvcy9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdGaXJlZm94J1xyXG4gICAgICAgICAgICAgICAgLCBmaXJlZm94OiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OmZpcmVmb3h8aWNld2Vhc2VsfGZ4aW9zKVsgXFwvXShcXGQrKFxcLlxcZCspPykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoL1xcKChtb2JpbGV8dGFibGV0KTtbXlxcKV0qcnY6W1xcZFxcLl0rXFwpL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5maXJlZm94b3MgPSB0XHJcbiAgICAgICAgICAgICAgICByZXN1bHQub3NuYW1lID0gJ0ZpcmVmb3ggT1MnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc2lsaykge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnQW1hem9uIFNpbGsnXHJcbiAgICAgICAgICAgICAgICAsIHNpbGs6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvc2lsa1xcLyhcXGQrKFxcLlxcZCspPykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvcGhhbnRvbS9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdQaGFudG9tSlMnXHJcbiAgICAgICAgICAgICAgICAsIHBoYW50b206IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvcGhhbnRvbWpzXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC9zbGltZXJqcy9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdTbGltZXJKUydcclxuICAgICAgICAgICAgICAgICwgc2xpbWVyOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goL3NsaW1lcmpzXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC9ibGFja2JlcnJ5fFxcYmJiXFxkKy9pLnRlc3QodWEpIHx8IC9yaW1cXHN0YWJsZXQvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnQmxhY2tCZXJyeSdcclxuICAgICAgICAgICAgICAgICwgb3NuYW1lOiAnQmxhY2tCZXJyeSBPUydcclxuICAgICAgICAgICAgICAgICwgYmxhY2tiZXJyeTogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiB2ZXJzaW9uSWRlbnRpZmllciB8fCBnZXRGaXJzdE1hdGNoKC9ibGFja2JlcnJ5W1xcZF0rXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHdlYm9zKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdXZWJPUydcclxuICAgICAgICAgICAgICAgICwgb3NuYW1lOiAnV2ViT1MnXHJcbiAgICAgICAgICAgICAgICAsIHdlYm9zOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IHZlcnNpb25JZGVudGlmaWVyIHx8IGdldEZpcnN0TWF0Y2goL3coPzplYik/b3Nicm93c2VyXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvdG91Y2hwYWRcXC8vaS50ZXN0KHVhKSAmJiAocmVzdWx0LnRvdWNocGFkID0gdClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL2JhZGEvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnQmFkYSdcclxuICAgICAgICAgICAgICAgICwgb3NuYW1lOiAnQmFkYSdcclxuICAgICAgICAgICAgICAgICwgYmFkYTogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC9kb2xmaW5cXC8oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRpemVuKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdUaXplbidcclxuICAgICAgICAgICAgICAgICwgb3NuYW1lOiAnVGl6ZW4nXHJcbiAgICAgICAgICAgICAgICAsIHRpemVuOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OnRpemVuXFxzPyk/YnJvd3NlclxcLyhcXGQrKFxcLlxcZCspPykvaSkgfHwgdmVyc2lvbklkZW50aWZpZXJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL3F1cHppbGxhL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1F1cFppbGxhJ1xyXG4gICAgICAgICAgICAgICAgLCBxdXB6aWxsYTogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzpxdXB6aWxsYSlbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKSB8fCB2ZXJzaW9uSWRlbnRpZmllclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC9jaHJvbWl1bS9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdDaHJvbWl1bSdcclxuICAgICAgICAgICAgICAgICwgY2hyb21pdW06IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86Y2hyb21pdW0pW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspPykvaSkgfHwgdmVyc2lvbklkZW50aWZpZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvY2hyb21lfGNyaW9zfGNybW8vaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnQ2hyb21lJ1xyXG4gICAgICAgICAgICAgICAgLCBjaHJvbWU6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86Y2hyb21lfGNyaW9zfGNybW8pXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFuZHJvaWQpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ0FuZHJvaWQnXHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IHZlcnNpb25JZGVudGlmaWVyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL3NhZmFyaXxhcHBsZXdlYmtpdC9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdTYWZhcmknXHJcbiAgICAgICAgICAgICAgICAsIHNhZmFyaTogdFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uSWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnZlcnNpb24gPSB2ZXJzaW9uSWRlbnRpZmllclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGlvc2RldmljZSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBpb3NkZXZpY2UgPT0gJ2lwaG9uZScgPyAnaVBob25lJyA6IGlvc2RldmljZSA9PSAnaXBhZCcgPyAnaVBhZCcgOiAnaVBvZCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBXVEY6IHZlcnNpb24gaXMgbm90IHBhcnQgb2YgdXNlciBhZ2VudCBpbiB3ZWIgYXBwc1xyXG4gICAgICAgICAgICBpZiAodmVyc2lvbklkZW50aWZpZXIpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC52ZXJzaW9uID0gdmVyc2lvbklkZW50aWZpZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvZ29vZ2xlYm90L2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ0dvb2dsZWJvdCdcclxuICAgICAgICAgICAgICAgICwgZ29vZ2xlYm90OiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goL2dvb2dsZWJvdFxcLyhcXGQrKFxcLlxcZCspKS9pKSB8fCB2ZXJzaW9uSWRlbnRpZmllclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBnZXRGaXJzdE1hdGNoKC9eKC4qKVxcLyguKikgLyksXHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBnZXRTZWNvbmRNYXRjaCgvXiguKilcXC8oLiopIC8pXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzZXQgd2Via2l0IG9yIGdlY2tvIGZsYWcgZm9yIGJyb3dzZXJzIGJhc2VkIG9uIHRoZXNlIGVuZ2luZXNcclxuICAgICAgICBpZiAoIXJlc3VsdC5tc2VkZ2UgJiYgLyhhcHBsZSk/d2Via2l0L2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgaWYgKC8oYXBwbGUpP3dlYmtpdFxcLzUzN1xcLjM2L2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5uYW1lID0gcmVzdWx0Lm5hbWUgfHwgXCJCbGlua1wiXHJcbiAgICAgICAgICAgICAgICByZXN1bHQuYmxpbmsgPSB0XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQubmFtZSA9IHJlc3VsdC5uYW1lIHx8IFwiV2Via2l0XCJcclxuICAgICAgICAgICAgICAgIHJlc3VsdC53ZWJraXQgPSB0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQudmVyc2lvbiAmJiB2ZXJzaW9uSWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnZlcnNpb24gPSB2ZXJzaW9uSWRlbnRpZmllclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICghcmVzdWx0Lm9wZXJhICYmIC9nZWNrb1xcLy9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5uYW1lID0gcmVzdWx0Lm5hbWUgfHwgXCJHZWNrb1wiXHJcbiAgICAgICAgICAgIHJlc3VsdC5nZWNrbyA9IHRcclxuICAgICAgICAgICAgcmVzdWx0LnZlcnNpb24gPSByZXN1bHQudmVyc2lvbiB8fCBnZXRGaXJzdE1hdGNoKC9nZWNrb1xcLyhcXGQrKFxcLlxcZCspPykvaSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNldCBPUyBmbGFncyBmb3IgcGxhdGZvcm1zIHRoYXQgaGF2ZSBtdWx0aXBsZSBicm93c2Vyc1xyXG4gICAgICAgIGlmICghcmVzdWx0LndpbmRvd3NwaG9uZSAmJiAoYW5kcm9pZCB8fCByZXN1bHQuc2lsaykpIHtcclxuICAgICAgICAgICAgcmVzdWx0LmFuZHJvaWQgPSB0XHJcbiAgICAgICAgICAgIHJlc3VsdC5vc25hbWUgPSAnQW5kcm9pZCdcclxuICAgICAgICB9IGVsc2UgaWYgKCFyZXN1bHQud2luZG93c3Bob25lICYmIGlvc2RldmljZSkge1xyXG4gICAgICAgICAgICByZXN1bHRbaW9zZGV2aWNlXSA9IHRcclxuICAgICAgICAgICAgcmVzdWx0LmlvcyA9IHRcclxuICAgICAgICAgICAgcmVzdWx0Lm9zbmFtZSA9ICdpT1MnXHJcbiAgICAgICAgfSBlbHNlIGlmIChtYWMpIHtcclxuICAgICAgICAgICAgcmVzdWx0Lm1hYyA9IHRcclxuICAgICAgICAgICAgcmVzdWx0Lm9zbmFtZSA9ICdtYWNPUydcclxuICAgICAgICB9IGVsc2UgaWYgKHhib3gpIHtcclxuICAgICAgICAgICAgcmVzdWx0Lnhib3ggPSB0XHJcbiAgICAgICAgICAgIHJlc3VsdC5vc25hbWUgPSAnWGJveCdcclxuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvd3MpIHtcclxuICAgICAgICAgICAgcmVzdWx0LndpbmRvd3MgPSB0XHJcbiAgICAgICAgICAgIHJlc3VsdC5vc25hbWUgPSAnV2luZG93cydcclxuICAgICAgICB9IGVsc2UgaWYgKGxpbnV4KSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5saW51eCA9IHRcclxuICAgICAgICAgICAgcmVzdWx0Lm9zbmFtZSA9ICdMaW51eCdcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFdpbmRvd3NWZXJzaW9uKHMpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChzKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdOVCc6IHJldHVybiAnTlQnXHJcbiAgICAgICAgICAgICAgICBjYXNlICdYUCc6IHJldHVybiAnWFAnXHJcbiAgICAgICAgICAgICAgICBjYXNlICdOVCA1LjAnOiByZXR1cm4gJzIwMDAnXHJcbiAgICAgICAgICAgICAgICBjYXNlICdOVCA1LjEnOiByZXR1cm4gJ1hQJ1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnTlQgNS4yJzogcmV0dXJuICcyMDAzJ1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnTlQgNi4wJzogcmV0dXJuICdWaXN0YSdcclxuICAgICAgICAgICAgICAgIGNhc2UgJ05UIDYuMSc6IHJldHVybiAnNydcclxuICAgICAgICAgICAgICAgIGNhc2UgJ05UIDYuMic6IHJldHVybiAnOCdcclxuICAgICAgICAgICAgICAgIGNhc2UgJ05UIDYuMyc6IHJldHVybiAnOC4xJ1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnTlQgMTAuMCc6IHJldHVybiAnMTAnXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE9TIHZlcnNpb24gZXh0cmFjdGlvblxyXG4gICAgICAgIHZhciBvc1ZlcnNpb24gPSAnJztcclxuICAgICAgICBpZiAocmVzdWx0LndpbmRvd3MpIHtcclxuICAgICAgICAgICAgb3NWZXJzaW9uID0gZ2V0V2luZG93c1ZlcnNpb24oZ2V0Rmlyc3RNYXRjaCgvV2luZG93cyAoKE5UfFhQKSggXFxkXFxkPy5cXGQpPykvaSkpXHJcbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQud2luZG93c3Bob25lKSB7XHJcbiAgICAgICAgICAgIG9zVmVyc2lvbiA9IGdldEZpcnN0TWF0Y2goL3dpbmRvd3MgcGhvbmUgKD86b3MpP1xccz8oXFxkKyhcXC5cXGQrKSopL2kpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0Lm1hYykge1xyXG4gICAgICAgICAgICBvc1ZlcnNpb24gPSBnZXRGaXJzdE1hdGNoKC9NYWMgT1MgWCAoXFxkKyhbX1xcLlxcc11cXGQrKSopL2kpO1xyXG4gICAgICAgICAgICBvc1ZlcnNpb24gPSBvc1ZlcnNpb24ucmVwbGFjZSgvW19cXHNdL2csICcuJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpb3NkZXZpY2UpIHtcclxuICAgICAgICAgICAgb3NWZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvb3MgKFxcZCsoW19cXHNdXFxkKykqKSBsaWtlIG1hYyBvcyB4L2kpO1xyXG4gICAgICAgICAgICBvc1ZlcnNpb24gPSBvc1ZlcnNpb24ucmVwbGFjZSgvW19cXHNdL2csICcuJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhbmRyb2lkKSB7XHJcbiAgICAgICAgICAgIG9zVmVyc2lvbiA9IGdldEZpcnN0TWF0Y2goL2FuZHJvaWRbIFxcLy1dKFxcZCsoXFwuXFxkKykqKS9pKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC53ZWJvcykge1xyXG4gICAgICAgICAgICBvc1ZlcnNpb24gPSBnZXRGaXJzdE1hdGNoKC8oPzp3ZWJ8aHB3KW9zXFwvKFxcZCsoXFwuXFxkKykqKS9pKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5ibGFja2JlcnJ5KSB7XHJcbiAgICAgICAgICAgIG9zVmVyc2lvbiA9IGdldEZpcnN0TWF0Y2goL3JpbVxcc3RhYmxldFxcc29zXFxzKFxcZCsoXFwuXFxkKykqKS9pKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5iYWRhKSB7XHJcbiAgICAgICAgICAgIG9zVmVyc2lvbiA9IGdldEZpcnN0TWF0Y2goL2JhZGFcXC8oXFxkKyhcXC5cXGQrKSopL2kpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnRpemVuKSB7XHJcbiAgICAgICAgICAgIG9zVmVyc2lvbiA9IGdldEZpcnN0TWF0Y2goL3RpemVuW1xcL1xcc10oXFxkKyhcXC5cXGQrKSopL2kpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3NWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5vc3ZlcnNpb24gPSBvc1ZlcnNpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkZXZpY2UgdHlwZSBleHRyYWN0aW9uXHJcbiAgICAgICAgdmFyIG9zTWFqb3JWZXJzaW9uID0gIXJlc3VsdC53aW5kb3dzICYmIG9zVmVyc2lvbi5zcGxpdCgnLicpWzBdO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGFibGV0XHJcbiAgICAgICAgICAgIHx8IG5leHVzVGFibGV0XHJcbiAgICAgICAgICAgIHx8IGlvc2RldmljZSA9PSAnaXBhZCdcclxuICAgICAgICAgICAgfHwgKGFuZHJvaWQgJiYgKG9zTWFqb3JWZXJzaW9uID09IDMgfHwgKG9zTWFqb3JWZXJzaW9uID49IDQgJiYgIW1vYmlsZSkpKVxyXG4gICAgICAgICAgICB8fCByZXN1bHQuc2lsa1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICByZXN1bHQudGFibGV0ID0gdFxyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgIG1vYmlsZVxyXG4gICAgICAgICAgICB8fCBpb3NkZXZpY2UgPT0gJ2lwaG9uZSdcclxuICAgICAgICAgICAgfHwgaW9zZGV2aWNlID09ICdpcG9kJ1xyXG4gICAgICAgICAgICB8fCBhbmRyb2lkXHJcbiAgICAgICAgICAgIHx8IG5leHVzTW9iaWxlXHJcbiAgICAgICAgICAgIHx8IHJlc3VsdC5ibGFja2JlcnJ5XHJcbiAgICAgICAgICAgIHx8IHJlc3VsdC53ZWJvc1xyXG4gICAgICAgICAgICB8fCByZXN1bHQuYmFkYVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICByZXN1bHQubW9iaWxlID0gdFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR3JhZGVkIEJyb3dzZXIgU3VwcG9ydFxyXG4gICAgICAgIC8vIGh0dHA6Ly9kZXZlbG9wZXIueWFob28uY29tL3l1aS9hcnRpY2xlcy9nYnNcclxuICAgICAgICBpZiAocmVzdWx0Lm1zZWRnZSB8fFxyXG4gICAgICAgICAgICAocmVzdWx0Lm1zaWUgJiYgcmVzdWx0LnZlcnNpb24gPj0gMTApIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQueWFuZGV4YnJvd3NlciAmJiByZXN1bHQudmVyc2lvbiA+PSAxNSkgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC52aXZhbGRpICYmIHJlc3VsdC52ZXJzaW9uID49IDEuMCkgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC5jaHJvbWUgJiYgcmVzdWx0LnZlcnNpb24gPj0gMjApIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQuc2Ftc3VuZ0Jyb3dzZXIgJiYgcmVzdWx0LnZlcnNpb24gPj0gNCkgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC53aGFsZSAmJiBjb21wYXJlVmVyc2lvbnMoW3Jlc3VsdC52ZXJzaW9uLCAnMS4wJ10pID09PSAxKSB8fFxyXG4gICAgICAgICAgICAocmVzdWx0Lm16YnJvd3NlciAmJiBjb21wYXJlVmVyc2lvbnMoW3Jlc3VsdC52ZXJzaW9uLCAnNi4wJ10pID09PSAxKSB8fFxyXG4gICAgICAgICAgICAocmVzdWx0LmZvY3VzICYmIGNvbXBhcmVWZXJzaW9ucyhbcmVzdWx0LnZlcnNpb24sICcxLjAnXSkgPT09IDEpIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQuZmlyZWZveCAmJiByZXN1bHQudmVyc2lvbiA+PSAyMC4wKSB8fFxyXG4gICAgICAgICAgICAocmVzdWx0LnNhZmFyaSAmJiByZXN1bHQudmVyc2lvbiA+PSA2KSB8fFxyXG4gICAgICAgICAgICAocmVzdWx0Lm9wZXJhICYmIHJlc3VsdC52ZXJzaW9uID49IDEwLjApIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQuaW9zICYmIHJlc3VsdC5vc3ZlcnNpb24gJiYgcmVzdWx0Lm9zdmVyc2lvbi5zcGxpdChcIi5cIilbMF0gPj0gNikgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC5ibGFja2JlcnJ5ICYmIHJlc3VsdC52ZXJzaW9uID49IDEwLjEpXHJcbiAgICAgICAgICAgIHx8IChyZXN1bHQuY2hyb21pdW0gJiYgcmVzdWx0LnZlcnNpb24gPj0gMjApXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5hID0gdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKHJlc3VsdC5tc2llICYmIHJlc3VsdC52ZXJzaW9uIDwgMTApIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQuY2hyb21lICYmIHJlc3VsdC52ZXJzaW9uIDwgMjApIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQuZmlyZWZveCAmJiByZXN1bHQudmVyc2lvbiA8IDIwLjApIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQuc2FmYXJpICYmIHJlc3VsdC52ZXJzaW9uIDwgNikgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC5vcGVyYSAmJiByZXN1bHQudmVyc2lvbiA8IDEwLjApIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQuaW9zICYmIHJlc3VsdC5vc3ZlcnNpb24gJiYgcmVzdWx0Lm9zdmVyc2lvbi5zcGxpdChcIi5cIilbMF0gPCA2KVxyXG4gICAgICAgICAgICB8fCAocmVzdWx0LmNocm9taXVtICYmIHJlc3VsdC52ZXJzaW9uIDwgMjApXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5jID0gdFxyXG4gICAgICAgIH0gZWxzZSByZXN1bHQueCA9IHRcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG5cclxuICAgIHZhciBib3dzZXIgPSBkZXRlY3QodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgPyBuYXZpZ2F0b3IudXNlckFnZW50IHx8ICcnIDogJycpXHJcblxyXG4gICAgYm93c2VyLnRlc3QgPSBmdW5jdGlvbiAoYnJvd3Nlckxpc3QpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJyb3dzZXJMaXN0Lmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHZhciBicm93c2VySXRlbSA9IGJyb3dzZXJMaXN0W2ldO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJyb3dzZXJJdGVtID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJyb3dzZXJJdGVtIGluIGJvd3Nlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB2ZXJzaW9uIHByZWNpc2lvbnMgY291bnRcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogICBnZXRWZXJzaW9uUHJlY2lzaW9uKFwiMS4xMC4zXCIpIC8vIDNcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHZlcnNpb25cclxuICAgICAqIEByZXR1cm4ge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0VmVyc2lvblByZWNpc2lvbih2ZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHZlcnNpb24uc3BsaXQoXCIuXCIpLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFycmF5OjptYXAgcG9seWZpbGxcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gYXJyXHJcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gaXRlcmF0b3JcclxuICAgICAqIEByZXR1cm4ge0FycmF5fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBtYXAoYXJyLCBpdGVyYXRvcikge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXSwgaTtcclxuICAgICAgICBpZiAoQXJyYXkucHJvdG90eXBlLm1hcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGFyciwgaXRlcmF0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZXJhdG9yKGFycltpXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlIGJyb3dzZXIgdmVyc2lvbiB3ZWlnaHRcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogICBjb21wYXJlVmVyc2lvbnMoWycxLjEwLjIuMScsICAnMS44LjIuMS45MCddKSAgICAvLyAxXHJcbiAgICAgKiAgIGNvbXBhcmVWZXJzaW9ucyhbJzEuMDEwLjIuMScsICcxLjA5LjIuMS45MCddKTsgIC8vIDFcclxuICAgICAqICAgY29tcGFyZVZlcnNpb25zKFsnMS4xMC4yLjEnLCAgJzEuMTAuMi4xJ10pOyAgICAgLy8gMFxyXG4gICAgICogICBjb21wYXJlVmVyc2lvbnMoWycxLjEwLjIuMScsICAnMS4wODAwLjInXSk7ICAgICAvLyAtMVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge0FycmF5PFN0cmluZz59IHZlcnNpb25zIHZlcnNpb25zIHRvIGNvbXBhcmVcclxuICAgICAqIEByZXR1cm4ge051bWJlcn0gY29tcGFyaXNvbiByZXN1bHRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY29tcGFyZVZlcnNpb25zKHZlcnNpb25zKSB7XHJcbiAgICAgICAgLy8gMSkgZ2V0IGNvbW1vbiBwcmVjaXNpb24gZm9yIGJvdGggdmVyc2lvbnMsIGZvciBleGFtcGxlIGZvciBcIjEwLjBcIiBhbmQgXCI5XCIgaXQgc2hvdWxkIGJlIDJcclxuICAgICAgICB2YXIgcHJlY2lzaW9uID0gTWF0aC5tYXgoZ2V0VmVyc2lvblByZWNpc2lvbih2ZXJzaW9uc1swXSksIGdldFZlcnNpb25QcmVjaXNpb24odmVyc2lvbnNbMV0pKTtcclxuICAgICAgICB2YXIgY2h1bmtzID0gbWFwKHZlcnNpb25zLCBmdW5jdGlvbiAodmVyc2lvbikge1xyXG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBwcmVjaXNpb24gLSBnZXRWZXJzaW9uUHJlY2lzaW9uKHZlcnNpb24pO1xyXG5cclxuICAgICAgICAgICAgLy8gMikgXCI5XCIgLT4gXCI5LjBcIiAoZm9yIHByZWNpc2lvbiA9IDIpXHJcbiAgICAgICAgICAgIHZlcnNpb24gPSB2ZXJzaW9uICsgbmV3IEFycmF5KGRlbHRhICsgMSkuam9pbihcIi4wXCIpO1xyXG5cclxuICAgICAgICAgICAgLy8gMykgXCI5LjBcIiAtPiBbXCIwMDAwMDAwMDBcIlwiLCBcIjAwMDAwMDAwOVwiXVxyXG4gICAgICAgICAgICByZXR1cm4gbWFwKHZlcnNpb24uc3BsaXQoXCIuXCIpLCBmdW5jdGlvbiAoY2h1bmspIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXkoMjAgLSBjaHVuay5sZW5ndGgpLmpvaW4oXCIwXCIpICsgY2h1bms7XHJcbiAgICAgICAgICAgIH0pLnJldmVyc2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gaXRlcmF0ZSBpbiByZXZlcnNlIG9yZGVyIGJ5IHJldmVyc2VkIGNodW5rcyBhcnJheVxyXG4gICAgICAgIHdoaWxlICgtLXByZWNpc2lvbiA+PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIDQpIGNvbXBhcmU6IFwiMDAwMDAwMDA5XCIgPiBcIjAwMDAwMDAxMFwiID0gZmFsc2UgKGJ1dCBcIjlcIiA+IFwiMTBcIiA9IHRydWUpXHJcbiAgICAgICAgICAgIGlmIChjaHVua3NbMF1bcHJlY2lzaW9uXSA+IGNodW5rc1sxXVtwcmVjaXNpb25dKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjaHVua3NbMF1bcHJlY2lzaW9uXSA9PT0gY2h1bmtzWzFdW3ByZWNpc2lvbl0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcmVjaXNpb24gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbGwgdmVyc2lvbiBjaHVua3MgYXJlIHNhbWVcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGJyb3dzZXIgaXMgdW5zdXBwb3J0ZWRcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogICBib3dzZXIuaXNVbnN1cHBvcnRlZEJyb3dzZXIoe1xyXG4gICAgICogICAgIG1zaWU6IFwiMTBcIixcclxuICAgICAqICAgICBmaXJlZm94OiBcIjIzXCIsXHJcbiAgICAgKiAgICAgY2hyb21lOiBcIjI5XCIsXHJcbiAgICAgKiAgICAgc2FmYXJpOiBcIjUuMVwiLFxyXG4gICAgICogICAgIG9wZXJhOiBcIjE2XCIsXHJcbiAgICAgKiAgICAgcGhhbnRvbTogXCI1MzRcIlxyXG4gICAgICogICB9KTtcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9ICBtaW5WZXJzaW9ucyBtYXAgb2YgbWluaW1hbCB2ZXJzaW9uIHRvIGJyb3dzZXJcclxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IFtzdHJpY3RNb2RlID0gZmFsc2VdIGZsYWcgdG8gcmV0dXJuIGZhbHNlIGlmIGJyb3dzZXIgd2Fzbid0IGZvdW5kIGluIG1hcFxyXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgW3VhXSB1c2VyIGFnZW50IHN0cmluZ1xyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gaXNVbnN1cHBvcnRlZEJyb3dzZXIobWluVmVyc2lvbnMsIHN0cmljdE1vZGUsIHVhKSB7XHJcbiAgICAgICAgdmFyIF9ib3dzZXIgPSBib3dzZXI7XHJcblxyXG4gICAgICAgIC8vIG1ha2Ugc3RyaWN0TW9kZSBwYXJhbSBvcHRpb25hbCB3aXRoIHVhIHBhcmFtIHVzYWdlXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzdHJpY3RNb2RlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB1YSA9IHN0cmljdE1vZGU7XHJcbiAgICAgICAgICAgIHN0cmljdE1vZGUgPSB2b2lkICgwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzdHJpY3RNb2RlID09PSB2b2lkICgwKSkge1xyXG4gICAgICAgICAgICBzdHJpY3RNb2RlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1YSkge1xyXG4gICAgICAgICAgICBfYm93c2VyID0gZGV0ZWN0KHVhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gXCJcIiArIF9ib3dzZXIudmVyc2lvbjtcclxuICAgICAgICBmb3IgKHZhciBicm93c2VyIGluIG1pblZlcnNpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChtaW5WZXJzaW9ucy5oYXNPd25Qcm9wZXJ0eShicm93c2VyKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9ib3dzZXJbYnJvd3Nlcl0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pblZlcnNpb25zW2Jyb3dzZXJdICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Jyb3dzZXIgdmVyc2lvbiBpbiB0aGUgbWluVmVyc2lvbiBtYXAgc2hvdWxkIGJlIGEgc3RyaW5nOiAnICsgYnJvd3NlciArICc6ICcgKyBTdHJpbmcobWluVmVyc2lvbnMpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJyb3dzZXIgdmVyc2lvbiBhbmQgbWluIHN1cHBvcnRlZCB2ZXJzaW9uLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJlVmVyc2lvbnMoW3ZlcnNpb24sIG1pblZlcnNpb25zW2Jyb3dzZXJdXSkgPCAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc3RyaWN0TW9kZTsgLy8gbm90IGZvdW5kXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBicm93c2VyIGlzIHN1cHBvcnRlZFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbWluVmVyc2lvbnMgbWFwIG9mIG1pbmltYWwgdmVyc2lvbiB0byBicm93c2VyXHJcbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbc3RyaWN0TW9kZSA9IGZhbHNlXSBmbGFnIHRvIHJldHVybiBmYWxzZSBpZiBicm93c2VyIHdhc24ndCBmb3VuZCBpbiBtYXBcclxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gIFt1YV0gdXNlciBhZ2VudCBzdHJpbmdcclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNoZWNrKG1pblZlcnNpb25zLCBzdHJpY3RNb2RlLCB1YSkge1xyXG4gICAgICAgIHJldHVybiAhaXNVbnN1cHBvcnRlZEJyb3dzZXIobWluVmVyc2lvbnMsIHN0cmljdE1vZGUsIHVhKTtcclxuICAgIH1cclxuXHJcbiAgICBib3dzZXIuaXNVbnN1cHBvcnRlZEJyb3dzZXIgPSBpc1Vuc3VwcG9ydGVkQnJvd3NlcjtcclxuICAgIGJvd3Nlci5jb21wYXJlVmVyc2lvbnMgPSBjb21wYXJlVmVyc2lvbnM7XHJcbiAgICBib3dzZXIuY2hlY2sgPSBjaGVjaztcclxuXHJcbiAgICAvKlxyXG4gICAgICogU2V0IG91ciBkZXRlY3QgbWV0aG9kIHRvIHRoZSBtYWluIGJvd3NlciBvYmplY3Qgc28gd2UgY2FuXHJcbiAgICAgKiByZXVzZSBpdCB0byB0ZXN0IG90aGVyIHVzZXIgYWdlbnRzLlxyXG4gICAgICogVGhpcyBpcyBuZWVkZWQgdG8gaW1wbGVtZW50IGZ1dHVyZSB0ZXN0cy5cclxuICAgICAqL1xyXG4gICAgYm93c2VyLl9kZXRlY3QgPSBkZXRlY3Q7XHJcblxyXG4gICAgLypcclxuICAgICAqIFNldCBvdXIgZGV0ZWN0IHB1YmxpYyBtZXRob2QgdG8gdGhlIG1haW4gYm93c2VyIG9iamVjdFxyXG4gICAgICogVGhpcyBpcyBuZWVkZWQgdG8gaW1wbGVtZW50IGJvd3NlciBpbiBzZXJ2ZXIgc2lkZVxyXG4gICAgICovXHJcbiAgICBib3dzZXIuZGV0ZWN0ID0gZGV0ZWN0O1xyXG4gICAgcmV0dXJuIGJvd3NlclxyXG59KTsiLCIvLyBQcm9taXNlLmZpbmFsbHkgaGFzIG5vdCBiZWVuIGltcGxlbWVudGVkIGluIE1pY3Jvc29mdCBFZGdlXHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1Byb21pc2UvZmluYWxseVxyXG5pZiAoUHJvbWlzZS5wcm90b3R5cGUuZmluYWxseSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAvLyBJdCdzIHJlcGxhY2VkIHVuY29uZGl0aW9uYWxseSB0byBwcmVzZXJ2ZSB0aGUgZXhwZWN0ZWQgYmVoYXZpb3JcclxuICAgIC8vIGluIHByb2dyYW1zIGV2ZW4gaWYgdGhlcmUncyBldmVyIGEgbmF0aXZlIGZpbmFsbHkuXHJcbiAgICB3aW5kb3cuUHJvbWlzZS5wcm90b3R5cGVbJ2ZpbmFsbHknXSA9IGZ1bmN0aW9uIGZpbmFsbHlQb2x5ZmlsbChjYWxsYmFjaykge1xyXG4gICAgICAgIGxldCBjb25zdHJ1Y3RvciA9IHRoaXMuY29uc3RydWN0b3I7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnRoZW4oKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCAocmVhc29uKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgcmVhc29uO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn0iLCJ2YXIgbGF5b3V0ciA9IHdpbmRvdy5sYXlvdXRyIHx8IHt9O1xyXG57XHJcbiAgICBsYXlvdXRyLnNpdGVOYW1lID0gJ2xheW91dHInO1xyXG5cclxuICAgIGxheW91dHIudGhyb3R0bGVJbnRlcnZhbCA9IDUwO1xyXG4gICAgbGF5b3V0ci5kZWJvdW5jZUludGVydmFsID0gNTA7XHJcblxyXG4gICAgbGF5b3V0ci50cmFuc2l0aW9uVGltZSA9IDQwMDtcclxuICAgIGxheW91dHIuZmFkZU91dFRpbWUgPSA1MDA7XHJcbiAgICBsYXlvdXRyLmh0bWxPdmVyZmxvd0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgbGF5b3V0ci5zbWFsbEJyZWFrcG9pbnQgPSA3MzI7XHJcbiAgICBsYXlvdXRyLnNjcm9sbGJhcldpZHRoID0gMDtcclxuICAgIGxheW91dHIubG9hZGluZ0NvdW50ID0gMDtcclxuICAgIGxheW91dHIuZG9jdW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICBsYXlvdXRyLmZ1bGxzY3JlZW4gPSBmYWxzZTtcclxuICAgIGxheW91dHIuYWpheCA9ICdkaXN0L2FqYXgvJztcclxuICAgIGxheW91dHIuYXJyb3dLZXlMb2NrZWQgPSBmYWxzZTtcclxuICAgIGxheW91dHIuc29ydCA9IG5ldyBJbnRsLkNvbGxhdG9yKHVuZGVmaW5lZCwgeyBudW1lcmljOiB0cnVlLCBzZW5zaXRpdml0eTogJ2Jhc2UnIH0pLmNvbXBhcmU7XHJcblxyXG4gICAgbGF5b3V0ci5uYXZpZ2F0aW9uID0gW107XHJcbiAgICBib3dzZXIuZGVza3RvcCA9ICFib3dzZXIubW9iaWxlICYmICFib3dzZXIudGFibGV0O1xyXG5cclxuICAgIGxldCBsID0gd2luZG93LmxvY2F0aW9uLFxyXG4gICAgICAgIHNlZ21lbnRDb3VudCA9IGwub3JpZ2luLmVuZHNXaXRoKCdnaXRodWIuaW8nKSA/IDEgOiAwO1xyXG4gICAgbGF5b3V0ci5ob3N0ID0gYCR7bC5wcm90b2NvbH0vLyR7bC5ob3N0bmFtZX0ke2wucG9ydCA/IGA6JHtsLnBvcnR9YCA6ICcnfSR7bC5wYXRobmFtZS5zcGxpdCgnLycpLnNsaWNlKDAsIDEgKyBzZWdtZW50Q291bnQpLmpvaW4oJy8nKX0vYDtcclxuXHJcbiAgICBsYXlvdXRyLmF3YWl0SW50ZXJ2YWwgPSA1MDtcclxuICAgIC8vIHdpbmRvdy5BcmVpb24gPSBHaG9zdGxhYlxyXG4gICAgbGF5b3V0ci5pc0xvY2FsaG9zdCA9IHdpbmRvdy5BcmVpb24gfHwgbC5ob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCcgfHwgbC5ob3N0bmFtZSA9PT0gJzEyNy4wLjAuMScgfHwgbC5ob3N0bmFtZSA9PT0gJzE5Mi4xNjguNDAuMTAwJztcclxuXHJcbiAgICBsYXlvdXRyLnNldHRpbmdzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNldHRpbmdzXCIpKTtcclxuICAgIGlmIChsYXlvdXRyLnNldHRpbmdzID09PSBudWxsKSBsYXlvdXRyLnNldHRpbmdzID0gW107XHJcbiAgICBsYXlvdXRyLnRoZW1lID0gJ2xpZ2h0JztcclxuICAgIGxheW91dHIuc2V0dGluZ3MuZm9yRWFjaCgoZW50cnkpID0+IHtcclxuICAgICAgICBpZiAoZW50cnkubmFtZSA9PT0gJ3RoZW1lJykge1xyXG4gICAgICAgICAgICBsYXlvdXRyLnRoZW1lID0gZW50cnkuaWQuc3Vic3RyaW5nKGVudHJ5LmlkLmluZGV4T2YoXCItXCIpICsgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgoKSA9PiB7XHJcbiAgICAgICAgbGF5b3V0ci5odG1sID0gJCgnaHRtbCcpO1xyXG4gICAgICAgIGxheW91dHIuaGVhZCA9ICQoJ2hlYWQnKTtcclxuICAgICAgICBsYXlvdXRyLmJvZHkgPSAkKCdib2R5Jyk7XHJcbiAgICAgICAgbGF5b3V0ci5tYWluID0gJCgnbWFpbicpO1xyXG4gICAgICAgIGxheW91dHIuY29udGVudCA9ICQoJyNjb250ZW50ID4gZGl2Jyk7XHJcbiAgICAgICAgbGF5b3V0ci5oZWFkZXIgPSAkKCdoZWFkZXInKTtcclxuICAgICAgICBsYXlvdXRyLmZvb3RlciA9ICQoJ2Zvb3RlcicpO1xyXG4gICAgICAgIGxheW91dHIubGVmdCA9ICQoJyNsZWZ0Jyk7XHJcbiAgICAgICAgbGF5b3V0ci5yaWdodCA9ICQoJyNyaWdodCcpO1xyXG4gICAgICAgIGxheW91dHIubG9hZGluZyA9ICQoJyNsb2FkaW5nJyk7XHJcbiAgICAgICAgbGF5b3V0ci5vdmVyZmxvdyA9ICQoJyNvdmVyZmxvdycpO1xyXG4gICAgICAgIGxheW91dHIubW9kYWwgPSAkKCcjbW9kYWwnKTtcclxuICAgICAgICBsYXlvdXRyLnRpdGxlID0gJCgnI3RpdGxlJyk7XHJcbiAgICAgICAgbGF5b3V0ci5hdXRoZW50aWNhdGlvbiA9ICQoJyNhdXRoZW50aWNhdGlvbicpO1xyXG4gICAgICAgIGxheW91dHIudW5hdXRoZW50aWNhdGVkID0gbGF5b3V0ci5hdXRoZW50aWNhdGlvbi5jaGlsZHJlbignLnVuYXV0aGVudGljYXRlZCcpO1xyXG4gICAgICAgIGxheW91dHIuYXV0aGVudGljYXRlZCA9IGxheW91dHIuYXV0aGVudGljYXRpb24uY2hpbGRyZW4oJy5hdXRoZW50aWNhdGVkJyk7XHJcbiAgICAgICAgbGF5b3V0ci5hdXRoZW50aWNhdGVkTGlua3MgPSBsYXlvdXRyLmF1dGhlbnRpY2F0aW9uLmZpbmQoJy5saW5rcycpO1xyXG4gICAgICAgIGxheW91dHIuY29va2llID0gJCgnI2Nvb2tpZScpO1xyXG4gICAgICAgIGxheW91dHIuZm9jdXMgPSAkKCcjZm9jdXMnKTtcclxuICAgIH0pO1xyXG59Iiwie1xyXG4gICAgU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlQWxsID0gZnVuY3Rpb24gKHNlYXJjaCwgcmVwbGFjZW1lbnQpIHtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGFyZ2V0LnJlcGxhY2UobmV3IFJlZ0V4cChzZWFyY2gsICdnJyksIHJlcGxhY2VtZW50KTtcclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5ndWlkID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCBzNCA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXHJcbiAgICAgICAgICAgICAgICAudG9TdHJpbmcoMTYpXHJcbiAgICAgICAgICAgICAgICAuc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGAke3M0KCkgKyBzNCgpfS0ke3M0KCl9LSR7czQoKX0tJHtzNCgpfS0ke3M0KCkgKyBzNCgpICsgczQoKX1gO1xyXG4gICAgfTtcclxuXHJcbiAgICBsYXlvdXRyLmlzU21hbGxCcmVha3BvaW50ID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiAkKHdpbmRvdykub3V0ZXJXaWR0aCgpIDwgNzMyIHx8IGxheW91dHIuaXNBc2lkZUxlZnQoKSAmJiAhbGF5b3V0ci5pc0FzaWRlTGVmdFNocmluaygpIHx8IGxheW91dHIuaXNBc2lkZVJpZ2h0KCkgJiYgIWxheW91dHIuaXNBc2lkZVJpZ2h0U2hyaW5rKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaXNBc2lkZSA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gbGF5b3V0ci5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnKS5sZW5ndGg7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaXNBc2lkZUxlZnQgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxheW91dHIuaHRtbC5hdHRyKCdkYXRhLWFzaWRlJykgPT09ICdsZWZ0JztcclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5pc0FzaWRlUmlnaHQgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxheW91dHIuaHRtbC5hdHRyKCdkYXRhLWFzaWRlJykgPT09ICdyaWdodCc7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaXNBc2lkZUxlZnRTaHJpbmsgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxheW91dHIuaHRtbC5oYXNDbGFzcygnbGVmdC1zaHJpbmsnKSAmJiBsYXlvdXRyLmlzQXNpZGVMZWZ0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaXNBc2lkZVJpZ2h0U2hyaW5rID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBsYXlvdXRyLmh0bWwuaGFzQ2xhc3MoJ3JpZ2h0LXNocmluaycpICYmIGxheW91dHIuaXNBc2lkZVJpZ2h0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaXNBc2lkZUxlZnRDbG9zZU9uQ2xpY2tPdXRzaWRlID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBsYXlvdXRyLmh0bWwuaGFzQ2xhc3MoJ2Nsb3NlLWxlZnQtY2xpY2stb3V0c2lkZScpO1xyXG4gICAgfTtcclxuICAgIGxheW91dHIuaXNBc2lkZVJpZ2h0Q2xvc2VPbkNsaWNrT3V0c2lkZSA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gbGF5b3V0ci5odG1sLmhhc0NsYXNzKCdjbG9zZS1yaWdodC1jbGljay1vdXRzaWRlJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaXNNb2RhbCA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gbGF5b3V0ci5odG1sLmhhc0NsYXNzKCdtb2RhbCcpO1xyXG4gICAgfTtcclxuXHJcbiAgICBsYXlvdXRyLmlzTW9kYWxGb3JtID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBsYXlvdXRyLmh0bWwuYXR0cignZGF0YS1tb2RhbCcpID09PSAnZm9ybSc7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaXNNb2RhbEltYWdlID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBsYXlvdXRyLmh0bWwuYXR0cignZGF0YS1tb2RhbCcpID09PSAnaW1hZ2UnO1xyXG4gICAgfTtcclxuXHJcbiAgICBsYXlvdXRyLmlzRm9jdXMgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxheW91dHIuaHRtbC5oYXNDbGFzcygnZm9jdXMnKSAmJiBsYXlvdXRyLmh0bWwuYXR0cignZGF0YS1mb2N1cycpID09PSAndHJ1ZSc7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaXNUVFMgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxheW91dHIuaHRtbC5oYXNDbGFzcygndHRzJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaXNUVFNFbmFibGVkID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBsYXlvdXRyLmh0bWwuaGFzQ2xhc3MoJ3R0cycpICYmIGxheW91dHIuaHRtbC5hdHRyKCdkYXRhLXR0cycpID09PSAndHJ1ZSc7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaXNBdXRoZW50aWNhdGlvbiA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gbGF5b3V0ci5odG1sLmF0dHIoJ2RhdGEtYXV0aGVudGljYXRpb24nKSAhPT0gJyc7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaXNMb2FkaW5nID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBsYXlvdXRyLmh0bWwuaGFzQ2xhc3MoJ2xvYWRpbmcnKTtcclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5pc1Njcm9sbERpc2FibGVkID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBsYXlvdXRyLmh0bWwuaGFzQ2xhc3MoJ3Njcm9sbC1kaXNhYmxlZCcpO1xyXG4gICAgfTtcclxuXHJcbiAgICBsYXlvdXRyLmlzQ2xvc2VMZWZ0UGFnZUNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gbGF5b3V0ci5odG1sLmhhc0NsYXNzKCdjbG9zZS1sZWZ0LXBhZ2UtY2hhbmdlJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaXNUcmFuc2l0aW9ucyA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gbGF5b3V0ci5odG1sLmhhc0NsYXNzKCd0cmFuc2l0aW9ucycpO1xyXG4gICAgfTtcclxuXHJcbiAgICBsYXlvdXRyLmlzU3dpcGUgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxheW91dHIuaHRtbC5oYXNDbGFzcygnc3dpcGUnKTtcclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5pc1NpdGVMb2FkZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxheW91dHIuaHRtbC5oYXNDbGFzcygnc2l0ZS1sb2FkZWQnKTtcclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5jYXBpdGFsaXplID0gKHN0cmluZykgPT4ge1xyXG4gICAgICAgIHJldHVybiBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuc2Nyb2xsVG9wID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBNYXRoLm1heChsYXlvdXRyLmJvZHkuc2Nyb2xsVG9wKCksIGxheW91dHIubWFpbi5zY3JvbGxUb3AoKSwgbGF5b3V0ci5odG1sLnNjcm9sbFRvcCgpKTtcclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci50cnlQYXJzZUludCA9IChzdHIsIGRlZmF1bHRWYWx1ZSkgPT4ge1xyXG4gICAgICAgIGxldCByZXRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcclxuICAgICAgICBpZiAoc3RyICE9PSB1bmRlZmluZWQgJiYgc3RyICE9PSBudWxsICYmIHN0ci5sZW5ndGggPiAwICYmICFpc05hTihzdHIpKSB7XHJcbiAgICAgICAgICAgIHJldFZhbHVlID0gcGFyc2VJbnQoc3RyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldFZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICBsYXlvdXRyLnRyeVBhcnNlRmxvYXQgPSAoc3RyLCBkZWZhdWx0VmFsdWUpID0+IHtcclxuICAgICAgICBsZXQgcmV0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgaWYgKHN0ciAhPT0gdW5kZWZpbmVkICYmIHN0ciAhPT0gbnVsbCAmJiBzdHIubGVuZ3RoID4gMCAmJiAhaXNOYU4oc3RyKSkge1xyXG4gICAgICAgICAgICByZXRWYWx1ZSA9IHBhcnNlRmxvYXQoc3RyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldFZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICBsYXlvdXRyLnRyeVBhcnNlSlNPTiA9IChzdHIsIGRlZmF1bHRWYWx1ZSkgPT4ge1xyXG4gICAgICAgIGxldCByZXRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXRWYWx1ZSA9IEpTT04ucGFyc2Uoc3RyKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXRWYWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5pc1RydWUgPSAoc3RyKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHN0ciA9PT0gJ3RydWUnO1xyXG4gICAgfTtcclxufSIsIntcclxuICAgICQoKCkgPT4ge1xyXG4gICAgICAgIGlmIChib3dzZXIubXNlZGdlKSB7XHJcbiAgICAgICAgICAgIGxheW91dHIuaHRtbC5hZGRDbGFzcygnbXNlZGdlJyk7IC8vIHVzZWQgYnkgbGF5b3V0ci5lbmFibGVTY3JvbGwoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYm93c2VyLm1vYmlsZSkge1xyXG4gICAgICAgICAgICBsYXlvdXRyLmh0bWwuYWRkQ2xhc3MoJ21vYmlsZScpOyAvLyBkaXNhYmxlcyBmaXhlZCBmb290ZXJcclxuICAgICAgICB9IGVsc2UgaWYgKGJvd3Nlci50YWJsZXQpIHtcclxuICAgICAgICAgICAgbGF5b3V0ci5odG1sLmFkZENsYXNzKCd0YWJsZXQnKTsgLy8gZG9lcyBub3RoaW5nIGN1cnJlbnRseVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxheW91dHIuaHRtbC5hZGRDbGFzcygnZGVza3RvcCcpOyAvLyBlbmFibGVzIGhvdmVyIGVmZmVjdHNcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChib3dzZXIuYW5kcm9pZCkge1xyXG4gICAgICAgICAgICBsYXlvdXRyLmh0bWwuYWRkQ2xhc3MoJ2FuZHJvaWQnKTsgLy8gdXNlZCBieSBtb2RhbFxyXG4gICAgICAgIH0gZWxzZSBpZiAoYm93c2VyLmlvcykge1xyXG4gICAgICAgICAgICBsYXlvdXRyLmh0bWwuYWRkQ2xhc3MoJ2lvcycpOyAvLyB1c2VkIHRvIGFwcGx5IGZvY3VzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYm93c2VyLm1zZWRnZSkge1xyXG4gICAgICAgICAgICAvLyBkaXNhYmxlIHNtb290aCBzY3JvbGxpbmcsIHNpbmNlIGl0IGNhdXNlcyBlbGVtZW50IGp1bXBpbmcvbGFnZ2luZyBvbiBzY3JvbGxcclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjk0MTY0NDgvaG93LXRvLWRpc2FibGUtc21vb3RoLXNjcm9sbGluZy1pbi1pZTExXHJcbiAgICAgICAgICAgIGxheW91dHIuYm9keS5vbihcIm1vdXNld2hlZWxcIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIGlmICghbGF5b3V0ci5pc01vZGFsKCkgJiYgZXZlbnQuY3RybEtleSAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXNpZGUgPSB0YXJnZXQuY2xvc2VzdCgnYXNpZGUgPiAuY29udGVudCcpIHx8IHRhcmdldC5wYXJlbnRzKCdhc2lkZSAuY29udGVudCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVlbERlbHRhID0gZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY3JvbGxQb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXNpZGUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA9IGFzaWRlLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc2lkZS5zY3JvbGxUb3AoY3VycmVudFNjcm9sbFBvc2l0aW9uIC0gd2hlZWxEZWx0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNjcm9sbFBvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgY3VycmVudFNjcm9sbFBvc2l0aW9uIC0gd2hlZWxEZWx0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIGF0IHNvbWUgem9vbSBsZXZlbHMgZWRnZS9pZSBtYWtlcyAkKHdpbmRvdykgaGVpZ2hlciB0aGFuICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgIC8vIGl0IGNhdXNlcyBhIGdhcCBiZXR3ZWVuIGZvb3RlciBhbmQgdGhlIGJvdHRvbSBvZiAkKHdpbmRvdykuXHJcbiAgICAgICAgICAgICQod2luZG93KS5zY3JvbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNjcm9sbFRvcCA9IHNlbGYucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgICAgIGlmIChzY3JvbGxUb3AgKyAkKHdpbmRvdykuaGVpZ2h0KCkgPj0gJChkb2N1bWVudCkuaGVpZ2h0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLmh0bWwuYWRkQ2xhc3MoJ3N1YnBpeGVsJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIuaHRtbC5yZW1vdmVDbGFzcygnc3VicGl4ZWwnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0iLCJ7XHJcbiAgICBsYXlvdXRyLmxvYWQgPSAoKCkgPT4ge1xyXG4gICAgICAgIGxldCBfbG9hZCA9ICh0YWcpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuICh1cmwpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gJ2xpbmsnIHx8IHRhZyA9PT0gJ3NjcmlwdCcgfHwgdGFnID09PSAnaW1nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gJ2ltZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gJ2xpbmsnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnR5cGUgPSAndGV4dC9jc3MnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZWwgPSAnc3R5bGVzaGVldCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmhyZWYgPSB1cmw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICdpbWcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFzeW5jID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3JjID0gdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gJ2ltZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9ICdoaWRkZW4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0YWcgPT09ICdodG1sJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCh1cmwpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2Uuc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjc3M6IF9sb2FkKCdsaW5rJyksXHJcbiAgICAgICAgICAgIGpzOiBfbG9hZCgnc2NyaXB0JyksXHJcbiAgICAgICAgICAgIGltZzogX2xvYWQoJ2ltZycpLFxyXG4gICAgICAgICAgICBodG1sOiBfbG9hZCgnaHRtbCcpXHJcbiAgICAgICAgfTtcclxuICAgIH0pKCk7XHJcbn0iLCJ7XHJcbiAgICBsYXlvdXRyLnByb21pc2VDU1MgPSBsYXlvdXRyLmxvYWQuY3NzKGAke2xheW91dHIuaG9zdH1kaXN0L2Nzcy90aGVtZS8ke2xheW91dHIudGhlbWV9LmNzc2ApLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgY3NzOicsIGUpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgICQoKCkgPT4ge1xyXG4gICAgICAgIGxheW91dHIuZm9vdGVyLmh0bWwoYDxwPlxcdTAwQTkgJHtuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCl9IEZyZWRlcmlrIE5pZWxzZW48L3A+YCk7XHJcblxyXG4gICAgICAgIC8vbGF5b3V0ci5zZXRIdG1sU2Nyb2xsKCk7IC8vIG91dGNvbW1lbnQgaWYgaXQgY2FuIGJlIGRpc2FibGVkIGF0IGZpcnN0IHBhZ2UgbG9hZFxyXG5cclxuICAgICAgICBsYXlvdXRyLmxvYWQuaHRtbChgJHtsYXlvdXRyLmhvc3R9JHtsYXlvdXRyLmFqYXh9c3ZnL2Jhc2UuaHRtbGApLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICQocmVzcG9uc2UpLnByZXBlbmRUbyhsYXlvdXRyLmJvZHkpO1xyXG4gICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxheW91dHIuc2hvd1BvcHVwQWxlcnQoJ0ZhaWxlZCB0byBsb2FkIGJhc2Ugc3ZnIGh0bWwnLCAnZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChib3dzZXIuYW5kcm9pZCkge1xyXG4gICAgICAgICAgICAvLyBhbmRyb2lkIGRvZXNuJ3QgaGFuZGxlIHZoIGNvcnJlY3RseSwgc28gaXQgZ2V0cyBjb252ZXJ0ZWQgdG8gcHhcclxuICAgICAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGF5b3V0ci5pc01vZGFsKCkgJiYgbGF5b3V0ci5pc01vZGFsSW1hZ2UoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIubW9kYWwuZmluZCgnI21vZGFsLWltZycpLmNzcygnbWF4LWhlaWdodCcsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQod2luZG93KS5jbGljaygoZSkgPT4ge1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSAkKGUudGFyZ2V0KSxcclxuICAgICAgICAgICAgbW9kYWwgPSB0YXJnZXQuY2xvc2VzdChsYXlvdXRyLm1vZGFsWzBdKTtcclxuXHJcbiAgICAgICAgaWYgKCFsYXlvdXRyLmlzTG9hZGluZygpICYmICFsYXlvdXRyLmlzRm9jdXMoKSkge1xyXG4gICAgICAgICAgICBpZiAoYm93c2VyLmlvcykge1xyXG4gICAgICAgICAgICAgICAgLy8gaW9zIGJyb3dzZXJzIGRvZXNuJ3QgYXBwbHkgOmZvY3VzIHRvIGJ1dHRvbnMgaW4gbWFueSBjYXNlcyxcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgZm9yY2VzIDpmb2N1cyB0byBiZSBhcHBsaWVkIGNvcnJlY3RseS5cclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQucGFyZW50cygnYnV0dG9uJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnBhcmVudHMoJ2J1dHRvbicpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5jbG9zZXN0KCdidXR0b24nKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGxheW91dHIuaXNBdXRoZW50aWNhdGlvbigpICYmICF0YXJnZXQuY2xvc2VzdCgnI2F1dGhlbnRpY2F0aW9uJykubGVuZ3RoICYmICF0YXJnZXQuY2xvc2VzdCgnI21vZGFsJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmh0bWwuYXR0cignZGF0YS1hdXRoZW50aWNhdGlvbicsICcnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RhbC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpbWFnZSA9IGxheW91dHIuaXNNb2RhbEltYWdlKCkgJiYgIXRhcmdldC5jbG9zZXN0KCcjbW9kYWwtdG9nZ2xlJykubGVuZ3RoICYmICF0YXJnZXQuY2xvc2VzdCgnI21vZGFsLXRpdGxlJykubGVuZ3RoICYmICF0YXJnZXQuY2xvc2VzdCgnI21vZGFsLWRlc2NyaXB0aW9uJykubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm0gPSBsYXlvdXRyLmlzTW9kYWxGb3JtKCkgJiYgIXRhcmdldC5jbG9zZXN0KCcjbW9kYWwgPiBkaXYgPiBkaXYgPiBkaXYnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2UgfHwgZm9ybSB8fCB0YXJnZXQuY2xvc2VzdCgnI21vZGFsLWNsb3NlJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5jbG9zZU1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaXNTbWFsbEJyZWFrcG9pbnQgPSBsYXlvdXRyLmlzU21hbGxCcmVha3BvaW50KCksXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IGxheW91dHIuaXNBc2lkZUxlZnQoKSAmJiAobGF5b3V0ci5pc0FzaWRlTGVmdENsb3NlT25DbGlja091dHNpZGUoKSB8fCBpc1NtYWxsQnJlYWtwb2ludCkgJiYgIXRhcmdldC5jbG9zZXN0KFwiI2xlZnRcIikubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gbGF5b3V0ci5pc0FzaWRlUmlnaHQoKSAmJiAobGF5b3V0ci5pc0FzaWRlUmlnaHRDbG9zZU9uQ2xpY2tPdXRzaWRlKCkgfHwgaXNTbWFsbEJyZWFrcG9pbnQpICYmICF0YXJnZXQuY2xvc2VzdChcIiNyaWdodFwiKS5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgbm90VGFyZ2V0ID0gIXRhcmdldC5jbG9zZXN0KFwiLmFzaWRlXCIpLmxlbmd0aCAmJiAhdGFyZ2V0LmNsb3Nlc3QoJy5wb3B1cCcpLmxlbmd0aCAmJiAhdGFyZ2V0LmNsb3Nlc3QoJyNjb29raWUnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoKGxlZnQgfHwgcmlnaHQpICYmIG5vdFRhcmdldCAmJiAhbGF5b3V0ci5pc0xvYWRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIuZW5hYmxlU2Nyb2xsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci50b2dnbGVBc2lkZSh1bmRlZmluZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59Iiwie1xyXG4gICAgbGF5b3V0ci5wcm9taXNlRm9udCA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBXZWJGb250LmxvYWQoe1xyXG4gICAgICAgICAgICB0eXBla2l0OiB7XHJcbiAgICAgICAgICAgICAgICBpZDogWydiaHozZHh4J11cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWN0aXZlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGluYWN0aXZlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICAvL2xheW91dHIuc2hvd1BvcHVwQWxlcnQoJ0ZhaWxlZCB0byBsb2FkIGZvbnRzJywgJ2RhbmdlcicpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICB9KTtcclxufSIsIntcclxuICAgIGxheW91dHIuY29udGVudExvYWRlZCA9IChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgbGF5b3V0ci5jaGVja1Jlc3BvbnNpdmVCYWNrZ3JvdW5kKGVsZW1lbnQuZmluZCgnLnJiJykpO1xyXG4gICAgICAgIGxheW91dHIuY2hlY2tMYXp5KGVsZW1lbnQuZmluZCgnLmxhenknKSk7XHJcbiAgICAgICAgbGF5b3V0ci5jaGVja0FjY29yZGlvbihlbGVtZW50LmZpbmQoJy5hY2NvcmRpb24nKSk7XHJcbiAgICAgICAgbGF5b3V0ci5jaGVja0Ryb3Bkb3duKGVsZW1lbnQuZmluZCgnc2VsZWN0LmRyb3Bkb3duJykpO1xyXG4gICAgICAgIGxheW91dHIuY2hlY2tUb29sdGlwKGVsZW1lbnQuZmluZCgnLnRvb2x0aXAnKSk7XHJcbiAgICAgICAgbGF5b3V0ci5jaGVja0Fzc2lnbm1lbnQoZWxlbWVudC5maW5kKCcuYXNzaWdubWVudCcpKTtcclxuICAgICAgICBsYXlvdXRyLmNoZWNrTWF0aChlbGVtZW50LmZpbmQoJy5tYXRoJykpO1xyXG4gICAgICAgIGxheW91dHIuY2hlY2tNZWRpYShlbGVtZW50LmZpbmQoJ2F1ZGlvLCB2aWRlbycpKTtcclxuICAgICAgICBsYXlvdXRyLmNoZWNrTWFwKGVsZW1lbnQuZmluZCgnLm1hcCcpKTtcclxuICAgICAgICBsYXlvdXRyLmNoZWNrRGF0YXRhYmxlKGVsZW1lbnQuZmluZCgnLmRhdGFUYWJsZScpKTtcclxuICAgICAgICBsYXlvdXRyLmNoZWNrU3dpcGVyKGVsZW1lbnQuZmluZCgnLnN3aXBlcicpKTtcclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5wYWdlTG9hZGVkID0gKGluaXRpYWwpID0+IHtcclxuICAgICAgICBsZXQgcHJvbWlzZVNjcm9sbFRvcCA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgbGF5b3V0ci5tYWluLmNzcygnb3ZlcmZsb3cnLCAnYXV0bycpO1xyXG4gICAgICAgICAgICBsYXlvdXRyLm1haW4uc2Nyb2xsVG9wKDApO1xyXG4gICAgICAgICAgICBsYXlvdXRyLm1haW4uY3NzKCdvdmVyZmxvdycsICcnKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmh0bWwuc2Nyb2xsVG9wKDApO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWluaXRpYWwgJiYgbGF5b3V0ci5pc0Nsb3NlTGVmdFBhZ2VDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIudG9nZ2xlQXNpZGUodW5kZWZpbmVkLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMjAwKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbml0aWFsKSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLnByb21pc2VGb250LnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNzaXRlJykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5yZXNwb25zaXZlSGVhZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5jb250ZW50TG9hZGVkKGxheW91dHIuY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNjcm9sbCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzY3JvbGxcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIuZW5hYmxlU2Nyb2xsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJvbWlzZSB2ZXJzaW9uIGRvZXNuJ3QgYWx3YXlzIHNjcm9sbCB0byBjb3JyZWN0IHBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgJC5EZWZlcnJlZCgoZGVmZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjcm9sbCAhPT0gbnVsbCAmJiB3aW5kb3cubG9jYXRpb24uaHJlZiA9PT0gc2Nyb2xsLmhyZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzY3JvbGxUb3AgPSBsYXlvdXRyLmJvZHlbMF0uc2Nyb2xsSGVpZ2h0ID49IHNjcm9sbC5zY3JvbGxUb3AgPyBzY3JvbGwuc2Nyb2xsVG9wIDogbGF5b3V0ci5ib2R5WzBdLnNjcm9sbEhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCJodG1sLCBib2R5XCIpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogc2Nyb2xsVG9wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwLCBkZWZlci5yZXNvbHZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLmhpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIuaHRtbC5hZGRDbGFzcygnc2l0ZS1sb2FkZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbCgkLnRocm90dGxlKGxheW91dHIudGhyb3R0bGVJbnRlcnZhbCwgZmFsc2UsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIuc2V0U2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQod2luZG93KS5yZXNpemUoJC50aHJvdHRsZShsYXlvdXRyLnRocm90dGxlSW50ZXJ2YWwsIGZhbHNlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLmNoZWNrTW9kYWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIuc2V0SHRtbFNjcm9sbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5zZXRTY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmhpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmNvbnRlbnRMb2FkZWQobGF5b3V0ci5jb250ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufSIsIntcclxuICAgIGxheW91dHIucGFnZUZvcm0gPSAoKSA9PiB7XHJcbiAgICAgICAgbGF5b3V0ci5hZGRWYWxpZGF0aW9uKFxyXG4gICAgICAgICAgICBsYXlvdXRyLmNvbnRlbnQuZmluZCgnI2Zvcm0nKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWlubGVuZ3RoOiAyXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBtaW5sZW5ndGg6IDJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbmxlbmd0aDogMlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRfcmVnZXg6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb25maXJtX3Bhc3N3b3JkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZXF1YWxUbzogXCIjcGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVtYWlsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bl8xOiBcInJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bl8yOiBcInJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bl8zOiBcInJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bl80OiBcInJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bl81OiBcInJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bl82OiBcInJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgICAgICBnZW5kZXI6IFwicmVxdWlyZWRcIixcclxuICAgICAgICAgICAgICAgIGludGVyZXN0czogXCJyZXF1aXJlZFwiLFxyXG4gICAgICAgICAgICAgICAgYWdyZWU6IFwicmVxdWlyZWRcIixcclxuICAgICAgICAgICAgICAgIGZvbnRfc2l6ZTogXCJyZXF1aXJlZFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBcIlBsZWFzZSBlbnRlciB5b3VyIGZpcnN0IG5hbWVcIixcclxuICAgICAgICAgICAgICAgICAgICBtaW5sZW5ndGg6IFwiWW91ciBmaXJzdCBuYW1lIG11c3QgY29uc2lzdCBvZiBhdCBsZWFzdCAyIGNoYXJhY3RlcnNcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIGVudGVyIHlvdXIgbGFzdCBuYW1lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbWlubGVuZ3RoOiBcIllvdXIgbGFzdCBuYW1lIG11c3QgY29uc2lzdCBvZiBhdCBsZWFzdCAyIGNoYXJhY3RlcnNcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIGVudGVyIGEgdXNlcm5hbWVcIixcclxuICAgICAgICAgICAgICAgICAgICBtaW5sZW5ndGg6IFwiWW91ciB1c2VybmFtZSBtdXN0IGNvbnNpc3Qgb2YgYXQgbGVhc3QgMiBjaGFyYWN0ZXJzXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBcIlBsZWFzZSBwcm92aWRlIGEgcGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNvbmZpcm1fcGFzc3dvcmQ6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogXCJQbGVhc2UgcHJvdmlkZSBhIHBhc3N3b3JkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZXF1YWxUbzogXCJQbGVhc2UgZW50ZXIgdGhlIHNhbWUgcGFzc3dvcmQgYXMgYWJvdmVcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVtYWlsOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3NcIixcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXzE6IFwiUGxlYXNlIHNlbGVjdCBhbiBvcHRpb25cIixcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXzI6IFwiUGxlYXNlIHNlbGVjdCBhbiBvcHRpb25cIixcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXzM6IFwiUGxlYXNlIHNlbGVjdCBhbiBvcHRpb25cIixcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXzQ6IFwiUGxlYXNlIHNlbGVjdCBhbiBvcHRpb25cIixcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXzU6IFwiUGxlYXNlIHNlbGVjdCBhbiBvcHRpb25cIixcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXzY6IFwiUGxlYXNlIHNlbGVjdCBhbiBvcHRpb25cIixcclxuICAgICAgICAgICAgICAgIGdlbmRlcjogXCJQbGVhc2Ugc2VsZWN0IHlvdXIgZ2VuZGVyXCIsXHJcbiAgICAgICAgICAgICAgICBpbnRlcmVzdHM6IFwiUGxlYXNlIHNlbGVjdCBhdCBsZWFzdCBvbmUgaW50ZXJlc3RcIixcclxuICAgICAgICAgICAgICAgIGFncmVlOiBcIlBsZWFzZSBhY2NlcHQgb3VyIHBvbGljeVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfTtcclxufSIsIntcclxuICAgIGxldCBmdWxsc2NyZWVuU2Nyb2xsVG9wO1xyXG5cclxuICAgIGxheW91dHIucmVxdWVzdEZ1bGxTY3JlZW4gPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFsYXlvdXRyLmZ1bGxzY3JlZW4gJiYgYm93c2VyLmRlc2t0b3ApIHtcclxuICAgICAgICAgICAgZnVsbHNjcmVlblNjcm9sbFRvcCA9IGxheW91dHIuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgIGlmIChsYXlvdXRyLmRvY3VtZW50LnJlcXVlc3RGdWxsc2NyZWVuKSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmRvY3VtZW50LnJlcXVlc3RGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobGF5b3V0ci5kb2N1bWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuKSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmRvY3VtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChsYXlvdXRyLmRvY3VtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuKSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmRvY3VtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobGF5b3V0ci5kb2N1bWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5kb2N1bWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgZnVsbHNjcmVlbkNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICBsYXlvdXRyLmZ1bGxzY3JlZW4gPSAhbGF5b3V0ci5mdWxsc2NyZWVuO1xyXG4gICAgICAgIGlmICghbGF5b3V0ci5mdWxsc2NyZWVuICYmIGJvd3Nlci5kZXNrdG9wKSB7XHJcbiAgICAgICAgICAgIGlmIChsYXlvdXRyLmlzTW9kYWwoKSkge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5jbG9zZU1vZGFsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGF5b3V0ci5ib2R5LnNjcm9sbFRvcChmdWxsc2NyZWVuU2Nyb2xsVG9wKTtcclxuICAgICAgICAgICAgbGF5b3V0ci5odG1sLnNjcm9sbFRvcChmdWxsc2NyZWVuU2Nyb2xsVG9wKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLCBmdWxsc2NyZWVuQ2hhbmdlLCBmYWxzZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3pmdWxsc2NyZWVuY2hhbmdlJywgZnVsbHNjcmVlbkNoYW5nZSwgZmFsc2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIGZ1bGxzY3JlZW5DaGFuZ2UsIGZhbHNlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ01TRnVsbHNjcmVlbkNoYW5nZScsIGZ1bGxzY3JlZW5DaGFuZ2UsIGZhbHNlKTtcclxuXHJcbiAgICBsYXlvdXRyLmV4aXRGdWxsU2NyZWVuID0gKCkgPT4ge1xyXG4gICAgICAgIGlmIChsYXlvdXRyLmZ1bGxzY3JlZW4gJiYgYm93c2VyLmRlc2t0b3ApIHtcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIudG9nZ2xlRnVsbFNjcmVlbiA9IChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGxheW91dHIuZnVsbHNjcmVlbilcclxuICAgICAgICAgICAgZXhpdEZ1bGxTY3JlZW4oKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJlcXVlc3RGdWxsU2NyZWVuKGVsZW1lbnQpO1xyXG4gICAgfTtcclxufSIsIntcclxuICAgIGxldCBzY3JvbGxiYXJXaWR0aCA9ICgpID0+IHtcclxuICAgICAgICBsYXlvdXRyLmJvZHkuYXBwZW5kKCc8ZGl2IGlkPVwic2Nyb2xsYmFyLXdpZHRoXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBsYXlvdXRyLmJvZHkuY2hpbGRyZW4oJyNzY3JvbGxiYXItd2lkdGgnKTtcclxuICAgICAgICBlbGVtZW50LmNzcyh7XHJcbiAgICAgICAgICAgICdvdmVyZmxvdyc6IFwic2Nyb2xsXCIsXHJcbiAgICAgICAgICAgICd2aXNpYmlsaXR5JzogXCJoaWRkZW5cIixcclxuICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgJ3dpZHRoJzogJzEwMHB4JyxcclxuICAgICAgICAgICAgJ2hlaWdodCc6ICcxMDBweCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBsYXlvdXRyLnNjcm9sbGJhcldpZHRoID0gZWxlbWVudFswXS5vZmZzZXRXaWR0aCAtIGVsZW1lbnRbMF0uY2xpZW50V2lkdGg7XHJcbiAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5kaXNhYmxlU2Nyb2xsID0gKCkgPT4ge1xyXG4gICAgICAgIGlmIChsYXlvdXRyLmh0bWxPdmVyZmxvd0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgbGF5b3V0ci5odG1sT3ZlcmZsb3dFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChsYXlvdXRyLmlzTW9kYWwoKSkge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5jaGVja01vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLm1vZGFsLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHNjcm9sbFRvcCA9IGxheW91dHIuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgIGxheW91dHIuaHRtbC5hZGRDbGFzcygnc2Nyb2xsLWRpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIGxheW91dHIuYm9keS5zY3JvbGxUb3Aoc2Nyb2xsVG9wKTtcclxuICAgICAgICAgICAgbGF5b3V0ci5tYWluLnNjcm9sbFRvcChzY3JvbGxUb3ApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5lbmFibGVTY3JvbGwgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFsYXlvdXRyLmh0bWxPdmVyZmxvd0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgbGF5b3V0ci5odG1sT3ZlcmZsb3dFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKGxheW91dHIuaXNTaXRlTG9hZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzY3JvbGxUb3AgPSBsYXlvdXRyLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5odG1sLnJlbW92ZUNsYXNzKCdzY3JvbGwtZGlzYWJsZWQgbW9kYWwnKTtcclxuICAgICAgICAgICAgICAgIGxheW91dHIubWFpbi5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5ib2R5LnNjcm9sbFRvcChzY3JvbGxUb3ApOyAvLyBlZGdlLCBzYWZhcmlcclxuICAgICAgICAgICAgICAgIGxheW91dHIuaHRtbC5zY3JvbGxUb3Aoc2Nyb2xsVG9wKTsgLy8gY2hyb21lLCBmaXJlZm94LCBpZVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5odG1sLnJlbW92ZUNsYXNzKCdzY3JvbGwtZGlzYWJsZWQgbW9kYWwnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5zZXRIdG1sU2Nyb2xsID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICghbGF5b3V0ci5pc01vZGFsKCkgJiYgIWxheW91dHIuaXNMb2FkaW5nKCkgJiYgIWxheW91dHIuaHRtbE92ZXJmbG93RW5hYmxlZCAmJiAoIWxheW91dHIuaXNTbWFsbEJyZWFrcG9pbnQoKSB8fCBsYXlvdXRyLmlzU21hbGxCcmVha3BvaW50KCkgJiYgIWxheW91dHIuaXNBc2lkZUxlZnQoKSAmJiAhbGF5b3V0ci5pc0FzaWRlUmlnaHQoKSkpIHtcclxuICAgICAgICAgICAgbGF5b3V0ci5lbmFibGVTY3JvbGwoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGxheW91dHIuaXNNb2RhbCgpIHx8IGxheW91dHIuaXNTbWFsbEJyZWFrcG9pbnQoKSAmJiBsYXlvdXRyLmh0bWxPdmVyZmxvd0VuYWJsZWQgJiYgKGxheW91dHIuaXNBc2lkZUxlZnQoKSB8fCBsYXlvdXRyLmlzQXNpZGVSaWdodCgpKSkge1xyXG4gICAgICAgICAgICBsYXlvdXRyLmRpc2FibGVTY3JvbGwoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICQoKCkgPT4ge1xyXG4gICAgICAgIHNjcm9sbGJhcldpZHRoKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsYXlvdXRyLnNldFNjcm9sbFRvcCA9ICgpID0+IHtcclxuICAgICAgICBsZXQgZW50cnkgPSB7XHJcbiAgICAgICAgICAgIGhyZWY6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxyXG4gICAgICAgICAgICBzY3JvbGxUb3A6IGxheW91dHIuc2Nyb2xsVG9wKClcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzY3JvbGwnLCBKU09OLnN0cmluZ2lmeShlbnRyeSkpO1xyXG4gICAgfTtcclxuXHJcbn0iLCJ7XHJcbiAgICBsYXlvdXRyLnNob3dMb2FkaW5nID0gKCkgPT4ge1xyXG4gICAgICAgIGxheW91dHIubG9hZGluZ0NvdW50Kys7XHJcbiAgICAgICAgbGF5b3V0ci5kaXNhYmxlU2Nyb2xsKCk7XHJcbiAgICAgICAgbGF5b3V0ci5odG1sLmFkZENsYXNzKCdsb2FkaW5nJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuaGlkZUxvYWRpbmcgPSAoKSA9PiB7XHJcbiAgICAgICAgbGF5b3V0ci5sb2FkaW5nQ291bnQtLTtcclxuICAgICAgICBpZiAobGF5b3V0ci5sb2FkaW5nQ291bnQgPD0gMCkge1xyXG4gICAgICAgICAgICBsYXlvdXRyLmxvYWRpbmdDb3VudCA9IDA7XHJcbiAgICAgICAgICAgIGxheW91dHIuaHRtbC5yZW1vdmVDbGFzcygnbG9hZGluZycpO1xyXG4gICAgICAgICAgICBsYXlvdXRyLnNldEh0bWxTY3JvbGwoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59Iiwie1xyXG4gICAgbGV0IHRyYW5zaXRpb25Mb2NrID0gZmFsc2U7XHJcblxyXG4gICAgbGF5b3V0ci5hc2lkZUNoYW5nZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHRyaWdnZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxheW91dHIuaHRtbC50cmlnZ2VyKCdhc2lkZS1jaGFuZ2VkLmRhdGF0YWJsZXMnKTtcclxuICAgICAgICAgICAgbGF5b3V0ci5odG1sLnRyaWdnZXIoJ2FzaWRlLWNoYW5nZWQucmInKTtcclxuICAgICAgICAgICAgbGF5b3V0ci5odG1sLnRyaWdnZXIoJ2FzaWRlLWNoYW5nZWQubWFwJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKGxheW91dHIuaXNUcmFuc2l0aW9ucygpKSB7XHJcbiAgICAgICAgICAgIGxldCBhd2FpdEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0cmFuc2l0aW9uTG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoYXdhaXRJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgbGF5b3V0ci5hd2FpdEludGVydmFsKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uTG9jayA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9LCBsYXlvdXRyLnRyYW5zaXRpb25UaW1lKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uTG9jayA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0cmlnZ2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBsYXlvdXRyLnRvZ2dsZUFzaWRlID0gKGFzaWRlLCBwYWdlQ2hhbmdlZCkgPT4ge1xyXG4gICAgICAgIGlmICghdHJhbnNpdGlvbkxvY2spIHtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbkxvY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICBsYXlvdXRyLmh0bWwuYXR0cignZGF0YS1hdXRoZW50aWNhdGlvbicsICcnKTtcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRBc2lkZSA9IGxheW91dHIuaHRtbC5hdHRyKCdkYXRhLWFzaWRlJyk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50QXNpZGUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXNpZGUgPT09IHVuZGVmaW5lZCB8fCBjdXJyZW50QXNpZGUgPT09IGFzaWRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNjcm9sbFRvcCA9IGxheW91dHIuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5tYWluLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5ib2R5LnNjcm9sbFRvcChzY3JvbGxUb3ApOyAvLyBlZGdlLCBzYWZhcmlcclxuICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLmh0bWwuc2Nyb2xsVG9wKHNjcm9sbFRvcCk7IC8vIGNocm9tZSwgZmlyZWZveCwgaWVcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnLCBhc2lkZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmh0bWwuYXR0cignZGF0YS1hc2lkZScsIGFzaWRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYXNpZGUgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5sZWZ0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNpZGUgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIucmlnaHQuZm9jdXMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGF5b3V0ci5hc2lkZUNoYW5nZWQoKTtcclxuICAgICAgICAgICAgbGF5b3V0ci5zZXRIdG1sU2Nyb2xsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkKCgpID0+IHtcclxuICAgICAgICBsYXlvdXRyLm1haW4uZmluZCgnLmFzaWRlLmxlZnQnKS5jbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgIGxheW91dHIudG9nZ2xlQXNpZGUoJ2xlZnQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGF5b3V0ci5tYWluLmZpbmQoJy5hc2lkZS5yaWdodCcpLmNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgbGF5b3V0ci50b2dnbGVBc2lkZSgncmlnaHQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59Iiwie1xyXG4gICAgJCgoKSA9PiB7XHJcbiAgICAgICAgbGF5b3V0ci5hdXRoZW50aWNhdGlvbi5vbignY2xpY2snLCAnPiBkaXYgPiBidXR0b24nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCksXHJcbiAgICAgICAgICAgICAgICB0eXBlID0gJHRoaXMuYXR0cignZGF0YS10eXBlJyk7XHJcbiAgICAgICAgICAgIGlmIChsYXlvdXRyLmh0bWwuYXR0cignZGF0YS1hdXRoZW50aWNhdGlvbicpID09PSB0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmh0bWwuYXR0cignZGF0YS1hdXRoZW50aWNhdGlvbicsICcnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuaHRtbC5hdHRyKCdkYXRhLWF1dGhlbnRpY2F0aW9uJywgdHlwZSk7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmF1dGhlbnRpY2F0aW9uLmNoaWxkcmVuKCc6bGFzdC1jaGlsZCcpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGF5b3V0ci5hdXRoZW50aWNhdGVkTGlua3Mub24oJ2NsaWNrJywgJz4gYScsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGF5b3V0ci5hZGRWYWxpZGF0aW9uKFxyXG4gICAgICAgICAgICBsYXlvdXRyLmF1dGhlbnRpY2F0aW9uLmZpbmQoJy5yZWdpc3RlciA+IGZvcm0nKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVnaXN0ZXJfdXNlcm5hbWU6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBtaW5sZW5ndGg6IDJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZWdpc3Rlcl9wYXNzd29yZDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkX3JlZ2V4OiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVnaXN0ZXJfY29uZmlybV9wYXNzd29yZDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVxdWFsVG86IFwiI3JlZ2lzdGVyX3Bhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZWdpc3Rlcl9lbWFpbDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyX3VzZXJuYW1lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIGVudGVyIHlvdXIgdXNlcm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyX3Bhc3N3b3JkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIGVudGVyIHlvdXIgcGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyX2NvbmZpcm1fcGFzc3dvcmQ6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogXCJQbGVhc2UgcHJvdmlkZSBhIHBhc3N3b3JkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZXF1YWxUbzogXCJQbGVhc2UgZW50ZXIgdGhlIHNhbWUgcGFzc3dvcmQgYXMgYWJvdmVcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyX2VtYWlsOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3NcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgbGF5b3V0ci5hZGRWYWxpZGF0aW9uKFxyXG4gICAgICAgICAgICBsYXlvdXRyLmF1dGhlbnRpY2F0aW9uLmZpbmQoJy5sb2dpbiA+IGZvcm0nKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogXCJQbGVhc2UgZW50ZXIgeW91ciB1c2VybmFtZVwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogXCJQbGVhc2UgZW50ZXIgeW91ciBwYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfSk7XHJcbn0iLCJ7XHJcbiAgICAkKCgpID0+IHtcclxuICAgICAgICBsYXlvdXRyLmNvb2tpZS5vbignY2xpY2snLCAnI2Nvb2tpZS1hY2NlcHQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjb29raWUnLCAnY29va2llJyk7XHJcbiAgICAgICAgICAgIGxheW91dHIuaHRtbC5yZW1vdmVDbGFzcygnY29va2llJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBjb29raWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNvb2tpZVwiKTtcclxuICAgICAgICBpZiAoY29va2llID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGxheW91dHIuaHRtbC5hZGRDbGFzcygnY29va2llJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0iLCJ7XHJcbiAgICBsYXlvdXRyLmxvYWRQYWdlID0gKHVybCwgcHVzaFN0YXRlLCBpbml0aWFsKSA9PiB7XHJcbiAgICAgICAgbGF5b3V0ci5zaG93TG9hZGluZygpO1xyXG4gICAgICAgIGxheW91dHIubG9hZC5odG1sKGAke2xheW91dHIuaG9zdH0ke2xheW91dHIuYWpheH1wYWdlcyR7dXJsID09PSAnLycgPyAnL2hvbWUnIDogdXJsfS5odG1sYCkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgbGF5b3V0ci5jb250ZW50Lmh0bWwocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBsZXQgcSA9IHVybC5pbmRleE9mKCc/Jyk7XHJcbiAgICAgICAgICAgIHVybCA9IHVybC5zdWJzdHJpbmcoMCwgcSAhPT0gLTEgPyBxIDogdXJsLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGxheW91dHIubGVmdC5maW5kKCcudHJlZSBhLmxhYmVsLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgbGF5b3V0ci5sZWZ0LmZpbmQoYGEubGFiZWxbaHJlZj1cIiR7dXJsfVwiXWApLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgbGF5b3V0ci5odG1sLmF0dHIoJ2RhdGEtc3RhdHVzJywgJycpO1xyXG4gICAgICAgICAgICBsYXlvdXRyLnRpdGxlLmh0bWwoJycpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGxheW91dHIuc2l0ZU5hbWU7XHJcbiAgICAgICAgICAgIGlmICh1cmwgPT09ICcvJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxheW91dHIuYm9keS5jaGlsZHJlbignI3N2Zy1icm93c2VyJykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5sb2FkLmh0bWwobGF5b3V0ci5ob3N0ICsgbGF5b3V0ci5hamF4ICsgJ3N2Zy9icm93c2VyLmh0bWwnKS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHJlc3BvbnNlKS5wcmVwZW5kVG8obGF5b3V0ci5ib2R5KTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLnNob3dQb3B1cEFsZXJ0KCdGYWlsZWQgdG8gbG9hZCBicm93c2VyIHN2ZyBodG1sJywgJ2RhbmdlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGxheW91dHIuYm9keS5jaGlsZHJlbignI3N2Zy1vcycpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIubG9hZC5odG1sKGxheW91dHIuaG9zdCArIGxheW91dHIuYWpheCArICdzdmcvb3MuaHRtbCcpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQocmVzcG9uc2UpLnByZXBlbmRUbyhsYXlvdXRyLmJvZHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIuc2hvd1BvcHVwQWxlcnQoJ0ZhaWxlZCB0byBsb2FkIG9zIHN2ZyBodG1sJywgJ2RhbmdlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRpdGxlID0gbGF5b3V0ci5jYXBpdGFsaXplKHVybC5yZXBsYWNlKCcvJywgJycpLnJlcGxhY2VBbGwoJy0nLCAnICcpKTtcclxuICAgICAgICAgICAgICAgIGxheW91dHIudGl0bGUuaHRtbCh0aXRsZSk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGAke3RpdGxlfSAtICR7bGF5b3V0ci5zaXRlTmFtZX1gO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVybCA9PT0gJy9mb3JtJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIucGFnZUZvcm0oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYXlvdXRyLmh0bWwudHJpZ2dlcignaGVhZGVyLWNoYW5nZWQucmVzcG9uc2l2ZUhlYWRlcicpO1xyXG4gICAgICAgICAgICBsYXlvdXRyLnByb21pc2VDU1MudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLnBhZ2VMb2FkZWQoaW5pdGlhbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pLmNhdGNoKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICBsYXlvdXRyLmxvYWQuaHRtbChsYXlvdXRyLmhvc3QgKyBsYXlvdXRyLmFqYXggKyAncGFnZXMvZXJyb3IuaHRtbCcpLnRoZW4oKHJlc3BvbnNlMikgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5jb250ZW50Lmh0bWwocmVzcG9uc2UyKTtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuaHRtbC5hdHRyKCdkYXRhLXN0YXR1cycsICdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBgJHtyZXNwb25zZX0tJHtsYXlvdXRyLnNpdGVOYW1lfWA7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSBgJHtyZXNwb25zZX0gLSBgO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlID09PSA0MDQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZSArPSAnUGFnZSBub3QgZm91bmQnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZSArPSAnU2VydmVyIGVycm9yJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxheW91dHIuY29udGVudC5maW5kKCcjZXJyb3ItdGl0bGUnKS5odG1sKHRpdGxlKTtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuaHRtbC50cmlnZ2VyKCdoZWFkZXItY2hhbmdlZC5yZXNwb25zaXZlSGVhZGVyJyk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLnNob3dQb3B1cEFsZXJ0KCdGYWlsZWQgdG8gbG9hZCBjb250ZW50IGh0bWwnLCAnZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIucHJvbWlzZUNTUy50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLnBhZ2VMb2FkZWQoaW5pdGlhbCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBoaXN0b3J5VXJsID0gKGxheW91dHIuaXNMb2NhbGhvc3QgPyAnJyA6IGAvJHt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKVsxXX1gKSArIHVybDtcclxuICAgICAgICBpZiAocHVzaFN0YXRlKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBoaXN0b3J5VXJsKTtcclxuICAgICAgICAgICAgbG9hZFBhZ2UgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5pbnRlcm5hbExpbmtDbGljayA9IChocmVmLCBlKSA9PiB7XHJcbiAgICAgICAgaWYgKCFlLmN0cmxLZXkpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBsYXlvdXRyLmxvYWRQYWdlKGhyZWYsIHRydWUsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh3aW5kb3cubG9jYXRpb24uc2VhcmNoKSB7XHJcbiAgICAgICAgbGF5b3V0ci51cmwgPSB7fTtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCcmJykuZm9yRWFjaCgodikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgYSA9IHYuc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgbGF5b3V0ci51cmxbYVswXV0gPSBhLnNsaWNlKDEpLmpvaW4oJz0nKS5yZXBsYWNlKC9+YW5kfi9nLCAnJicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChsYXlvdXRyLnVybC5wICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsIG51bGwsXHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc2xpY2UoMCwgLTEpICsgbGF5b3V0ci51cmwucCArXHJcbiAgICAgICAgICAgICAgICAobGF5b3V0ci51cmwucSA/IGA/JHtsYXlvdXRyLnVybC5xfWAgOiAnJykgK1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2hcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGxvYWRQYWdlID0gd2luZG93Lmhpc3Rvcnkuc3RhdGU7XHJcbiAgICB3aW5kb3cub25wb3BzdGF0ZSA9IChlKSA9PiB7XHJcbiAgICAgICAgaWYgKGxvYWRQYWdlKSB7XHJcbiAgICAgICAgICAgIGxldCB1cmwgPSBsb2NhdGlvbi5wYXRobmFtZTtcclxuICAgICAgICAgICAgaWYgKCFsYXlvdXRyLmlzTG9jYWxob3N0KSB7XHJcbiAgICAgICAgICAgICAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKHVybC5pbmRleE9mKFwiL1wiLCB1cmwuaW5kZXhPZihcIi9cIikgKyAxKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGF5b3V0ci5sb2FkUGFnZSh1cmwsIGZhbHNlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuYXBwbHlOYXZpZ2F0aW9uID0gKGlkLCB2YWx1ZSwgc2V0KSA9PiB7XHJcbiAgICAgICAgaWYgKHNldCkge1xyXG4gICAgICAgICAgICBsZXQgZW50cnkgPSB7XHJcbiAgICAgICAgICAgICAgICBcImlkXCI6IGlkLFxyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiB2YWx1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXhpc3RzID0gJC5ncmVwKGxheW91dHIubmF2aWdhdGlvbiwgKGUpID0+IHsgcmV0dXJuIGUubmFtZSA9PT0gbmFtZTsgfSk7XHJcbiAgICAgICAgICAgIGlmIChleGlzdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBub3QgZm91bmRcclxuICAgICAgICAgICAgICAgIGxheW91dHIubmF2aWdhdGlvbi5wdXNoKGVudHJ5KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChleGlzdHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmb3VuZFxyXG4gICAgICAgICAgICAgICAgZXhpc3RzWzBdLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ25hdmlnYXRpb24nLCBKU09OLnN0cmluZ2lmeShsYXlvdXRyLm5hdmlnYXRpb24pKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXlvdXRyLmxlZnQuZmluZChgIyR7aWR9YCkucHJvcCgnY2hlY2tlZCcsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICQoKCkgPT4ge1xyXG4gICAgICAgIGxheW91dHIubG9hZC5odG1sKGxheW91dHIuaG9zdCArIGxheW91dHIuYWpheCArICdsYXlvdXQvbmF2aWdhdGlvbi5odG1sJykudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgbGF5b3V0ci5sZWZ0LmZpbmQoJz4gLmNvbnRlbnQgPiBkaXYnKS5odG1sKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgbGF5b3V0ci5uYXZpZ2F0aW9uVHJlZSA9IGxheW91dHIubGVmdC5maW5kKCcudHJlZScpO1xyXG4gICAgICAgICAgICBsYXlvdXRyLm5hdmlnYXRpb24gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibmF2aWdhdGlvblwiKSk7XHJcbiAgICAgICAgICAgIGlmIChsYXlvdXRyLm5hdmlnYXRpb24gPT09IG51bGwpIGxheW91dHIubmF2aWdhdGlvbiA9IFtdO1xyXG4gICAgICAgICAgICAkLmVhY2gobGF5b3V0ci5uYXZpZ2F0aW9uLCAoaSwgZW50cnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuYXBwbHlOYXZpZ2F0aW9uKGVudHJ5LmlkLCBlbnRyeS52YWx1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGF5b3V0ci5uYXZpZ2F0aW9uVHJlZS5vbignY2hhbmdlJywgJ2lucHV0W3R5cGU9Y2hlY2tib3hdJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGVja2JveCA9ICQoZS5jdXJyZW50VGFyZ2V0KSxcclxuICAgICAgICAgICAgICAgICAgICBpZCA9IGNoZWNrYm94LmF0dHIoJ2lkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjaGVja2JveC5pcygnOmNoZWNrZWQnKTtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuYXBwbHlOYXZpZ2F0aW9uKGlkLCB2YWx1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsYXlvdXRyLmhlYWRlci5maW5kKCcuYXNpZGUubGVmdCcpLmFkZENsYXNzKCdsb2FkZWQnKTtcclxuICAgICAgICAgICAgaWYgKGxheW91dHIudXJsICYmIGxheW91dHIudXJsLnApIHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIubmF2aWdhdGlvblRyZWUuZmluZChgYS5sYWJlbFtocmVmPVwiJHtsYXlvdXRyLnVybC5wfVwiXWApLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIubmF2aWdhdGlvblRyZWUuZmluZCgnYS5sYWJlbFtocmVmPVwiXCJdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICAgICAgbGF5b3V0ci5zaG93UG9wdXBBbGVydCgnRmFpbGVkIHRvIGxvYWQgbmF2aWdhdGlvbiBodG1sJywgJ2RhbmdlcicpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAobGF5b3V0ci51cmwgJiYgbGF5b3V0ci51cmwucCkge1xyXG4gICAgICAgICAgICBsYXlvdXRyLmxvYWRQYWdlKGxheW91dHIudXJsLnAsIHRydWUsIHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBsID0gd2luZG93LmxvY2F0aW9uLFxyXG4gICAgICAgICAgICAgICAgc2VnbWVudENvdW50ID0gbC5vcmlnaW4uZW5kc1dpdGgoJ2dpdGh1Yi5pbycpID8gMSA6IDAsXHJcbiAgICAgICAgICAgICAgICB1cmwgPSBgLyR7bC5wYXRobmFtZS5zbGljZSgxKS5zcGxpdCgnLycpLnNsaWNlKHNlZ21lbnRDb3VudCl9YDtcclxuICAgICAgICAgICAgbGF5b3V0ci5sb2FkUGFnZSh1cmwsIHRydWUsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXlvdXRyLmxlZnQub24oJ2NsaWNrJywgJy50cmVlIGEubGFiZWw6bm90KC5hY3RpdmUpJywgKGUpID0+IHtcclxuICAgICAgICAgICAgbGF5b3V0ci5pbnRlcm5hbExpbmtDbGljaygkKGUuY3VycmVudFRhcmdldCkuYXR0cignaHJlZicpLCBlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGF5b3V0ci5ib2R5Lm9uKCdjbGljaycsICcuaW50ZXJuYWwtbGluaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxheW91dHIuaW50ZXJuYWxMaW5rQ2xpY2soJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2hyZWYnKSwgZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxheW91dHIubGVmdC5vbignY2xpY2snLCAnI25hdmlnYXRpb24tZXhwYW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBsYXlvdXRyLm5hdmlnYXRpb25UcmVlLmZpbmQoJ2lucHV0W3R5cGU9Y2hlY2tib3hdOm5vdCg6Y2hlY2tlZCknKS5jbGljaygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsYXlvdXRyLmxlZnQub24oJ2NsaWNrJywgJyNuYXZpZ2F0aW9uLWNvbGxhcHNlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBsYXlvdXRyLm5hdmlnYXRpb25UcmVlLmZpbmQoJ2lucHV0W3R5cGU9Y2hlY2tib3hdOmNoZWNrZWQnKS5jbGljaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0iLCJ7XHJcbiAgICBsYXlvdXRyLmFwcGx5U2V0dGluZ3MgPSAoaWQsIG5hbWUsIHR5cGUsIHZhbHVlLCBzZXQpID0+IHtcclxuICAgICAgICBpZiAoc2V0KSB7XHJcbiAgICAgICAgICAgIGxldCBlbnRyeSA9IHtcclxuICAgICAgICAgICAgICAgIFwiaWRcIjogaWQsXHJcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogbmFtZSxcclxuICAgICAgICAgICAgICAgIFwidHlwZVwiOiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiB2YWx1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXhpc3RzID0gJC5ncmVwKGxheW91dHIuc2V0dGluZ3MsIChlKSA9PiB7IHJldHVybiBlLm5hbWUgPT09IG5hbWU7IH0pO1xyXG4gICAgICAgICAgICBpZiAoZXhpc3RzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gbm90IGZvdW5kXHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLnNldHRpbmdzLnB1c2goZW50cnkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV4aXN0cy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIGZvdW5kXHJcbiAgICAgICAgICAgICAgICBleGlzdHNbMF0uaWQgPSBpZDtcclxuICAgICAgICAgICAgICAgIGV4aXN0c1swXS52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KGxheW91dHIuc2V0dGluZ3MpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJjaGVja2JveFwiIHx8IHR5cGUgPT09IFwicmFkaW9cIikge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5yaWdodC5maW5kKGAjc2V0dGluZ3MtJHtpZH1gKS5wcm9wKCdjaGVja2VkJywgdmFsdWUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwic2xpZGVyXCIpIHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIucmlnaHQuZmluZChgI3NldHRpbmdzLSR7aWR9YCkuc2xpZGVyKCdzZXRWYWx1ZScsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2NoZWNrYm94JyB8fCB0eXBlID09PSBcInJhZGlvXCIpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdyYWRpbycpIHtcclxuICAgICAgICAgICAgICAgICQuZWFjaChsYXlvdXRyLnJpZ2h0LmZpbmQoYGlucHV0W3R5cGU9cmFkaW9dW25hbWU9XCJzZXR0aW5ncy0ke25hbWV9XCJdOm5vdCgjc2V0dGluZ3MtJHtpZH0pYCksIChpLCByYWRpbykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIuaHRtbC5yZW1vdmVDbGFzcygkKHJhZGlvKS5hdHRyKCdpZCcpLnJlcGxhY2UoJ3NldHRpbmdzLScsICcnKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gJ3RoZW1lJykge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5sb2FkVGhlbWUoaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChuYW1lID09PSAnZm9jdXMnICYmIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmVuYWJsZUZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3R0cycgJiYgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8vbGF5b3V0ci5lbmFibGVUVFMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAnc3dpcGUnICYmIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmVuYWJsZVN3aXBlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmh0bWwuYWRkQ2xhc3MoaWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5odG1sLnJlbW92ZUNsYXNzKGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaWQgPT09ICd0d28tY29sdW1ucycpIHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuaHRtbC50cmlnZ2VyKCdjb2x1bW5zLWNoYW5nZWQucmInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaWQgPT09ICdzaWduZWQtaW4nIHx8IGlkID09PSAnZm9jdXMnIHx8IGlkID09PSAndHRzJykge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5odG1sLnRyaWdnZXIoJ2hlYWRlci1jaGFuZ2VkLnJlc3BvbnNpdmVIZWFkZXInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gJ2FzaWRlLWxlZnQnIHx8ICdhc2lkZS1yaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuYXNpZGVDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICQoKCkgPT4ge1xyXG4gICAgICAgIGxheW91dHIubG9hZC5odG1sKGxheW91dHIuaG9zdCArIGxheW91dHIuYWpheCArICdsYXlvdXQvc2V0dGluZ3MuaHRtbCcpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCAkdGhpcyA9IGxheW91dHIucmlnaHQuZmluZCgnPiAuY29udGVudCA+IGRpdicpO1xyXG4gICAgICAgICAgICAkdGhpcy5odG1sKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgbGF5b3V0ci5wcm9taXNlQ1NTLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGxheW91dHIuc2V0dGluZ3MsIChpLCBlbnRyeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIuYXBwbHlTZXR0aW5ncyhlbnRyeS5pZCwgZW50cnkubmFtZSwgZW50cnkudHlwZSwgZW50cnkudmFsdWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5oZWFkZXIuZmluZCgnLmFzaWRlLnJpZ2h0JykuYWRkQ2xhc3MoJ2xvYWRlZCcpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMub24oJ2NoYW5nZScsICdpbnB1dFt0eXBlPWNoZWNrYm94XSwgaW5wdXRbdHlwZT1yYWRpb10nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9ICQoZS5jdXJyZW50VGFyZ2V0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSBpbnB1dC5hdHRyKCdpZCcpLnJlcGxhY2UoJ3NldHRpbmdzLScsICcnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGlucHV0LmF0dHIoJ25hbWUnKS5yZXBsYWNlKCdzZXR0aW5ncy0nLCAnJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSBpbnB1dC5hdHRyKCd0eXBlJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gaW5wdXQuaXMoJzpjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5hcHBseVNldHRpbmdzKGlkLCBuYW1lLCB0eXBlLCB2YWx1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09PSAnbGVmdC1zaHJpbmsnIHx8IGlkID09PSAncmlnaHQtc2hyaW5rJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9PT0gJ2xlZnQtcHVzaCcgfHwgaWQgPT09ICdyaWdodC1wdXNoJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9PT0gJ2xlZnQtb3ZlcmxheScgfHwgaWQgPT09ICdyaWdodC1vdmVybGF5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLnNldEh0bWxTY3JvbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICAgICAgbGF5b3V0ci5zaG93UG9wdXBBbGVydCgnRmFpbGVkIHRvIGxvYWQgc2V0dGluZ3MgaHRtbCcsICdkYW5nZXInKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGF5b3V0ci5yaWdodC5vbignY2xpY2snLCAnI3NldHRpbmdzLWNsZWFyLWxvY2Fsc3RvcmFnZScsICgpID0+IHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0iLCJ7XHJcbiAgICAkKCgpID0+IHtcclxuICAgICAgICBsYXlvdXRyLmJvZHkub24oXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0YXJnZXQgPSAkKGUudGFyZ2V0KSxcclxuICAgICAgICAgICAgICAgIHBhcmVudCA9IHRhcmdldC5wYXJlbnQoKTtcclxuICAgICAgICAgICAgaWYgKGxheW91dHIuaXNMb2FkaW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLndoaWNoID09PSA5IHx8IGUuY3RybEtleSAmJiBlLmtleUNvZGUgPT09IDY1KSB7IC8vIHRhYiB8fCAgY3RybCArIGFcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gMzcgJiYgIWxheW91dHIuaXNGb2N1cygpICYmICFsYXlvdXRyLmlzTW9kYWwoKSkgeyAvLyBsZWZ0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXlvdXRyLmFycm93S2V5TG9ja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXlvdXRyLmlzQXNpZGVMZWZ0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIudG9nZ2xlQXNpZGUoKTsgLy8gY2xvc2VzIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWxheW91dHIuaXNBc2lkZVJpZ2h0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIudG9nZ2xlQXNpZGUoJ3JpZ2h0Jyk7IC8vIG9wZW5zIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IDM5ICYmICFsYXlvdXRyLmlzRm9jdXMoKSAmJiAhbGF5b3V0ci5pc01vZGFsKCkpIHsgLy8gcmlnaHRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWxheW91dHIuYXJyb3dLZXlMb2NrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheW91dHIuaXNBc2lkZVJpZ2h0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIudG9nZ2xlQXNpZGUoKTsgLy8gY2xvc2VzIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghbGF5b3V0ci5pc0FzaWRlTGVmdCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLnRvZ2dsZUFzaWRlKCdsZWZ0Jyk7IC8vIG9wZW5zIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PT0gMjcpIHsgLy8gZXNjXHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGF5b3V0ci50dHMgIT09IHVuZGVmaW5lZCAmJiBsYXlvdXRyLnR0cy5Jc1NwZWFraW5nKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5zdG9wVFRTKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXlvdXRyLmlzRm9jdXMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLmhpZGVGb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5b3V0ci5pc01vZGFsKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5jbG9zZU1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheW91dHIuaXNBc2lkZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLnRvZ2dsZUFzaWRlKCk7IC8vIGNsb3NlcyBhc2lkZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwb3B1cHMgPSBsYXlvdXRyLmJvZHkuY2hpbGRyZW4oJy5wb3B1cCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9wdXBzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBzLmZhZGVPdXQobGF5b3V0ci5mYWRlT3V0VGltZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwcy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkcm9wZG93bnMgPSBsYXlvdXRyLmNvbnRlbnQuZmluZCgnZGl2LmRyb3Bkb3duLm9wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRyb3Bkb3ducy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3ducy5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIuaHRtbC5hdHRyKCdkYXRhLWF1dGhlbnRpY2F0aW9uJywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlLndoaWNoID09PSAxMykgeyAvLyBlbnRlclxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkcm9wZG93biA9IHRhcmdldC5wYXJlbnRzKCdkaXYuZHJvcGRvd24nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZHJvcGRvd24ubGVuZ3RoIHx8IHBhcmVudC5wYXJlbnQoKS5oYXNDbGFzcygnYWNjb3JkaW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRyb3Bkb3duLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uY2hpbGRyZW4oJ2RpdicpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmVudC5oYXNDbGFzcygnY2hlY2tib3gnKSB8fCBwYXJlbnQuaGFzQ2xhc3MoJ3JhZGlvJykgfHwgcGFyZW50Lmhhc0NsYXNzKCdzd2l0Y2gnKSB8fCB0YXJnZXQuaGFzQ2xhc3MoJ3RvZ2dsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5zaWJsaW5ncygnaW5wdXQnKS5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxheW91dHIuYm9keS5vbigna2V5dXAnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWxheW91dHIuaXNMb2FkaW5nKCkgJiYgIWxheW91dHIuaXNGb2N1cygpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gOSkgeyAvLyB0YWJcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gJChlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQucGFyZW50cygnZGl2LmRyb3Bkb3duLm9wZW4nKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnZGl2LmRyb3Bkb3duLm9wZW4nKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5wYXJlbnRzKCcjYXV0aGVudGljYXRlZC5vcGVuJykubGVuZ3RoIHx8IHRhcmdldC5jbG9zZXN0KCcjYXV0aGVudGljYXRlZCA+IGJ1dHRvbicpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjYXV0aGVudGljYXRlZC5vcGVuJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxheW91dHIuaXNNb2RhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0LnBhcmVudHMoJyNtb2RhbCcpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5jbG9zZU1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXNpZGUgPSB0YXJnZXQucGFyZW50cygnYXNpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFzaWRlLmxlbmd0aCA9PT0gMCAmJiB0YXJnZXQuaXMoJ2FzaWRlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzaWRlID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhc2lkZS5sZW5ndGggJiYgYXNpZGUuYXR0cignaWQnKSAhPT0gbGF5b3V0ci5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci50b2dnbGVBc2lkZShhc2lkZS5hdHRyKCdpZCcpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYXNpZGUubGVuZ3RoICYmIGxheW91dHIuaXNBc2lkZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLnRvZ2dsZUFzaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59Iiwie1xyXG4gICAgbGF5b3V0ci5zaG93TW9kYWwgPSAodHlwZSkgPT4ge1xyXG4gICAgICAgIGxheW91dHIuaHRtbC5hdHRyKCdkYXRhLW1vZGFsJywgdHlwZSk7XHJcbiAgICAgICAgbGF5b3V0ci5odG1sLmFkZENsYXNzKCdtb2RhbCcpO1xyXG4gICAgICAgIGxheW91dHIuaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICBsYXlvdXRyLmNoZWNrTW9kYWwoKTtcclxuICAgICAgICBsYXlvdXRyLm1vZGFsLmZvY3VzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuY2xvc2VNb2RhbCA9ICgpID0+IHtcclxuICAgICAgICBpZiAobGF5b3V0ci5mdWxsc2NyZWVuKSB7XHJcbiAgICAgICAgICAgIGxheW91dHIuZXhpdEZ1bGxTY3JlZW4oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXlvdXRyLmh0bWwucmVtb3ZlQ2xhc3MoJ21vZGFsJykuYXR0cignZGF0YS1tb2RhbCcsICcnKTtcclxuICAgICAgICAgICAgbGF5b3V0ci5tb2RhbC5yZW1vdmVDbGFzcygnaW5mby1zaG93bicpLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIGxheW91dHIuY2hlY2tNb2RhbCgpO1xyXG4gICAgICAgICAgICBsYXlvdXRyLnNldEh0bWxTY3JvbGwoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuY2hlY2tNb2RhbCA9ICgpID0+IHtcclxuICAgICAgICBpZiAobGF5b3V0ci5pc01vZGFsKCkpIHtcclxuICAgICAgICAgICAgbGF5b3V0ci5ib2R5LmNzcygncGFkZGluZy1yaWdodCcsIGxheW91dHIuc2Nyb2xsYmFyV2lkdGgpO1xyXG4gICAgICAgICAgICBpZiAobGF5b3V0ci5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnKSA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5yaWdodC5jc3MoJ21hcmdpbi1yaWdodCcsIGxheW91dHIuc2Nyb2xsYmFyV2lkdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxheW91dHIuYm9keS5jaGlsZHJlbignLnBvcHVwJykuY3NzKCdtYXJnaW4tcmlnaHQnLCBsYXlvdXRyLnNjcm9sbGJhcldpZHRoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXlvdXRyLmJvZHkuY3NzKCdwYWRkaW5nLXJpZ2h0JywgMCk7XHJcbiAgICAgICAgICAgIGxheW91dHIucmlnaHQuY3NzKCdtYXJnaW4tcmlnaHQnLCAwKTtcclxuICAgICAgICAgICAgbGF5b3V0ci5ib2R5LmNoaWxkcmVuKCcucG9wdXAnKS5jc3MoJ21hcmdpbi1yaWdodCcsIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXlvdXRyLmh0bWwudHJpZ2dlcignbW9kZWwtY2hlY2snKTtcclxuICAgIH07XHJcblxyXG4gICAgJCgoKSA9PiB7XHJcbiAgICAgICAgbGF5b3V0ci5ib2R5Lm9uKCdjbGljaycsICcubW9kYWwnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCksXHJcbiAgICAgICAgICAgICAgICB0eXBlID0gJHRoaXMuYXR0cignZGF0YS1tb2RhbCcpO1xyXG4gICAgICAgICAgICBpZiAodHlwZSAhPT0gdW5kZWZpbmVkICYmIHR5cGUubGVuZ3RoICYmICh0eXBlID09PSAnaW1hZ2UnIHx8IHR5cGUgPT09ICdmb3JtJykpIHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIGxldCBpZCA9ICR0aGlzLmF0dHIoJ2RhdGEtbW9kYWwtaWQnKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVGl0bGUgPSAkdGhpcy5hdHRyKCdkYXRhLW1vZGFsLXRpdGxlJyksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YUNvbnRlbnQgPSAkdGhpcy5hdHRyKCdkYXRhLW1vZGFsLWNvbnRlbnQnKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhRnVsbHNjcmVlbiA9ICR0aGlzLmF0dHIoJ2RhdGEtbW9kYWwtZnVsbHNjcmVlbicpID09PSAndHJ1ZSc7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRlbXBsYXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnaW1hZ2UnICYmICR0aGlzLmF0dHIoJ2RhdGEtbW9kYWwtaW1nJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhVGl0bGUgIT09IHVuZGVmaW5lZCB8fCBkYXRhQ29udGVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLm1vZGFsLmFkZENsYXNzKCdoYXMtaW5mbycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFxyXG5gJHtkYXRhVGl0bGUgIT09IHVuZGVmaW5lZCB8fCBkYXRhQ29udGVudCAhPT0gdW5kZWZpbmVkID8gYFxyXG48YnV0dG9uIGlkPVwibW9kYWwtdG9nZ2xlXCIgY2xhc3M9XCJidG5cIiBhcmlhLWxhYmVsPVwiVG9nZ2xlIGluZm9cIj5cclxuICAgIDxzdmcgZm9jdXNhYmxlPVwiZmFsc2VcIj48dXNlIHhsaW5rOmhyZWY9XCIjc3ZnLWluZm9cIj48L3VzZT48L3N2Zz5cclxuPC9idXR0b24+XHJcbiR7ZGF0YVRpdGxlICE9PSB1bmRlZmluZWQgPyBgPGRpdiBpZD1cIm1vZGFsLXRpdGxlXCI+JHtkYXRhVGl0bGV9PC9kaXY+YCA6ICcnfVxyXG4ke2RhdGFDb250ZW50ICE9PSB1bmRlZmluZWQgPyBgPGRpdiBpZD1cIm1vZGFsLWNvbnRlbnRcIj4ke2RhdGFDb250ZW50fTwvZGl2PmAgOiAnJ31cclxuYCA6ICcnfVxyXG48aW1nIGlkPVwibW9kYWwtaW1nXCIgLz5gO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Zvcm0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFxyXG5gPGRpdiBjbGFzcz1cImhlYWRlclwiPlxyXG4gICAgJHtkYXRhVGl0bGUgIT09IHVuZGVmaW5lZCA/IGA8c3BhbiBjbGFzcz1cInRpdGxlXCI+JHtkYXRhVGl0bGV9PC9zcGFuPmAgOiAnJ31cclxuICAgIDxidXR0b24gaWQ9XCJtb2RhbC1jbG9zZVwiIGNsYXNzPVwiY2xvc2UgZXhwYW5kXCIgYXJpYS1sYWJlbD1cIkNsb3NlICR7ZGF0YVRpdGxlICE9PSB1bmRlZmluZWQgPyBkYXRhVGl0bGUgOiAnJ31cIj5cclxuICAgICAgICA8c3ZnIGZvY3VzYWJsZT1cImZhbHNlXCI+PHVzZSB4bGluazpocmVmPVwiI3N2Zy1jbG9zZVwiPjwvdXNlPjwvc3ZnPlxyXG4gICAgPC9idXR0b24+XHJcbjwvZGl2PlxyXG48ZGl2IGNsYXNzPVwiY29udGVudFwiPlxyXG48L2Rpdj5gO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgaHRtbCA9IFxyXG5gPGRpdj5cclxuICAgIDxkaXY+XHJcbiAgICAgICAgPGRpdiBpZD1cIm1vZGFsLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAke3RlbXBsYXRlKCl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+YDtcclxuICAgICAgICAgICAgICAgIGxheW91dHIubW9kYWwuaHRtbChodG1sKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnaW1hZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlID0gbGF5b3V0ci5tb2RhbC5maW5kKCcjbW9kYWwtaW1nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2Uub24oJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChib3dzZXIuYW5kcm9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UuY3NzKCdtYXgtaGVpZ2h0Jywgd2luZG93LmlubmVySGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLnNob3dNb2RhbCh0eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKCdzcmMnLCAkdGhpcy5hdHRyKCdkYXRhLW1vZGFsLWltZycpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGFTaXplID0gJHRoaXMuYXR0cignZGF0YS1tb2RhbC1zaXplJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFTaXplICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5tb2RhbC5jaGlsZHJlbignZGl2JykuYXR0cignZGF0YS1tb2RhbC1zaXplJywgZGF0YVNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IGxheW91dHIubW9kYWwuZmluZCgnI21vZGFsLWNvbnRhaW5lciA+IC5jb250ZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudC5hcHBlbmQoZGF0YUNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIuY29udGVudExvYWRlZChjb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLnNob3dNb2RhbCh0eXBlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhRnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIucmVxdWVzdEZ1bGxTY3JlZW4oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsYXlvdXRyLmJvZHkub24oJ2NsaWNrJywgJyNtb2RhbC10b2dnbGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxheW91dHIubW9kYWwudG9nZ2xlQ2xhc3MoJ2luZm8tc2hvd24nKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59Iiwie1xyXG4gICAgbGF5b3V0ci5yZXNwb25zaXZlSGVhZGVyID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCBoMSA9IGxheW91dHIuaGVhZGVyLmZpbmQoJ2gxJyksXHJcbiAgICAgICAgICAgIGxpbmsgPSBoMS5jaGlsZHJlbignYScpO1xyXG5cclxuICAgICAgICBsZXQgY2hlY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGgxLmFkZENsYXNzKCdzaG93LXRpdGxlJyk7XHJcbiAgICAgICAgICAgIGxheW91dHIudW5hdXRoZW50aWNhdGVkLmFkZENsYXNzKCdzaG93LXRleHQnKTtcclxuICAgICAgICAgICAgaWYgKGgxLm91dGVyV2lkdGgoKSA8IGxpbmsub3V0ZXJXaWR0aCgpKSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLnVuYXV0aGVudGljYXRlZC5yZW1vdmVDbGFzcygnc2hvdy10ZXh0Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaDEub3V0ZXJXaWR0aCgpIDwgbGluay5vdXRlcldpZHRoKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBoMS5yZW1vdmVDbGFzcygnc2hvdy10aXRsZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNoZWNrKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNoZWNrKCk7XHJcblxyXG4gICAgICAgIGxheW91dHIuaHRtbC5vbignaGVhZGVyLWNoYW5nZWQucmVzcG9uc2l2ZUhlYWRlcicsICgpID0+IHtcclxuICAgICAgICAgICAgY2hlY2soKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn0iLCJ7XHJcbiAgICBsYXlvdXRyLmVuYWJsZUZvY3VzID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCBjb21wb25lbnQgPSBsYXlvdXRyLmZvY3VzLmZpbmQoJz4gLmNvbXBvbmVudCA+IGRpdicpO1xyXG5cclxuICAgICAgICBpZiAoIWxheW91dHIuaHRtbC5oYXNDbGFzcygnZm9jdXMtbG9hZGVkJykpIHtcclxuICAgICAgICAgICAgbGF5b3V0ci5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICAgICBsYXlvdXRyLnByb21pc2VGb2N1cyA9IGxheW91dHIubG9hZC5qcygnZGlzdC9qcy9mb2N1cy5qcycpLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5oaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGF5b3V0ci5odG1sLmFkZENsYXNzKCdmb2N1cy1sb2FkZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxheW91dHIucHJvbWlzZUZvY3VzLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgIC5kcmFnZ2FibGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGF4aXM6IFwieVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5tZW50OiBcInBhcmVudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZTogXCIubW92ZVwiXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnJlc2l6YWJsZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuOiAnLnVpLXJlc2l6YWJsZS1uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgczogJy51aS1yZXNpemFibGUtcydcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogNTAsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbm1lbnQ6IFwicGFyZW50XCJcclxuICAgICAgICAgICAgICAgIH0pLm9uKCdyZXNpemUnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxheW91dHIuZm9jdXMub24oJ2NsaWNrJywgJy5jbG9zZScsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuaGlkZUZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGF5b3V0ci5tYWluLmZpbmQoJy5mb2N1cycpLmNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuc2hvd0ZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nIGlmIHRoZSBoZWlnaHQgaXMgdGhlIHNhbWVcclxuICAgICAgICAgICAgICAgIGlmICgkKHdpbmRvdykuaGVpZ2h0KCkgPT09IGhlaWdodCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxheW91dHIuc2hvd1BvcHVwQWxlcnQoJ0ZhaWxlZCB0byBsb2FkIGZvY3VzJywgJ2RhbmdlcicpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBsYXlvdXRyLnNob3dGb2N1cyA9ICgpID0+IHtcclxuICAgICAgICBsYXlvdXRyLmh0bWwuYXR0cignZGF0YS1hdXRoZW50aWNhdGlvbicsICcnKTtcclxuICAgICAgICBsYXlvdXRyLmh0bWwuYXR0cignZGF0YS1mb2N1cycsIHRydWUpO1xyXG4gICAgICAgIGxheW91dHIuZm9jdXMuZm9jdXMoKTtcclxuICAgIH07XHJcbiAgICBsYXlvdXRyLmhpZGVGb2N1cyA9ICgpID0+IHtcclxuICAgICAgICBsZXQgc2Nyb2xsVG9wID0gbGF5b3V0ci5zY3JvbGxUb3AoKTtcclxuICAgICAgICBsYXlvdXRyLmh0bWwuYXR0cignZGF0YS1mb2N1cycsIGZhbHNlKTtcclxuICAgICAgICBsYXlvdXRyLm1haW4uZm9jdXMoKTtcclxuICAgICAgICBsYXlvdXRyLmJvZHkuc2Nyb2xsVG9wKHNjcm9sbFRvcCk7IC8vIGVkZ2UsIHNhZmFyaVxyXG4gICAgICAgIGxheW91dHIuaHRtbC5zY3JvbGxUb3Aoc2Nyb2xsVG9wKTsgLy8gY2hyb21lLCBmaXJlZm94LCBpZVxyXG4gICAgfTtcclxufSIsIntcclxuICAgIGxheW91dHIuZW5hYmxlU3dpcGUgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGJvd3Nlci5hbmRyb2lkKSB7XHJcbiAgICAgICAgICAgIGxldCB4RG93biA9IG51bGwsXHJcbiAgICAgICAgICAgICAgICB5RG93biA9IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvZmZzZXRCZWZvcmU7XHJcblxyXG4gICAgICAgICAgICBsZXQgaGFuZGxlVG91Y2hTdGFydCA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGF5b3V0ci5pc1N3aXBlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB4RG93biA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xyXG4gICAgICAgICAgICAgICAgICAgIHlEb3duID0gZS50b3VjaGVzWzBdLmNsaWVudFk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldEJlZm9yZSA9ICQoZS50YXJnZXQpLm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZXQgaGFuZGxlVG91Y2hNb3ZlID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChsYXlvdXRyLmlzU3dpcGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvZmZzZXRBZnRlciA9ICQoZS50YXJnZXQpLm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF4RG93biB8fCAheURvd24gfHwgb2Zmc2V0QmVmb3JlICE9PSBvZmZzZXRBZnRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB4VXAgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlVcCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeERpZmYgPSB4RG93biAtIHhVcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeURpZmYgPSB5RG93biAtIHlVcDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoeERpZmYpID4gTWF0aC5hYnMoeURpZmYpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IHBhcnNlSW50KCQod2luZG93KS53aWR0aCgpIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5RGlmZiA+IC0xMDAgfHwgeURpZmYgPCAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50QXNpZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeERpZmYgPiBkaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGxlZnQgc3dpcGUgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxheW91dHIuaXNNb2RhbCgpICYmICFsYXlvdXRyLmlzTG9hZGluZygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBc2lkZSA9IGxheW91dHIuaHRtbC5hdHRyKCdkYXRhLWFzaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50QXNpZGUgPT09ICdsZWZ0JyAmJiBjdXJyZW50QXNpZGUgIT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIudG9nZ2xlQXNpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50QXNpZGUgIT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIudG9nZ2xlQXNpZGUoJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHhEaWZmIDwgLWRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogcmlnaHQgc3dpcGUgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxheW91dHIuaXNNb2RhbCgpICYmICFsYXlvdXRyLmlzTG9hZGluZygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBc2lkZSA9IGxheW91dHIuaHRtbC5hdHRyKCdkYXRhLWFzaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50QXNpZGUgPT09ICdyaWdodCcgJiYgY3VycmVudEFzaWRlICE9PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIudG9nZ2xlQXNpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50QXNpZGUgIT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci50b2dnbGVBc2lkZSgnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvKiByZXNldCB2YWx1ZXMgKi9cclxuICAgICAgICAgICAgICAgICAgICB4RG93biA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgeURvd24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgaGFuZGxlVG91Y2hTdGFydCwgZmFsc2UpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGhhbmRsZVRvdWNoTW92ZSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iLCJ7XHJcbiAgICBsYXlvdXRyLmNsZWFyU2VsZWN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShkb2N1bWVudC5jcmVhdGVSYW5nZSgpKTtcclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5zdG9wVFRTID0gKCkgPT4ge1xyXG4gICAgICAgIGxheW91dHIuY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICBpZiAobGF5b3V0ci50dHMgJiYgbGF5b3V0ci50dHMuSXNTcGVha2luZygpKSB7XHJcbiAgICAgICAgICAgIGxheW91dHIudHRzLlNodXRVcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbGF5b3V0ci5lbmFibGVUVFMgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGJvd3Nlci5kZXNrdG9wKSB7XHJcbiAgICAgICAgICAgIGxldCBzbmFwU2VsZWN0aW9uVG9Xb3JkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIGlmICghc2VsZWN0aW9uLmlzQ29sbGFwc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJhbmdlID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlLmNvbGxhcHNlZCB8fCByYW5nZS50b1N0cmluZygpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxlY3QgZnVsbCBzdGFydCB3b3JkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChyYW5nZS5zdGFydE9mZnNldCA+IDAgJiYgcmFuZ2UudG9TdHJpbmcoKVswXS5tYXRjaCgvW15cXHNdLykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnNldFN0YXJ0KHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNldCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBzcGFjZSBhcyBmaXJzdCBzZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSByYW5nZS5zdGFydENvbnRhaW5lci5kYXRhLnN1YnN0cmluZyhyYW5nZS5zdGFydE9mZnNldCkuY2hhckF0KDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnQgPT09ICcgJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxlY3QgZnVsbCBlbmQgd29yZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmFuZ2UuZW5kT2Zmc2V0IDwgcmFuZ2UuZW5kQ29udGFpbmVyLmxlbmd0aCAmJiByYW5nZS50b1N0cmluZygpW3JhbmdlLnRvU3RyaW5nKCkubGVuZ3RoIC0gMV0ubWF0Y2goL1teXFxzXS8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zZXRFbmQocmFuZ2UuZW5kQ29udGFpbmVyLCByYW5nZS5lbmRPZmZzZXQgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgc3BhY2UgYXMgbGFzdCBzZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZW5kID0gcmFuZ2UuZW5kQ29udGFpbmVyLmRhdGEuc3Vic3RyaW5nKDAsIHJhbmdlLmVuZE9mZnNldCkuc2xpY2UoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kID09PSAnICcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnNldEVuZChyYW5nZS5lbmRDb250YWluZXIsIHJhbmdlLmVuZE9mZnNldCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgbGV0IGdldFRleHQgPSAobm9kZSwgc2VsZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dCA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbldoaXRlc3BhY2VNYXRjaGVyID0gL1xcUy8sXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0VGV4dE5vZGVzID0gKG5vZGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmVudCA9ICQobm9kZS5wYXJlbnROb2RlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWNpYWwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24uY29udGFpbnNOb2RlKG5vZGUsIGZhbHNlKSAmJiAobm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZXh0YXJlYScpICYmIG5vbldoaXRlc3BhY2VNYXRjaGVyLnRlc3Qobm9kZS52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWNpYWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNwZWNpYWwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5jb250YWluc05vZGUobm9kZSwgdHJ1ZSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubm9kZVR5cGUgPT09IDMgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbldoaXRlc3BhY2VNYXRjaGVyLnRlc3Qobm9kZS5ub2RlVmFsdWUpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuaXMoJzp2aXNpYmxlJykgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5jc3MoJ3VzZXItc2VsZWN0JykgIT09ICdub25lJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnBhcmVudHMoKS5jc3MoJ3VzZXItc2VsZWN0JykgIT09ICdub25lJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlLnRhZ05hbWUgIT09ICdTQ1JJUFQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoc2VsZWN0aW9uLmV4dGVudE5vZGUubm9kZVR5cGUgIT09IDMgJiYgJChzZWxlY3Rpb24uZXh0ZW50Tm9kZSkuaXMocGFyZW50KSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUubm9kZVZhbHVlLm1hdGNoKC9cXC5cXHMqJC8pICYmIG5vZGUubmV4dEVsZW1lbnRTaWJsaW5nID09PSBudWxsICYmIHBhcmVudC5pcygnaDEgc3BhbiwgaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcCwgdGgsIHRkLCAuZGF0YVRhYmxlIHRoIHNwYW4nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LnB1c2gobm9kZS5ub2RlVmFsdWUgKyAnLiAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LnB1c2gobm9kZS5ub2RlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0Lmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHNlbGVjdGlvbi5hbmNob3JOb2RlKS5pcyhzZWxlY3Rpb24uZm9jdXNOb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0WzBdID0gdGV4dFswXS5zdWJzdHJpbmcoMCwgc2VsZWN0aW9uLmZvY3VzT2Zmc2V0KS5zdWJzdHJpbmcoc2VsZWN0aW9uLmJhc2VPZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRbMF0gPSB0ZXh0WzBdLnN1YnN0cmluZyhzZWxlY3Rpb24uYmFzZU9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0WzBdID09PSAnLiAnIHx8IHRleHRbMF0gPT09ICcgJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0WzBdID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRUZXh0Tm9kZXMobm9kZS5jaGlsZE5vZGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgZ2V0VGV4dE5vZGVzKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRleHQubGVuZ3RoICYmIHRleHQubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRbdGV4dC5sZW5ndGggLSAxXSA9IHRleHRbdGV4dC5sZW5ndGggLSAxXS5zdWJzdHJpbmcoMCwgc2VsZWN0aW9uLmZvY3VzT2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LmpvaW4oJyAnKS5yZXBsYWNlKC8oPzpcXHJcXG58XFxyfFxcbikvZywgJyAnKS5yZXBsYWNlKC8gK1xcLi9nLCAnLiAnKS5yZXBsYWNlKC9cXHNcXHMrL2csICcgJykucmVwbGFjZSgnLC4nLCAnLicpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKCFsYXlvdXRyLmh0bWwuaGFzQ2xhc3MoJ3R0cy1sb2FkZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5Qcm9taXNlVFRTID0gbGF5b3V0ci5sb2FkLmpzKCdkaXN0L2pzL3R0cy5qcycpLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIuaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5odG1sLmFkZENsYXNzKCd0dHMtbG9hZGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGF5b3V0ci5Qcm9taXNlVFRTLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGF3c0NyZWRlbnRpYWxzID0gbmV3IEFXUy5DcmVkZW50aWFscygnQUtJQUk1Sk1DVkJaNENXU1NPT1EnLCAnRk03ajlGYlFMa1VVOHUzdEhTY3YwSU9HNElvYXlVa3AvUk5OTk5uaScpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd3NDcmVkZW50aWFsczogYXdzQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3c1JlZ2lvbjogJ2V1LWNlbnRyYWwtMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGx5Vm9pY2VJZDogJ1J1c3NlbGwnXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLnR0cyA9IENoYXR0eUthdGh5KHNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmh0bWwuYXR0cignZGF0YS10dHMnLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHdpbmRvdykub24oJ21vdXNlZG93biB0b3VjaHN0YXJ0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWxheW91dHIuaXNMb2FkaW5nKCkgJiYgIWxheW91dHIuaXNGb2N1cygpICYmIGxheW91dHIuaXNUVFMoKSAmJiBsYXlvdXRyLmlzVFRTRW5hYmxlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIuY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHdpbmRvdykub24oJ21vdXNldXAgdG91Y2hlbmQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJChkb2N1bWVudC5hY3RpdmVFbGVtZW50KS5pcygnaW5wdXQsIHRleHRhcmVhLCBidXR0b24sIHNlbGVjdCwgLmRyb3Bkb3duJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXlvdXRyLmlzTG9hZGluZygpICYmICFsYXlvdXRyLmlzRm9jdXMoKSAmJiBsYXlvdXRyLmlzVFRTKCkgJiYgbGF5b3V0ci5pc1RUU0VuYWJsZWQoKSAmJiBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsIDwgMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjdGlvbiA9IHNuYXBTZWxlY3Rpb25Ub1dvcmQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IGdldFRleHQoc2VsZWN0aW9uLmdldFJhbmdlQXQoMCkuY29tbW9uQW5jZXN0b3JDb250YWluZXIsIHNlbGVjdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLnR0cy5TcGVha1dpdGhQcm9taXNlKHRleHQpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLnN0b3BUVFMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxheW91dHIuaGVhZGVyLmZpbmQoJy50dHMnKS5jbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxheW91dHIuaHRtbC5hdHRyKCdkYXRhLXR0cycpID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5odG1sLmF0dHIoJ2RhdGEtdHRzJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLnN0b3BUVFMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLmh0bWwuYXR0cignZGF0YS10dHMnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuc2hvd1BvcHVwQWxlcnQoJ0ZhaWxlZCB0byBsb2FkIHR0cycsICdkYW5nZXInKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iLCJ7XHJcbiAgICAkKCgpID0+IHtcclxuICAgICAgICBsYXlvdXRyLmh0bWwub24oJ21vZGVsLWNoZWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY29udGVudEhlYWRlciA9IGxheW91dHIuY29udGVudC5jaGlsZHJlbignLmNvbnRlbnQtaGVhZGVyOm5vdCguZnVsbCknKTtcclxuICAgICAgICAgICAgaWYgKGNvbnRlbnRIZWFkZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGF5b3V0ci5pc01vZGFsKCkgJiYgY29udGVudEhlYWRlci5jc3MoJ3Bvc2l0aW9uJykgPT09ICdmaXhlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaGFsZk92ZXJmbG93WSA9IGxheW91dHIuc2Nyb2xsYmFyV2lkdGggLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRIZWFkZXIuY2hpbGRyZW4oKS5jc3MoJ3dpZHRoJywgYGNhbGMoMTAwJSAtICR7aGFsZk92ZXJmbG93WX1weClgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEhlYWRlci5jaGlsZHJlbigpLmNzcygnd2lkdGgnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59Iiwie1xyXG4gICAgLy9sYXlvdXRyLmxvYWRUaGVtZSA9IChpZCkgPT4ge1xyXG4gICAgLy8gICAgbGV0IHN0eWxlc2hlZXQgPSBsYXlvdXRyLmJvZHkuY2hpbGRyZW4oYGxpbmtbcmVsPVwic3R5bGVzaGVldFwiXVtocmVmXj1cIiR7bGF5b3V0ci5ob3N0fWRpc3QvY3NzL3RoZW1lL1wiXWApLFxyXG4gICAgLy8gICAgICAgIGhyZWYxID0gc3R5bGVzaGVldC5hdHRyKCdocmVmJyksXHJcbiAgICAvLyAgICAgICAgc3BsaXQxID0gaHJlZjEuc3BsaXQoJy8nKSxcclxuICAgIC8vICAgICAgICBzcGxpdDIgPSBzcGxpdDFbc3BsaXQxLmxlbmd0aCAtIDFdLnNwbGl0KCcuJyk7XHJcbiAgICAvLyAgICBsZXQgaHJlZjIgPSBbXTtcclxuICAgIC8vICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsaXQxLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgLy8gICAgICAgIGhyZWYyLnB1c2goc3BsaXQxW2ldICsgJy8nKTtcclxuICAgIC8vICAgIH1cclxuICAgIC8vICAgIGxldCB0aGVtZSA9IGlkLnN1YnN0cmluZyhpZC5pbmRleE9mKFwiLVwiKSArIDEpO1xyXG4gICAgLy8gICAgaHJlZjIucHVzaCh0aGVtZSk7XHJcblxyXG4gICAgLy8gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzcGxpdDIubGVuZ3RoOyBpKyspIHtcclxuICAgIC8vICAgICAgICBocmVmMi5wdXNoKGAuJHtzcGxpdDJbaV19YCk7XHJcbiAgICAvLyAgICB9XHJcbiAgICAvLyAgICBocmVmMiA9IGhyZWYyLmpvaW4oXCJcIik7XHJcbiAgICAvLyAgICBpZiAoaHJlZjEgIT09IGhyZWYyKSB7XHJcbiAgICAvLyAgICAgICAgbGF5b3V0ci5zaG93TG9hZGluZygpO1xyXG4gICAgLy8gICAgICAgIGxheW91dHIubG9hZC5jc3MoaHJlZjIpLnRoZW4oKCkgPT4ge1xyXG4gICAgLy8gICAgICAgICAgICBzdHlsZXNoZWV0LnJlbW92ZSgpO1xyXG4gICAgLy8gICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XHJcbiAgICAvLyAgICAgICAgICAgIGxheW91dHIuc2hvd1BvcHVwQWxlcnQoJ0ZhaWxlZCB0byBsb2FkIHRoZW1lJywgJ2RhbmdlcicpO1xyXG4gICAgLy8gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgLy8gICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgLy8gICAgICAgICAgICBsYXlvdXRyLmhpZGVMb2FkaW5nKCk7XHJcbiAgICAvLyAgICAgICAgfSk7XHJcbiAgICAvLyAgICB9XHJcbiAgICAvL307XHJcblxyXG4gICAgJCgoKSA9PiB7XHJcbiAgICAgICAgbGV0IGJvZHkgPSAkKFwiYm9keVwiKSxcclxuICAgICAgICAgICAgY29sb3JzID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdibHVlJyxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJyMwMDcyRUQnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdpbmRpZ28nLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnIzY2MTBmMidcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3B1cnBsZScsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICfCtCM2ZjQyYzEnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwaW5rJyxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJyNlODNlOGMnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdyZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnI2RjMzU0NSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ29yYW5nZScsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcjQkU1QTA2J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAneWVsbG93JyxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJyNmZmMxMDcnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdncmVlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcjMjE4ODM4J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndGVhbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcjMjBjOTk3J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY3lhbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcjMTM4Mjk0J1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIGxldCB0aGVtZUxpZ2h0ID0ge1xyXG4gICAgICAgICAgICBuYW1lOiAnbGlnaHQnLFxyXG4gICAgICAgICAgICBob3ZlcjogNy41LFxyXG4gICAgICAgICAgICBncmF5czogW1xyXG4gICAgICAgICAgICAgICAgXCIjZmZmZmZmXCIsXHJcbiAgICAgICAgICAgICAgICBcIiNmOGY5ZmFcIixcclxuICAgICAgICAgICAgICAgIFwiI2U5ZWNlZlwiLFxyXG4gICAgICAgICAgICAgICAgXCIjZGVlMmU2XCIsXHJcbiAgICAgICAgICAgICAgICBcIiNjZWQ0ZGFcIixcclxuICAgICAgICAgICAgICAgIFwiI2FkYjViZFwiLFxyXG4gICAgICAgICAgICAgICAgXCIjNkY3NzgwXCIsXHJcbiAgICAgICAgICAgICAgICBcIiM0OTUwNTdcIixcclxuICAgICAgICAgICAgICAgIFwiIzM0M2E0MFwiLFxyXG4gICAgICAgICAgICAgICAgXCIjMjEyNTI5XCIsXHJcbiAgICAgICAgICAgICAgICBcIiMwMDAwMDBcIlxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBjb2xvcnM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInByaW1hcnlcIixcclxuICAgICAgICAgICAgICAgICAgICBoZXg6ICgpID0+IHsgcmV0dXJuIGNvbG9ycy5maW5kKHggPT4geC5uYW1lID09PSAnYmx1ZScpLnZhbHVlIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzZWNvbmRhcnlcIixcclxuICAgICAgICAgICAgICAgICAgICBoZXg6ICgpID0+IHsgcmV0dXJuIHRoZW1lTGlnaHQuZ3JheXNbNl0gfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN1Y2Nlc3NcIixcclxuICAgICAgICAgICAgICAgICAgICBoZXg6ICgpID0+IHsgcmV0dXJuIGNvbG9ycy5maW5kKHggPT4geC5uYW1lID09PSAnZ3JlZW4nKS52YWx1ZSB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiaW5mb1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhleDogKCkgPT4geyByZXR1cm4gY29sb3JzLmZpbmQoeCA9PiB4Lm5hbWUgPT09ICdjeWFuJykudmFsdWUgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIndhcm5pbmdcIixcclxuICAgICAgICAgICAgICAgICAgICBoZXg6ICgpID0+IHsgcmV0dXJuIGNvbG9ycy5maW5kKHggPT4geC5uYW1lID09PSAnb3JhbmdlJykudmFsdWUgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcImRhbmdlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhleDogKCkgPT4geyByZXR1cm4gY29sb3JzLmZpbmQoeCA9PiB4Lm5hbWUgPT09ICdyZWQnKS52YWx1ZSB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwibGlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICBoZXg6ICgpID0+IHsgcmV0dXJuIHRoZW1lTGlnaHQuZ3JheXNbMV0gfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcImRhcmtcIixcclxuICAgICAgICAgICAgICAgICAgICBoZXg6ICgpID0+IHsgcmV0dXJuIHRoZW1lTGlnaHQuZ3JheXNbOF0gfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgdGhlbWVzID0gW1xyXG4gICAgICAgICAgICB0aGVtZUxpZ2h0XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYXJyYXlzRXF1YWwoYSwgYikge1xyXG4gICAgICAgICAgICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGlmIChhID09IG51bGwgfHwgYiA9PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChhLmxlbmd0aCAhPSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgeW91IGRvbid0IGNhcmUgYWJvdXQgdGhlIG9yZGVyIG9mIHRoZSBlbGVtZW50cyBpbnNpZGVcclxuICAgICAgICAgICAgLy8gdGhlIGFycmF5LCB5b3Ugc2hvdWxkIHNvcnQgYm90aCBhcnJheXMgaGVyZS5cclxuICAgICAgICAgICAgLy8gUGxlYXNlIG5vdGUgdGhhdCBjYWxsaW5nIHNvcnQgb24gYW4gYXJyYXkgd2lsbCBtb2RpZnkgdGhhdCBhcnJheS5cclxuICAgICAgICAgICAgLy8geW91IG1pZ2h0IHdhbnQgdG8gY2xvbmUgeW91ciBhcnJheSBmaXJzdC5cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFbaV0gIT09IGJbaV0pIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZ2JBbHBoYSA9IChyZ2IsIHBlcmNlbnRhZ2UpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJnYi5tYXAoZCA9PiAoZCArPSBwZXJjZW50YWdlKSA8IDAgPyAwIDogZCA+IDI1NSA/IDI1NSA6IGQgfCAwKTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgbGV0IHlpcSA9IHJnYiA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZ2JbMF0gKiAwLjI5OSArIHJnYlsxXSAqIDAuNTg3ICsgcmdiWzJdICogMC4xMTQgPiAxNDUgPyBbIDAsIDAsIDAgXSA6IFsgMjU1LCAyNTUsIDI1NSBdO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBsaWdodGVuID0gKHJnYiwgcGVyY2VudCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmdiQWxwaGEocmdiLCBwZXJjZW50KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgZGFya2VuID0gKHJnYiwgcGVyY2VudCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmdiQWxwaGEocmdiLCAtcGVyY2VudCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IGJvcmRlciA9IChjb2xvciwgeWlxLCBwZXJjZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhcnJheXNFcXVhbCh5aXEsIFswLCAwLCAwXSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXJrZW4oY29sb3IsIHBlcmNlbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpZ2h0ZW4oY29sb3IsIHBlcmNlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IGhleFRvUmdiID0gKGhleCkgPT4ge1xyXG4gICAgICAgICAgICBoZXggPSBoZXgucmVwbGFjZSgnIycsICcnKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIHBhcnNlSW50KGhleC5zdWJzdHJpbmcoMCwgMiksIDE2KSxcclxuICAgICAgICAgICAgICAgIHBhcnNlSW50KGhleC5zdWJzdHJpbmcoMiwgNCksIDE2KSxcclxuICAgICAgICAgICAgICAgIHBhcnNlSW50KGhleC5zdWJzdHJpbmcoNCwgNiksIDE2KVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgbG9hZFRoZW1lID0gKG5hbWUpID0+IHtcclxuICAgICAgICAgICAgbGV0IHRoZW1lID0gdGhlbWVzLmZpbmQoeCA9PiB4Lm5hbWUgPT09IG5hbWUpO1xyXG5cclxuICAgICAgICAgICAgJC5lYWNoKHRoZW1lLmdyYXlzLCAoaSwgZ3JheSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYm9keS5jc3MoYC0tZ3JheS0ke2kgKiAxMH1gLCBoZXhUb1JnYihncmF5KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkLmVhY2godGhlbWUuY29sb3JzLCAoaSwgY29sb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCByZ2IgPSBoZXhUb1JnYihjb2xvci5oZXgoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHZhcmlhbnRzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2RlZmF1bHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmdiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdkZWZhdWx0LWhvdmVyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJnYkFscGhhKHJnYiwgdGhlbWUuaG92ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2godmFyaWFudHMsIChqLCB2YXJpYW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRleHRDb2xvciA9IHlpcSh2YXJpYW50LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBib2R5LmNzcyhgLS0ke2NvbG9yLm5hbWV9LSR7dmFyaWFudC5uYW1lfS1iYWNrZ3JvdW5kYCwgdmFyaWFudC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keS5jc3MoYC0tJHtjb2xvci5uYW1lfS0ke3ZhcmlhbnQubmFtZX0tdGV4dGAsIHRleHRDb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keS5jc3MoYC0tJHtjb2xvci5uYW1lfS0ke3ZhcmlhbnQubmFtZX0tYm9yZGVyYCwgYm9yZGVyKHZhcmlhbnQudmFsdWUsIHRleHRDb2xvciwgMjApKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsb2FkVGhlbWUoJ2xpZ2h0Jyk7XHJcbiAgICB9KTtcclxufSIsIntcclxuICAgIGxheW91dHIuc2V0T25saW5lID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCBvbmxpbmUgPSBuYXZpZ2F0b3Iub25MaW5lO1xyXG5cclxuICAgICAgICBsYXlvdXRyLmJvZHkuZmluZCgnLmFsZXJ0W2RhdGEtdHlwZT1cImNvbm5lY3RlZFwiXScpLnJlbW92ZSgpO1xyXG4gICAgICAgIGlmIChvbmxpbmUpIHtcclxuICAgICAgICAgICAgbGF5b3V0ci5zaG93UG9wdXBBbGVydCgnWW91IGFyZSBvbmxpbmUnLCAnc3VjY2VzcycsICdib3R0b20gcmlnaHQnLCAnY29ubmVjdGVkJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGF5b3V0ci5zaG93UG9wdXBBbGVydCgnWW91IGFyZSBvZmZsaW5lJywgJ2RhbmdlcicsICdib3R0b20gcmlnaHQnLCAnY29ubmVjdGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkKCgpID0+IHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb25saW5lJywgbGF5b3V0ci5zZXRPbmxpbmUpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgbGF5b3V0ci5zZXRPbmxpbmUpO1xyXG5cclxuICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgbGF5b3V0ci5zZXRPbmxpbmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSIsIntcclxuICAgIGxheW91dHIuY2hlY2tEcm9wZG93biA9IChkcm9wZG93bnMpID0+IHtcclxuICAgICAgICBkcm9wZG93bnMuZWFjaCgoaSwgZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgJHRoaXMgPSAkKGUpLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSAkdGhpcy5jaGlsZHJlbignb3B0aW9uOnNlbGVjdGVkJyksXHJcbiAgICAgICAgICAgICAgICBhdHRyID0gJHRoaXMuYXR0cignY2xhc3MnKSxcclxuICAgICAgICAgICAgICAgIHRoZW1lID0gJycsXHJcbiAgICAgICAgICAgICAgICB3aWR0aCA9ICR0aGlzLmF0dHIoJ2RhdGEtd2lkdGgnKTtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkLmxlbmd0aCAhPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSAkdGhpcy5jaGlsZHJlbigpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhdHRyICE9PSB0eXBlb2YgdW5kZWZpbmVkICYmIGF0dHIgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IGF0dHIuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgICAgIHRlbXAgPSAkLmdyZXAodGVtcCwgKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udHJpbSgpLm1hdGNoKC9edGhlbWUtLyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmICh0ZW1wLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoZW1lID0gdGVtcFswXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGxpVGVtcGxhdGUgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpID0gJChlKSxcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gbGkudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0ZXh0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQgPSAnJm5ic3A7JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0LmluZGV4T2YoJyQkJykgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsaS5hdHRyKCdkYXRhLW1hdGgnLCB0ZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBgPGxpIGRhdGEtaWQ9XCIke2xpLnZhbCgpfVwiJHtsaS5pcygnOnNlbGVjdGVkJykgPyAnIGNsYXNzPVwic2VsZWN0ZWRcIicgOiAnJ30+XHJcbiAgICA8ZGl2IHRhYmluZGV4PVwiMFwiIGNsYXNzPVwidGhlbWUtbGlnaHRcIj5cclxuICAgICAgICA8bGFiZWw+JHt0ZXh0fTwvbGFiZWw+XHJcbiAgICAgICAgPHN2ZyBmb2N1c2FibGU9XCJmYWxzZVwiPjx1c2UgeGxpbms6aHJlZj1cIiNzdmctY2hlY2ttYXJrXCI+PC91c2U+PC9zdmc+XHJcbiAgICA8L2Rpdj5cclxuPC9saT5gO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBsZXQgaHRtbCA9IFxyXG5gPGRpdiBjbGFzcz1cImRyb3Bkb3duXHJcbiAgICAkeyR0aGlzLmhhc0NsYXNzKCdub3QtZmlyc3QnKSA/ICcgbm90LWZpcnN0JyA6ICcnfVxyXG4gICAgJHskdGhpcy5oYXNDbGFzcygnbm93cmFwJykgPyAnIG5vd3JhcCcgOiAnJ31cclxuICAgICR7JHRoaXMuaGFzQ2xhc3MoJ2NoZWNrJykgPyAnIGNoZWNrJyA6ICcnfVxyXG4gICAgJHskdGhpcy5oYXNDbGFzcygnZWxsaXBzaXMnKSA/ICcgZWxsaXBzaXMnIDogJyd9XHJcbiAgICAkeyR0aGlzLmhhc0NsYXNzKCdhbGlnbi1sZWZ0JykgPyAnIGFsaWduLWxlZnQnIDogJyd9XHJcbiAgICAkeyR0aGlzLmhhc0NsYXNzKCdhbGlnbi1yaWdodCcpID8gJyBhbGlnbi1yaWdodCcgOiAnJ31cclxuICAgICR7JHRoaXMuaGFzQ2xhc3MoJ2RpcmVjdGlvbi11cCcpID8gJyBkaXJlY3Rpb24tdXAnIDogJyd9XHJcbiAgICBcIlxyXG4gICAgJHt3aWR0aCAhPT0gdW5kZWZpbmVkID8gYCBzdHlsZT1cIndpZHRoOiAke3dpZHRofXB4XCJgIDogJyd9XHJcbj5cclxuICAgIDxkaXYgdGFiaW5kZXg9XCIwXCIgY2xhc3M9XCIke3RoZW1lfVwiPlxyXG4gICAgICAgIDxsYWJlbD4ke3NlbGVjdGVkLnRleHQoKX08L2xhYmVsPlxyXG4gICAgICAgIDxzdmcgZm9jdXNhYmxlPVwiZmFsc2VcIj48dXNlIHhsaW5rOmhyZWY9XCIjc3ZnLWFycm93XCI+PC91c2U+PC9zdmc+XHJcbiAgICA8L2Rpdj5cclxuICAgIDx1bCBjbGFzcz1cIiR7dGhlbWV9XCI+XHJcbiAgICAgICAgJHskLm1ha2VBcnJheSgkdGhpcy5jaGlsZHJlbigpKS5tYXAobGlUZW1wbGF0ZSkuam9pbignJyl9XHJcbiAgICA8L3VsPlxyXG48L2Rpdj5gO1xyXG4gICAgICAgICAgICAkdGhpcy5hZnRlcihodG1sKTtcclxuICAgICAgICAgICAgaHRtbCA9ICR0aGlzLm5leHQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygnbm93cmFwJykpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0b3AgPSBodG1sLmNoaWxkcmVuKCkuZXEoMCksXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tID0gaHRtbC5jaGlsZHJlbigpLmVxKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcFdpZHRoID0gdG9wLndpZHRoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tV2lkdGggPSBib3R0b20ud2lkdGgoKTtcclxuICAgICAgICAgICAgICAgIGlmIChib3R0b21XaWR0aCA+IHRvcFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wLmNzcygnbWluLXdpZHRoJywgYm90dG9tV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBodG1sLm9uKCdjbGljaycsICc+IGRpdicsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgJHRoYXQgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAkdGhhdC5wYXJlbnQoKS50b2dnbGVDbGFzcygnb3BlbicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaHRtbC5vbignY2xpY2snLCAnbGknLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0ICR0aGF0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkdGhhdC5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0IGEnKTtcclxuICAgICAgICAgICAgICAgICAgICAkdGhhdC5zaWJsaW5ncygnLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoYXQuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9ICR0aGlzLmNoaWxkcmVuKGBbdmFsdWU9XCIkeyR0aGF0LmF0dHIoJ2RhdGEtaWQnKX1cIl1gKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9ICR0aGF0LnRleHQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0aCA9IG9wdGlvbi5hdHRyKCdkYXRhLW1hdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0aCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBtYXRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGFiZWwgPSBodG1sLmNoaWxkcmVuKCdkaXYnKS5jaGlsZHJlbignbGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbC50ZXh0KHRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyTWF0aEluRWxlbWVudChsYWJlbFswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmNoaWxkcmVuKCc6c2VsZWN0ZWQnKS5yZW1vdmVBdHRyKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5wcm9wKCdzZWxlY3RlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmNoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJCh3aW5kb3cpLmNsaWNrKChlKSA9PiB7XHJcbiAgICAgICAgbGV0IHRhcmdldCA9ICQoZS50YXJnZXQpO1xyXG4gICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdChcImRpdi5kcm9wZG93blwiKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgJCgnZGl2LmRyb3Bkb3duJykubm90KHRhcmdldC5jbG9zZXN0KFwiZGl2LmRyb3Bkb3duXCIpKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0YXJnZXQuY2xvc2VzdChcIi5kcm9wZG93blwiKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgJCgnZGl2LmRyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSIsIntcclxuICAgIGxheW91dHIuY2hlY2tBY2NvcmRpb24gPSAoZWxlbWVudHMpID0+IHtcclxuICAgICAgICBlbGVtZW50cy5vbihcImNsaWNrXCIsIFwiLmhlYWRsaW5lXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjb250ZW50ID0gJChlLmN1cnJlbnRUYXJnZXQpLm5leHQoKTtcclxuICAgICAgICAgICAgaWYgKGNvbnRlbnQuaGFzQ2xhc3MoJ29wZW4nKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnb3BlbicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNsaWRlVXAoXCI4MDBcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwib3BlblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zbGlkZVRvZ2dsZShcIjgwMFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wYXJlbnRzKCcuYWNjb3JkaW9uJykuZmluZChcIi5jb250ZW50Lm9wZW5cIikubm90KGNvbnRlbnQpLnJlbW92ZUNsYXNzKCdvcGVuJykuc2xpZGVVcChcIjgwMFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufSIsIntcclxuICAgIGxldCBjbG9zZUFsZXJ0ID0gKHRhcmdldCkgPT4ge1xyXG4gICAgICAgIHRhcmdldC5mYWRlT3V0KGxheW91dHIuZmFkZU91dFRpbWUsICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHRhcmdldC5wYXJlbnQoKTtcclxuICAgICAgICAgICAgaWYgKHBhcmVudC5oYXNDbGFzcygncG9wdXAnKSAmJiBwYXJlbnQuY2hpbGRyZW4oKS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkKCgpID0+IHtcclxuICAgICAgICBsYXlvdXRyLmJvZHkub24oJ2NsaWNrJywgJy5hbGVydCAuY2xvc2UnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpO1xyXG4gICAgICAgICAgICBjbG9zZUFsZXJ0KHRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSIsIntcclxuICAgIGxheW91dHIuY2hlY2tNYXAgPSAobWFwcykgPT4ge1xyXG4gICAgICAgIGxheW91dHIuaGVhZC5maW5kKCdzY3JpcHRbc3JjXj1cImh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzLWFwaS1cIl0nKS5yZW1vdmUoKTtcclxuICAgICAgICBpZiAobWFwcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKCFsYXlvdXRyLmh0bWwuaGFzQ2xhc3MoJ21hcC1sb2FkZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5wcm9taXNlTWFwID0gbGF5b3V0ci5sb2FkLmpzKCdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvanM/a2V5PUFJemFTeUJFY29tRGpSUzROdTNSUUNra1NJUTBuckJodVFNMGduZycpLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIuaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5odG1sLmFkZENsYXNzKCdtYXAtbG9hZGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxheW91dHIucHJvbWlzZU1hcC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIG1hcHMuZWFjaCgoaSwgZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCAkdGhpcyA9ICQoZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhdCA9IGxheW91dHIudHJ5UGFyc2VGbG9hdCgkdGhpcy5hdHRyKCdkYXRhLWxhdCcpLCAzNy40MDI5OTM3KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG5nID0gbGF5b3V0ci50cnlQYXJzZUZsb2F0KCR0aGlzLmF0dHIoJ2RhdGEtbG5nJyksIC0xMjIuMTgxMTc5MyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb20gPSBsYXlvdXRyLnRyeVBhcnNlSW50KCR0aGlzLmF0dHIoJ2RhdGEtem9vbScpLCA0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29yZHMgPSB7IGxhdDogbGF0LCBsbmc6IGxuZyB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcCgkdGhpc1swXSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tOiB6b29tLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IGNvcmRzXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGNvcmRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKHdpbmRvdykuYmluZCgncmVzaXplLm1hcCcsICQudGhyb3R0bGUobGF5b3V0ci50aHJvdHRsZUludGVydmFsLCBmYWxzZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKCR0aGlzWzBdLCAncmVzaXplJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLmh0bWwub24oJ2FzaWRlLWNoYW5nZWQubWFwJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKCR0aGlzWzBdLCAncmVzaXplJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuc2hvd1BvcHVwQWxlcnQoJ0ZhaWxlZCB0byBsb2FkIG1hcHMnLCAnZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKHdpbmRvdykudW5iaW5kKCdyZXNpemUubWFwJyk7XHJcbiAgICAgICAgICAgIGxheW91dHIuaHRtbC5vZmYoJ2FzaWRlLWNoYW5nZWQubWFwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSIsIntcclxuICAgIGxheW91dHIuY2hlY2tNYXRoID0gKG1hdGgpID0+IHtcclxuICAgICAgICBpZiAobWF0aC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKCFsYXlvdXRyLmh0bWwuaGFzQ2xhc3MoJ21hdGgtbG9hZGVkJykpIHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIGxheW91dHIucHJvbWlzZU1hdGggPSBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5sb2FkLmNzcygnZGlzdC9jc3Mva2F0ZXguY3NzJyksXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5sb2FkLmpzKCdkaXN0L2pzL2thdGV4LmpzJylcclxuICAgICAgICAgICAgICAgIF0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIuaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5odG1sLmFkZENsYXNzKCdtYXRoLWxvYWRlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsYXlvdXRyLnByb21pc2VNYXRoLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbWF0aC5lYWNoKChpLCBlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0ICR0aGlzID0gJChlKTtcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJNYXRoSW5FbGVtZW50KCR0aGlzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ21hdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5zaG93UG9wdXBBbGVydCgnRmFpbGVkIHRvIGxvYWQgbWF0aCcsICdkYW5nZXInKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iLCJ7XHJcbiAgICBsYXlvdXRyLmNoZWNrTWVkaWEgPSAobWVkaWEpID0+IHtcclxuICAgICAgICBpZiAobWVkaWEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmICghbGF5b3V0ci5odG1sLmhhc0NsYXNzKCdtZWRpYS1sb2FkZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5wcm9taXNlTWVkaWEgPSBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5sb2FkLmNzcygnZGlzdC9jc3MvcGx5ci5jc3MnKSxcclxuICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLmxvYWQuanMoJ2Rpc3QvanMvcGx5ci5qcycpXHJcbiAgICAgICAgICAgICAgICBdKS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLmhpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuaHRtbC5hZGRDbGFzcygnbWVkaWEtbG9hZGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxheW91dHIucHJvbWlzZU1lZGlhLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbWVkaWEuZWFjaCgoaSwgaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBQbHlyKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLnNob3dQb3B1cEFsZXJ0KCdGYWlsZWQgdG8gbG9hZCBtZWRpYScsICdkYW5nZXInKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iLCJ7XHJcbiAgICBsYXlvdXRyLmNoZWNrTGF6eSA9IChlbGVtZW50cykgPT4ge1xyXG4gICAgICAgIGVsZW1lbnRzLmxhenkoe1xyXG4gICAgICAgICAgICBhZnRlckxvYWQ6IChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdsYXp5Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07Iiwie1xyXG4gICAgJCgoKSA9PiB7XHJcbiAgICAgICAgbGF5b3V0ci5ib2R5Lm9uKCdjbGljaycsICcuc2hvdy1wb3B1cC1hbGVydCcsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KSxcclxuICAgICAgICAgICAgICAgIHRpdGxlID0gJHRoaXMuYXR0cignZGF0YS1wb3B1cC10aXRsZScpLFxyXG4gICAgICAgICAgICAgICAgdGhlbWUgPSAkdGhpcy5hdHRyKCdkYXRhLXBvcHVwLXRoZW1lJyksXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICR0aGlzLmF0dHIoJ2RhdGEtcG9wdXAtcG9zaXRpb24nKTtcclxuICAgICAgICAgICAgbGF5b3V0ci5zaG93UG9wdXBBbGVydCh0aXRsZSwgdGhlbWUsIHBvc2l0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGxheW91dHIuc2hvd1BvcHVwQWxlcnQgPSAodGl0bGUsIHRoZW1lID0gJ2xpZ2h0JywgcG9zaXRpb24gPSAndG9wIGxlZnQnLCB0eXBlID0gJ2RlZmF1bHQnKSA9PiB7XHJcbiAgICAgICAgaWYgKHRpdGxlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGV0IHBvcHVwID0gbGF5b3V0ci5ib2R5LmNoaWxkcmVuKGAucG9wdXBbZGF0YS1wb3NpdGlvbj1cIiR7cG9zaXRpb259XCJdYCksXHJcbiAgICAgICAgICAgICAgICBodG1sID1cclxuICAgICAgICAgICAgICAgICAgICBgPGRpdiBjbGFzcz1cImFsZXJ0IHRoZW1lLSR7dGhlbWV9XCIgZGF0YS10eXBlPVwiJHt0eXBlfVwiPlxyXG48ZGl2PjxwPiR7dGl0bGV9PC9wPjwvZGl2PlxyXG48YnV0dG9uIGNsYXNzPVwiY2xvc2VcIiBhcmlhLWxhYmVsPVwiQ2xvc2UgcG9wdXBcIj48c3ZnIGZvY3VzYWJsZT1cImZhbHNlXCI+PHVzZSB4bGluazpocmVmPVwiI3N2Zy1jbG9zZVwiPjwvdXNlPjwvc3ZnPjwvYnV0dG9uPlxyXG48L2Rpdj5gO1xyXG4gICAgICAgICAgICBpZiAocG9wdXAubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cC5hcHBlbmQoaHRtbCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBodG1sID0gYDxkaXYgY2xhc3M9XCJwb3B1cCBwb3NpdGlvbiAke3Bvc2l0aW9ufVwiIGRhdGEtcG9zaXRpb249XCIke3Bvc2l0aW9ufVwiPiR7aHRtbH1gO1xyXG4gICAgICAgICAgICAgICAgaHRtbCA9IGAke2h0bWx9PC9kaXY+YDtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuYm9keS5wcmVwZW5kKGh0bWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSIsIntcclxuICAgIGxheW91dHIuY2hlY2tSZXNwb25zaXZlQmFja2dyb3VuZCA9IChlbGVtZW50cykgPT4ge1xyXG4gICAgICAgIGxldCBzZXRSYiA9IChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjbG9uZSA9IGVsZW1lbnQuY2hpbGRyZW4oJy5jbG9uZScpLFxyXG4gICAgICAgICAgICAgICAgaW1hZ2UgPSBlbGVtZW50LmF0dHIoJ2RhdGEtcmItaW1hZ2UnKSxcclxuICAgICAgICAgICAgICAgIGZpbGV0eXBlID0gZWxlbWVudC5hdHRyKCdkYXRhLXJiLWltYWdlLWZpbGV0eXBlJyksXHJcbiAgICAgICAgICAgICAgICBzaXplc1dpZHRoID0gZWxlbWVudC5hdHRyKCdkYXRhLXJiLXNpemVzJyksXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gZWxlbWVudC5hdHRyKCdkYXRhLXJiLWN1cnJlbnQnKSxcclxuICAgICAgICAgICAgICAgIGFzcGVjdFJhdGlvID0gZWxlbWVudC5hdHRyKCdkYXRhLXJiLWFzcGVjdC1yYXRpbycpO1xyXG4gICAgICAgICAgICBpZiAoaW1hZ2UgIT09IHVuZGVmaW5lZCAmJiBpbWFnZS5sZW5ndGggJiZcclxuICAgICAgICAgICAgICAgIGZpbGV0eXBlICE9PSB1bmRlZmluZWQgJiYgZmlsZXR5cGUubGVuZ3RoICYmXHJcbiAgICAgICAgICAgICAgICBzaXplc1dpZHRoICE9PSB1bmRlZmluZWQgJiYgc2l6ZXNXaWR0aC5sZW5ndGggJiZcclxuICAgICAgICAgICAgICAgIGFzcGVjdFJhdGlvICE9PSB1bmRlZmluZWQgJiYgYXNwZWN0UmF0aW8ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKGZpbGV0eXBlID09PSAnanBnJyB8fCBmaWxldHlwZSA9PT0gJ2pwZWcnIHx8IGZpbGV0eXBlID09PSAncG5nJykgJiZcclxuICAgICAgICAgICAgICAgICAgICAoYXNwZWN0UmF0aW8gPT09ICcyMWJ5OScgfHwgYXNwZWN0UmF0aW8gPT09ICcxNmJ5OScgfHwgYXNwZWN0UmF0aW8gPT09ICc0YnkzJyB8fCBhc3BlY3RSYXRpbyA9PT0gJzFieTEnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzV2lkdGggPSBzaXplc1dpZHRoLnJlcGxhY2UoL1xccy9nLCAnJykuc3BsaXQoJywnKS5zb3J0KChhLCBiKSA9PiB7IHJldHVybiBhIC0gYjsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUuYXR0cignc3R5bGUnLCBlbGVtZW50LmF0dHIoJ3N0eWxlJykpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgZ29hbFdpZHRoID0gZWxlbWVudC53aWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnb2FsSGVpZ2h0ID0gZWxlbWVudC5oZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0SGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHRQZXJjZW50YWdlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgZ2V0SGVpZ2h0SW5QZXJjZW50YWdlID0gKG51bSwgYW1vdW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudW0gKiAxMDAgLyBhbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFzcGVjdFJhdGlvID09PSAnMjFieTknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodFBlcmNlbnRhZ2UgPSBnZXRIZWlnaHRJblBlcmNlbnRhZ2UoOSwgMjEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNwZWN0UmF0aW8gPT09ICcxNmJ5OScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0UGVyY2VudGFnZSA9IGdldEhlaWdodEluUGVyY2VudGFnZSg5LCAxNik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNwZWN0UmF0aW8gPT09ICc0YnkzJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHRQZXJjZW50YWdlID0gZ2V0SGVpZ2h0SW5QZXJjZW50YWdlKDMsIDQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFzcGVjdFJhdGlvID09PSAnMWJ5MScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0UGVyY2VudGFnZSA9IDEwMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBnZXRIZWlnaHRJblBpeGVscyA9IChudW0sIGFtb3VudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVtICogYW1vdW50IC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChzaXplc1dpZHRoLCAoaSwgZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2lkdGggPSBwYXJzZUludChlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IGdldEhlaWdodEluUGl4ZWxzKGhlaWdodFBlcmNlbnRhZ2UsIHdpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3Nlc3RXaWR0aCA9PT0gdW5kZWZpbmVkIHx8IHdpZHRoIDwgZ29hbFdpZHRoIHx8IGNsb3Nlc3RXaWR0aCA8IGdvYWxXaWR0aCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdEhlaWdodCA9PT0gdW5kZWZpbmVkIHx8IGhlaWdodCA8IGdvYWxIZWlnaHQgfHwgY2xvc2VzdEhlaWdodCA8IGdvYWxIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RXaWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdEhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnQubGVuZ3RoICYmIHBhcnNlSW50KGN1cnJlbnQpIDwgY2xvc2VzdFdpZHRoIHx8IGN1cnJlbnQgPT09IHVuZGVmaW5lZCB8fCBjdXJyZW50Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3JjID0gYCR7aW1hZ2V9LSR7Y2xvc2VzdFdpZHRofS4ke2ZpbGV0eXBlfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHIubG9hZC5pbWcoc3JjKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lLmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGB1cmwoJHtzcmN9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCBgdXJsKCR7c3JjfSlgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b2RvOiBmaW5kIHJlcGxhY2VtZW50IGZvciA1MDAgbXMgdGltZW91dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hdHRyKCdkYXRhLXJiLWN1cnJlbnQnLCBjbG9zZXN0V2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5zaG93UG9wdXBBbGVydCgnRmFpbGVkIHRvIGxvYWQgcmVzcG9uc2l2ZSBiYWNrZ3JvdW5kIGltYWdlJywgJ2RhbmdlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBlbGVtZW50cy5lYWNoKChpLCBlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZWxlbWVudCA9ICQoZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0UmIoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUucmInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0UmIoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmh0bWwub24oJ2NvbHVtbnMtY2hhbmdlZC5yYicsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRSYihlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxheW91dHIuaHRtbC5vbignYXNpZGUtY2hhbmdlZC5yYicsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRSYihlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCh3aW5kb3cpLm9mZigncmVzaXplLnJiJyk7XHJcbiAgICAgICAgICAgIGxheW91dHIuaHRtbC5vZmYoJ2NvbHVtbnMtY2hhbmdlZC5yYicpO1xyXG4gICAgICAgICAgICBsYXlvdXRyLmh0bWwub2ZmKCdhc2lkZS1jaGFuZ2VkLnJiJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcbn0iLCJ7XHJcbiAgICBsYXlvdXRyLmNoZWNrVG9vbHRpcCA9ICh0b29sdGlwcykgPT4ge1xyXG4gICAgICAgIHRvb2x0aXBzLmVhY2goKGksIGUpID0+IHtcclxuICAgICAgICAgICAgbGV0ICR0aGlzID0gJChlKSxcclxuICAgICAgICAgICAgICAgIGludGVyYWN0aXZlID0gJHRoaXMuaGFzQ2xhc3MoJ2ludGVyYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICR0aGlzLnRvb2x0aXBzdGVyKHtcclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiAwLFxyXG4gICAgICAgICAgICAgICAgaW50ZXJhY3RpdmU6IGludGVyYWN0aXZlLFxyXG4gICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgICAgICB0cmlnZ2VyT3Blbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZW50ZXI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hzdGFydDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJDbG9zZToge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlbGVhdmU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFwOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn0iLCJ7XHJcbiAgICBsYXlvdXRyLmNoZWNrRGF0YXRhYmxlID0gKHRhYmxlcykgPT4ge1xyXG4gICAgICAgIGlmICh0YWJsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmICghbGF5b3V0ci5odG1sLmhhc0NsYXNzKCdkYXRhdGFibGVzLWxvYWRlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLnNob3dMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLnByb21pc2VEYXRhdGFibGVzID0gbGF5b3V0ci5sb2FkLmpzKCdkaXN0L2pzL2RhdGF0YWJsZXMuanMnKS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLmhpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuaHRtbC5hZGRDbGFzcygnZGF0YXRhYmxlcy1sb2FkZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYXlvdXRyLnByb21pc2VEYXRhdGFibGVzLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMCxcclxuICAgICAgICAgICAgICAgICAgICBnYXAgPSAnZ2FwLTMnO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhYmxlX2hlYWRlcl9pbnB1dCA9IChpbnN0YW5jZSwgd3JhcHBlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aHMgPSB3cmFwcGVyLmZpbmQoJ3RoZWFkIHRoJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0galF1ZXJ5LmdyZXAodGhzLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbHVtbiA9ICQoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uLmhhc0NsYXNzKCdkcm9wZG93bicpIHx8IGNvbHVtbi5oYXNDbGFzcygndGV4dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRocy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sdW1uID0gJCh0aHNbaV0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IGNvbHVtbi5odG1sKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5XaWR0aCA9IGNvbHVtbi5hdHRyKCdkYXRhLW1pbi13aWR0aCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUgPSBtaW5XaWR0aCA/IGBtaW4td2lkdGg6ICR7bWluV2lkdGh9cHg7YCA6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYDxkaXYgc3R5bGU9XCIke3N0eWxlfVwiPlxyXG4gICAgPGRpdj5cclxuICAgICAgICA8c3Bhbj4ke3RleHR9PC9zcGFuPlxyXG4gICAgPC9kaXY+XHJcbiAgICAke2VsZW1lbnRzLmxlbmd0aCA/ICc8ZGl2PjwvZGl2PicgOiAnJ31cclxuPC9kaXY+YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLmVtcHR5KCkuYXBwZW5kKGh0bWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBjb2x1bW4uaW5kZXgoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uaGFzQ2xhc3MoJ2Ryb3Bkb3duJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZWxlY3QgPSAkKCc8c2VsZWN0IGNsYXNzPVwiZHJvcGRvd24gYWxpZ24tbGVmdCBub3dyYXBcIj48b3B0aW9uIHZhbHVlPVwiXCI+PC9vcHRpb24+PC9zZWxlY3Q+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kVG8oY29sdW1uLmZpbmQoJz4gZGl2ID4gZGl2Omxhc3QtY2hpbGQnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oJ2NoYW5nZScsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmNvbHVtbihpbmRleCkuc2VhcmNoKGUuY3VycmVudFRhcmdldC52YWx1ZSkuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmNvbHVtbihpKS5kYXRhKCkudW5pcXVlKCkuc29ydChsYXlvdXRyLnNvcnQpLmVhY2goKGQsIGopID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QuYXBwZW5kKGA8b3B0aW9uIHZhbHVlPVwiJHtkfVwiPiR7ZH08L29wdGlvbj5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbHVtbi5oYXNDbGFzcygndGV4dCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSAkKCc8aW5wdXQgdHlwZT1cInRleHRcIiAvPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKGNvbHVtbi5maW5kKCc+IGRpdiA+IGRpdjpsYXN0LWNoaWxkJykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdrZXl1cCcsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9ICR0aGlzLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmF0dHIoJ2RhdGEtbGFzdCcpICE9PSB2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmNvbHVtbihpbmRleCkuc2VhcmNoKHZhbCkuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmF0dHIoJ2RhdGEtbGFzdCcsIHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnQoKS5hZGRDbGFzcygnZm9ybS1ncm91cCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZGVidWdnZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGxldCB0YWJsZV9oZWFkZXJfc29ydCA9IChpbnN0YW5jZSwgd3JhcHBlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuZmluZCgndGhlYWQgdGgnKS51bmJpbmQoJ2NsaWNrJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbmFibGVkID0gd3JhcHBlci5maW5kKCd0aGVhZCB0aDpub3QoLnNvcnRpbmctZGlzYWJsZWQpJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkID0gd3JhcHBlci5maW5kKCd0aGVhZCB0aC5zb3J0aW5nLWRpc2FibGVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkLnJlbW92ZUF0dHIoJ3RhYmluZGV4Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQuZmluZCgnPiBkaXYgPiBkaXY6Zmlyc3QtY2hpbGQnKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVwic29ydC1idG5cIj48L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZC5jbGljaygoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgJHRoaXMgPSAkKGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkdGhpcy5jbG9zZXN0KCdkaXYuZHJvcGRvd24nKS5sZW5ndGggJiYgISR0aGlzLmNsb3Nlc3QoJ2lucHV0JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gJHRoaXMucGFyZW50cygndGgnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHBhcmVudC5pbmRleCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudC5oYXNDbGFzcygnc29ydGluZ19hc2MnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmNvbHVtbihpbmRleCkub3JkZXIoJ2Rlc2MnKS5kcmF3KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5jb2x1bW4oaW5kZXgpLm9yZGVyKCdhc2MnKS5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFibGVfaGVhZGVyX2xlbmd0aCA9ICh3cmFwcGVyLCBoZWFkZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGVuZ3RoID0gd3JhcHBlci5maW5kKCcuZGF0YVRhYmxlc19sZW5ndGgnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24gPSBsZW5ndGguZmluZCgnc2VsZWN0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aC5hcHBlbmQoZHJvcGRvd24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aC5jaGlsZHJlbignbGFiZWwnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRDbGFzcygnZHJvcGRvd24nKS5hdHRyKCdkYXRhLXdpZHRoJywgMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhYmxlX2hlYWRlcl9idXR0b25zID0gKHdyYXBwZXIsIGhlYWRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb250YWluZXIgPSB3cmFwcGVyLmZpbmQoJy5kdC1idXR0b25zJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmQoYDxkaXYgY2xhc3M9XCJmbGV4IHdyYXAgJHtnYXB9XCI+PC9kaXY+YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkaXYgPSBjb250YWluZXIuY2hpbGRyZW4oJ2RpdicpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zID0gY29udGFpbmVyLmNoaWxkcmVuKCdidXR0b24nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZChkaXYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnMuYWRkQ2xhc3MoJ2J0bicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpdi5hcHBlbmQoYnV0dG9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZChjb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGxldCB0YWJsZV9oZWFkZXJfZmlsdGVyID0gKHdyYXBwZXIsIGhlYWRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXIgPSB3cmFwcGVyLmZpbmQoJy5kYXRhVGFibGVzX2ZpbHRlcicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIuYWRkQ2xhc3MoJ2lucHV0LWdyb3VwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyLmZpbmQoJ2lucHV0JykuYXBwZW5kVG8oZmlsdGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAtYWRkb25cIj48c3ZnIGZvY3VzYWJsZT1cImZhbHNlXCI+PHVzZSB4bGluazpocmVmPVwiI3N2Zy1zZWFyY2hcIj48L3VzZT48L3N2Zz48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIuZmluZCgnbGFiZWwnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKGZpbHRlcik7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhYmxlX2NvbnRlbnQgPSAod3JhcHBlciwgY29udGVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWJsZSA9IHdyYXBwZXIuZmluZCgndGFibGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LmFwcGVuZCh0YWJsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGxldCB0YWJsZV9mb290ZXJfaW5mbyA9ICh3cmFwcGVyLCBmb290ZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IHdyYXBwZXIuZmluZCgnLmRhdGFUYWJsZXNfaW5mbycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvb3Rlci5hcHBlbmQoaW5mbyk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhZ2luYXRlRml4ID0gKHBhZ2luYXRlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNwYW4gPSBwYWdpbmF0ZS5jaGlsZHJlbignc3BhbicpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2ID0gcGFnaW5hdGUuZmluZCgnLnBhZ2luYXRlX2J1dHRvbi5wcmV2aW91cycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gcGFnaW5hdGUuZmluZCgnLnBhZ2luYXRlX2J1dHRvbi5uZXh0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHByZXYuaHRtbCgnPHN2ZyBmb2N1c2FibGU9XCJmYWxzZVwiPjx1c2UgeGxpbms6aHJlZj1cIiNzdmctYXJyb3dcIj48L3VzZT48L3N2Zz4nKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0Lmh0bWwoJzxzdmcgZm9jdXNhYmxlPVwiZmFsc2VcIj48dXNlIHhsaW5rOmhyZWY9XCIjc3ZnLWFycm93XCI+PC91c2U+PC9zdmc+Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHByZXYucHJlcGVuZFRvKHNwYW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHQuYXBwZW5kVG8oc3Bhbik7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhYmxlX2Zvb3Rlcl9wYWdpbmF0ZSA9ICh3cmFwcGVyLCBmb290ZXIsIHBhZ2luYXRlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGUuYWRkQ2xhc3MoJ2ZsZXggd3JhcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvb3Rlci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJkYXRhVGFibGVzX3BhZ2luYXRlX2NvbnRhaW5lclwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb250YWluZXIgPSBmb290ZXIuZmluZCgnLmRhdGFUYWJsZXNfcGFnaW5hdGVfY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGVGaXgocGFnaW5hdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmQocGFnaW5hdGUpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGxldCB0YWJsZV9kcm9wZG93bnMgPSAod3JhcHBlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkcm9wZG93bnMgPSB3cmFwcGVyLmZpbmQoJ3NlbGVjdC5kcm9wZG93bicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIuY2hlY2tEcm9wZG93bihkcm9wZG93bnMpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB0YWJsZXMuZWFjaCgoaSwgZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCAkdGhpcyA9ICQoZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZvcm1hdFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiAodGV4dCwgaW5kZXgsIHRoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoKS5maW5kKCdzcGFuOmZpcnN0JykuaHRtbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnbm93cmFwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuRGF0YVRhYmxlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkb21cIjogJ2xCZnJ0aXAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJTb3J0Q2VsbHNUb3BcIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZDogJ2NvcHlIdG1sNScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRPcHRpb25zOiBleHBvcnRPcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZDogJ2V4Y2VsSHRtbDUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0T3B0aW9uczogZXhwb3J0T3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmQ6ICdjc3ZIdG1sNScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRPcHRpb25zOiBleHBvcnRPcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRDb21wbGV0ZTogKHNldHRpbmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5zdGFuY2UgPSBzZXR0aW5ncy5vSW5zdGFuY2UuYXBpKHRydWUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIgPSAkKHNldHRpbmdzLm5UYWJsZVdyYXBwZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kKGA8ZGl2IGNsYXNzPVwiZGF0YVRhYmxlc19oZWFkZXIgZmxleCBjb2x1bW4gZ3Jvd1wiPjxkaXYgY2xhc3M9XCJmbGV4IHdyYXAgJHtnYXB9XCI+PC9kaXY+PC9kaXY+YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGVhZGVyID0gd3JhcHBlci5maW5kKCc+IC5kYXRhVGFibGVzX2hlYWRlciA+IGRpdicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZGF0YVRhYmxlc19jb250ZW50IHRhYmxlXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IHdyYXBwZXIuZmluZCgnPiAuZGF0YVRhYmxlc19jb250ZW50Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmQoYDxkaXYgY2xhc3M9XCJkYXRhVGFibGVzX2Zvb3RlclwiPjxkaXYgY2xhc3M9XCJmbGV4IHdyYXAgdmVydGljYWwtY2VudGVyICR7Z2FwfVwiPjwvZGl2PjwvZGl2PmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvb3RlciA9IHdyYXBwZXIuZmluZCgnPiAuZGF0YVRhYmxlc19mb290ZXIgPiBkaXYnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZV9oZWFkZXJfaW5wdXQoaW5zdGFuY2UsIHdyYXBwZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfaGVhZGVyX3NvcnQoaW5zdGFuY2UsIHdyYXBwZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfaGVhZGVyX2xlbmd0aCh3cmFwcGVyLCBoZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfaGVhZGVyX2J1dHRvbnMod3JhcHBlciwgaGVhZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX2hlYWRlcl9maWx0ZXIod3JhcHBlciwgaGVhZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFibGUgPSB0YWJsZV9jb250ZW50KHdyYXBwZXIsIGNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX2Zvb3Rlcl9pbmZvKHdyYXBwZXIsIGZvb3Rlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhZ2luYXRlID0gd3JhcHBlci5maW5kKCcuZGF0YVRhYmxlc19wYWdpbmF0ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfZm9vdGVyX3BhZ2luYXRlKHdyYXBwZXIsIGZvb3RlciwgcGFnaW5hdGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX2Ryb3Bkb3ducyh3cmFwcGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID09PSB0YWJsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5oaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLm9uKCdkcmF3LmR0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2x1bW5zID0gaW5zdGFuY2UuY29sdW1ucygpLnJlc3BvbnNpdmVIaWRkZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmlnZ2VyKCdyZXNwb25zaXZlLXJlc2l6ZS5kdCcsIFt0YWJsZVswXSwgY29sdW1uc10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5odG1sLm9uKCdhc2lkZS1jaGFuZ2VkLmRhdGF0YWJsZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UucmVzcG9uc2l2ZS5yZWNhbGMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLm9uKCdyZXNwb25zaXZlLXJlc2l6ZS5kdCcsIChlLCBkYXRhdGFibGUsIGNvbHVtbnMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY291bnQgPSBjb2x1bW5zLnJlZHVjZSgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYiA9PT0gZmFsc2UgPyBhICsgMSA6IGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbGVtZW50cyA9IHRhYmxlLmZpbmQoJ3Rib2R5IHRyOm5vdCguY2hpbGQpID4gKjpmaXJzdC1jaGlsZDpub3QoLmRhdGFUYWJsZXNfZW1wdHkpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMucmVtb3ZlQXR0cigndGFiaW5kZXgnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMuY2hpbGRyZW4oJ2knKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMucHJlcGVuZCgnPGkgdGFiaW5kZXg9XCIwXCI+PHN2ZyBmb2N1c2FibGU9XCJmYWxzZVwiPjx1c2UgeGxpbms6aHJlZj1cIiNzdmctcGx1c1wiPjwvdXNlPjwvc3ZnPjxzdmcgZm9jdXNhYmxlPVwiZmFsc2VcIj48dXNlIHhsaW5rOmhyZWY9XCIjc3ZnLW1pbnVzXCI+PC91c2U+PC9zdmc+PC9pPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLnNob3dQb3B1cEFsZXJ0KCdGYWlsZWQgdG8gbG9hZCBkYXRhdGFibGVzJywgJ2RhbmdlcicpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGF5b3V0ci5odG1sLm9mZignYXNpZGUtY2hhbmdlZC5kYXRhdGFibGVzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSIsIntcclxuICAgIGxheW91dHIuY2hlY2tTd2lwZXIgPSAoc3dpcGVyKSA9PiB7XHJcbiAgICAgICAgaWYgKHN3aXBlci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKCFsYXlvdXRyLmh0bWwuaGFzQ2xhc3MoJ3N3aXBlci1sb2FkZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5wcm9taXNlU3dpcGVyID0gUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIubG9hZC5jc3MoJ2Rpc3QvY3NzL3N3aXBlci5jc3MnKSxcclxuICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLmxvYWQuanMoJ2Rpc3QvanMvc3dpcGVyLmpzJylcclxuICAgICAgICAgICAgICAgIF0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIuaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5odG1sLmFkZENsYXNzKCdzd2lwZXItbG9hZGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxheW91dHIucHJvbWlzZVN3aXBlci50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHN3aXBlci5lYWNoKChpLCBlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0ICR0aGlzID0gJChlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR0aGlzLmhhc0NsYXNzKCdsb2FkZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5hcHBlbmQoJzxkaXYgY2xhc3M9XCJzd2lwZXItZm9vdGVyXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmNoaWxkcmVuKCcuc3dpcGVyLWZvb3RlcicpLmFwcGVuZCgnPGRpdj48L2Rpdj4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb290ZXIgPSAkdGhpcy5maW5kKCc+IC5zd2lwZXItZm9vdGVyID4gZGl2JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uID0gJHRoaXMuaGFzQ2xhc3MoJ3BhZ2luYXRpb24nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR5bmFtaWNCdWxsZXRzID0gJHRoaXMuaGFzQ2xhc3MoJ2R5bmFtaWMtYnVsbGV0cycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbiA9ICR0aGlzLmhhc0NsYXNzKCduYXZpZ2F0aW9uJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wID0gbGF5b3V0ci5pc1RydWUoJHRoaXMuYXR0cignZGF0YS1sb29wJykpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuID0gJHRoaXMuaGFzQ2xhc3MoJ3NwYWNlLWJldHdlZW4nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXcgPSBsYXlvdXRyLnRyeVBhcnNlSW50KCR0aGlzLmF0dHIoJ2RhdGEtc2xpZGVzLXBlci12aWV3JyksIDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludHMgPSBsYXlvdXRyLnRyeVBhcnNlSlNPTigkdGhpcy5hdHRyKCdkYXRhLWJyZWFrcG9pbnRzJyksIHt9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvb3Rlci5hZGRDbGFzcygnZmxleCB3cmFwIGdhcC0zIGNlbnRlcicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2luYXRpb24gfHwgZHluYW1pY0J1bGxldHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvb3Rlci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJzd2lwZXItcGFnaW5hdGlvbiBmbGV4IHdyYXAgZ2FwLTEgY2VudGVyIHZlcnRpY2FsLWNlbnRlclwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmF2aWdhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImJ0biBzcXVhcmUgY2lyY2xlIHByZXYgdGhlbWUtZGFya1wiPjxzdmcgZm9jdXNhYmxlPVwiZmFsc2VcIj48dXNlIHhsaW5rOmhyZWY9XCIjc3ZnLWFycm93XCI+PC91c2U+PC9zdmc+PC9idXR0b24+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb290ZXIuYXBwZW5kKCc8YnV0dG9uIGNsYXNzPVwiYnRuIHNxdWFyZSBjaXJjbGUgbmV4dCB0aGVtZS1kYXJrXCI+PHN2ZyBmb2N1c2FibGU9XCJmYWxzZVwiPjx1c2UgeGxpbms6aHJlZj1cIiNzdmctYXJyb3dcIj48L3VzZT48L3N2Zz48L2J1dHRvbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwYWNlQmV0d2Vlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuID0gMTY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzd2lwZXIgPSBuZXcgU3dpcGVyKCR0aGlzWzBdLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wOiBsb29wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogc2xpZGVzUGVyVmlldyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2Vlbjogc3BhY2VCZXR3ZWVuLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIG5lZWQgcGFnaW5hdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljQnVsbGV0czogZHluYW1pY0J1bGxldHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmF2aWdhdGlvbiBhcnJvd3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0RWw6ICcuc3dpcGVyLWZvb3RlciAubmV4dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldkVsOiAnLnN3aXBlci1mb290ZXIgLnByZXYnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFuZCBpZiB3ZSBuZWVkIHNjcm9sbGJhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsYmFyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWw6ICcuc3dpcGVyLXNjcm9sbGJhcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50czogYnJlYWtwb2ludHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2xvYWRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVDaGFuZ2U6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5jaGVja0xhenkoJHRoaXMuZmluZCgnLmxhenknKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxheW91dHIuc2hvd1BvcHVwQWxlcnQoJ0ZhaWxlZCB0byBsb2FkIHN3aXBlcicsICdkYW5nZXInKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iLCJ7XHJcbiAgICBsYXlvdXRyLmdldEFzc2lnbm1lbnRJdGVtID0gKGl0ZW1zLCBpZCkgPT4ge1xyXG4gICAgICAgIHJldHVybiAkKCQubWFwKGl0ZW1zLCAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIpID09PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGxheW91dHIuY2hlY2tBc3NpZ25tZW50ID0gKGFzc2lnbm1lbnRzKSA9PiB7XHJcbiAgICAgICAgaWYgKGFzc2lnbm1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAoIWxheW91dHIuaHRtbC5oYXNDbGFzcygnYXNzaWdubWVudC1sb2FkZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5wcm9taXNlQXNzaWdubWVudCA9IGxheW91dHIubG9hZC5qcygnZGlzdC9qcy9hc3NpZ25tZW50LmpzJykuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5oaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRyLmh0bWwuYWRkQ2xhc3MoJ2Fzc2lnbm1lbnQtbG9hZGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxheW91dHIucHJvbWlzZUFzc2lnbm1lbnQudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAkKGFzc2lnbm1lbnRzKS5lYWNoKChpLCBhc3NpZ25tZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudCA9ICQoYXNzaWdubWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5jaGVja0Fzc2lnbm1lbnRTb3J0KGFzc2lnbm1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dHIuY2hlY2tBc3NpZ25tZW50RHJhZ0FuZERyb3AoYXNzaWdubWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ci5jaGVja0Fzc2lnbm1lbnRDb2xvcihhc3NpZ25tZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBsYXlvdXRyLmNoZWNrQXNzaWdubWVudFB1enpsZShhc3NpZ25tZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0ci5zaG93UG9wdXBBbGVydCgnRmFpbGVkIHRvIGxvYWQgYXNzaWdubWVudCcsICdkYW5nZXInKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxheW91dHIuYXJyb3dLZXlMb2NrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgJCh3aW5kb3cpLnVuYmluZCgncmVzaXplLmFzc2lnbm1lbnRTb3J0Jyk7XHJcbiAgICAgICAgICAgIGxheW91dHIuYm9keS5vbigna2V5ZG93bi5hc3NpZ25tZW50UHV6emxlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSJdfQ==
