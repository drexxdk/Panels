/*! Sortable 1.7.0 - MIT | git://github.com/rubaxa/Sortable.git */
var app;!function(n){"use strict";"function"==typeof define&&define.amd?define(n):"undefined"!=typeof module&&void 0!==module.exports?module.exports=n():window.Sortable=n()}(function(){"use strict";function h(n,t){var f,u,i;if(!n||!n.nodeType||1!==n.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(n);this.el=n;this.options=t=fi({},t);n[g]=this;f={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(n.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(n,t){n.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==h.supportPointer};for(u in f)u in t||(t[u]=f[u]);li(t);for(i in this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&yi;r(n,"mousedown",this._onTapStart);r(n,"touchstart",this._onTapStart);t.supportPointer&&r(n,"pointerdown",this._onTapStart);this.nativeDraggable&&(r(n,"dragover",this),r(n,"dragenter",this));ut.push(this._onDragOver);t.store&&this.sort(t.store.get(this))}function lt(i,r){"clone"!==i.lastPullMode&&(r=!0);o&&o.state!==r&&(u(o,"display",r?"none":""),r||o.state&&(i.options.group.revertClone?(t.insertBefore(o,nt),i._animate(n,o)):t.insertBefore(o,n)),o.state=r)}function b(n,t,i){if(n){i=i||f;do if(">*"===t&&n.parentNode===i||ri(n,t))return n;while(n=function(n){var t=n.host;return t&&t.nodeType?t:n.parentNode}(n))}return null}function r(n,t,i){n.addEventListener(t,i,dt)}function e(n,t,i){n.removeEventListener(t,i,dt)}function p(n,t,i){if(n)if(n.classList)n.classList[i?"add":"remove"](t);else{var r=(" "+n.className+" ").replace(oi," ").replace(" "+t+" "," ");n.className=(r+(i?" "+t:"")).replace(oi," ")}}function u(n,t,i){var r=n&&n.style;if(r){if(void 0===i)return f.defaultView&&f.defaultView.getComputedStyle?i=f.defaultView.getComputedStyle(n,""):n.currentStyle&&(i=n.currentStyle),void 0===t?i:i[t];t in r||(t="-webkit-"+t);r[t]=i+("string"==typeof i?"":"px")}}function ni(n,t,i){if(n){var u=n.getElementsByTagName(t),r=0,f=u.length;if(i)for(;r<f;r++)i(u[r],r);return u}return[]}function c(n,t,i,r,u,e,s,h){n=n||t[g];var c=f.createEvent("Event"),l=n.options,a="on"+i.charAt(0).toUpperCase()+i.substr(1);c.initEvent(i,!0,!0);c.to=u||t;c.from=e||t;c.item=r||t;c.clone=o;c.oldIndex=s;c.newIndex=h;t.dispatchEvent(c);l[a]&&l[a].call(n,c)}function ti(n,t,i,r,u,e,o,s){var h,c,l=n[g],a=l.options.onMove;return(h=f.createEvent("Event")).initEvent("move",!0,!0),h.to=t,h.from=n,h.dragged=i,h.draggedRect=r,h.related=u||t,h.relatedRect=e||t.getBoundingClientRect(),h.willInsertAfter=s,n.dispatchEvent(h),a&&(c=a.call(l,h,o)),c}function ii(n){n.draggable=!1}function ai(){gt=!1}function ft(n,t){var i=0;if(!n||!n.parentNode)return-1;for(;n&&(n=n.previousElementSibling);)"TEMPLATE"!==n.nodeName.toUpperCase()&&(">*"===t||ri(n,t))&&i++;return i}function ri(n,t){if(n){var i=(t=t.split(".")).shift().toUpperCase(),r=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==i&&n.nodeName.toUpperCase()!=i||t.length&&((" "+n.className+" ").match(r)||[]).length!=t.length)}return!1}function ui(n,t){var i,r;return function(){void 0===i&&(i=arguments,r=this,rt(function(){1===i.length?n.call(r,i[0]):n.apply(r,i);i=void 0},t))}}function fi(n,t){if(n&&t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function ei(n){return kt&&kt.dom?kt.dom(n).cloneNode(!0):hi?hi(n).clone(!0)[0]:n.cloneNode(!0)}function et(n){return rt(n,0)}function at(n){return clearTimeout(n)}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document");};var n,s,i,o,t,nt,vt,l,yt,pt,wt,ot,bt,y,a,it,st,d,v,ht,k={},oi=/\s+/g,vi=/left|right|inline/,g="Sortable"+(new Date).getTime(),w=window,f=w.document,si=w.parseInt,rt=w.setTimeout,hi=w.jQuery||w.Zepto,kt=w.Polymer,dt=!1,yi="draggable"in f.createElement("div"),ci=function(n){return!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&(n=f.createElement("x"),n.style.cssText="pointer-events:auto","auto"===n.style.pointerEvents)}(),gt=!1,tt=Math.abs,pi=Math.min,ct=[],ut=[],wi=function(){return!1},bi=ui(function(n,t,i){if(i&&t.scroll){var r,o,e,u,s,h,y=i[g],f=t.scrollSensitivity,v=t.scrollSpeed,c=n.clientX,a=n.clientY,p=window.innerWidth,b=window.innerHeight;if(yt!==i&&(l=t.scroll,yt=i,pt=t.scrollFn,!0===l)){l=i;do if(l.offsetWidth<l.scrollWidth||l.offsetHeight<l.scrollHeight)break;while(l=l.parentNode)}l&&(r=l,o=l.getBoundingClientRect(),e=(tt(o.right-c)<=f)-(tt(o.left-c)<=f),u=(tt(o.bottom-a)<=f)-(tt(o.top-a)<=f));e||u||(u=(b-a<=f)-(a<=f),((e=(p-c<=f)-(c<=f))||u)&&(r=w));k.vx===e&&k.vy===u&&k.el===r||(k.el=r,k.vx=e,k.vy=u,clearInterval(k.pid),r&&(k.pid=setInterval(function(){if(h=u?u*v:0,s=e?e*v:0,"function"==typeof pt)return pt.call(y,s,h,n);r===w?w.scrollTo(w.pageXOffset+s,w.pageYOffset+h):(r.scrollTop+=h,r.scrollLeft+=s)},24)))}},30),li=function(n){function r(n,t){return null!=n&&!0!==n||null!=(n=i.name)?"function"==typeof n?n:function(i,r){var u=r.options.group.name;return t?n:n&&(n.join?n.indexOf(u)>-1:u==n)}:wi}var i={},t=n.group;t&&"object"==typeof t||(t={name:t});i.name=t.name;i.checkPull=r(t.pull,!0);i.checkPut=r(t.put);i.revertClone=t.revertClone;n.group=i};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){dt={capture:!1,passive:!1}}}))}catch(h){}return h.prototype={constructor:h,_onTapStart:function(t){var e,s=this,r=this.el,u=this.options,h=u.preventOnFilter,a=t.type,l=t.touches&&t.touches[0],i=(l||t).target,o=t.target.shadowRoot&&t.path&&t.path[0]||i,f=u.filter;if(function(n){var t,i,r;for(ct.length=0,t=n.getElementsByTagName("input"),i=t.length;i--;)r=t[i],r.checked&&ct.push(r)}(r),!n&&!(/mousedown|pointerdown/.test(a)&&0!==t.button||u.disabled)&&!o.isContentEditable&&(i=b(i,u.draggable,r))&&vt!==i){if(e=ft(i,u.draggable),"function"==typeof f){if(f.call(this,t,i,this))return c(s,o,"filter",i,r,r,e),void(h&&t.preventDefault())}else if(f&&(f=f.split(",").some(function(n){if(n=b(o,n.trim(),r))return c(s,n,"filter",i,r,r,e),!0})))return void(h&&t.preventDefault());u.handle&&!b(o,u.handle,r)||this._prepareDragStart(t,l,i,e)}},_prepareDragStart:function(i,u,f,e){var a,o=this,v=o.el,l=o.options,h=v.ownerDocument;f&&!n&&f.parentNode===v&&(d=i,t=v,s=(n=f).parentNode,nt=n.nextSibling,vt=f,it=l.group,y=e,this._lastX=(u||i).clientX,this._lastY=(u||i).clientY,n.style["will-change"]="all",a=function(){o._disableDelayedDrag();n.draggable=o.nativeDraggable;p(n,l.chosenClass,!0);o._triggerDragStart(i,u);c(o,t,"choose",n,t,t,y)},l.ignore.split(",").forEach(function(t){ni(n,t.trim(),ii)}),r(h,"mouseup",o._onDrop),r(h,"touchend",o._onDrop),r(h,"touchcancel",o._onDrop),r(h,"selectstart",o),l.supportPointer&&r(h,"pointercancel",o._onDrop),l.delay?(r(h,"mouseup",o._disableDelayedDrag),r(h,"touchend",o._disableDelayedDrag),r(h,"touchcancel",o._disableDelayedDrag),r(h,"mousemove",o._disableDelayedDrag),r(h,"touchmove",o._disableDelayedDrag),l.supportPointer&&r(h,"pointermove",o._disableDelayedDrag),o._dragStartTimer=rt(a,l.delay)):a())},_disableDelayedDrag:function(){var n=this.el.ownerDocument;clearTimeout(this._dragStartTimer);e(n,"mouseup",this._disableDelayedDrag);e(n,"touchend",this._disableDelayedDrag);e(n,"touchcancel",this._disableDelayedDrag);e(n,"mousemove",this._disableDelayedDrag);e(n,"touchmove",this._disableDelayedDrag);e(n,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(i,u){(u=u||("touch"==i.pointerType?i:null))?(d={target:n,clientX:u.clientX,clientY:u.clientY},this._onDragStart(d,"touch")):this.nativeDraggable?(r(n,"dragend",this),r(t,"dragstart",this._onDragStart)):this._onDragStart(d,!0);try{f.selection?et(function(){f.selection.empty()}):window.getSelection().removeAllRanges()}catch(i){}},_dragStarted:function(){if(t&&n){var i=this.options;p(n,i.ghostClass,!0);p(n,i.dragClass,!1);h.active=this;c(this,t,"start",n,t,t,y)}else this._nulling()},_emulateDragOver:function(){if(v){if(this._lastX===v.clientX&&this._lastY===v.clientY)return;this._lastX=v.clientX;this._lastY=v.clientY;ci||u(i,"display","none");var n=f.elementFromPoint(v.clientX,v.clientY),t=n,r=ut.length;if(n&&n.shadowRoot&&(t=n=n.shadowRoot.elementFromPoint(v.clientX,v.clientY)),t)do{if(t[g]){for(;r--;)ut[r]({clientX:v.clientX,clientY:v.clientY,target:n,rootEl:t});break}n=t}while(t=t.parentNode);ci||u(i,"display","")}},_onTouchMove:function(n){if(d){var f=this.options,e=f.fallbackTolerance,o=f.fallbackOffset,t=n.touches?n.touches[0]:n,s=t.clientX-d.clientX+o.x,c=t.clientY-d.clientY+o.y,r=n.touches?"translate3d("+s+"px,"+c+"px,0)":"translate("+s+"px,"+c+"px)";if(!h.active){if(e&&pi(tt(t.clientX-this._lastX),tt(t.clientY-this._lastY))<e)return;this._dragStarted()}this._appendGhost();ht=!0;v=t;u(i,"webkitTransform",r);u(i,"mozTransform",r);u(i,"msTransform",r);u(i,"transform",r);n.preventDefault()}},_appendGhost:function(){if(!i){var o,r=n.getBoundingClientRect(),s=u(n),e=this.options;p(i=n.cloneNode(!0),e.ghostClass,!1);p(i,e.fallbackClass,!0);p(i,e.dragClass,!0);u(i,"top",r.top-si(s.marginTop,10));u(i,"left",r.left-si(s.marginLeft,10));u(i,"width",r.width);u(i,"height",r.height);u(i,"opacity","0.8");u(i,"position","fixed");u(i,"zIndex","100000");u(i,"pointerEvents","none");e.fallbackOnBody&&f.body.appendChild(i)||t.appendChild(i);o=i.getBoundingClientRect();u(i,"width",2*r.width-o.width);u(i,"height",2*r.height-o.height)}},_onDragStart:function(i,e){var s=this,l=i.dataTransfer,h=s.options;s._offUpEvents();it.checkPull(s,s,n,i)&&((o=ei(n)).draggable=!1,o.style["will-change"]="",u(o,"display","none"),p(o,s.options.chosenClass,!1),s._cloneId=et(function(){t.insertBefore(o,n);c(s,t,"clone",n)}));p(n,h.dragClass,!0);e?("touch"===e?(r(f,"touchmove",s._onTouchMove),r(f,"touchend",s._onDrop),r(f,"touchcancel",s._onDrop),h.supportPointer&&(r(f,"pointermove",s._onTouchMove),r(f,"pointerup",s._onDrop))):(r(f,"mousemove",s._onTouchMove),r(f,"mouseup",s._onDrop)),s._loopId=setInterval(s._emulateDragOver,50)):(l&&(l.effectAllowed="move",h.setData&&h.setData.call(s,l,n)),r(f,"drop",s),s._dragStartId=et(s._dragStarted))},_onDragOver:function(r){var f,y,c,ut,e=this.el,a=this.options,ft=a.group,l=h.active,w=it===ft,et=!1,ct=a.sort,d,tt,p;if(void 0!==r.preventDefault&&(r.preventDefault(),!a.dragoverBubble&&r.stopPropagation()),!n.animated&&(ht=!0,l&&!a.disabled&&(w?ct||(ut=!t.contains(n)):st===this||(l.lastPullMode=it.checkPull(this,l,n,r))&&ft.checkPut(this,l,n,r))&&(void 0===r.rootEl||r.rootEl===this.el))){if(bi(r,a,this.el),gt)return;if(f=b(r.target,a.draggable,e),y=n.getBoundingClientRect(),st!==this&&(st=this,et=!0),ut)return lt(l,!0),s=t,void(o||nt?t.insertBefore(n,o||nt):ct||t.appendChild(n));if(0===e.children.length||e.children[0]===i||e===r.target&&function(n,t){var i=n.lastElementChild.getBoundingClientRect();return t.clientY-(i.top+i.height)>5||t.clientX-(i.left+i.width)>5}(e,r)){if(0!==e.children.length&&e.children[0]!==i&&e===r.target&&(f=e.lastElementChild),f){if(f.animated)return;c=f.getBoundingClientRect()}lt(l,w);!1!==ti(t,e,n,y,f,c,r)&&(n.contains(e)||(e.appendChild(n),s=e),this._animate(y,n),f&&this._animate(c,f))}else if(f&&!f.animated&&f!==n&&void 0!==f.parentNode[g]){wt!==f&&(wt=f,ot=u(f),bt=u(f.parentNode));var dt=(c=f.getBoundingClientRect()).right-c.left,at=c.bottom-c.top,vt=vi.test(ot.cssFloat+ot.display)||"flex"==bt.display&&0===bt["flex-direction"].indexOf("row"),yt=f.offsetWidth>n.offsetWidth,pt=f.offsetHeight>n.offsetHeight,kt=(vt?(r.clientX-c.left)/dt:(r.clientY-c.top)/at)>.5,k=f.nextElementSibling,v=!1;vt?(d=n.offsetTop,tt=f.offsetTop,v=d===tt?f.previousElementSibling===n&&!yt||kt&&yt:f.previousElementSibling===n||n.previousElementSibling===f?(r.clientY-c.top)/at>.5:tt>d):et||(v=k!==n&&!pt||kt&&pt);p=ti(t,e,n,y,f,c,r,v);!1!==p&&(1!==p&&-1!==p||(v=1===p),gt=!0,rt(ai,30),lt(l,w),n.contains(e)||(v&&!k?e.appendChild(n):f.parentNode.insertBefore(n,v?k:f)),s=n.parentNode,this._animate(y,n),this._animate(c,f))}}},_animate:function(n,t){var i=this.options.animation,r;i&&(r=t.getBoundingClientRect(),1===n.nodeType&&(n=n.getBoundingClientRect()),u(t,"transition","none"),u(t,"transform","translate3d("+(n.left-r.left)+"px,"+(n.top-r.top)+"px,0)"),t.offsetWidth,u(t,"transition","all "+i+"ms"),u(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=rt(function(){u(t,"transition","");u(t,"transform","");t.animated=!1},i))},_offUpEvents:function(){var n=this.el.ownerDocument;e(f,"touchmove",this._onTouchMove);e(f,"pointermove",this._onTouchMove);e(n,"mouseup",this._onDrop);e(n,"touchend",this._onDrop);e(n,"pointerup",this._onDrop);e(n,"touchcancel",this._onDrop);e(n,"pointercancel",this._onDrop);e(n,"selectstart",this)},_onDrop:function(r){var l=this.el,u=this.options;clearInterval(this._loopId);clearInterval(k.pid);clearTimeout(this._dragStartTimer);at(this._cloneId);at(this._dragStartId);e(f,"mouseover",this);e(f,"mousemove",this._onTouchMove);this.nativeDraggable&&(e(f,"drop",this),e(l,"dragstart",this._onDragStart));this._offUpEvents();r&&(ht&&(r.preventDefault(),!u.dropBubble&&r.stopPropagation()),i&&i.parentNode&&i.parentNode.removeChild(i),t!==s&&"clone"===h.active.lastPullMode||o&&o.parentNode&&o.parentNode.removeChild(o),n&&(this.nativeDraggable&&e(n,"dragend",this),ii(n),n.style["will-change"]="",p(n,this.options.ghostClass,!1),p(n,this.options.chosenClass,!1),c(this,t,"unchoose",n,s,t,y),t!==s?(a=ft(n,u.draggable))>=0&&(c(null,s,"add",n,s,t,y,a),c(this,t,"remove",n,s,t,y,a),c(null,s,"sort",n,s,t,y,a),c(this,t,"sort",n,s,t,y,a)):n.nextSibling!==nt&&(a=ft(n,u.draggable))>=0&&(c(this,t,"update",n,s,t,y,a),c(this,t,"sort",n,s,t,y,a)),h.active&&(null!=a&&-1!==a||(a=y),c(this,t,"end",n,s,t,y,a),this.save())));this._nulling()},_nulling:function(){t=n=s=i=nt=o=vt=l=yt=d=v=ht=a=wt=ot=st=it=h.active=null;ct.forEach(function(n){n.checked=!0});ct.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragover":case"dragenter":n&&(this._onDragOver(t),function(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move");n.preventDefault()}(t));break;case"mouseover":this._onDrop(t);break;case"selectstart":t.preventDefault()}},toArray:function(){for(var n,i=[],r=this.el.children,t=0,f=r.length,u=this.options;t<f;t++)b(n=r[t],u.draggable,this.el)&&i.push(n.getAttribute(u.dataIdAttr)||function(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,i=t.length,r=0;i--;)r+=t.charCodeAt(i);return r.toString(36)}(n));return i},sort:function(n){var t={},i=this.el;this.toArray().forEach(function(n,r){var u=i.children[r];b(u,this.options.draggable,i)&&(t[n]=u)},this);n.forEach(function(n){t[n]&&(i.removeChild(t[n]),i.appendChild(t[n]))})},save:function(){var n=this.options.store;n&&n.set(this)},closest:function(n,t){return b(n,t||this.options.draggable,this.el)},option:function(n,t){var i=this.options;if(void 0===t)return i[n];i[n]=t;"group"===n&&li(i)},destroy:function(){var n=this.el;n[g]=null;e(n,"mousedown",this._onTapStart);e(n,"touchstart",this._onTapStart);e(n,"pointerdown",this._onTapStart);this.nativeDraggable&&(e(n,"dragover",this),e(n,"dragenter",this));Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")});ut.splice(ut.indexOf(this._onDragOver),1);this._onDrop();this.el=n=null}},r(f,"touchmove",function(n){h.active&&n.preventDefault()}),h.utils={on:r,off:e,css:u,find:ni,is:function(n,t){return!!b(n,t,n)},extend:fi,throttle:ui,closest:b,toggleClass:p,clone:ei,index:ft,nextTick:et,cancelNextTick:at},h.create=function(n,t){return new h(n,t)},h.version="1.7.0",h});app=app||{};app.assignment.dragAndDrop=function(n){n.attr("data-moving",0);var f=n.find(".from .container"),t=n.find(".item"),e=t.find("input[type=checkbox]"),i=function(){return $($.map(e,function(n){if(n.checked)return n}))},o=function(n){return $($.map(t,function(t){if(t.getAttribute("data-id")===n)return t}))},r=function(){t.removeClass("valid invalid");var r=i();r.length&&r.prop("checked",!1);f.append(t);n.removeClass("validated moving")},u=function(){return[{id:"1",items:["5","7"]},{id:"2",items:["6","8"]},{id:"3",items:["2","4"]},{id:"4",items:["1","3"]}]};n.find(".container").each(function(){Sortable.create($(this)[0],{group:"container",draggable:".item",animation:0,scroll:!1,forceFallback:!0,fallbackOnBody:!0,ghostClass:"drag-and-drop-sortable-ghost",chosenClass:"drag-and-drop-sortable-chosen",onAdd:function(){setTimeout(function(){var t=i();t.length&&(t.prop("checked",!1),n.removeClass("moving"))})}})});n.on("click",".item input[type=checkbox]",function(){var i=$(this),r=i.parents(".item"),t=parseInt(n.attr("data-moving"));i.is(":checked")?(t++,n.attr("data-moving",t),n.addClass("moving")):(t--,n.attr("data-moving",t),t===0&&n.removeClass("moving"))});n.on("click",".place",function(){n.removeClass("moving");var t=i();t.length&&(t.prop("checked",!1),$(this).parent(".header").next().children(".container").append(t.parent()))});n.on("click",'button[type="submit"]',function(){var t,r;n.hasClass("validated")||(t=i(),t.length&&t.prop("checked",!1),n.addClass("validated"),r=u(),$(r).each(function(t,i){var r=n.find('.to .container[data-id="'+i.id+'"]');r.children().each(function(){var n=$(this);$.inArray(n.attr("data-id"),i.items)!==-1?n.addClass("valid"):n.addClass("invalid")})}))});n.on("click",'button[type="reset"]',function(){r()});n.on("click","button.correct",function(){r();n.addClass("validated");var t=u();$(t).each(function(t,i){var r=n.find('.to .container[data-id="'+i.id+'"]');$(i.items).each(function(n,t){var i=o(t);i.addClass("valid");i.appendTo(r)})})})};app=app||{};app.assignment.sort=function(n){var t=n.find(".container");Sortable.create(t[0],{draggable:".item",animation:0,scroll:!1,forceFallback:!0,fallbackOnBody:!0,ghostClass:"sort-sortable-ghost",chosenClass:"sort-sortable-chosen"})};