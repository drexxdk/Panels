!function (e, n) { "object" == typeof exports && "undefined" != typeof module ? n() : "function" == typeof define && define.amd ? define(n) : n() }(0, function () { "use strict"; function e() { } function n(e) { if (!(this instanceof n)) throw new TypeError("Promises must be constructed via new"); if ("function" != typeof e) throw new TypeError("not a function"); this._state = 0, this._handled = !1, this._value = undefined, this._deferreds = [], f(e, this) } function t(e, t) { for (; 3 === e._state;) e = e._value; 0 !== e._state ? (e._handled = !0, n._immediateFn(function () { var n = 1 === e._state ? t.onFulfilled : t.onRejected; if (null !== n) { var i; try { i = n(e._value) } catch (f) { return void r(t.promise, f) } o(t.promise, i) } else (1 === e._state ? o : r)(t.promise, e._value) })) : e._deferreds.push(t) } function o(e, t) { try { if (t === e) throw new TypeError("A promise cannot be resolved with itself."); if (t && ("object" == typeof t || "function" == typeof t)) { var o = t.then; if (t instanceof n) return e._state = 3, e._value = t, void i(e); if ("function" == typeof o) return void f(function (e, n) { return function () { e.apply(n, arguments) } }(o, t), e) } e._state = 1, e._value = t, i(e) } catch (u) { r(e, u) } } function r(e, n) { e._state = 2, e._value = n, i(e) } function i(e) { 2 === e._state && 0 === e._deferreds.length && n._immediateFn(function () { e._handled || n._unhandledRejectionFn(e._value) }); for (var o = 0, r = e._deferreds.length; r > o; o++) t(e, e._deferreds[o]); e._deferreds = null } function f(e, n) { var t = !1; try { e(function (e) { t || (t = !0, o(n, e)) }, function (e) { t || (t = !0, r(n, e)) }) } catch (i) { if (t) return; t = !0, r(n, i) } } var u = function (e) { var n = this.constructor; return this.then(function (t) { return n.resolve(e()).then(function () { return t }) }, function (t) { return n.resolve(e()).then(function () { return n.reject(t) }) }) }, c = setTimeout; n.prototype["catch"] = function (e) { return this.then(null, e) }, n.prototype.then = function (n, o) { var r = new this.constructor(e); return t(this, new function (e, n, t) { this.onFulfilled = "function" == typeof e ? e : null, this.onRejected = "function" == typeof n ? n : null, this.promise = t }(n, o, r)), r }, n.prototype["finally"] = u, n.all = function (e) { return new n(function (n, t) { function o(e, f) { try { if (f && ("object" == typeof f || "function" == typeof f)) { var u = f.then; if ("function" == typeof u) return void u.call(f, function (n) { o(e, n) }, t) } r[e] = f, 0 == --i && n(r) } catch (c) { t(c) } } if (!e || "undefined" == typeof e.length) throw new TypeError("Promise.all accepts an array"); var r = Array.prototype.slice.call(e); if (0 === r.length) return n([]); for (var i = r.length, f = 0; r.length > f; f++) o(f, r[f]) }) }, n.resolve = function (e) { return e && "object" == typeof e && e.constructor === n ? e : new n(function (n) { n(e) }) }, n.reject = function (e) { return new n(function (n, t) { t(e) }) }, n.race = function (e) { return new n(function (n, t) { for (var o = 0, r = e.length; r > o; o++) e[o].then(n, t) }) }, n._immediateFn = "function" == typeof setImmediate && function (e) { setImmediate(e) } || function (e) { c(e, 0) }, n._unhandledRejectionFn = function (e) { void 0 !== console && console && console.warn("Possible Unhandled Promise Rejection:", e) }; var l = function () { if ("undefined" != typeof self) return self; if ("undefined" != typeof window) return window; if ("undefined" != typeof global) return global; throw Error("unable to locate global object") }(); l.Promise ? l.Promise.prototype["finally"] || (l.Promise.prototype["finally"] = u) : l.Promise = n });
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb21pc2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoicG9seWZpbGxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uIChlLCBuKSB7IFwib2JqZWN0XCIgPT0gdHlwZW9mIGV4cG9ydHMgJiYgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgbW9kdWxlID8gbigpIDogXCJmdW5jdGlvblwiID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShuKSA6IG4oKSB9KDAsIGZ1bmN0aW9uICgpIHsgXCJ1c2Ugc3RyaWN0XCI7IGZ1bmN0aW9uIGUoKSB7IH0gZnVuY3Rpb24gbihlKSB7IGlmICghKHRoaXMgaW5zdGFuY2VvZiBuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByb21pc2VzIG11c3QgYmUgY29uc3RydWN0ZWQgdmlhIG5ld1wiKTsgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIm5vdCBhIGZ1bmN0aW9uXCIpOyB0aGlzLl9zdGF0ZSA9IDAsIHRoaXMuX2hhbmRsZWQgPSAhMSwgdGhpcy5fdmFsdWUgPSB1bmRlZmluZWQsIHRoaXMuX2RlZmVycmVkcyA9IFtdLCBmKGUsIHRoaXMpIH0gZnVuY3Rpb24gdChlLCB0KSB7IGZvciAoOyAzID09PSBlLl9zdGF0ZTspIGUgPSBlLl92YWx1ZTsgMCAhPT0gZS5fc3RhdGUgPyAoZS5faGFuZGxlZCA9ICEwLCBuLl9pbW1lZGlhdGVGbihmdW5jdGlvbiAoKSB7IHZhciBuID0gMSA9PT0gZS5fc3RhdGUgPyB0Lm9uRnVsZmlsbGVkIDogdC5vblJlamVjdGVkOyBpZiAobnVsbCAhPT0gbikgeyB2YXIgaTsgdHJ5IHsgaSA9IG4oZS5fdmFsdWUpIH0gY2F0Y2ggKGYpIHsgcmV0dXJuIHZvaWQgcih0LnByb21pc2UsIGYpIH0gbyh0LnByb21pc2UsIGkpIH0gZWxzZSAoMSA9PT0gZS5fc3RhdGUgPyBvIDogcikodC5wcm9taXNlLCBlLl92YWx1ZSkgfSkpIDogZS5fZGVmZXJyZWRzLnB1c2godCkgfSBmdW5jdGlvbiBvKGUsIHQpIHsgdHJ5IHsgaWYgKHQgPT09IGUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLlwiKTsgaWYgKHQgJiYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgfHwgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0KSkgeyB2YXIgbyA9IHQudGhlbjsgaWYgKHQgaW5zdGFuY2VvZiBuKSByZXR1cm4gZS5fc3RhdGUgPSAzLCBlLl92YWx1ZSA9IHQsIHZvaWQgaShlKTsgaWYgKFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgbykgcmV0dXJuIHZvaWQgZihmdW5jdGlvbiAoZSwgbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyBlLmFwcGx5KG4sIGFyZ3VtZW50cykgfSB9KG8sIHQpLCBlKSB9IGUuX3N0YXRlID0gMSwgZS5fdmFsdWUgPSB0LCBpKGUpIH0gY2F0Y2ggKHUpIHsgcihlLCB1KSB9IH0gZnVuY3Rpb24gcihlLCBuKSB7IGUuX3N0YXRlID0gMiwgZS5fdmFsdWUgPSBuLCBpKGUpIH0gZnVuY3Rpb24gaShlKSB7IDIgPT09IGUuX3N0YXRlICYmIDAgPT09IGUuX2RlZmVycmVkcy5sZW5ndGggJiYgbi5faW1tZWRpYXRlRm4oZnVuY3Rpb24gKCkgeyBlLl9oYW5kbGVkIHx8IG4uX3VuaGFuZGxlZFJlamVjdGlvbkZuKGUuX3ZhbHVlKSB9KTsgZm9yICh2YXIgbyA9IDAsIHIgPSBlLl9kZWZlcnJlZHMubGVuZ3RoOyByID4gbzsgbysrKSB0KGUsIGUuX2RlZmVycmVkc1tvXSk7IGUuX2RlZmVycmVkcyA9IG51bGwgfSBmdW5jdGlvbiBmKGUsIG4pIHsgdmFyIHQgPSAhMTsgdHJ5IHsgZShmdW5jdGlvbiAoZSkgeyB0IHx8ICh0ID0gITAsIG8obiwgZSkpIH0sIGZ1bmN0aW9uIChlKSB7IHQgfHwgKHQgPSAhMCwgcihuLCBlKSkgfSkgfSBjYXRjaCAoaSkgeyBpZiAodCkgcmV0dXJuOyB0ID0gITAsIHIobiwgaSkgfSB9IHZhciB1ID0gZnVuY3Rpb24gKGUpIHsgdmFyIG4gPSB0aGlzLmNvbnN0cnVjdG9yOyByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uICh0KSB7IHJldHVybiBuLnJlc29sdmUoZSgpKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHQgfSkgfSwgZnVuY3Rpb24gKHQpIHsgcmV0dXJuIG4ucmVzb2x2ZShlKCkpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gbi5yZWplY3QodCkgfSkgfSkgfSwgYyA9IHNldFRpbWVvdXQ7IG4ucHJvdG90eXBlW1wiY2F0Y2hcIl0gPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy50aGVuKG51bGwsIGUpIH0sIG4ucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAobiwgbykgeyB2YXIgciA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGUpOyByZXR1cm4gdCh0aGlzLCBuZXcgZnVuY3Rpb24gKGUsIG4sIHQpIHsgdGhpcy5vbkZ1bGZpbGxlZCA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZSA/IGUgOiBudWxsLCB0aGlzLm9uUmVqZWN0ZWQgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG4gPyBuIDogbnVsbCwgdGhpcy5wcm9taXNlID0gdCB9KG4sIG8sIHIpKSwgciB9LCBuLnByb3RvdHlwZVtcImZpbmFsbHlcIl0gPSB1LCBuLmFsbCA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBuZXcgbihmdW5jdGlvbiAobiwgdCkgeyBmdW5jdGlvbiBvKGUsIGYpIHsgdHJ5IHsgaWYgKGYgJiYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIGYgfHwgXCJmdW5jdGlvblwiID09IHR5cGVvZiBmKSkgeyB2YXIgdSA9IGYudGhlbjsgaWYgKFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdSkgcmV0dXJuIHZvaWQgdS5jYWxsKGYsIGZ1bmN0aW9uIChuKSB7IG8oZSwgbikgfSwgdCkgfSByW2VdID0gZiwgMCA9PSAtLWkgJiYgbihyKSB9IGNhdGNoIChjKSB7IHQoYykgfSB9IGlmICghZSB8fCBcInVuZGVmaW5lZFwiID09IHR5cGVvZiBlLmxlbmd0aCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByb21pc2UuYWxsIGFjY2VwdHMgYW4gYXJyYXlcIik7IHZhciByID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSk7IGlmICgwID09PSByLmxlbmd0aCkgcmV0dXJuIG4oW10pOyBmb3IgKHZhciBpID0gci5sZW5ndGgsIGYgPSAwOyByLmxlbmd0aCA+IGY7IGYrKykgbyhmLCByW2ZdKSB9KSB9LCBuLnJlc29sdmUgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBlICYmIGUuY29uc3RydWN0b3IgPT09IG4gPyBlIDogbmV3IG4oZnVuY3Rpb24gKG4pIHsgbihlKSB9KSB9LCBuLnJlamVjdCA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBuZXcgbihmdW5jdGlvbiAobiwgdCkgeyB0KGUpIH0pIH0sIG4ucmFjZSA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBuZXcgbihmdW5jdGlvbiAobiwgdCkgeyBmb3IgKHZhciBvID0gMCwgciA9IGUubGVuZ3RoOyByID4gbzsgbysrKSBlW29dLnRoZW4obiwgdCkgfSkgfSwgbi5faW1tZWRpYXRlRm4gPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHNldEltbWVkaWF0ZSAmJiBmdW5jdGlvbiAoZSkgeyBzZXRJbW1lZGlhdGUoZSkgfSB8fCBmdW5jdGlvbiAoZSkgeyBjKGUsIDApIH0sIG4uX3VuaGFuZGxlZFJlamVjdGlvbkZuID0gZnVuY3Rpb24gKGUpIHsgdm9pZCAwICE9PSBjb25zb2xlICYmIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKFwiUG9zc2libGUgVW5oYW5kbGVkIFByb21pc2UgUmVqZWN0aW9uOlwiLCBlKSB9OyB2YXIgbCA9IGZ1bmN0aW9uICgpIHsgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHNlbGYpIHJldHVybiBzZWxmOyBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93KSByZXR1cm4gd2luZG93OyBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZ2xvYmFsKSByZXR1cm4gZ2xvYmFsOyB0aHJvdyBFcnJvcihcInVuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdFwiKSB9KCk7IGwuUHJvbWlzZSA/IGwuUHJvbWlzZS5wcm90b3R5cGVbXCJmaW5hbGx5XCJdIHx8IChsLlByb21pc2UucHJvdG90eXBlW1wiZmluYWxseVwiXSA9IHUpIDogbC5Qcm9taXNlID0gbiB9KTsiXX0=
