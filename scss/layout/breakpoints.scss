/// <reference path="../references" />

@mixin breakpoint-main-min-width {
    @media (min-width: $breakpoint-main-min-width) {
        @content;
    }
}

@mixin breakpoint-small-one-column {
    @media (max-width: $breakpoint-one-column) {
        @content;
    }
}

@mixin breakpoint-medium-one-column {
    @media (min-width: $breakpoint-one-column) {
        @content;
    }
}

@mixin breakpoint-two-columns {
    @media (min-width: $breakpoint-two-columns) {
        @content;
    }
}

main {
    @include breakpoint-main-min-width {
        #content {
            > .header {
                > div {
                    bottom: $spacer * 4;
                }

                & + .content {
                    margin-top: -$spacer * 6;
                    min-height: 7rem;
                }
            }

            > .content {
                padding: 0 ($spacer * 2) ($spacer * 2) 0;

                > div {
                    margin: ($spacer * 2) 0 0 ($spacer * 2);
                    width: calc(100% - #{$spacer * 2});
                }
            }
        }
    }

    @include breakpoint-small-one-column {
        aside {
            height: calc(100% + #{-$header-height} + #{$extra-spacing * 2});
        }
    }

    @include breakpoint-medium-one-column {
        aside {
            height: calc(100% + #{$extra-spacing * 2});
        }

        &.left-open {
            header,
            footer {
                margin-left: $aside-width;
            }

            #content {
                padding-left: $aside-width;
            }

            .popup[data-position*="center"],
            .popup[data-position*="left"] {
                left: $aside-width;
            }
        }

        &.right-open {
            header,
            footer {
                margin-right: $aside-width;
            }

            #content {
                padding-right: $aside-width;
            }

            .popup[data-position*="center"],
            .popup[data-position*="right"] {
                right: $aside-width;
            }
        }

        aside {
            margin-top: 0;
        }
    }

    &.two-columns {
        @include breakpoint-two-columns {

            &.left-open,
            &.right-open {
                #content .header {
                    width: calc(50% - #{$aside-width / 2});
                }
            }

            &.left-open #content > .header {
                left: $aside-width;
            }

            &.footer-fixed.mobile #content > .header,
            &:not(.footer-fixed) #content > .header {
                bottom: 0;
            }

            &.footer-fixed:not(.mobile) #content > .header {
                bottom: $footer-height;
            }

            #content {
                @include flex-display;

                > .header {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 50%;
                    height: auto;

                    > div {
                        top: $header-height;
                        bottom: 0;
                    }

                    & + .content {
                        width: 50%;
                        margin: 0 0 0 auto;
                    }
                }

                > .content:first-child {
                    width: 100%;
                    @include flex-direction(row);
                }
            }
        }
    }
}
